var PhoneBridge={};function callbackZPBSuccess(){"undefined"!=typeof ZPB&&PhoneBridge.setClickToDial(ZPB.clickToDial.isEnabled()),"undefined"!=typeof PB&&PhoneBridge.setTelephonyIntegration(PB.isIntegrationEnabled())}PhoneBridge=function(){var n,e,i=function(){return"undefined"!=typeof PB&&PB.isIntegrationEnabled()&&o()},t=function(){return $zcg._BUNDLE_ID},r=function(){var n={serviceName:$zcg._SERVICENAME,serviceId:$zcg._APPACCOUNTID,pbDomain:$zcg._PHONEBRIDGE_SERVER};return $WC.Util.isEmpty(t())||(n.bundleService=$zcg._BUNDLE_SERVICENAME,n.bundleOrgId=t()),n},o=function(){return n};return{isEnabled:function(){return MessageContextParser.isTelephonyIntegrationEnabled()&&i()},isIntegrationEnabled:function(){return e},init:function(){if(MessageContextParser.isTelephonyIntegrationEnabled()){var n=r(),e=n.pbDomain;xhr=new XMLHttpRequest,xhr.open("GET",e+"/phonebridge/users/loadJS",!0),xhr.withCredentials=!0,xhr.send(null),xhr.onreadystatechange=function(){if(4===xhr.readyState){var e="https:"+xhr.response;$Util.loadDynamicFiles({type:"script",url:e,callback:function(){PB.jsurl=e.substring(0,e.lastIndexOf("/")),PB.init(n)}})}}}},clickToDial:function(n){if(i()){var e=function(n){return{number:n}}(n);ZPB.clickToDial.trigger(e)}},setClickToDial:function(e){n=e},setTelephonyIntegration:function(n){e=n}}}();