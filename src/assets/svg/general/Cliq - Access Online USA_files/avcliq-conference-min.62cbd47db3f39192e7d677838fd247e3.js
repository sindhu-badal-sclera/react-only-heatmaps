var ConferenceUI={},ConferenceImpl={},ConferenceAPI={};ConferenceUI={VIDEO_CONTAINER_MARGIN:1,AUDIO_CONTAINER_MARGIN:20,STRIP_HEIGHT:160,windowActiveTimeout:void 0,windowActiveTimoutDuration:4e3,notificationActiveTimeout:void 0,notificationActiveTimeoutDuration:4e3,maxAvailableSlotsInBottomPane:0,clearRingAllTimeout:void 0,_conferenceWindowDoms:{mainWindow:void 0},getCachedConferenceWindow:function(){return this._conferenceWindowDoms.mainWindow},setConferenceWindowDoms:function(){this._conferenceWindowDoms.mainWindow=$("#conferencewindow")},clearConferenceWindowDoms:function(){this._conferenceWindowDoms={}},startPageState:{CLOSED:0,CONFIGURE:1,PREVIEW:2,START:3},layouts:{GRID:"grid",STRIP:"strip",GALAXY:"galaxy"},views:{MINIMIZED:"minimized",MAXIMIZED:"maximized"},bindEvents:function(){ZCMediaDevices.addListenerForDeviceChange("conference",(function(e,t){ZCSmartConferenceHandler.deviceEvents.handleDeviceChange(e,t)}));var e=$(document);e.on("click","[conferencebutton]",(function(e){e.stopPropagation();var t=$(this),n=t.attr("purpose");"openReactions"!==n&&Clickoutside.handleClick(e),ConferenceHandler.UIEvents[n](e,t)})),e.on("change","[conferencescoperadiobuttons] [type='radio']",(function(e){var t=$(this).val();$("#start_conference_win").find("[scope_input]").each((function(){var e=$(this);e.parents("[scope_container]").toggleClass("dN",t!==e.attr("scope_input"))})),ConferenceImpl.validateStartInputs()})),e.on("focus","[conferenceinput]",(function(e){var t=$(this);"validateTitle"===t.attr("keyup-purpose")&&$Dom.limitInput(t)})),e.on("keydown",(function(e){if($("#zcwindows #start_conference_win").length&&e.which===$zcg.ENTER_KEYCODE&&(e.preventDefault(),e.ctrlKey||e.metaKey)){var t=$("#startconference [footer_cnt] [forward_cta]");t.is("[disabled]")||ConferenceHandler.UIEvents.switchStartView(e,t)}})),e.on("keyup","[conferenceinput]",(function(e){var t=$(this),n=t.attr("keyup-purpose");ConferenceHandler.UIKeyUpEvents[n](e,t)})),e.on("transitionend","[conferencetransition]",(function(e){if(e.target===e.currentTarget){var t=$(this),n=t.attr("transition-purpose");ConferenceHandler.UITransitionEvents[n](e,t)}})),e.on("mousemove","[conferencecontainer]",(function(e){clearTimeout(ConferenceUI.windowActiveTimeout);var t=$("#conferencewindow").addClass("huddle-window-active");ConferenceUI.windowActiveTimeout=setTimeout((function(){t.removeClass("huddle-window-active")}),ConferenceUI.windowActiveTimoutDuration)})),e.on("change","[conferencecheckbox]",(function(e){var t=$(this),n=t.attr("purpose");ConferenceHandler.UIEvents[n](e,t)}))},bindEventsForTransition:function(){var e=$("#conferencevideowrapper");e.on("mouseover","[conferencebcastcardtitle]",(function(e){var t=$(this),n=t.attr("userid");GalaxyView.showUserInfo(n,t)})),e.on("mouseout","[conferencebcastcardtitle]",(function(e){GalaxyView.hideUserInfo()}));var t=$("#conferencewindow");t.on("transitionend","[conferencebubbletransition]",(function(e){"width"==e.originalEvent.propertyName&&($(this).attr("conferencebubbletransition",""),GalaxyView.setSwapCompleted())})),t.on("transitioncancel","[conferencebubbletransition]",(function(e){if("width"==e.originalEvent.propertyName){$(this).attr("prevconferencebubbletransition",""),GalaxyView.setSwapCompleted();var t=ConferenceImpl.getCurrentSession();(t.isInMinimizedView()||t.isInGridLayout()||t.isInStripLayout())&&$(this).attr("conferencebubbletransition","")}}))},showNotification:function(e,t,n){if(!this.isInMinimizedView()){var i=$("#conferencewindow #conferencenotificationcontainer");i.removeClass("dN");var r=ConferenceTemplates.getNotificationHtml(e,t,n);if(!$WC.Util.isEmpty(r)){var o=t?t.getId():n.id;i.append(r),i.find('[notifylistitem][userId="'+$.escapeSelector(o)+'"]').handleAnimationEnd(),ConferenceUI.notificationActiveTimeout&&clearTimeout(ConferenceUI.notificationActiveTimeout),ConferenceUI.notificationActiveTimeout=setTimeout((function(e){i.addClass("dN"),clearTimeout(ConferenceUI.notificationActiveTimeout)}),ConferenceUI.notificationActiveTimeoutDuration)}}},getConferenceWindow:function(){return $("#conferencewindow")},getConferenceMinimizedWindow:function(){return $("#conferenceminimizedwindow")},getRhsWidth:function(){return 401},isInStripView:function(){return $("#conferencewindow").hasClass("huddle-strip-view")},setSwitchChatOnProgress:function(e){this.isSwitchChatOnProgress=e},showStartWin:function(e,t,n,i,r){WmsImpl.isGuestUser()||Settings.isDarkModeChoosed()||Settings.loadDarkModeFiles();var o,s=Conference.isNomenclatureEnabled(),a=Conference.isAudioConferenceAllowed(),c=Conference.isVideoConferenceAllowed(),d="",l="",u="",f="",m=MediaManager.isChatScope(t),C=void 0,p=void 0,h="",g="",v="",S="",I="",_="",w=Users.getImgUrlById(ConferenceImpl.getCurrentUserId());if(m&&void 0!==n){C=n instanceof Array?n.join():n;var b=new $CliqChatId(C),U=!1;if(p=ConversationsList.getTitle(C),r&&r.chatTitle&&$WC.Util.isEmpty(p)&&(p=r.chatTitle),b.isChannel()){U=!Channels.hasCustomPhoto(b);var R=ChannelsPermission.hasPermission(Channels.ACTIONS.VIDEO_CONFERENCE,Channels.getChannelId(C));a=a&&R,c=c&&R}}else{var T=RADIO_BUTTON.getHTML({name:"conference_scope",align:"HR",options:[{id:ZCMediaConstants.scopeTypes.PERSONAL,value:ZCMediaConstants.scopeTypes.PERSONAL,checked:!m,label:"common.participants"},{id:ZCMediaConstants.scopeTypes.CHAT,value:ZCMediaConstants.scopeTypes.CHAT,checked:m,label:"common.chat"}]});l=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:T,label_icon:""},"InSecureHTML"),l=$WC.template.replace(l,{custom_attribute:"conferencescoperadiobuttons",custom_class:"",$label:"media.stream.in"}),u=$WC.template.replace(ZCSmartConferenceTemplates.getSingleSelectDropDownHtml(),{id:"conference-chat-selection",$place_holder:"primetime.chat.placeholder",$search_place_holder:"smiley.search",display_class:"",scope_value:ZCMediaConstants.scopeTypes.CHAT}),u=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:u,label_icon:'<span class="zcl-required"></span>'},"InSecureHTML"),u=$WC.template.replace(u,{custom_attribute:"scope_container",custom_class:m?"":"dN",$label:"primetime.chat.placeholder"}),f=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-users-selection",$place_holder:"event.attendees.placeholder",display_class:"",custom_attribute:"scope_input",custom_attribute_value:ZCMediaConstants.scopeTypes.PERSONAL}),f=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:f,label_icon:'<span class="zcl-required"></span>'},"InSecureHTML"),f=$WC.template.replace(f,{custom_attribute:"scope_container",custom_class:m?"dN":"",$label:"common.selectusers"})}s&&(h="smartconf-v2-start-pg",d=ZCSmartConferenceTemplates.getStartUIHeaderHtml("common.meeting","conference.hint",p),g=ZCSmartConferenceTemplates.getStartUISelectedField("zcf-owner bcast-gold",w,Resource.getRealValue("common.you")),g=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:g},"InSecureHTML"),g=$WC.template.replace(g,{custom_attribute:"",custom_class:"",label_icon:"",$label:"media.host"})),s&&(S=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-cohosts-selection",$place_holder:"common.emma.zylker.mail",display_class:"",custom_attribute:"",custom_attribute_value:""}),S=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:S,label_icon:`<span class="zcf-infoC dibM mL5" title="${I18N("conference.add.cohost.hint")}"></span>`},"InSecureHTML"),S=$WC.template.replace(S,{custom_attribute:"cohosts_select_input",custom_class:"hide",$label:"conference.cohosts"}),I=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-speakers-selection",$place_holder:"common.rufus.zylker.mail",display_class:"",custom_attribute:"",custom_attribute_value:""}),I=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:I,label_icon:`<span class="zcf-infoC dibM mL5" title="${I18N("conference.add.panelist.hint")}"></span>`},"InSecureHTML"),I=$WC.template.replace(I,{custom_attribute:"speakers_select_input smartConfPanelOpt",custom_class:"hide",$label:"whiteboard.role.panelist"}),Conference.isSpotLightEnabled()&&(_=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-spotlight-selection",$place_holder:"event.attendees.placeholder",display_class:"",custom_attribute:"",custom_attribute_value:""}),_=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:_,label_icon:`<span class="zcf-infoC dibM mL5" title="${I18N("conference.add.spotlight.hint")}"></span>`},"InSecureHTML"),_=$WC.template.replace(_,{custom_attribute:"spotlight_select_input spotConfSpotlightOpt",custom_class:"hide "+(e===Conference.types.VIDEO?"":"dN"),$label:"conference.spotlight.users"})),v=ZCSmartConferenceTemplates.getStartUIAddRolesOpt(e,a,c),v=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:v},"InSecureHTML"),v=$WC.template.replace(v,{custom_attribute:"add_roles_opt",custom_class:"",label_icon:"",$label:""})),o=this.getRecordingInputHtml(C);var y=ConferenceImpl.getParticipantLimit(e,ConferenceImpl.getConnectionMode()),M="",A=Conference.isCurrentUserGuest()?Conference.MAX_PANEL_MEMBERS:Plan.getGroupCallLimit();M=y>A?["conference.footer.plan.hint",A]:["conference.footer."+e,y];var P="";s&&(P=c&&a?ZCSmartConferenceTemplates.getStartUIToggleModeOpt(e===Conference.types.VIDEO,M):c?ZCSmartConferenceTemplates.getStartUIDisabledField("video_conf_selected","zcf-video",Resource.getRealValue("events.online.videomeeting")):ZCSmartConferenceTemplates.getStartUIDisabledField("audio_conf_selected","zcf-call",Resource.getRealValue("events.online.audiomeeting"))),P=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:P},"InSecureHTML"),P=$WC.template.replace(P,{custom_attribute:"",custom_class:"",label_icon:"",$label:"common.mode"});var D="";Conference.isAssociatedResourcesEnabled()&&(D=ConferenceTemplates.getAssociatedResourceHtml());var L=$WC.template.replace(ConferenceTemplates.startUI,{recording_input:"",conference_firstpage:ConferenceTemplates.startUIFirstPage},"InSecureHTML");L=$WC.template.replace(L,{host_indicator_field:g,select_scope_html:l,chat_input_html:u,users_input_html:f,cohosts_input_html:S,speakers_input_html:I,spotlight_input_html:_,add_roles_opt:v,buffer_loader:MediaTemplates.getBufferLoader(),user_image_cnt:MediaTemplates.userImageContainer,toggle_mode:P,recording_input:o,associated_resource_html:D,configurations_html:ConferenceTemplates.getConfigurationsStartPageHtml(void 0,C)},"InSecureHTML"),L=$WC.template.replace(L,{$topic_label:"media.topic",$topic_placeholder:"conference.start.topic."+Math.ceil(6*Math.random()),$resource_placeholder:"conference.associatedresource.townhall.url.placeholder",default_icon:U?"channel-default-icon":"",$mode_label:"common.mode",$start:"common.start",custom_attribute:"conferencebutton",button_purpose:"switchStartView",conference_title:"",topic_limit:ZCMediaConstants.MAX_TITLE_LENGTH,conference_type:e,background_image:$zcg._IMGDEFAULTSTATICURL+"/videochat-bg.jpg",user_image_display_class:"",user_image_onload:"",user_img:w,scope_type:t,scope_ids:C,$back_cta_label:"common.cancel",$forward_cta_label:"common.next",hide_card:"",$associate_title:"conference.associatedresource.townhall.url",$permissions:"common.permission"});var Z=$WC.$Win.create({id:"start_conference_win",class:"rhsoverly configurationheader "+h,aligncenter:!1,header:d,html:L,closeoutside:!0,closebeforefn:function(){ConferenceImpl.handlePreviewClose()}});0!==Z.find("[conferencescoperadiobuttons]").length&&(SearchField.init("conference-chat-selection"),SearchField.init("conference-users-selection"),!m&&n&&r&&r.userDetails&&n.forEach((function(e){SearchField.insertSelection("conference-users-selection","contact",e,r.userDetails[e].name)})));var E=Conference.getPanelMembersLimit(),V=function(){ConferenceImpl.validateStartInputs()};s&&(ConferenceImpl.cohostsSuggestion=new UserSuggestions("conference-cohosts-selection",E,void 0,!1,void 0),ConferenceImpl.cohostsSuggestion.onChange=V,ConferenceImpl.speakersSuggestion=new UserSuggestions("conference-speakers-selection",E,void 0,!1,void 0),ConferenceImpl.speakersSuggestion.onChange=V,Conference.isSpotLightEnabled()&&(ConferenceImpl.spotlightUserSuggestion=new UserSuggestions("conference-spotlight-selection",Conference.MAX_ACTIVE_SPEAKER,void 0,!0,{includeCurrentUser:!0,currentUserId:ConferenceImpl.getCurrentUserId()}),ConferenceImpl.spotlightUserSuggestion.onChange=V));var W=Z.find("#conferencetopic");if(i){$("#conferencestartbutton");MediaUtil.isValidTitle(i)&&(W.val(i),ConferenceImpl.validateStartInputs())}W.focus(),Z.addClass("zc-profilemenushow broadcastui"),ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.startUIShowed)},toggleRoleInputsInStartWin:function(e,t){var n=e.parents("[parent_container]");e.remove();var i=n.find("[add_roles_opt]"),r=n.find("["+t+"]");i.length&&i.before(r),r.removeClass("hide"),this.toggleAddRoleCntInStartWin(i)},toggleAddRoleCntInStartWin:function(e){var t=e.find("[conferencebutton]");if(0===t.length)e.remove();else{var n=!1;t.each((function(){if(!$(this).hasClass("dN"))return n=!0,!1})),e.toggle(n)}},startQuickConference:function(e,t,n,i,r){if(WmsImpl.isGuestUser()||Settings.isDarkModeChoosed()||Settings.loadDarkModeFiles(),!MediaManager.isCustomRequestPending(ZCMediaConstants.requests.quickConferenceStart)){MediaManager.setCustomRequestAsPending(ZCMediaConstants.requests.quickConferenceStart);var o=Conference.isVideoConference(e),s=new ZCSmartConferenceSession({conferenceId:ZCSmartConferenceConstants.quickStartPreviewSessionId,conferenceType:e,conferenceHostId:ZCSmartConferenceImpl.getCurrentUserId(),conferenceHostName:ZCSmartConferenceImpl.getCurrentUserName(),conferenceMode:Conference.modes.SMART,title:i,scope:{type:t,ids:n},sessionId:WmsImpl.getSid()});ConferenceImpl.getRecordingCheckboxConfig().checked&&s.setRecordingReferenceIndex((new Date).getTime()),s.addMember(ZCSmartConferenceImpl.getCurrentUserId(),ZCSmartConferenceImpl.getCurrentUserName(),ZCSmartConferenceConstants.memberTypes.ACTIVE);var a=function(e){e instanceof MediaStream&&ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.videoStreamObtained),MediaManager.resetStreamRequested();var t=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.deviceListUpdated),e instanceof MediaStream&&(Conference.applyVideoConstraints(e,s),s.setVideoUpStream(e)),MediaManager.setCustomRequestAsCompleted(ZCMediaConstants.requests.quickConferenceStart),ZCSmartConferenceImpl.setJoiningSession(s),ConferenceImpl.quickStartFromPreviewRoom()};ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.updateDeviceListCalled),WebRTCUserMedia.getMediaDevices(t,t)},c=function(e){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamObtained),MediaManager.resetStreamRequested(),s.setAudioUpStream(e),o&&!Conference.isVideoDisabledInJoinByUser()?(ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.videoStreamRequested),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream(a,a,void 0,Conference.getVideoEffects(s))):a()},d=function(e,t){MediaManager.setCustomRequestAsCompleted(ZCMediaConstants.requests.quickConferenceStart),ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamError),MediaManager.resetStreamRequested(),MediaManager.handleMediaError(e,t),s.terminate()},l=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.deviceListUpdated),ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamRequested),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(c,d)};ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.updateDeviceListCalled),WebRTCUserMedia.getMediaDevices(l,l)}},getRecordingInputHtml:function(e,t){var n="";if(Conference.isRecordingEnabled()){var i=ConferenceImpl.getRecordingCheckboxConfig(e,t);n=CHECK_BOX.getHTML({align:"HR",options:[{label_id:"enable_recording",id:"enable_recording",type:"toggle",label:"conference.recording.label."+i.admin_config,custom_attr:"conferencerecordingcheckbox",disabled:i.disabled,checked:i.checked,class_name:Conference.isNomenclatureEnabled()?"":void 0}]});var r=Conference.isRecordingAllowed();n=$WC.template.replace(ConferenceTemplates.startUIWrapper,{body_html:n,label_icon:r?"":`<span class="huddle-premium-icon mL10 mT2" title="${I18N("conference.recording.paid.hint")}"></span>`},"InSecureHTML"),n=$WC.template.replace(n,{custom_attribute:"recording_container",custom_class:"smartconf-record-input "+(r?"":"huddle-premium-restricted"),$label:"avcliq.media.recording"})}return n},requestStreamForSmartConf:function(e,t,n){var i=Conference.isVideoConference(e),r=i&&!Conference.isVideoDisabledInJoinByUser(),o=function(n){MediaManager.resetStreamRequested();var r=function(){var r=n instanceof MediaStream,o=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.AUDIO_INPUT,ConferenceImpl.previewDetails.localAudioStream,void 0);r&&(ConferenceImpl.previewDetails.localVideoStream=n,o+=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.VIDEO_INPUT,n,void 0)),"function"==typeof t&&t(),o=$WC.template.replace(o,{open_callback:'mediamodulebuttons purpose="openDevicesDropDown"',select_callback:'conferencebutton purpose="setDevice"'},"InSecureHTML");var s=$("#startconference").children().first(),a=s.children(),c=a.length>1?a.eq(1):a.eq(0);c.find("#device_pickers").html(o);var d=$("#conferencevideopreview");d.find("[user_card_wrapper]").html(ConferenceTemplates.getUserCardHtml(ConferenceImpl.getCurrentUserId(),Users.getName(ConferenceImpl.getCurrentUserId()),!0,"","",ConferenceImpl.previewDetails.localAudioStream._getType(),!1,!i)),d.children("[userimagecnt]").toggleClass("dN",Conference.isAudioConference(e)||i&&r&&ConferenceImpl.previewDetails.localVideoStream._isVideoTrackEnabled()),d.find("[media_configure_cnt]").html(ConferenceTemplates.getMediaConfigureOptionsHtml(e,ConferenceImpl.previewDetails.localAudioStream,ConferenceImpl.previewDetails.localVideoStream)),ConferenceUI.togglePageChange(s,ConferenceUI.startPageState.PREVIEW);var l=r?ConferenceImpl.previewDetails.localVideoStream:ConferenceImpl.previewDetails.localAudioStream;MediaUtil.setStreamInContainer(ConferenceImpl.getCurrentUserId(),d,l),MediaUtil.fitVideoContainer(c.find("[conference_video_wrapper]"),d),i&&r&&MediaUtil.updateAVStatusInContainer(d,"video",!ConferenceImpl.previewDetails.localVideoStream._isVideoTrackEnabled(),ConferenceImpl.previewDetails.localVideoStream)};WebRTCUserMedia.getMediaDevices(r,r)},s=function(t){MediaManager.resetStreamRequested(),ConferenceImpl.previewTrackerObj.mediaPermissionGiven=!0,ConferenceImpl.previewDetails.localAudioStream=t,ConferenceImpl.previewDetails.chosenType=e,r?(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream(o,a,void 0,Conference.getVideoEffects())):o()},a=function(e,t){MediaManager.resetStreamRequested(),ConferenceImpl.previewTrackerObj.mediaErrorShown=!0,MediaManager.handleMediaError(e,t),"function"==typeof n&&n()},c=function(){MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(s,a)};WebRTCUserMedia.getMediaDevices(c,c)},requestStreamAndhandleCallbacks:function(e,t,n){var i=Conference.isVideoConference(e);if(i)this.requestStreamForSmartConf(e,t,n);else{var r=function(n){MediaManager.resetStreamRequested();var r=function(){ConferenceImpl.previewTrackerObj.mediaPermissionGiven=!0,ConferenceImpl.previewDetails.localStream=n,ConferenceImpl.previewDetails.localAudioStream=n,ConferenceImpl.previewDetails.chosenType=e,"function"==typeof t&&t();var r=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.AUDIO_INPUT,n,void 0);i&&(r+=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.VIDEO_INPUT,n,void 0)),r=$WC.template.replace(r,{open_callback:'mediamodulebuttons purpose="openDevicesDropDown"',select_callback:'conferencebutton purpose="setDevice"'},"InSecureHTML");var o=$("#startconference").children().first(),s=o.children(),a=s.length>1?s.eq(1):s.eq(0);a.find("#device_pickers").html(r);var c=$("#conferencevideopreview"),d=n._getType()===WebRTCUserMedia.streamTypes.AUDIO_ONLY;c.find("[user_card_wrapper]").html(ConferenceTemplates.getUserCardHtml(ConferenceImpl.getCurrentUserId(),Users.getName(ConferenceImpl.getCurrentUserId()),!0,"","",n._getType(),!1,d)),c.children("[userimagecnt]").toggleClass("dN",!i||i&&n._isVideoTrackEnabled()),c.find("[media_configure_cnt]").html(ConferenceTemplates.getMediaConfigureOptionsHtml(e,n,n)),ConferenceUI.togglePageChange(o,ConferenceUI.startPageState.PREVIEW),MediaUtil.setStreamInContainer(ConferenceImpl.getCurrentUserId(),c,n),MediaUtil.fitVideoContainer(a.find("[conference_video_wrapper]"),c);var l=i?c.find("[audiowaves]"):c.find("[user_card_wrapper] [audiowaves]");n._startAudioFrequencyAnalyser((function(e){return MediaUtil.adjustAudioPulsesCnt(l,e),!0}))};WebRTCUserMedia.getMediaDevices(r,r)},o=function(e,t){MediaManager.resetStreamRequested(),ConferenceImpl.previewTrackerObj.mediaErrorShown=!0,MediaManager.handleMediaError(e,t),"function"==typeof n&&n()};MediaManager.prefetchMetaDetails((function(){var e=function(){i?(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_VIDEO,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioVideoStream(r,o)):(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(r,o))};WebRTCUserMedia.getMediaDevices(e,e)}))}},togglePageChange:function(e,t){e.removeClass("page1 page2").addClass(t==ConferenceUI.startPageState.CONFIGURE?"page1":"page2"),e.attr("page_state",t)},checkGridAlignment:function(e){e.length&&e.toggleClass("alignContentI",e.get(0).scrollHeight>e.height())},closeStartWin:function(){$WC.$Win.destroy("start_conference_win")},updateConnectionStatus:function(e){var t=ZCSmartConferenceUI.getReconnectionContent(e),n=ConferenceUI.getConferenceWindow(),i=n.find("#conferenceloader");i.find("[content]").text(t),i.toggleClass("dN",""===t),n.toggleClass("huddle-loading",""!==t)},showRhsChatOption:function(e){if(e=e||ZCSmartConferenceImpl.getCurrentActiveSession(),!Conference.isCurrentUserGuest()||e.getConfigurations().isChatAccessibleToExternalUser()){var t=$("#conferencev2header").find('[purpose="openChatInRHS"]');if((0===t.length||t.hasClass("dN"))&&t.removeClass("dN"),0===$("[conferencerhsheader]").find('[purpose="openChatInRHS"]').length){var n=$WC.template.replace(ConferenceTemplates.rhsContainerChatIcon,{$chat_section_header:"common.chat"});$("#conferencerhscnt").find("[conferencerhsheader]").prepend(n)}}},maximizeWaitingWindow:function(){WaitingRoom.closeWin("huddle-minimized-waitingcnt","huddle-mini-timer"),$("#huddle-landing-cnt").removeClass("dN")},showMinimizedWaitingWindow:function(){var e=$("#huddle-landing-cnt"),t=WaitingRoom.getStartorJoinBtnElem(),n=EventsMain.UTIL.getEventFromElem(t),i=(n.isOrganizer(),"startScheduledConference"===t.attr("purpose")),r="true"===t.attr("is_live"),o=r?ConferenceTemplates.getWaitingroomBtnHtml(i,t):ConferenceTemplates.getCountdownTimer("huddle-mini-timer"),s=e.find("#host_name").text(),a=r&&!i,c=ConferenceTemplates.getMinimizedWaitingroomHtml(o,n.getTitleForConference(),s,a,n.getConferenceType());if($("body").append(c),$("#huddle-minimized-waitingcnt").setAsDraggable(),a||!r){var d=r&&!i?parseInt(t.attr("start_time")):n.getDate().start;SessionTimers.setTimer("huddle-mini-timer",{startTime:d,stickyHour:!0,type:r?"+":"-"})}r&&t.removeClass("disabled"),e.addClass("dN"),MediaUtil.stopDummySoundForSession(WaitingRoom,e.find('[waitingroombutton][purpose="stopDummySoundInPreviewPage"]'))},closeWaitingRoom:function(){if("undefined"!=typeof WaitingRoom){var e=WaitingRoom.getPreviewSession();e&&(e.removeWaitingRoomNetworkPredictor(),e.hasAudioUpStream()&&(WebRTCUserMedia.closeStream(e.getAudioUpStream()._getType()),e.setAudioUpStream(void 0)),e.hasVideoUpStream()&&(WebRTCUserMedia.closeStream(e.getVideoUpStream()._getType()),e.setVideoUpStream(void 0))),WaitingRoom.closeAllWin()}},showMinimizedWindow:function(){if(!$("#conferenceminimizedwindow").length)if(ConferenceImpl.hasCurrentSession()){ZCMediaDomUtil.exitFullScreen((function(){var e=$("#conferenceminimizedwindow"),t=e.position();ConferenceUI.setPositionForMinimizedUI(e,t)}));var e=ConferenceImpl.getCurrentSession(),t=this.getMinimizedContainerHtml(e);$("body").append(t),MediaUtil.resetDarkMode(),ConferenceUI.addUnmuteRestrictedHelpTip(e),e.setCurrentView(ConferenceUI.views.MINIMIZED),Config.isConferenceChatSwitcherEnabled()&&(ConferenceChatWindow.updateAllChatHeaderImage(),ConferenceImpl.hasChatWindowDOMInViewWhenStartedOrMaximized()&&ConferenceChatWindow.moveChatsToMainChatwindowViewportIfIsInVisibleChats(!0)),this.updateAudioConferenceUI();var n=e.getActiveChatId();void 0!==n&&ZCSmartConferenceImpl.removeChat(n,e);var i=ConferenceUI.isChatInView();i&&ConferenceHandler.UIEvents.closeRHS(),this.setMinimizedContainerStates(e),SessionTimers.setTimer("conferenceminviewsessiontimer",{startTime:e.getStartTime()}),SessionTimers.setTimer("conferenceaudiominviewsessiontimer",{startTime:e.getStartTime()}),SessionTimers.setTimer("conferenceaudiominviewpipsessiontimer",{startTime:e.getStartTime()}),$("#conferencewindow").attr("autoopenchat",i).hide(),Conference.hideAssociatedResourceIFrame(e.getId()),Conference.hideRhsNotesIFrame(e.getId())}else ConferenceUI.showMinimizedWindowWithoutCurrentSession()},showMaximizedWindow:function(){if(ConferenceImpl.hasCurrentSession()){var e=ConferenceImpl.getCurrentSession();if(!e.isInPIP()){var t=$("#conferenceminimizedwindow"),n=t.position();(e.isVideoConference()||e.hasScreenShareContainer())&&e.setMiniPlayerSize({width:t.width(),height:t.height()}),t.length&&!$WC.Util.isEmpty(t[0].style.top)&&e.setMiniPlayerPosition({top:n.top,left:n.left}),this.setScreenInMaximisedView(e),this.closeMinimizedWindow();var i=$("#conferencewindow");i.find("#conferencerhscnt").hasClass("huddl-associatedresource-view")&&i.hasClass("show-aside")?ConferenceHandler.UIEvents.openAssociatedResource():$("#conferencev2header").find("#rhsnotesoption").hasClass("active")&&ZCSmartConferenceHandler.UIEvents.openNotesInRHS(),ConferenceChatWindow.keepVisibleChats(),ConferenceImpl.storeMainChatwindowDisplayProp(),i.show().find("#confreactionsviewcnt").empty(),e.setCurrentView(ConferenceUI.views.MAXIMIZED);var r=0;"true"==i.attr("autoopenchat")&&(ConferenceHandler.UIEvents.openChatInRHS(),r=-ConferenceUI.getRhsWidth()),i.attr("autoopenchat",!1),this.handleResize(r),e.isAudioConference()&&this.updateAudioConferenceUI(),void 0!==e.getCurrentMember()&&this.updateAudioMutedInfo(e),MediaUtil.setDarkMode(),this.setPinnedState()}}else ConferenceUI.showMaximizedWindowWithoutCurrentSession()},getMinimizedContainerHtml:function(e){var t,n="",i="",r="",o="",s=!1,a=!1,c=!0,d=!1,l=!1,u=!1,f=1,m=void 0,C="",p=ConferenceImpl.getCurrentUserId(),h=p,g=!1,v="";if(e)e.isAudioUnmuteRestricted()&&(n="smartconf-unmute-restricted-user"),e.hasSecondaryAudioUpStream()&&(i="smartconf-restrict-audio-opt"),e.hasSecondaryVideoUpStream()&&(i=" smartconf-restrict-video-opt"),g=e.getCurrentMember().isAudioMuted(),e.isSilentMember()?(d=!0,r="smartconf-show-silent-band",o=ConferenceTemplates.getSilentSpeakerInfoCntHtml()):g&&(o=ConferenceTemplates.getMutedInfoCntHtml(e)),s=e.hasScreenShare(),a=e.isScreenSharer(),l=e.isInPIP(),c=e.isFooterVisible(),u=e.hasScreenShareContainer(),f=e.getMembersCount(),m=e.getRecordingReferenceIndex(),h=e.getActiveSpeaker(),e.getMember(h)||(h=e.getHostId()),C=e.getTitle(),isHost=e.isHost(p),v="huddle-session-active";else{var S=$("#conferencewindow");m=S.attr("recording_index").trim(),C=S.find("#conf_title").text().trim();var I=S.attr("host_id");isHost=p===I}var _=d?ZCSmartConferenceTemplates.getRequestToSpeakOpt(!1,"conferencebutton",e.hasRequestedToSpeak()):"",w=e&&s&&a&&!e.isMiniViewScreenShareIndicationClosed();t=MediaTemplates.getScreenShareIndicatorForMiniPlayer("conferencebutton",!w);var b=this.getMinimizedContainerHeaderHtml(C,f,m,u),U=this.getScreenShareOptForMinimizedContainer(s,a,d),R=l?this.getPIPMiniPlayer(e):"",T=ConferenceTemplates.getMiniAudioPlayerHtml(C,f,m),y=this.getAudioMutedStateInMinimizedContainer(ConferenceTemplates.minimizedUI,T,g,n,i,o,t,r,d);return y=$WC.template.replace(y,{buffer_loader:MediaTemplates.getBufferLoader(),user_image_cnt:this.getMinimizedUserImageContainer(h),request_to_speak:_,screen_share_opt:U,pip_mini_player:R,header_html:b,mute_video:""},"InSecureHTML"),$WC.template.replace(y,{conference_type:Conference.types.AUDIO,huddle_type:"audio-huddle",pip_class:l?"conference-pip-mode":"",background_image:$zcg._IMGDEFAULTSTATICURL+"/videochat-bg.jpg",screen_share:u&&!l?"":"no-screen-share",hide_mini_player:u?"":"dN",hide_audio_mini_player:u?"dN":"",arrow:c?"zcf-downArrow":"zcf-upArrow",pinclass:c?"":"huddle-footer-hide",$participants_visibility:c?"primetime.hide.participants":"primetime.show.participants",pinstate_in_minimizedview:c?"hideUserStrip":"showUserStrip",$switch_to_video:"videochat.cameraon",audio_status_title:g?MediaUtil.getMicOnToolTip():MediaUtil.getMicOffToolTip(),audio_icon:g?"zcf-mic-mute":"zcf-mic",custom_class:d?"dN":"",audio_purpose:g?"unmuteAudio":"muteAudio",$maximize_title:"videochat.fullscreen",active_speaker_id:h,user_id:h,user_img:Users.getImgUrlById(h),user_image_display_class:"",user_image_onload:"",session_active_class:v,$end_title:isHost?"conference.end":"conference.leave",screen_share_class:w?"huddle_screen_share_ind":"",recording_class:$WC.Util.isEmpty(m)?"":"huddle-recording-in-progress"})},getMinimizedContainerHeaderHtml:function(e,t,n,i){return MediaTemplates.getHeaderComponentHtml({customClass:"media-hdr-minimz "+(i?"":"dN"),customAttribute:"minimized_video_player_header smartconferenceheader",module:"conferencebutton",backBtnClass:"zcf-maximize2",backBtnPurpose:"maximizeWindow",componentIconClass:"zcf-call",timerId:"conferenceminviewsessiontimer",title:e,header:e,backBtnTitle:"videochat.fullscreen",showParticipantsCount:!0,ignoreBackOption:Conference.isCurrentUserGuest(),participantsCount:t,recordingIndex:n,isPreviewRoom:!1})},getAudioMutedStateInMinimizedContainer:function(e,t,n,i,r,o,s,a,c){return $WC.template.replace(e,{audio_mini_player:t,muted_info:o,screenshare_indicator:s,audio_muted_class:n?"huddle-audio-muted":"",unmute_restricted_class:i,stream_restricted_class:r,silent_member_class:a,hide_class:c?"hide":""},"InSecureHTML")},getMinimizedUserImageContainer:function(e){return $WC.template.replace(ConferenceTemplates.userImageContainer,{user_img:ZCSmartConferenceTemplates.getUserImgUrl(e),user_image_onload:"",user_img_onerror:" onerror=ZCSmartConferenceHandler.onImageLoadErrorEvents.removeAudioCardUserImage(this) "})},getScreenShareOptForMinimizedContainer:function(e,t,n){var i="";if(Conference.isScreenShareAllowed()){var r=e&&t;i=$WC.template.replace('<div class="hudl-box {{icon_class}} {{hide_class}} tooltip-up" tooltip-title="{{title}}" conferencebutton purpose="{{purpose}}"></div>',{$title:r?"avcliq.media.screenshare.stop":"avcliq.media.screenshare.start",icon_class:r?"zcf-scrn-shr-stop":"zcf-sharescrn",purpose:r?"stopScreenShare":"startScreenShare",hide_class:n?"hide":""})}return i},getPIPMiniPlayerHeader:function(e,t,n){return MediaTemplates.getPipHeaderComponentHtml({customAttribute:"smartconferenceheader",componentIconClass:"zcf-call",timerId:"conferenceaudiominviewpipsessiontimer",title:e,header:e,participantsCount:t,recordingIndex:n})},getPIPMiniPlayer:function(e){if(!Conference.isPIPEnabled()||!e)return"";var t=e.isHost(ConferenceImpl.getCurrentUserId()),n=e.getCurrentMember().isAudioMuted(),i=e.getTitle(),r=e.getMembersCount(),o=e.getRecordingReferenceIndex(),s=$WC.template.replace(ConferenceTemplates.pipMiniPlayer,{pip_header_html:this.getPIPMiniPlayerHeader(i,r,o)},"InSecureHTML");return $WC.template.replace(s,{audio_status_title:n?MediaUtil.getMicOnToolTip():MediaUtil.getMicOffToolTip(),audio_purpose:n?"unmuteAudio":"muteAudio",$maximize_title:"videochat.fullscreen",$end_title:t?"conference.end":"conference.leave",$share_media_title:"common.share",$more_option_title:"common.more",$close_pip_title:"avcliq.media.exit.pip"})},setMinimizedContainerStates:function(e){var t=$("#conferenceminimizedwindow");t.setAsDraggable(MediaUtil.getCriteriaForDrag());var n={width:"540px",height:"338px"},i={top:"",left:""},r=!1;if(e)n=e.getMiniPlayerSize(),i=e.getMiniPlayerPosition(),r=e.hasScreenShareContainer()&&!e.isInPIP();else{var o=$("#conferencewindow"),s=o.attr("mini_player_top_pos");$WC.Util.isEmpty(s)||(i={top:parseInt(s),left:parseInt(o.attr("mini_player_left_pos"))})}t.css({top:i.top,left:i.left}),r&&(t.setAsResizable(MediaUtil.getCriteriaForResize(this.handleMiniContainerResize.bind(this))),t.css({width:n.width,height:n.height}),this.handleMiniContainerResize(n.width,n.height)),ConferenceUI.setScreenInMinimizedView(),ConferenceUI.setActiveSpeakersInMinimisedView(e)},showMinimizedWindowWithoutCurrentSession:function(){var e=this.getMinimizedContainerHtml(void 0);$("body").append(e),MediaUtil.resetDarkMode(),this.setMinimizedContainerStates(),$("#conferencewindow").hide()},showMaximizedWindowWithoutCurrentSession:function(){var e=$("#conferenceminimizedwindow"),t=$("#conferencewindow").show();if(!$WC.Util.isEmpty(e[0].style.top)){var n=e.position();t.attr({mini_player_top_pos:n.top,mini_player_left_pos:n.left})}this.closeMinimizedWindow(),this.handleResize(),MediaUtil.setDarkMode()},removeDropDown:function(){var e=ConferenceImpl.getCurrentSession();if(e){var t=e.getId(),n=t+"dropdowncnt",i=t+"shrdropdowncnt";$("#"+n).remove(),$("#"+t+"dropdownopt").removeClass("active").attr("tooltip-title",Resource.getRealValue("common.more")),$("#"+i).remove(),$("#"+t+"shrdropdownopt").removeClass("active").attr("tooltip-title",Resource.getRealValue("common.share")),Clickoutside.clear(n),Clickoutside.clear(i)}},handleScreenShareStart:function(){var e=this.getConferenceMinimizedWindow();e.find("[screen_share_indicator_v2]").removeClass("zc-av-hide"),e.addClass("huddle_screen_share_ind"),$("#conferencewindow").find("[screen_share_indicator_v2]").removeClass("zc-av-hide"),$('[conferencebutton][purpose="startScreenShare"]').attr({purpose:"stopScreenShare","tooltip-title":Resource.getRealValue("avcliq.media.screenshare.stop")}).removeClass("zcf-sharescrn").addClass("zcf-scrn-shr-stop")},handleOpenFullScreen:function(e){ConferenceImpl.getCurrentSession().setWindowInFullScreen(!0),$("#"+$.escapeSelector(e.attr("targetElemId"))).addClass("huddle-fullscrn"),e.removeClass("zcf-fullscrn").addClass("zcf-exit-fullscrn"),e.attr({purpose:"exitFromFullScreen","tooltip-title":Resource.getRealValue("media.exit.fullscreen")})},handleExitFullScreen:function(e){ConferenceImpl.getCurrentSession().setWindowInFullScreen(!1),$("#"+$.escapeSelector(e.attr("targetElemId"))).removeClass("huddle-fullscrn"),e.removeClass("zcf-exit-fullscrn").addClass("zcf-fullscrn"),e.attr({purpose:"openInFullScreen","tooltip-title":Resource.getRealValue("media.open.fullscreen")}),ConferenceUI.handleResize()},handleOpenPresenterViewInFullScreen:function(e){$("#conferencevideowrapper").addClass("huddle-fullscrn"),e.removeClass("zcf-fullscrn").addClass("zcf-exit-fullscrn"),e.attr({purpose:"exitPresenterViewFromFullScreen","tooltip-title":Resource.getRealValue("media.exit.fullscreen")}),ConferenceUI.getConferenceWindow().addClass("huddle-active-speaker-full-screen-view"),ConferenceUI.handleResize()},handleExitPresenterViewFromFullScreen:function(e){$("#conferencevideowrapper").removeClass("huddle-fullscrn"),e.removeClass("zcf-exit-fullscrn").addClass("zcf-fullscrn"),e.attr({purpose:"openPresenterViewInFullScreen","tooltip-title":Resource.getRealValue("media.open.fullscreen")}),ConferenceUI.getConferenceWindow().removeClass("huddle-active-speaker-full-screen-view"),ConferenceUI.handleResize()},setPinnedState:function(){ConferenceImpl.getCurrentSession().isFooterVisible()&&this.isInStripView()?($("#footer_pin").attr({title:Resource.getRealValue("primetime.hide.participants"),purpose:"hideUserStrip"}).addClass("zcf-downArrow").removeClass("zcf-upArrow"),$("#conferencewindow").removeClass("huddle-footer-hide")):($("#footer_pin").attr({title:Resource.getRealValue("primetime.show.participants"),purpose:"showUserStrip"}).addClass("zcf-upArrow").removeClass("zcf-downArrow"),$("#conferencewindow").addClass("huddle-footer-hide"))},closeMinimizedWindow:function(){SessionTimers.clearTimer("conferenceminviewsessiontimer"),SessionTimers.clearTimer("conferenceaudiominviewsessiontimer"),SessionTimers.clearTimer("conferenceaudiominviewpipsessiontimer");var e=$("body").find("#conferenceminimizedwindow");e.hide(),MediaUtil.removeVideoElemsStreamInContainer(e),e.remove()},updateStreamInMinimizedView:function(e,t){var n=ConferenceImpl.getCurrentSession().getMember(e);if(n){var i=n.getAVStream();MediaUtil.setStreamInContainer(e,t,i),MediaUtil.updateAVStatusInContainer(t,"audio",n.isAudioMuted(),i)}},updateAVStatusInMinimizedContainer:function(e,t,n){var i=ConferenceImpl.getCurrentSession().getMember(e);if(i){var r=$("#conferenceminimizedwindow").find('[user_id="'+$.escapeSelector(e)+'"]');MediaUtil.updateAVStatusInContainer(r,t,n,i.getAVStream())}},updateAudioMutedInfo:function(e){var t=e.getCurrentMember(),n=$("#conferencewindow");if(t.isAudioMuted()&&!e.isSilentMember()){var i=n.find("#audioMutedInfoCnt"),r=this.isInMinimizedView(),o=ConferenceTemplates.getMutedInfoCntHtml(e),s=n.find("#mutebandindicator"),a=MediaTemplates.getAudioMuteInfo(ZCSmartConferenceUI.getMuteBandContent(e));if(0===i.length?$("#conferencev2header").after(o):i.replaceWith(o),0===s.find("[mute_band_indicator]").length?s.append(a):s.html(a),r){var c=$("#conferenceminimizedwindow").addClass("huddle-audio-muted"),d=c.find("#audioMutedInfoCnt");0===d.length?c.prepend(o):d.replaceWith(o)}}else{var l=this.getConferenceMinimizedWindow();l.removeClass("huddle-audio-muted").find("#audioMutedInfoCnt").remove(),e.isSilentMember()&&!e.isSilentSpeakerInfoHidden()||(l.removeClass("smartconf-show-silent-band"),l.find("#silentSpeakerInfoCnt").remove()),n.removeClass("smartconf-show-mute-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").removeClass("smartconf-show-mute-band"),n.find("#audioMutedInfoCnt").remove(),n.find("#mutebandindicator").empty()}},updateMutedInfoInList:function(e,t){var n,i=$("#conferencewindow"),r=i.find("#smartconferenceusersection").find('[conferenceparticipant][userId="'+$.escapeSelector(t.getId())+'"]');(ZCSmartConferenceUI.setParticipantMuteOption(e,t,r),e.isInMinimizedView())&&((n=$("#conferenceminimizeduserstrip").find('[audio_strip_item][previewUserId="'+t.getId()+'"]')).length&&n.toggleClass("huddle-audio-muted",t.isAudioMuted()));if(e.isAudioStripVisible())(n=$("#audio_strip").find('[audio_strip_item][previewUserId="'+t.getId()+'"]')).length&&n.toggleClass("huddle-audio-muted",t.isAudioMuted()),e.isScreenInActiveSpeakerView()&&$("#presenter_view").find('[audio_strip_item][previewUserId="'+t.getId()+'"]').toggleClass("huddle-audio-muted",t.isAudioMuted());else if(e.isInGridLayout()){var o=$.escapeSelector(t.getId()),s=i.find("#audio_grid_dom_holder").find("[audio_grid_box][user_id="+o+"]");s.length&&s.toggleClass("huddle-audio-muted",t.isAudioMuted())}},setParticipantMuteAllOption:function(e){var t=$("#conferencewindow");t.find("[rhsHeaderOptions]").toggleClass("dN",!e.hasHostPermission()),t.find("#rhsmuteallopt").toggleClass("disabled",!e.canShowMuteAllParticipantsOpt()),t.find("#rhsunmuteallopt").toggleClass("dN",!e.canShowUnmuteAllParticipantsOpt()),this.setUnmuteRestrictionOption(t,e)},setUnmuteRestrictionOption:function(e,t){var n=e.find("[participantsunmuterestrictionopt]");n.toggleClass("dN",!t.canShowParticipantsUnmuteRestrictOpt()),n.find("#participantsunmuterestricttoggle").prop("checked",t.isAllowAudioUnmuteCheckboxEnabled())},addAndGetMediaContainer:function(e,t,n){WebRTCUserMedia.streamTypes.AUDIO_ONLY;var i=$.escapeSelector(n),r=$("#conferencevideowrapper"),o=$("#"+i).find("video");if(!o.length){var s,a=GalaxyView.addParticipant(e),c=void 0;if(5!==GalaxyView.getLayer(e)&&(c=this.getVideoContainerHtml(e,t,n,a)),(s=ConferenceImpl.getCurrentSession())&&(s.setUserIdInView(e),ConferenceUI.handleHiddenActiveSpeakerCount(),ConferenceUI.handleBottomPaneVisibility(s),ConferenceUI.handleBottomPaneParticipantsVisibility(s)),this.isInStripView())c&&r.append(c);else c&&r.append(c),(s=ConferenceImpl.getCurrentSession())?s.isInGalaxyLayout()&&(ConferenceUI.updateGalaxyUI(),$("#conferencewindow").addClass("ss-galaxy-view")):(ConferenceUI.updateGalaxyUI(),$("#conferencewindow").addClass("ss-galaxy-view"));ConferenceUI.checkGridAlignment(r),o=$("#"+i).find("video")}return this.handleResize(),o[0]},addAndGetScreenMediaContainer:function(e,t,n,i){var r=$.escapeSelector(n),o=$("#"+r).find("video"),s=ConferenceImpl.getCurrentSession();o.length||(o=$("#"+("screen_video_dom_"+r)));if(!o.length){var a=this.getScreenContainerHtml(e,t,n,i.attr("id"),s.getCurrentScreenLayout());if(e===ConferenceImpl.getCurrentUserId())$("#selfscreenwrapper").append(a);else $("#conferencevideowrapper").addClass("huddle-screen-view").prepend(a);var c=$("#"+r).attr("parentcontainerid",i.attr("id"));$Util.animateBufferLoader(c.find("[bufferloadercnt]"),9),o=c.find("video")}return this.handleResize(),this.handleScreenShareStarted(),o[0]},addAndGetWhiteBoardContainer:function(e,t){e.addClass("flexM ovrflwA wh100").removeClass("dN"),$("#conferencevideowrapper").hide();var n=e.find("[whiteboardcontainer]");if(!n.length){var i=this.getWhiteBoardContainerHtml(e.attr("id"),t);e.prepend(i);$("[whiteboardcontainer]").attr("parentcontainerid",e.attr("id"));n=$("[whiteboardcontainer]")}var r=t&&t.hasWhiteBoard()?t.getCurrentWhiteBoardId():"",o=t&&t.hasWhiteBoard()?WhiteBoard.getBoardURL(r,t.getId()):"";if(o){var s=n.find("iframe")[0];s.setAttribute("data-uid",r),s.onload=function(){n.find("#whiteboardloader").remove(),$(s).removeClass("vsbH"),WhiteBoard.setUpWhiteBoardBridge(s,(function(){WhiteBoard.updateActiveEditors(e.find("#wb_participants"),t),ConferenceUI.addRequestEditWhiteboardOption()}))},s.src=o}return this.handleResize(),this.handleWhiteBoardOpenOrClose(),ConferenceHandler.UIEvents.hideUserStrip(),n[0]},updateUserInfoInWhiteBoardContainer:function(e){if(e&&e.hasWhiteBoard()){var t=$("#conferencewbwrapper").find("[whiteboardcontainer]");t.length&&WhiteBoard.updateActiveEditors(t.find("#wb_participants"),e)}},removeWhiteBoardContainer:function(){var e=$("#conferencewbwrapper");e.addClass("dN"),e.find("[whiteboardcontainer]").remove(),e.find("#presenter_view").addClass("dN").empty(),$("#conferencevideowrapper").show()},addRequestEditWhiteboardOption:function(){var e=ConferenceImpl.getCurrentSession();if(e.getConfigurations().isAllowedToEditWhiteboard()&&e.hasWhiteBoard()&&!WhiteBoard.hasEditPermissionForCurrentBoard(ConferenceImpl.getCurrentUserId(),e)){var t='<span conferencebutton purpose="raiseWbEditRequest" class="zcl-btn-xs zcl-btn--primary" '+(WhiteBoard.isMaxActiveEditorsReached(e)?"disabled":"")+`>${I18N("media.request.edit.wb.raise")}</span>`,n=$("#conferencewbwrapper").find("[whiteboardcontainer]");n.find('[purpose="raiseWbEditRequest"],[purpose="dropWbEditRequest"]').length||n.find("#wb_participants").before(t)}},checkAndRemoveEditRequestButton:function(){var e=ConferenceImpl.getCurrentSession();if(e.getConfigurations().isAllowedToEditWhiteboard()&&e.hasWhiteBoard())if(WhiteBoard.hasEditPermissionForCurrentBoard(ConferenceImpl.getCurrentUserId(),e))this.removeRequestEditWhiteboardOption();else{var t=$("#conferencewbwrapper").find("[whiteboardcontainer]").find('[purpose="raiseWbEditRequest"]');WhiteBoard.isMaxActiveEditorsReached(e)?t.attr("disabled",""):t.removeAttr("disabled")}},removeRequestEditWhiteboardOption:function(){$("#conferencewbwrapper").find("[whiteboardcontainer]").find('[purpose="raiseWbEditRequest"],[purpose="dropWbEditRequest"]').remove()},handleScreenShareStarted:function(){var e=ConferenceImpl.getCurrentSession();e&&e.getType()==Conference.types.AUDIO&&!e.isScreenSharer()&&this.updateAudioConferenceUI()},handleWhiteBoardOpenOrClose:function(){var e=ConferenceImpl.getCurrentSession();e&&e.getType()==Conference.types.AUDIO&&this.updateAudioConferenceUI()},handleScreenShareEnded:function(){var e=ConferenceImpl.getCurrentSession();e&&e.getType()==Conference.types.AUDIO&&!e.isScreenSharer()&&this.updateAudioConferenceUI()},updateAudioConferenceUI:function(e){var t=ConferenceImpl.getCurrentSession(),n=t.hasScreenShareContainer(),i=t.hasWhiteBoard(),r=t.hasPresentation(),o=t.isInPIP(),s=$("#conferenceminimizedwindow");if(s.length)if(n){o||s.removeClass("no-screen-share");var a=s.position();t.setMiniPlayerPosition(a),this.setPositionForMinimizedUI(s,a),s.find("[minimized_audio_player]").hide(),s.find("[minimized_video_player]").show(),s.find("[minimized_video_player_header]").removeClass("dN"),s.find("[enable_resize]").length||s.setAsResizable(MediaUtil.getCriteriaForResize(this.handleMiniContainerResize.bind(this))),this.handleMiniContainerResize(s.width(),s.height())}else o||s.addClass("no-screen-share"),s.length&&(s.find("[minimized_video_player]").hide(),s.find("[videocontainer]").show(),s.find("[minimized_audio_player]").show(),s.find("[minimized_video_player_header]").addClass("dN"),s.find("[title_header]").removeClass("dN"),s.removeClass("min-size"));else if((n||i||r)&&t.isInGridLayout())ConferenceHandler.UIEvents.showStripView(void 0,void 0,!0),ConferenceUI.showActiveSpeakerAudioStrip(t);else if((n||i||r)&&t.isInGalaxyLayout()){if(ConferenceUI.updateGridUI(),ConferenceHandler.UIEvents.showStripView(void 0,void 0,!0),ConferenceUI.showActiveSpeakerAudioStrip(t),t.isScreenInActiveSpeakerView()){if(n)$("#conferencevideowrapper").append($("#presenter_view"));if(i){var c=$("#conferencewbwrapper");c.append($("#presenter_view")),ZCSmartConferenceUI.adjustContainerView(c.find("#presenter_view"),c,ZCMediaConstants.minimizedWindowRange.visibleArea)}if(r){var d=$("#conferencepresentationwrapper");d.append($("#presenter_view")),ZCSmartConferenceUI.adjustContainerView(d.find("#presenter_view"),d,ZCMediaConstants.minimizedWindowRange.visibleArea)}}}else n||i||r||(ConferenceHandler.UIEvents.hideStripView(void 0,void 0,!0),ConferenceUI.removeActiveSpeakerAudioStrip(t))},setPositionForMinimizedUI:function(e,t){window.innerHeight-t.top<e.height()&&e.css("top",window.innerHeight-(e.height()+20)),window.innerWidth-t.left<e.width()&&e.css("left",window.innerWidth-(e.width()+20))},updateGalaxyUI:function(){var e=ConferenceUI.getConferenceWindow();e.addClass("huddle-galaxy-view"),$("#conferencevideowrapper").addClass("galaxyView"),$("#conferencevideosection").removeClass("flexM"),e.removeClass("huddle-v2-grid")},updateGridUI:function(){var e=ConferenceUI.getConferenceWindow();e.removeClass("huddle-galaxy-view"),$("#conferencevideowrapper").removeClass("galaxyView"),$("#conferencevideosection").addClass("flexM"),e.addClass("huddle-v2-grid")},showActiveSpeakerAudioStrip:function(e){if(e.isMixingEnabled()&&e.isAudioConference()&&!e.isAudioStripVisible()){if(e.setAudioStripVisibility(!0),this.setActiveSpeakersInAudioStrip(e),!e.isScreenInActiveSpeakerView())$("#audio_strip").removeClass("dN");ConferenceUI.getConferenceWindow().addClass("conf-ss-view")}},removeActiveSpeakerAudioStrip:function(e){if(e.isAudioStripVisible()&&(e.setAudioStripVisibility(!1),$("#audio_strip").addClass("dN"),ConferenceUI.getConferenceWindow().removeClass("conf-ss-view"),e.isScreenInActiveSpeakerView())){var t=$("#conferencevideowrapper").find("#presenter_view");t.addClass("dN"),t.empty()}},setActiveSpeakersInAudioStrip:function(e){if(e&&e.isMixingEnabled()&&e.isAudioConference()&&e.isAudioStripVisible()){var t=6,n=ZCJQuery("#audio_strip");if(e.isScreenInRhsView()&&n.is(":visible")){var i=n.innerHeight(),r=Math.floor(i/135);r<t&&(t=r)}else e.isScreenInActiveSpeakerView()&&(t=1);var o=$("#audio_strip"),s=$("#presenter_view");if(e.isScreenInActiveSpeakerView()){o.addClass("dN"),s.removeClass("dN");var a="conferencevideowrapper";e.hasWhiteBoard()&&(a="conferencewbwrapper"),e.hasPresentation()&&(a="conferencepresentationwrapper"),s.setAsDraggable(ZCSmartConferenceUI.getDraggableCriteria(a))}else o.removeClass("dN"),s.addClass("dN"),(s=o).setAsNonDraggable();this.setActiveSpeakersInStripContainer(e,t,s,ConferenceUI.getAudioStripElemHtml())}},setActiveSpeakersInMinimisedView:function(e){if(e&&e.isInMinimizedView()){this.setActiveSpeakersInStripContainer(e,6,$("#conferenceminimizeduserstrip"),ConferenceUI.getMinimisedAudioStripElemHtml());var t=e.getActiveSpeaker();t&&void 0!==e.getMember(t)||(t=e.getCurrentUserId()),$("#conferenceminimizedwindow").find("[minimized_audio_player]").attr("active_speaker_id",t).find("[user_image]").attr("src",ZCSmartConferenceTemplates.getUserImgUrl(t))}},setActiveSpeakersInStripContainer:function(e,t,n,i){var r=e.getActiveSpeaker()||e.getCurrentUserId(),o=e.getSecondarySpeakerList()||[],s=$Util.removeDuplicateEntries([r].concat(o)),a=s.length,c=n.find("[audio_strip_item]");if(a<t&&c.each((function(){var n=$(this);if(!(a<t))return!1;var i=n.attr("previewUserId");void 0===i||void 0===e.getMember(i)||s.includes(i)||(s.push(i),a++)})),a<t){var d=e.getMembers();for(var l in d){if(!(a<t))break;s.includes(l)||(s.push(l),a++)}}else{var u=1;e.isScreenInActiveSpeakerView()&&(u=0),s=s.slice(0,t+u)}a=s.length;var f=[],m=[];c.each((function(){var t=$(this).attr("previewUserId");t&&void 0!==e.getMember(t)&&m.push(t)}));var C=a-c.length;if(0===C)for(var p=0;p<c.length;p++){var h=$(c[p]),g=h.attr("previewUserId");if(!s.includes(g)){h.remove();var v=$(i);n.append(v),c=c.add(v);break}}for(p=0;p<C;p++){v=$(i);n.append(v),c=c.add(v)}c.each((function(){var t=$(this);if(a>0){var n=!1,i=t.attr("previewUserId");if(f.includes(i)||void 0!==i&&void 0!==e.getMember(i))f.push(i),t.find("[host_indicator]").toggleClass("dN",!e.isHost(i)),t.toggleClass("huddle-active-user",0===s.indexOf(i)),t.toggleClass("huddle-audio-muted",e.getMember(i).isAudioMuted()),n=!0;else for(var r of s){var o=e.getMember(r);if(o&&!f.includes(r)&&!m.includes(r)){t.attr("previewUserId",r),t.find("[user_image]").attr("src",ZCSmartConferenceTemplates.getUserImgUrl(r));var c=Users.getName(r,o.getName());t.find("[user_name]").text(c),t.find("[user_name_title]").attr("tooltip-title",c),f.push(r),t.toggleClass("huddle-active-user",0===s.indexOf(r)),t.find("[host_indicator]").toggleClass("dN",!e.isHost(r)),t.toggleClass("huddle-audio-muted",o.isAudioMuted()),n=!0,ZCSmartConferenceUI.updateNvfInfoInMediaContainer(t,o,e),ZCSmartConferenceUI.showGifInMediaContainer(t,o,e);break}}t.toggleClass("dN",!n),n&&a--}else t.addClass("dN")}))},setActiveSpeakerIndicatorInGrid:function(e){if(e.isInGridLayout()){var t=$("#audio_grid_dom_holder");t.find("[audio_grid_box]").removeClass("huddle-active-speaker");var n=e.getActiveSpeaker();n&&t.find('[audio_grid_box][user_id="'+$.escapeSelector(n)+'"]').addClass("huddle-active-speaker")}},getAudioStripElemHtml:function(){return ConferenceTemplates.audioStripItemHtml},getMinimisedAudioStripElemHtml:function(){return ConferenceTemplates.minimisedAudioStripItemHtml},getLocalBottomBandMediaContainer:function(){return ConferenceUI.getConferenceWindow().find("#bottom_band_video_preview")},getGridContainerHtml:function(e,t){var n=t.getId(),i=t.getName()||"";i=Users.getName(n,i);var r=e.isHost(n),o=$WC.template.replace(ConferenceTemplates.gridContainer,{more_opt:'<div id="conf_user_more_opts" class="bcast-more-opt zcf-moreS flexM dN" conferencebutton purpose="showUserOptions" userid="{{user_id}}"></div>'},"InSecureHTML");return $WC.template.replace(o,{user_id:n,user_img_src:ZCSmartConferenceTemplates.getUserImgUrl(n),user_img_onerror:"  onerror=ZCSmartConferenceHandler.onImageLoadErrorEvents.removeAudioCardUserImage(this)  ",user_name:i,$host_title:"media.host",hide_host_tag:r?"":"hide",active_speaker_class:e.getActiveSpeaker()===n?"huddle-active-speaker":"",muted_class:t.isAudioMuted()?"huddle-audio-muted":""})},switchToNewGridLayout:function(e){if(ConferenceImpl.hasCurrentSession()){var t=ConferenceUI.getConferenceWindow(),n=ConferenceImpl.getCurrentSession();n.isInGridLayout()||(n.isInGalaxyLayout()||e?(n.setCurrentLayout(ConferenceUI.layouts.GRID),this.arrangeContainersInGrid(n,t,!1),ConferenceUI.updateGridUI()):n.isInStripLayout()&&n.setPreviousLayout(ConferenceUI.layouts.GRID),t.removeClass("ss-galaxy-view"),t.find('[conferencebutton][purpose="switchToGalaxyView"]').removeClass("active"),t.find('[conferencebutton][purpose="switchToGridView"]').addClass("active"))}},switchToGalaxyLayout:function(){if(ConferenceImpl.hasCurrentSession()){var e=ConferenceUI.getConferenceWindow(),t=ConferenceImpl.getCurrentSession();t.isInGalaxyLayout()||(t.isInGridLayout()?(t.setCurrentLayout(ConferenceUI.layouts.GALAXY),ConferenceUI.updateGalaxyUI(),$("#conferencevideowrapper").css("width","")):t.isInStripLayout()&&t.setPreviousLayout(ConferenceUI.layouts.GALAXY),e.addClass("ss-galaxy-view"),e.find('[conferencebutton][purpose="switchToGalaxyView"]').addClass("active"),e.find('[conferencebutton][purpose="switchToGridView"]').removeClass("active"),ConferenceUI.updateBottomPaneAvailableSlots($("#bottomparticipantspane"),!0))}},handleGridNavigationButton:function(e,t){var n=e.find("#audio_grid_wrp"),i=t.getCurrentGridPageInView(),r=t.getGridLayoutDetails(),o=Object.keys(r).length,s=n.find("[gridPrevNavigationBtn]"),a=n.find("[gridNextNavigationBtn]"),c=i-1,d=i+1;s.attr("prevPageNo",c).find("[pageNo]").text(c),a.attr("nextPageNo",d).find("[pageNo]").text(d),s.toggleClass("dN",i<2),a.toggleClass("dN",i>=o)},arrangeContainersInGrid:function(e,t,n){var i=t.find("#audio_grid_dom_holder"),r=e.getGridLayoutDetails(),o=Object.keys(r).length,s=Math.min(e.getCurrentGridPageInView(),o);e.setCurrentGridPageInView(s),this.handleGridNavigationButton(t,e);var a=r[s],c=(Object.keys(a).length,i.children("#audio_grid_first_row")),d=i.children("#audio_grid_second_row"),l=i.children("#audio_grid_third_row"),u=i.children("#audio_grid_fourth_row");n?i.find("[audio_grid_box]").each((function(){var e=$(this);void 0===a[e.attr("user_id")]&&e.remove()})):(c.empty(),d.empty(),l.empty(),u.empty());var f=!1,m=!1,C=!1,p=!1,h=0;for(var g in a){var v=e.getMember(g);if(v){var S=$.escapeSelector(g),I=i.find("[audio_grid_box][user_id="+S+"]");0===I.length&&(I=$(this.getGridContainerHtml(e,v))),h<5?(c.append(I),f=!0):h<10?(d.append(I),m=!0):h<15?(l.append(I),C=!0):(u.append(I),p=!0),h++,ZCSmartConferenceUI.updateNvfInfoInMediaContainer(I,v,e),ZCSmartConferenceUI.showGifInMediaContainer(I,v,e)}}c.toggleClass("dN",!f),d.toggleClass("dN",!m),l.toggleClass("dN",!C),u.toggleClass("dN",!p)},showGridPage:function(e){if(ConferenceImpl.hasCurrentSession()){var t=ConferenceImpl.getCurrentSession(),n=t.getCurrentGridPageInView(),i=t.getGridLayoutDetails(),r=Object.keys(i).length;e===n||e<1||e>r||(t.setCurrentGridPageInView(e),this.arrangeContainersInGrid(t,ConferenceUI.getConferenceWindow(),!1))}},updateGridPages:function(e){if(e.isInGridLayout()){var t=e.getCurrentGridPageInView(),n=e.getGridLayoutDetails(),i=Object.keys(n).length;this.arrangeContainersInGrid(e,ConferenceUI.getConferenceWindow(),t<=i)}},showRecordingIndication:function(e){e.addClass("huddle-recording-in-progress"),e.find("[recording_indicator]").fadeIn()},hideRecordingIndication:function(e){e.find("[recording_indicator]").fadeOut((function(){e.removeClass("huddle-recording-in-progress")}))},showBottomPane:function(e){if(ConferenceImpl.hasCurrentSession()){var t=ConferenceImpl.getCurrentSession();t.setBottomPaneStatus(!0);var n=this.getConferenceWindow();n.removeClass("smartconf-bottom-pane-hide");var i=n.find("#bottomparticipantspane");this.handleBottomPaneVisibility(t),this.updateBottomPaneAvailableSlots(i,e)}},hideBottomPane:function(){ConferenceImpl.hasCurrentSession()&&(ConferenceImpl.getCurrentSession().setBottomPaneStatus(!1),this.getConferenceWindow().addClass("smartconf-bottom-pane-hide"),ConferenceUI.handleResize())},handleBottomPaneVisibility:function(e){var t=this.getConferenceWindow(),n=t.find("#bottomparticipantspane"),i=n.is(":visible"),r=e.isSmartMode()&&e.getMembersCount()-e.getUserIdsInView().length>0;n.toggleClass("dN",!r),t.toggleClass("conf-min-bubble",r),t.find("#showBottomPaneOpt").toggleClass("hide",!r),r!==i&&this.handleResize()},handleBottomPaneParticipantsVisibility:function(e){var t=this.getConferenceWindow().find("#bottomparticipantspane"),n=e.getMembersCount(),i=e.getUserIdsInView(),r=ZCSmartConferenceUI.getBottomPaneSearchValue(),o=void 0!==r&&r.length>0;for(var s in i){var a=i[s];t.find('[conferenceparticipant][userId="'+a+'"]').remove()}if(e.canShowBottomPane()){var c=t.find("[conferenceparticipant]");o&&c.each((function(){var t=$(this),n=t.attr("userId"),i=e.getMember(n);if(i){var o=Users.getName(n,i.getName());o&&-1===o.toLowerCase().indexOf(r)&&t.remove()}else t.remove()}));var d=c.length,l=t.find("[list]");if(this.maxAvailableSlotsInBottomPane>d){var u=e.getMembers();for(var a in u){if(d===this.maxAvailableSlotsInBottomPane)break;var f=u[a],m=Users.getName(a,f.getName());o&&-1===m.toLowerCase().indexOf(r)?l.find('[conferenceparticipant][userId="'+a+'"]').remove():i.includes(a)||t.find('[conferenceparticipant][userId="'+a+'"]').length||(l.prepend(ZCSmartConferenceTemplates.getBottomPaneSectionListHtml(e,f)),d++,ZCSmartConferenceUI.showGifInBottomPane(e,f))}}else if(d>0&&this.maxAvailableSlotsInBottomPane<d)for(s=d-1;s>=this.maxAvailableSlotsInBottomPane&&!(s<0);s--){c[s].remove(),d--}if(ZCSmartConferenceUI.handleSearchResultsInBottomPane(l),o)t.find("[participantshiddencount]").addClass("dN");else if(t.find("[conferenceparticipant]").length>0){var C=n-d-i.length;t.find("[participantshiddencount]").text("+"+C).toggleClass("dN",C<=0)}}else ZCSmartConferenceUI.handleBottomBandHeadShots(this.getConferenceWindow(),e,n,i)},updateBottomPaneAvailableSlots:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n){var i=e.find("[list]").width(),r=Math.floor(2.2),o=Math.floor(i/50);this.maxAvailableSlotsInBottomPane=r*o-1,t&&this.handleBottomPaneParticipantsVisibility(n)}},handleHiddenActiveSpeakerCount:function(){var e=ConferenceImpl.getCurrentSession();if(e&&Conference.isNomenclatureEnabled()){var t=e.getUserIdsInHiddenLayer(),n=$("#conferencewindow"),i=n.find(".active-speaker-59");if(i.length&&t.length>0){var r=i.find("[hidden_active_speaker_indicator]");r.length||(n.find("[hidden_active_speaker_indicator]").remove(),r=$('<span class="smartconf-hidden-count posabs wh100 flexM curP dN" hidden_active_speaker_indicator conferencebutton purpose="openParticipantsInRHS"><span class="fontB zindex1" count></span></span>'),i.append(r)),r.find("[count]").text("+"+t.length)}else n.find("[hidden_active_speaker_indicator]").remove()}},handleHTMLForGuestChat:function(){var e=$("body");0===$("#zcwindows").length&&e.append('<div style="display:none;" id="ajaxstatus" class="ajaxstatus"></div><div id="zcwindows" class="zcoverlay"></div>'+GuestTemplates.image_viewer_section),e.addClass("nite-mode")},removeMediaContainer:function(e){var t=ConferenceImpl.getCurrentSession(),n=$("#conferencevideowrapper"),i=$("#"+$.escapeSelector(e)),r=i.attr("uid"),o=n.find("[id="+$.escapeSelector(e)+"]"),s=!1;if(i.length&&i.is("[screencontainer]")){s=!0,$("#conferencevideowrapper").removeClass("huddle-screen-view"),t._screenShareUserId=void 0;var a=o.attr("uid");n.find('[uid="'+$.escapeSelector(a)+'"]').removeClass("huddle-screen-active").find("[inlinecontainer]").attr("inlinecontainer","false"),this.handleScreenShareEnded(),t.isAudioConference()&&$("#conferenceminimizedwindow").css({width:"",height:""}).find("[enable_resize]").remove()}var c=n.find("[id="+$.escapeSelector(e)+"]");MediaUtil.removeVideoElemsStreamInContainer(c),c.remove(),ConferenceUI.checkGridAlignment(n),this.handleResize(),!s&&e&&r&&t.getMember(r)&&(GalaxyView.removeParticipant(r,e,t.isInGalaxyLayout()&&!t.isInMinimizedView()),t.removeUserIdFromView(r),ConferenceUI.handleHiddenActiveSpeakerCount(),ConferenceUI.removeUserFromBottomPaneList(r))},getWhiteBoardContainerHtml:function(e,t){var n=t&&t.hasWhiteBoard()?t.getCurrentWhiteBoardId():"",i=t&&t.hasWhiteBoard()?WhiteBoard.getBoardURL(n,t.getId()):"",r=t?t.getCurrentScreenLayout():void 0,o=ZCSmartConferenceTemplates.getScreenLayoutOptionHtml(r,!0);$WC.Util.isEmpty(o)||(o='<span class="wb-tpbr-sep"></span>'+o);var s=$WC.template.replace(ConferenceTemplates.whiteBoardContainer,{title:t.getTitle(),target_id:e,data_uid:n,associate_id:t.getId(),associate_type:"group_call",src_url:i?'src="'+i+'"':"",$open_full_screen:"media.open.fullscreen"});return s=$WC.template.replace(s,{layout_opt:o,buffer_loader:ZCSmartConferenceTemplates.getLoaderHtml("whiteboardloader","whiteboard.load","")},"InSecureHTML")},getScreenContainerHtml:function(e,t,n,i,r){var o=$WC.template.replace(ConferenceTemplates.screenContainer,{buffer_loader:MediaTemplates.getBufferLoader(),layout_opt:ZCSmartConferenceTemplates.getScreenLayoutOptionHtml(r,!1),host_identifier:ConferenceImpl.hasCurrentSession()&&ConferenceImpl.getCurrentSession().isHost(e)?'<span class="zcf-owner mR5 fshrink"></span>':""},"InSecureHTML");return o=$WC.template.replace(o,{id:n,target_id:i,uid:e,user_name:Users.getName(e,t),$open_full_screen:"media.open.fullscreen"})},getVideoContainerHtml:function(e,t,n,i){var r=$WC.template.replace(ConferenceTemplates.videoContainer,{buffer_loader:MediaTemplates.getBufferLoader(),user_image_cnt:MediaTemplates.userImageContainer},"InSecureHTML"),o=void 0;ConferenceImpl.hasCurrentSession()&&(o=ConferenceImpl.getCurrentSession());var s=o&&o.isHost(e),a=WebRTCUserMedia.streamTypes.AUDIO_ONLY,c=o?o.getMember(e):null,d=c?c.getName():void 0,l=c?c.getEmailId():void 0;return r=$WC.template.replace(r,{host_identifier:s?'<span class="zcf-owner mR5 fshrink"></span>':"",ishost:s,audio_statuscnt:!0,video_statuscnt:!0,user_card:ConferenceTemplates.getUserCardHtml(e,Users.getName(e,t),s,d,l,a,!0,!0)},"InSecureHTML"),r=$WC.template.replace(r,{id:n,uid:e,huddle_mode:"flexM",$audio_mute_title:"media.mic.muted",$video_mute_title:"media.camera.muted",$open_full_screen:"media.open.fullscreen",$close_screen:"common.collapse",user_name:Users.getName(e,t),user_img:Users.getImgUrlById(e),user_image_display_class:"",user_image_onload:"",hide_video:"dN",hide_card:"",galaxyview_position:i})},getContainerForBubbleUI:function(e){return this.getCachedConferenceWindow().find("[videocontainer][uid="+$.escapeSelector(e)+"]")},addAndGetContainerForBubbleUI:function(e){var t=ConferenceImpl.getCurrentSession(),n=t.getMember(e);if(n){var i=n.getName(),r=t.getId()+"_"+e+"_"+WebRTCUserMedia.streamTypes.AUDIO_ONLY,o=this.getContainerForBubbleUI(e);if(0===o.length){var s=GalaxyView.addParticipant(e),a=this.getVideoContainerHtml(e,Users.getName(e,i),r,s);this.getCachedConferenceWindow().find("#conferencevideowrapper").append(a),o=this.getContainerForBubbleUI(e),n.setAVMediaContainer(o.find("[video]")[0])}return o}},removeHiddenContainerFromBubble:function(e){var t=ConferenceImpl.getCurrentSession().getMember(e);t&&t.setAVMediaContainer(void 0),this.getContainerForBubbleUI(e).remove()},handleLastLayerSwap:function(e){59===e&&ConferenceUI.handleHiddenActiveSpeakerCount()},handleLayerZeroSwap:function(e){if(void 0!==e.find("[user_dp]")){var t=e.find("[org_user_dp]");if(void 0===t.attr("src")){var n=e.attr("uid"),i=ZCSmartConferenceTemplates.getUserImgUrl(n,"original");t.attr("src",i)}}},handleRingingStatusInUserAdd:function(e,t){var n=$("#conf-ringing-status"),i=parseInt(n.attr("member_count"));(!(void 0!==ZCSmartConferenceUI.ringingTimer&&0!==i)||e&&e.getMembersCount()===i)&&n.addClass("hide"),e&&e.removeRingingState(t)},removeUserFromMinGridView:function(e){var t=$("#conferenceminimizedgridcontainer").find('[user_id="'+$.escapeSelector(e)+'"]');t.hide(),MediaUtil.removeVideoElemsStreamInContainer(t),t.remove()},removeUserFromBottomPaneList:function(e){$("#bottomparticipantspane").find('[conferenceparticipant][userId="'+e+'"]').remove()},updateSessionOptions:function(e){var t=ConferenceUI.getConferenceWindow().find("[sessionOptions]");if(t.find('[conferencebutton][purpose="muteAudio"], [conferencebutton][purpose="unmuteAudio"]').toggleClass("dN",e.isSilentMember()),t.find('[conferencebutton][purpose="muteVideo"], [conferencebutton][purpose="unmuteVideo"]').toggleClass("dN",e.isSilentMember()),t.find('[conferencebutton][purpose="raiseSpeakerRequest"], [conferencebutton][purpose="dropSpeakerRequest"]').toggleClass("dN",e.isActiveMember()),t.find('[conferencebutton][purpose="showShareOptions"]').toggleClass("dN",e.isSilentMember()),e.isInMinimizedView()){var n=ConferenceUI.getConferenceMinimizedWindow(),i=n.find("#conferenceminimizedgridcontainer");i.find('[conferencebutton][purpose="muteAudio"], [conferencebutton][purpose="unmuteAudio"]').toggleClass("hide",e.isSilentMember()),i.find('[conferencebutton][purpose="raiseSpeakerRequest"], [conferencebutton][purpose="dropSpeakerRequest"]').toggleClass("dN",e.isActiveMember()),i.find('[conferencebutton][purpose="startScreenShare"]').toggleClass("hide",e.isSilentMember()),n.find("[minimized_audio_player]").find('[conferencebutton][purpose="muteAudio"], [conferencebutton][purpose="unmuteAudio"]').toggleClass("dN",e.isSilentMember())}this.updateSilentSpeakerInfo(e)},updateSilentSpeakerInfo:function(e){e.isSilentMember()&&!e.isSilentSpeakerInfoHidden()?this.showSilentSpeakerInfo():this.removeSilentSpeakerInfo(),this.updateAudioMutedInfo(e)},showSilentSpeakerInfo:function(){var e=ConferenceUI.getConferenceWindow();e.find("#silentSpeakerInfoCnt").length||(e.addClass("smartconf-show-silent-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").addClass("smartconf-show-silent-band"),e.find("#conferencev2header").after(ConferenceTemplates.getSilentSpeakerInfoCntHtml()),this.handleResize())},removeSilentSpeakerInfo:function(){ConferenceUI.getConferenceWindow().removeClass("smartconf-show-silent-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").removeClass("smartconf-show-silent-band");var e=$("#silentSpeakerInfoCnt");e.length&&(e.remove(),this.handleResize())},setScreenInMinimizedView:function(){if((t=ConferenceImpl.getCurrentSession())&&t.hasScreenShareContainer()){var e=t.getScreenSharer();if($("#conferenceminimizedscreencnt").length)$("#conferenceminimizedscreencnt").append(e.getScreenMediaContainer());else{var t,n=(t=ConferenceImpl.getCurrentSession()).hasScreenShareContainer(),i=$WC.template.replace(ConferenceTemplates.minScreenShareContainer,{buffer_loader:MediaTemplates.getBufferLoader()},"InSecureHTML");i=$WC.template.replace(i,{hide_mini_player:t.isAudioConference()&&!n?"dN":""}),$("#conferenceminimizedgridcontainer").prepend(i),$("#conferenceminimizedwindow").addClass("huddle-mini-screen"),$("#conferenceminimizedscreencnt").append(e.getScreenMediaContainer()),ConferenceUI.handleResize()}}},setScreenInMaximisedView:function(e){if(e&&e.hasScreenShareContainer()){var t=e.getScreenSharer();t.getScreenContainer().find("[bufferloadercnt]").after(t.getScreenMediaContainer())}},removeScreenFromMinimizedView:function(){var e=ConferenceImpl.getCurrentSession(),t=$("#conferenceminimizedwindow");if(t.length>0)t.position(),e.getMiniPlayerPosition();var n=$("#conferenceminimizedscreencnt");MediaUtil.removeVideoElemsStreamInContainer(n),n.remove(),this.handleResize()},openWaitingPage:function(e){var t=e.public_access,n=e.is_active,i=e.host.id==$zcg._ZUID,r=e.type,o=Conference.isVideoConference(r),s=e.description,a=e.knock_permission;e.start_time=parseInt(e.start_time),WebRTCUserMedia.getMediaDevices();var c=e.title,d=i||!a&&e.configurations&&e.configurations.cohost_ids&&-1!==e.configurations.cohost_ids.indexOf($zcg._ZUID),l=WaitingRoom.getBaseTemplateHtml({isRecording:void 0!==e.recording_index,isVideoConference:o,userId:$zcg._ZUID}),u=$WC.template.replace(l,{title_field:WaitingRoom.getFieldHtml("media.host","","host_name",Users.getName(""+e.host.id,e.host.name),Users.getImgUrlById(e.host.id),e.host.id),date_time_field:WaitingRoom.getFieldHtml("common.time","hpf-calendar","date_time",EventsMain.UTIL.getFormattedDate(e.start_time)),agenda_field:WaitingRoom.getDescriptionHtml(s,"common.agenda","hpf-agenda"),attachment_field:WaitingRoom.getAttachmentsHtml(e.eventObj),conf_type_icon:o?"zcf-video":"zcf-call"},"InSecureHTML"),f=(u=$WC.template.replace(u,{wavehand:$zcg._IMGSTATICURL+"/wavehand.svg",$huddle_header:"events.online.meeting",huddle_title:c,tooltip_title:c.length>25?c:"",$hours:"event.hours",$minutes:"event.mins",$seconds:"event.secs",$btn_title:d?"common.start.meeting":a?"conference.title.knock":"common.join.meeting",$choose_audio_header:"media.setdevices.audioinput",$choose_video_header:"media.setdevices.videoinput",btn_purpose:d?"startScheduledConference":a?"knockConferenceSession":"joinScheduledConference",hide_icon:d?"":"dN",hide:n||t?"":"dN",btn_type:"button",stream_type:o?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY,$room_state:"",public_access:t?"publicaccess":"",margin_class:"mT36",parent_id:"huddle-landing-cnt",video_display_class:o?"":"dN"}),e.start_time>$Util.getSyncedCurrentTime()),m=$WC.template.replace('<div class="font22 fontB flexM">{{hi_header}}<img src="{{wavehand}}" width="25" height="25"></div><div roomState class="hp-host-info">{{room_state}}</div>',{$hi_header:["home.greeting",Users.getName($zcg._ZUID,$zcg._USERFULLNAME,-1)],$room_state:n?a?"conference.state.knock":"conference.room.status.open":!n&&d?"conference.room.status.wait.host":"conference.room.status.wait.user",wavehand:$zcg._IMGSTATICURL+"/wavehand.svg"});if(u=$WC.template.replace(u,{live_status:n?'<span class="hp-status">'+Resource.getRealValue("videobroadcast.onair")+'&nbsp;(<span id="huddle-live-timer"></span>)</span>':"",countdown_timer:a?"":f||n?ConferenceTemplates.getCountdownTimer():WaitingRoom.getWaveLogoHtml(),door_state:n?$WC.template.replace(WaitingRoom.html.doorState,{$common_open:"common.open",guest_room:""}):"",form_fields:"",verifycheckbox:"",logged_in_content:m,event_huddle_cls:"event-waiting-con",event_id:e.event_id,cal_uid:e.caluid,conference_id:e.nrs_id||e.conferenceId,recurrence_id:e.recurrenceId?"recurrence_id="+e.recurrenceId:"",huddle_close:'<span class="waiting-room-close zcf-close flexM" conferencebutton purpose="closeWaitingWindow" title="{{common_close}}"></span>',huddle_goback:t?"":'<span class="waiting-room-back zcf-leftArrow flexM" conferencebutton purpose="minimizeWaitingWindow" title="{{common_goback}}"></span>'},"InSecureHTML"),u=$WC.template.replace(u,{user_img:Users.getImgUrlById($zcg._ZUID),$common_goback:"common.go.back",$common_close:"common.close",$common_minimize:"videochat.minimize",user_image_display_class:o?"dN":"",user_image_onload:""}),$(u).appendTo("body"),$("#huddle-landing-cnt").addClass("events-huddle nite-mode"),WaitingRoom.setPreviewSession(new ZCWaitingRoomSession(e)),WaitingRoom.startWaitingRoomNetworkPredictor(),a?$("#huddle-landing-cnt").find(".huddle-door-open").remove():SessionTimers.setTimer(f?"huddle-timer":"huddle-live-timer",{startTime:e.start_time,stickyHour:!0,type:f?"-":"+"}),WaitingRoom.requestSmartConferencePreview(r,d,!1,(function(t,i){var r=t instanceof MediaStream,s=i instanceof MediaStream;r&&WaitingRoom.addAudioInputOutputDeviceDropDown(t,o),s&&(WaitingRoom.addVideoInputDeviceDropDown(i),$("#huddle-video-preview").find("[video_disabled_info]").remove(),$("#mediapreview").find("[video_mirror]").removeClass("zcdisabled")),WaitingRoom.loadSmartConfPreview(t,i),$("#waitingroom_video")[0].muted=!0,WaitingRoom.bindEvents();var a=EventsDB.getObject(e.event_id,e.caluid,e.recurrenceId);if(n||d&&a.isConferenceTime()){var c=WaitingRoom.getStartorJoinBtnElem();c.removeClass("disabled"),c.attr("is_live",!0)}})),void 0===e.nrs_id&&t){var C=function(e){if(e.nrs_id){clearInterval(ConferenceUI.nrsIdPollingId),$("#conference-btn").removeClass("disabled"),$("#huddle-timer").remove(),$("#conference-btn").attr("conference_id",e.nrs_id);var t=$("#waitingroom_preview_cnt");t.find("#waiting_room_door").length||t.prepend($WC.template.replace(WaitingRoom.html.doorState,{$common_open:"common.open",guest_room:"guest-room-open"})),$("[roomstate]").text(Resource.getRealValue("conference.room.status.open"))}};ConferenceUI.nrsIdPollingId=setInterval((function(){var t={fields:"basic",host_id:e.host.id,public_access:!0};ConferenceAPI.getMediaSessionDetailsAsGuest(e.id,t,C)}),15e3)}},openRoom:function(e,t,n,i,r,o,s,a,c,d){var l=Conference.isVideoConference(i),u=r.type,f=r.ids,m=Conference.isCurrentUserGuest(),C=t===ConferenceImpl.getCurrentUserId();MediaManager.isPersonalScope(u)&&r.chat_id;var p=$("#conferencewindow");MediaUtil.removeVideoElemsStreamInContainer(p),p.remove(),GalaxyView.refresh();var h=void 0!==a,g=MediaTemplates.getHeaderComponentHtml({customClass:"",customAttribute:"smartconferenceheader",module:"conferencebutton",backBtnClass:WmsImpl.isGuestUser()?"hide":"zcf-leftArrow",backBtnPurpose:"minimizeWindow",componentIconClass:l?"zcf-video":"zcf-call",timerId:"conferencesessiontimer",title:e,header:e,ignoreBackOption:m,backBtnTitle:"media.back.minimize.view",showParticipantsCount:!0,showViewersCount:WmsImpl.isLocalUser(t),participantsCount:1,viewersCount:0,recordingIndex:o,isPreviewRoom:!1}),v={id:"conferencev2header",customClass:"",customAttribute:"smartconferenceheader",titleParams:{id:"conf_title",iconClass:l?"zcf-video font16":"zcf-call font15",content:e,allowEdit:Conference.isNomenclatureEnabled(),titleAttribute:"smartconferencebutton",titlePurpose:"showEditTitle",inputId:"conf_title_edit",inputAttribute:"smartconferenceinput",inputPurpose:"editConferenceTitle",inputLimit:ZCMediaConstants.MAX_TITLE_LENGTH},timerParams:{id:"conferencesessionsubtimer"},recorderParams:{recordingIndex:o,allowAction:C,customAttribute:"conferencebutton"},options:{customOptions:[{html:ZCSmartConferenceTemplates.getNonVerbalFeedbackTopBarHTML()}],participantsParams:{iconClass:"zcf-users",customAttribute:"conferencebutton openuserrhsbutton",purpose:"openParticipantsInRHS",content:1}}},S=!0;Conference.isCurrentUserGuest()&&(S=d),S&&(v.options.chatParams={displayClass:"",iconClass:"zcf-chat",customAttribute:"conferencebutton openchatrhsbutton",purpose:"openChatInRHS",unreadCountAttribute:"conferenceunreadmsgcount"}),h&&(v.options.townHallParams={iconClass:"zcf-townhall",customAttribute:"conferencebutton openthrhsbutton",purpose:"openAssociatedResource"}),Conference.isNotebookLHSEnabled()&&(v.options.notesParams={iconClass:"zcf-notes",customAttribute:"smartconferencebutton opennotesrhsbutton",purpose:"openNotesInRHS"}),m||(v.backButtonParams={iconClass:"zcf-leftArrow",titleResourceParams:"media.back.minimize.view",customAttribute:"conferencebutton",purpose:"minimizeWindow"}),C&&(v.viewerCountParams={count:0});var I=MediaTemplates.getV2HeaderComponentHtml(v),_="",w="";l?(w=ConferenceTemplates.loaderMaskHtml,w+=$WC.template.replace(ConferenceTemplates.loaderHtml,{id:"conferenceloader",$content:"common.connecting",custom_class:"smartconf-loader",align_class:"vhcenter"})):(_=ConferenceTemplates.loaderMaskHtml,_+=$WC.template.replace(ConferenceTemplates.loaderHtml,{id:"conferenceloader",$content:"common.connecting",custom_class:"huddle-loader",align_class:""}));var b=$WC.template.replace(ConferenceTemplates.mainUI,{header_html:g,v2_header_html:I,bottom_pane_section:ZCSmartConferenceTemplates.getBottomPaneSectionHtml("conferencebutton",Conference.isNomenclatureEnabled()),audio_loader_cnt:_,video_loader_cnt:w,grid_parent:ConferenceTemplates.audioGridWrapper,ring_toaster:ZCSmartConferenceTemplates.getRingToasterHtml("conferencebutton",u,f),layout_class:ZCSmartConferenceConstants.screenLayouts.getSSLayoutClass()},"InSecureHTML");b=$WC.template.replace(b,{scroll_class:Conference.isAudioConference(i)?"ovrflwA":"",conference_type:i,host_id:t,recording_index:o||"",huddle_type:l?"video-huddle":"audio-huddle",background_image:$zcg._IMGDEFAULTSTATICURL+"/videochat-bg.jpg",$hide_participants:"primetime.hide.participants",stars_background_svg:$zcg._IMGDEFAULTSTATICURL+"/media/same_size_stars.svg",permission_class:t===ConferenceImpl.getCurrentUserId()?"":"smartconf-no-perm",guest_user_class:WmsImpl.isGuestUser()?"smartconf-guest-user-win":"",new_rhs_class:"smartconf-aside-v2"});var U="";l&&(U='<div class="hudl-box zcf-video" title="{{mute_video_title}}" conferencebutton purpose="muteVideo"></div>');var R=ZCSmartConferenceTemplates.getReactionsHTML(),T="";(Conference.isWhiteBoardAllowed()||Conference.isPresentationsAllowed())&&(T=$WC.template.replace('<div class="hudl-box zcf-sharemedia tooltip-up" tooltip-title="{{title}}" conferencebutton purpose="showShareOptions"></div>',{$title:"common.share"})),c=void 0===c||c;var y=i===Conference.types.AUDIO&&c?ConferenceTemplates.getLayoutOptionsHtml():"",M="smartconf-single-opt";WmsImpl.isGuestUser()||(M="");var A="";Conference.isPIPEnabled()&&(A=$WC.template.replace(ConferenceTemplates.pipOption,{$title:"avcliq.media.open.pip",custom_class:"hudl-box"}),M="");var P=ZCSmartConferenceTemplates.getBottomBandVideoPreview(!1,$zcg._ZUID),D=MediaTemplates.getScreenShareIndicator("conferencebutton"),L=$WC.template.replace(ConferenceTemplates.sessionOptions,{mute_video:U,request_to_speak:ZCSmartConferenceTemplates.getRequestToSpeakOpt(!0,"conferencebutton",!1),bottom_pane_option:ZCSmartConferenceTemplates.getBottomPaneOption("conferencebutton"),minimize_option:WmsImpl.isGuestUser()?"":ConferenceTemplates.minimizeWindowOption,fullscreen_option:ConferenceTemplates.fullScreenOption,pip_option:A,invite_users:C?ConferenceTemplates.inviteUsersOption:"",reaction_option:R,share_options:T,presentation_indicator:MediaTemplates.getPresentationIndicator("conferencebutton"),screen_share_indicator:D,toggleuiview:y,local_user_preview:P},"InSecureHTML");L=$WC.template.replace(L,{$switch_to_video:"videochat.cameraon",mute_audio_title:MediaUtil.getMicOffToolTip(),$mute_video_title:"videochat.cameraoff",$end_title:C?"conference.end":"conference.leave",$more_title:"common.more",$user_list_title:"common.participants",$chat_option_title:"common.chat",$minimize_title:"videochat.minimize",$fullscreen_title:"media.open.fullscreen",screen_opt_class:M,$grid_view:"media.grid",$galaxy_view:"media.galaxy",$reaction_title:"message.option.addreactions",$title:"contact.invite",$waitingroom_title:"media.waitingroom"});S=!0;Conference.isCurrentUserGuest()&&(S=d);var Z=$WC.template.replace(ConferenceTemplates.rhsContainer,{chat_icon:S?ConferenceTemplates.rhsContainerChatIcon:"",associated_resource:ConferenceTemplates.rhsAssociatedResourceHeader,search_cnt:ZCSmartConferenceTemplates.getRhsSectionSearchCntHtml()},"InSecureHTML");if(Z=$WC.template.replace(Z,{$participant_section_header:"common.participants",$chat_section_header:"common.chat",$close_rhs_title:"common.hide",chat_section:"",custom_class:WmsImpl.isGuestUser()?"conference-guest-chat":"conference-chat",$close_rhs:"common.close",participants_count:1,associatedresource_display_class:h?"":"dN",associated_resource_parent_class:h?"conference-associated-resource-parent":"",$resource_title:"conference.associatedresource.townhall.title"}),b=$WC.template.replace(b,{layout_options:"",session_options:L,rhs_section:Z},"InSecureHTML"),$("body").append(b),ConferenceUI.setConferenceWindowDoms(),ConferenceUI.bindEventsForTransition(),"undefined"!=typeof MediaCallImpl&&MediaCallImpl.canPerformSilentJoin(s)){var E=ConferenceUI.getConferenceWindow();return E.addClass("dN"),void E.attr("adhoccallid",s.call_id)}MediaUtil.setDarkMode()},getRhsSectionUserHtml:function(e,t,n,i){var r=t.getId(),o=t.getReferrerInfo(),s="",a="",c="",d=ZCSmartConferenceTemplates.getRhsSectionUserActionCntHtml(e,t);e.isHost(r)?a='<em class="zcf-owner bcast-gold mL4"></em>':(s='<span class="smartconf-raisehand zcf-raisehand flexM dN"></span>',c=ZCSmartConferenceTemplates.getRhsSectionUserSpeakerRequestCntHtml("conferencebutton"));var l=Users.getName(r,t.getName());void 0!==n&&n.length>0&&(l=_highlightSearchText(l,n));var u="",f="";WmsImpl.isGuestUser()||WmsImpl.isGuestUserId(r)||(u='elemtype="user" hover="true" uid="'+r+'"',f="curP");var m=$WC.template.replace(ConferenceTemplates.rhsListUserHtml,{user_id:r,user_img_src:Users.getImgUrlById(r),custom_class:i||"",user_status:"undefined"!=typeof Contacts&&(Contacts.isExist(r)||WmsImpl.isLocalUser(r))?Contacts.getStatusStyle(r):"",hover_info_class:f,referral_display_class:o?"conference-referral-title":"",$referrer_info:o?["conference.referrer.info",o]:""});return $WC.template.replace(m,{user_name:l,user_tag:Users.getTag(r),raise_hand_indicator:s,host_indicator:a,request_approve_cnt:c,action_cnt:d,hover_attributes:u},"InSecureHTML")},getRhsSectionPendingUserHtml:function(e,t,n,i){var r=ZCSmartConferenceTemplates.getRhsSectionUserRingActionHtml(e,t,"conferencebutton");n=Users.getName(t,n),void 0!==i&&i.length>0&&(n=_highlightSearchText(n,i));var o=e.getInvitedMember(t),s="",a="",c="";Conference.isInviteRevokeEnabled()&&o&&(c=`<span class="remove-usr-icn flexM" conferencebutton purpose="revokeInvite" title="${I18N("avcliq.conf.invite.revoke")}"></span>`),WmsImpl.isGuestUser()||WmsImpl.isGuestUserId(t)||(s='elemtype="user" hover="true" uid="'+t+'"',a="curP");var d=$WC.template.replace(ConferenceTemplates.rhsPendingUserListHtml,{user_id:t,user_img_src:Users.getImgUrlById(t),user_status:"undefined"!=typeof Contacts&&(Contacts.isExist(t)||WmsImpl.isLocalUser(t))?Contacts.getStatusStyle(t):"",hover_info_class:a});return $WC.template.replace(d,{invite_revoke_optn:c,user_name:n,user_tag:Users.getTag(t),action_cnt:r,hover_attributes:s},"InSecureHTML")},addUserInList:function(e,t){var n=$("#smartconferenceusersection"),i=e.getMember(t),r=ZCSmartConferenceUI.getListViewInstance();if(void 0!==r){var o=!0,s=ZCSmartConferenceUI.getRhsSearchValue();if(void 0!==s&&s.length>0){var a=Users.getName(t,i.getName());void 0!==a&&-1!==a.toLowerCase().indexOf(s)||(o=!1)}var c=ZCSmartConferenceUI.getRhsGestureFilterMap();if(void 0!==c)c[e.getReactionsDB().getUserVote(t)]||(o=!1);o&&(r.switchCategory(t,void 0,ZCSmartConferenceUI.getUserCurrentCategory(e,i)),ZCSmartConferenceUI.setParticipantMuteOption(e,i,n.find('[conferenceparticipant][userId="'+t+'"]')),e.isCurrentUser(t)&&ZCSmartConferenceUI.setMuteRestrictionInfo(!0))}ConferenceUI.setActiveSpeakersInAudioStrip(e),ConferenceUI.setActiveSpeakersInMinimisedView(e),ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE),ConferenceUI.updateHeadersStatus(),ZCSmartConferenceUI.handleSearchResultsInRhsUserList(n)},modifyUserInList:function(e,t){ConferenceUI.addUserInList(e,t)},removeUserFromList:function(e,t){ConferenceUI.setActiveSpeakersInAudioStrip(e),ConferenceUI.setActiveSpeakersInMinimisedView(e),ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE);var n=ZCSmartConferenceUI.getListViewInstance();void 0!==n&&n.removeItem(t),ConferenceUI.populateYetToJoinList(e,[t]),e.isInMinimizedView()&&this.removeUserFromMinGridView(t),e.isUserScreenSharer(t)&&this.removeScreenFromMinimizedView(),ConferenceUI.updateHeadersStatus()},getAndPopulateYetToJoinList:function(e){if(!e.hasPopulatedPendingUsersList()){if(e.isPersonalScope())ConferenceUI.populateYetToJoinList(e,e.getInvitedMemberIds()),ZCSmartConferenceUI.checkAndShowRhsSearch(e);else{var t=e.getChatId();void 0!==t&&Participants.getIDsAfterPopulated(t,(function(){ZCSmartConferenceUI.reinitListView(e),ZCSmartConferenceUI.checkAndShowRhsSearch(e),ZCSmartConferenceUI.setMuteRestrictionInfo(e.isOldImpl())}))}e.setPendingUsersListAsPopulated()}},populateYetToJoinList:function(e,t){var n=ZCSmartConferenceUI.getListViewInstance();if(void 0!==n){var i=ZCSmartConferenceUI.getRhsSearchValue(),r=void 0!==i&&i.length>0,o=void 0!==ZCSmartConferenceUI.getRhsGestureFilterMap();for(var s in t){var a=t[s],c=!0;if(r){var d=e.getInvitedMember(a),l=d?d.name:void 0;void 0===l&&(l=e.getLeftMemberName(a));var u=Users.getName(a,l);void 0!==u&&-1!==u.toLowerCase().indexOf(i)||(c=!1)}o&&(c=!1),!c||e.isHost(a)||WmsImpl.isLocalUser(a)||WmsImpl.isGuestUserId(a)||void 0!==e.getMember(a)||n.switchCategory(a,void 0,ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN)}ConferenceUI.updateHeadersStatus()}},showRingingUI:function(e,t,n,i,r){var o=ZCSmartConferenceImpl.getJoiningSession();if(!o||o.getId()!==e){var s=$("#conference-detachedwrapper");if(0===s.length)$("body").append('<div id="conference-detachedwrapper" class="smartconf-incoming AV-call-detached zindex1000 drag"></div>'),s=$("#conference-detachedwrapper");else if(s.find('[conference_id="'+e+'"]').length>0)return;var a=Users.getName(i,r),c=Conference.isVideoConference(t),d=$WC.template.replace(ConferenceTemplates.ringingUI,{id:e,$invites:"conference.invites",$accept:"common.accept",$decline:"common.decline",user_name:a,title:n,$network_strength_tooltip:Conference.isNetworkStrengthIndicationEnabled()?"avcliq.network.strength.weak.curruser":"",pick_icon:c?"msi-video":"msi-call",decline_icon:c?"msi-vmute":"msi-vend"});if(s.append(d),s.setAsDraggable({areaToBeVisible:ZCMediaConstants.minimizedWindowRange.visibleArea}),MediaUtil.setContainerPosition(s,20),$Util.wmsnotifyowner.isOwner()&&!MySelf.isStatusDND()&&ConferenceUI.playIncomingTone(),!$zcg._WINFOCUS){var l="videochat.incomming.video";c||(l="videochat.incomming.audio"),NotifyByTitle.show(Resource.getRealValue(l)),!$Util.wmsnotifyowner.isOwner()||MySelf.isStatusBusy()||MySelf.isStatusDND()||$Util.notify({type:"videocall",chid:i,icon:Users.getImgUrlById(i),title:$WC.Util.decodeHTMLEntities(a),body:Resource.getRealValue("conference.invites")+" "+n,replyable:!1})}ConferenceUI.ringingTimers||(ConferenceUI.ringingTimers={}),ConferenceUI.ringingTimers[e]=setTimeout((function(){ConferenceUI.removeRingingUI(e)}),MediaCallConstants.callRingingTimeLimit),ZCMediaDevices.syncPreferredDevices((function(){}))}},removeRingingUI:function(e){var t=$("#conference-detachedwrapper");if(t.length>0){var n=t.find('[conference_id="'+e+'"]');n.length>0&&(n.remove(),Sound.custom.stop("incomingmediacall"),NotifyByTitle.stop())}0===t.children().length&&t.remove(),ConferenceUI.ringingTimers&&ConferenceUI.ringingTimers[e]&&clearTimeout(ConferenceUI.ringingTimers[e]),ZCSmartConferenceImpl.removeIncomingCallNetwokPredictor(e)},setStreamAccess:function(e){var t=$("#conference-detachedwrapper");if(t.length>0){var n=t.find('[conference_id="'+e+'"]');n.length>0&&n.find("[actions_container]").html('<span class="pLR15 line24">'+Resource.getRealValue("avcliq.media.permission.state.prompt")+"</span>")}},updatePresentationRequestsList:function(e){var t=ConferenceUI.getConferenceWindow();if(e.hasHostPermission()){var n=e.getRequestedPresentationsCount(),i=t.find("[presentrequestscnt]").toggleClass("dN",n<=0);n||i.find("#"+e.getId()+"presentrequestscnt").remove(),i.find("[count]").text(n)}else t.find("[presentrequestscnt]").toggleClass("dN",!0)},updateHeadersStatus:function(e){_rAF((function(){var e=ConferenceImpl.getCurrentSession(),t=ZCSmartConferenceUI.getListViewInstance(),n=e.hasHostPermission(),i=ConferenceUI.getConferenceWindow().find("[raisedhandscountcnt]"),r=n?void 0!==t?t.getItemsCountByCategory(ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS):e.getRequestedSpeakersCount():0;i.toggleClass("dN",r<=0),r>0&&i.find("[count]").text(r),ConferenceUI.updatePresentationRequestsList(e),ConferenceUI.setParticipantMuteAllOption(e)}))},resetHostPermissions:function(e){ConferenceUI.getConferenceWindow().find("[inviteUsersButton]").remove(),e.resetGuestConfigurations(),ZCSmartConferenceUI.closeV2InviteUserPanel()},resetJoiningLoader:function(e,t,n){"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleResetLoader(e,n),MediaManager.updateGroupCallOptionsInChatHeader(t),"undefined"!=typeof CallsHistoryUI&&CallsHistoryUI.resetCallJoinLoader(e,n)},handleResizeForGrid:function(e,t){var n=ConferenceImpl.getCurrentSession();if(!n.isInGalaxyLayout()){var i=ZCMediaConstants.ASPECT_RATIO,r=$("#conferencevideosection"),o=r.find("#conferencevideowrapper"),s=r.find("[videocontainer]"),a=n.getType(),c=s.length,d=r.width(),l=r.height();if(e&&(d+=e),t&&(l+=t),a!==Conference.types.AUDIO){for(var u,f,m=this.VIDEO_CONTAINER_MARGIN,C=0,p=0,h=0,g=1;g<=c;g++){var v=Math.ceil(c/g);if(g*v>=c){var S=(void 0,void 0,void 0,void 0,u=void 0,f=void 0,u=(d-2*g*m)/g,f=(l-2*v*m)/v,MediaUtil.getBestFitWidth(u,f,i));S>C&&(C=S,p=v,h=g)}}var I=C/i;s.css({width:C,height:I,margin:m}),this.handleInlineContainerResize(C);var _=C*h+2*m*h,w=I*p+2*m*p;o.css({width:Math.ceil(_),height:Math.ceil(w)})}else ConferenceUI.checkGridAlignment(o)}},handleResize:function(e,t){if(ConferenceImpl.hasCurrentSession()){var n=ConferenceImpl.getCurrentSession();if((i=n.isInMinimizedView())&&ZCSmartConferenceUI.adjustContainerView($("#conferenceminimizedwindow"),void 0,ZCMediaConstants.minimizedWindowRange.visibleArea),n.isInGalaxyLayout())this.updateBottomPaneAvailableSlots($("#bottomparticipantspane"),!0);else if(n.isInGridLayout()||$("#conferencewindow").hasClass("huddle-grid-view"))this.handleResizeForGrid(e,t);else{$("#conferencevideosection");$("#conferencewindow").find("[videocontainer]").css({width:"",height:"",margin:""}),$("#conferencevideowrapper").css({width:"",height:""}),$("[inlinecontainer]").css({width:"",height:""});var i,r=n&&n.hasOngoingPresentation();if(r&&!i&&(ConferenceUI.adjustPresenterViewWithRHSWindow(n),n.hasPresentation()&&PresentationUI.handleResize()),i=ConferenceUI.isInMinimizedView()){var o=$("#conferenceminimizedgridcontainer").find("[videocontainer]");r?o.css({height:o.width()/ZCMediaConstants.ASPECT_RATIO}):o.css({width:"",height:""})}}}},handleMiniContainerResize:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=$("#conferenceminimizedwindow"),r=i.find("[title_header]"),o=r.text(),s=i.find("[title_holder]"),a=e<=ZCMediaConstants.minimizedWindowRange.toggleWidth;n.isFooterVisible()&&i.toggleClass("huddle-footer-hide",a),i.find("[min_footer_pin]").toggleClass("dN",a),r.toggleClass("dN",a),a?s.attr("title",o):s.attr("title",""),n.isScreenSharer()?i.find("[purpose=stopScreenShare]").toggleClass("vsbH",a):i.find("[purpose=startScreenShare]").toggleClass("vsbH",a),i.toggleClass("min-size",a),n.hasScreenShareContainer()||$($("#conferenceminimizedgridcontainer").find("[videocontainer]")[1]).toggleClass("dN",a)},handleEscape:function(){var e=ConferenceImpl.getCurrentSession();if(e&&!e.isSilentConference()){if(ZCSmartConferenceUI.closeInviteUsers(e.getId()))return!0;if(this.isInMaximizedView()&&!WmsImpl.isGuestConferenceUser())return this.showMinimizedWindow(),!0}return!1},handleInlineContainerResize:function(e){var t=$("#conferencevideowrapper"),n=28*e/100;t.find('[inlinecontainer="true"]').css({width:n,height:n/ZCMediaConstants.ASPECT_RATIO}),t.find('[inlinecontainer="false"]').css({width:"",height:""})},setVideosInStripView:function(e){var t=ConferenceImpl.getCurrentSession();if(t){var n=$("#conferencevideowrapper");if(t.hasScreenShareContainer()){var i=n.find("[screencontainer]");$("#conferencevideowrapper").prepend(i)}}},removeVideosInStripView:function(){var e=ConferenceImpl.getCurrentSession();$("#conferencevideowrapper");if(e.hasScreenShareContainer()){var t=$("[screencontainer]");t&&t.find('[purpose="openInFullScreen"]').attr("targetElemId",t.attr("parentcontainerid"))}},startScreenShare:function(){if(!$Util.Browser.isChrome()||WebRTCUserMedia.isScreenShareSupportedInNative()||ScreenShare.Extension.isInstalled()){var e=ConferenceImpl.getCurrentSession(),t=e.getCurrentMember().isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.SCREENSHARE);if(e.getConfigurations().isScreenShareAllowed()||t)if(e.hasOngoingPresentation()){if(e.hasWhiteBoard()){if(e.isWhiteBoardCreator())return void UI.updateBanner(Resource.getRealValue("whiteboard.stop.to.share.screen"),2e3,!0);var n=e.getWhiteBoardCreatorId(),i=e.getMember(n);if(e.hasHostPermission()){var r=function(){ConferenceUI.startScreenShare()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(n),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,r)}return void UI.updateBanner(Resource.getRealValue("whiteboard.in.conference.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(Users.getName(i.getId(),i.getName()))),2e3,!0)}var o=e.getPresentation();if(e.hasPresentation()){if(e.isPresenter())return void UI.updateBanner(Resource.getRealValue("presentation.stop.to.share.screen"),2e3,!0);var s=o.getPresenterId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){r=function(){ZCSmartConferenceUI.startScreenShare()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(s),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,r)}return void UI.updateBanner(Resource.getRealValue("conference.presentation.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(e.getPresentationOwnerName())),2e3,!0)}if(e.hasScreenShare()&&!e.isScreenSharer()){var a=e.getScreenSharerId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){r=function(){e.disconnectScreenDownStream(a),ConferenceUI.startScreenShare()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(a),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,r)}return void ZCSmartConferenceUI.showScreenAlreadySharedInfo(e)}}else MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.SCREEN,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestScreenStream((function(e){MediaManager.resetStreamRequested(),ConferenceImpl.addScreenInSession(e)}),(function(e,t){MediaManager.resetStreamRequested(),void 0!==e&&MediaManager.handleMediaError(e,t)}),(function(){ConferenceHandler.UIEvents.stopScreenShare()}),MediaManager.getComputerAudioConstraints(),void 0,void 0,!0);else UI.updateBanner(Resource.getRealValue("media.presentation.ss.not.allowed"),2e3,!0)}else MediaManager.showExtensionInstallPreview("conferencebutton")},showScreenShareSwitchDialog:function(){var e=ConferenceImpl.getCurrentSession(),t=e.getScreenSharer().getId(),n=Users.getName(t,e.getScreenSharer().getName()),i="conference.cohost.end.screenshare";e.isCurrentUserHost()&&(i="conference.host.end.screenshare"),$WC.$Dlg.confirm({id:"screenshare_end_alert",version:2,class:"alert_dialog media-confirm-dialog",headerhtml:$WC.$Dlg.frameHeaderHTML({header:Resource.getRealValue("media.stop.ongoing.ss")}),bodyhtml:$WC.$Dlg.frameBodyInfoHTML({info:[Resource.getRealValue(i,[n])]}),buttons:[{text:Resource.getRealValue("conference.share.screen"),action:function(){ConferenceAPI.endScreenShare(e.getId(),e.getScreenSharer().getId(),(function(){e.disconnectScreenDownStream(t),ConferenceUI.startScreenShare()})),$WC.$Win.destroy("screenshare_end_alert")}}]})},resetScreenShareOption:function(){var e=this.getConferenceMinimizedWindow();e.removeClass("huddle_screen_share_ind"),e.find("[screen_share_indicator_v2]").addClass("zc-av-hide"),ConferenceImpl.hasCurrentSession()&&ConferenceImpl.getCurrentSession().resetMiniViewScreenShareIndicationClosed(),$("#conferencewindow").find("[screen_share_indicator_v2]").addClass("zc-av-hide"),$('[conferencebutton][purpose="stopScreenShare"]').attr({purpose:"startScreenShare","tooltip-title":Resource.getRealValue("avcliq.media.screenshare.start")}).removeClass("zcf-scrn-shr-stop").addClass("zcf-sharescrn")},setMicMutedOption:function(){this._setMicMutedOption(!1)},setMicMutedOptionInPreview:function(){this._setMicMutedOption(!0)},_setMicMutedOption:function(e){var t=$('[conferencebutton][purpose="muteAudio"]'),n=e?MediaUtil.getMicOnToolTipForPreview():MediaUtil.getMicOnToolTip();t.addClass("zcf-mic-mute").removeClass("zcf-mic").attr({purpose:"unmuteAudio","tooltip-title":n})},setVideoMutedOption:function(){$('[conferencebutton][purpose="muteVideo"]').addClass("zcf-video-mute").removeClass("zcf-video").attr({purpose:"unmuteVideo",title:Resource.getRealValue("videochat.cameraon")})},getConferenceWindows:function(){return $("#conferencewindow, #conferenceminimizedwindow")},updateMuteRestrictionStatus:function(e,t,n,i,r,o,s,a){if(a&&!e&&i.isAudioMuted()){var c=i.getAudioMutedBy(),d=[],l=s?"conference.user.host.muted":"conference.all.host.muted";if(void 0!==c&&!n.isHost(c)){var u=n.getMember(c),f=void 0;u&&(f=u.getName()),void 0!==(f=Users.getName(c,f))&&(d=[f],l=s?"conference.user.cohost.muted":"conference.all.cohost.muted")}UI.updateBanner(Resource.getRealValue(l,d),2e3,!1)}i.isAudioUnmuteRestricted()?this.addUnmuteRestrictedHelpTip(n):(this.removeUnmuteRestrictedHelpTip(n),e&&!o&&this.showUnmuteConfirmPrompt(n,r,s,!t))},addUnmuteRestrictedHelpTip:function(e){this.updateAudioMutedInfo(e),this.updateMutedInfoInList(e,e.getCurrentMember());var t=e.getCurrentMember();if(!t.isCohost()&&t.isAudioUnmuteRestricted()&&t.isAudioMuted()){ConferenceUI.closeUnmuteConfirmPrompt(),ConferenceUI.closeSpeechDetectedInfo();var n=ConferenceUI.getConferenceWindows();n.addClass("smartconf-unmute-restricted-user"),$WC.$Win.isExist("conference_settings_win")&&$WC.$Win.get("conference_settings_win").addClass("smartconf-unmute-restricted-user");var i=n.find('[conferencebutton][purpose="unmuteAudio"]').removeAttr("tooltip-title");i=i.add(n.find("[rhsAudioMutedStatus]"));var r=t.getAudioUnmuteRestrictedBy(),o=e.isAudioUnmuteRestrictedForAllParticipants()?"conference.unmute.host.restricted":"conference.user.unmute.host.restricted",s=[];if(void 0!==r&&!e.isHost(r)){var a=e.getMember(r),c=void 0;a&&(c=a.getName()),void 0!==(c=Users.getName(r,c))&&(s=[c],o=e.isAudioUnmuteRestrictedForAllParticipants()?"conference.unmute.cohost.restricted":"conference.user.unmute.cohost.restricted")}var d=[o];for(var l of s)d.push(l);var u=ZCSmartConferenceTemplates.getHelptipCntHtml("audioUnmuteRestrictCnt",d),f=Resource.getRealValue(o,s);i.each((function(){var e=$(this),t=e.find("#audioUnmuteRestrictCnt");0===t.length?e.append(u):t.text(f)}))}},removeUnmuteRestrictedHelpTip:function(e){this.updateAudioMutedInfo(e),this.updateMutedInfoInList(e,e.getCurrentMember());var t=ConferenceUI.getConferenceWindows();t.removeClass("smartconf-unmute-restricted-user"),$WC.$Win.isExist("conference_settings_win")&&$WC.$Win.get("conference_settings_win").removeClass("smartconf-unmute-restricted-user"),t.find('[conferencebutton][purpose="unmuteAudio"]').attr("tooltip-title",MediaUtil.getMicOnToolTip()).find("#audioUnmuteRestrictCnt").remove(),t.find("[rhsAudioMutedStatus]").find("#audioUnmuteRestrictCnt").remove()},showUnmuteConfirmPrompt:function(e,t,n,i){var r=e.getCurrentMember();if(r.isAudioMuted()&&!r.isSilentMember()&&!r.isAudioUnmuteRestricted()){var o=!0;void 0!==t&&(o=t===e.getHostId());var s=["conference.focused.mode.mute.allowed"];i?s=o?["conference.host.unmute.request"]:["conference.cohost.unmute.request"]:n&&(s=o?["conference.user.unmute.allowed"]:["conference.cohost.user.unmute.allowed"]);var a=void 0;if(o)a=Resource.getRealValue(s[0]);else{var c=void 0,d=e.getMember(t);d&&(c=d.getName()),c=Users.getName(t,c),a=Resource.getRealValue(s[0],c),s.push(c)}var l=ZCSmartConferenceTemplates.getHelptipConfirmCntHtml({id:"allowUnmuteCnt",contentParams:s,acceptButton:{purpose:"unmuteAudioFromHelptip",contentKey:"chat.unmute",customAttribute:"conferencebutton"},declineButton:{purpose:"closeAllAllowUnmutePrompt",contentKey:"conference.stay.muted",customAttribute:"smartconferencebutton"}});ConferenceUI.getConferenceWindows().each((function(){var e=$(this),t=e.find("#allowUnmuteCnt");0===t.length?e.find('[conferencebutton][purpose="unmuteAudio"]').after(l):t.find("[content]").text(a)}))}},showSpeechDetectedInfo:function(){ConferenceUI.getConferenceWindows().each((function(){var e=$(this);if(0===e.find("#allowUnmuteCnt").length&&0===e.find("#speech_detected_info").length){var t=e.find('[conferencebutton][purpose="unmuteAudio"]');t.append(ZCSmartConferenceTemplates.getHelptipCntHtml("speech_detected_info",["avcliq.media.speech.detected.info",MediaUtil.getMuteShortCutContent()])),t.append(ZCSmartConferenceTemplates.getSpeechIndicatorHtml()),e.addClass("smartconf-speech-ind")}}))},closeUnmuteConfirmPrompt:function(){ConferenceUI.getConferenceWindows().find("#allowUnmuteCnt").remove()},closeSpeechDetectedInfo:function(){var e=ConferenceUI.getConferenceWindows();e.find("#speech_detected_info").remove(),e.find("#speech_detected_ind").remove(),e.removeClass("smartconf-speech-ind")},handleReplacedHostCallback:function(e,t,n,i){if(t){e.replaceHost(t,n,i);var r=e.getMember(t);if(r&&r.resetAllPresentationRequests(),ConferenceImpl.getCurrentUserId()===t){ConferenceAPI.getHostDetails(e.getId(),(function(t){if(void 0===t)return;e.updateGuestConfigurations(t.configurations),e.setPublicUrl(t.public_url),t.presentation_requests&&(e.setRequestedPresentationsData(t.presentation_requests),ConferenceUI.updatePresentationRequestsList(e)),t.waiting_lobby_requests&&(e.setWaitingLobbyRequests(t.waiting_lobby_requests),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(e));let n=t.streaming_id;void 0!==n?ZCSmartConferenceImpl.handleStartStreaming(e,n):ZCSmartConferenceImpl.handleStopStreaming(e)}))}}},handleReplacedHost:function(e,t,n){var i=e.getMember(t);if(i&&(ConferenceUI.modifyUserInList(e,t),ConferenceUI.updateHostIndicator(e,t)),e.getMember(n)&&(ConferenceUI.modifyUserInList(e,n),ConferenceUI.updateHostIndicator(e,n)),e.isCurrentUser(t))UI.updateBanner(Resource.getRealValue("conference.host.you.assigned"),2e3,!1),this.updateHostOptions(e);else{e.isCurrentUser(n)&&this.updateHostOptions(e);var r=void 0;i&&(r=i.getName()),UI.updateBanner(Resource.getRealValue("conference.host.assigned.info",Users.getName(t,r)),2e3,!1)}},updateHostOptions:function(e){this.updateCohostOptions(e);var t=$("#conferencewindow, #conferenceminimizedwindow"),n=e.isCurrentUserHost();t.find('[conferencebutton][purpose="stopRecording"]').toggleClass("dN",!n);var i=n?"conference.end":"conference.leave";t.find('[conferencebutton][purpose="leave"]').attr("tooltip-title",Resource.getRealValue(i))},updateHostIndicator:function(e,t){var n=$.escapeSelector(t);$("#usercard"+n+", #audio_grid_wrp [audio_grid_box][user_id="+n+"]").find("[host_indicator]").toggleClass("hide",!e.isHost(t))},updateCohostOptions:function(e){var t=$("#conferencewindow"),n=e.hasHostPermission();t.toggleClass("smartconf-no-perm",!n),ConferenceUI.setParticipantMuteAllOption(e),ConferenceUI.resetMuteOptionsInParticipantList(e);var i=e.getCurrentMember();if(!i.isAudioUnmuteRestricted()||i.isCohost()||e.isHost(i.getId())?this.removeUnmuteRestrictedHelpTip(e):this.addUnmuteRestrictedHelpTip(e),n){if(ZCSmartConferenceUI.setNvfCountInUI(e),t.find("[inviteUsersButton]").length<1&&(e.isThreadChatAllowed()||e.isPersonalScope())&&$($WC.template.replace(ConferenceTemplates.inviteUsersOption,{$title:"contact.invite"})).insertBefore(t.find("#bottom_band_video_preview")),i.isCohost()&&$.isEmptyObject(e.getGuestConfigurations())){ConferenceAPI.getHostDetails(e.getId(),(function(t){if(void 0===t)return;e.updateGuestConfigurations(t.configurations),e.setPublicUrl(t.public_url),t.presentation_requests&&(e.setRequestedPresentationsData(t.presentation_requests),ConferenceUI.updateHeadersStatus(e)),t.waiting_lobby_requests&&(e.setWaitingLobbyRequests(t.waiting_lobby_requests),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(e));let n=t.streaming_id;void 0!==n?ZCSmartConferenceImpl.handleStartStreaming(e,n):ZCSmartConferenceImpl.handleStopStreaming(e)})),ConferenceUI.checkAndRemoveEditRequestButton()}}else $("#non_verbal_feedback").children().addClass("dN"),ConferenceUI.addRequestEditWhiteboardOption(),ConferenceUI.resetHostPermissions(e);this.modifyRequestedSpeakersInList(e),ConferenceUI.updatePresentationRequestsList(e),ConferenceUI.updateUserInfoInWhiteBoardContainer(e)},modifyRequestedSpeakersInList:function(e){if(void 0!==ZCSmartConferenceUI.getListViewInstance()){var t=e.getRequestedSpeakers();for(var n in t)this.modifyUserInList(e,n)}},resetMuteOptionsInParticipantList:function(e){$("#conferencewindow").find("#smartconferenceusersection").find("[conferenceparticipant]").each((function(){var t=$(this),n=t.attr("user_id"),i=e.getMember(n);i&&ZCSmartConferenceUI.setParticipantMuteOption(e,i,t)}))},isCurrentChat:function(e){return $("#conferencechatsection").find("#"+e).length>0},isRhsOpen:function(){return $("#conferencewindow").hasClass("show-aside")},isChatInView:function(){return this.isRhsOpen()&&$("#conferencerhscnt").hasClass("huddl-chat-view")},isInMinimizedView:function(){return ConferenceImpl.getCurrentSession()&&ConferenceImpl.getCurrentSession().isInMinimizedView()},isInMaximizedView:function(){return!this.isInMinimizedView()},handleGetMeFront:function(e){var t=ChatUI.exist[e];t&&(Config.isConferenceChatSwitcherEnabled()?this.handleNewChatWindowCreated(t.win(),e):this.handleChatWindowCreated(t))},setUnreadMessageCount:function(e,t){if(ConferenceImpl.isValidChatForCurrentSession(e)){var n=Chat.isThreadChatByChid(e),i=t||0,r=ConferenceImpl.getCurrentSession();r.isThreadChatAllowed()&&(i=n?ConversationsList.getUnreadCount(ConversationsList.getParentChatId(e)):ConversationsList.getUnreadCount(ConferenceImpl.getCurrentSession().getThreadChatId()));var o=$("[conferenceunreadmsgcount]");if(r.isThreadChatAllowed()){var s=o.filter(n?"#conferencethreadchatunreadcount":"#conferenceparentchatunreadcount");t?s.text(t).show():s.hide().empty(),o=o.not("#conferencethreadchatunreadcount,#conferenceparentchatunreadcount")}i?o.text(i).show():o.hide().empty()}},updateConferenceUIStyle:function(){var e=ConferenceImpl.getCurrentSession();if(e){var t=Conference.domCache.get("#conferencewindow"),n=t.find("#conferencerhscnt");if(ZCSmartConferenceUI.closeChatNotification(),Conference.hideAssociatedResourceIFrame(e.getId()),Conference.hideRhsNotesIFrame(e.getId()),n.hasClass("huddl-chat-view")||n.addClass("huddl-chat-view").removeClass("huddl-participant-view huddl-associatedresource-view huddl-notes-view"),ZCSmartConferenceUI.resetHeaderOptions(t,ZCSmartConferenceUI.headerOptions.CHAT),ConferenceUI.setChatWindowFocus(),WmsImpl.isGuestConferenceUser())return t.find('[purpose="chatview"]').show(),void t.addClass("show-aside");if(!t.hasClass("show-aside"))ConferenceUI.handleResize(-ConferenceUI.getRhsWidth()),ConferenceHandler.UIEvents.handlePopups(),ZCTrack.track("CONFERENCE_CHAT_OPENED"),e.isInGalaxyLayout()&&Conference.domCache.get("#conferencevideowrapper").css("width",""),e&&e.hasOngoingPresentation()&&ConferenceUI.adjustPresenterViewWithRHSWindow(e)}},fetchChat:function(){WmsImpl.isGuestConferenceUser()&&$zcg.guestChatDetails&&!Conference.isGuestChatLoaded()?GuestChatView.loadChat($zcg.guestChatDetails):ConferenceImpl.attachChat()},openChatInRHS:function(e){if(Config.isConferenceChatSwitcherEnabled()){if(!ZCSmartConferenceImpl.getCurrentActiveSession())return;return this.fetchChat(),void this.updateConferenceUIStyle()}var t=ConferenceImpl.getCurrentSession();if(t){WmsImpl.isGuestConferenceUser()&&$zcg.guestChatDetails&&!Conference.isGuestChatLoaded()?GuestChatView.loadChat($zcg.guestChatDetails):ConferenceImpl.attachChat(e);var n=$("#conferencewindow"),i=n.find("#conferencerhscnt");if(ZCSmartConferenceUI.closeChatNotification(),Conference.hideAssociatedResourceIFrame(t.getId()),Conference.hideRhsNotesIFrame(t.getId()),i.hasClass("huddl-chat-view")?$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN"):(i.addClass("huddl-chat-view").removeClass("huddl-participant-view huddl-associatedresource-view huddl-notes-view"),$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN")),ZCSmartConferenceUI.resetHeaderOptions(n,ZCSmartConferenceUI.headerOptions.CHAT),ConferenceUI.setChatWindowFocus(),WmsImpl.isGuestConferenceUser())return n.find('[purpose="chatview"]').show(),void n.addClass("show-aside");n.hasClass("show-aside")||(ConferenceUI.handleResize(-ConferenceUI.getRhsWidth()),n.addClass("show-aside"),ConferenceHandler.UIEvents.handlePopups(),ZCTrack.track("CONFERENCE_CHAT_OPENED"),t.isInGalaxyLayout()&&$("#conferencevideowrapper").css("width",""),ConferenceUI.setChatWindowFocus(),t&&t.hasOngoingPresentation()&&ConferenceUI.adjustPresenterViewWithRHSWindow(t))}},adjustPresenterViewWithRHSWindow:function(e){var t=e.hasWhiteBoard()?$("#conferencewbwrapper"):e.hasPresentation()?$("#conferencepresentationwrapper"):$("#conferencevideowrapper"),n=t.find("#presenter_view");n.is(":visible")&&ZCSmartConferenceUI.adjustContainerView(n,t,ZCMediaConstants.minimizedWindowRange.visibleArea)},canRenderChatWindow:function(e){var t=ChatUI.getWin(e),n=ZCSmartConferenceImpl.getCurrentActiveSession();return!(!n||!t)&&(!n.isInMinimizedView()&&!n.isMigratedForRecording()&&((!n.getActiveChatId()||n.getActiveChatId()===e)&&!this.isSwitchChatOnProgress))},handleNewChatWindowCreated:function(e,t){if(this.canRenderChatWindow(t))return ConferenceChatWindow.hasChatExistInViewPort(t)?void ConferenceChatWindow.handleIfChatExists(t):void ConferenceChatWindow.init().render(e,t)},handleChatWindowCreated:function(e,t,n){if(Config.isConferenceChatSwitcherEnabled()){n=n||e.chid;var i=ChatUI.getWin(n);i&&this.handleNewChatWindowCreated(i.win(),n)}else{var r=ConferenceImpl.getCurrentSession();if(ConferenceImpl.hasCurrentSession()&&!$("#conferenceminimizedwindow").length&&!r.isMigratedForRecording()){var o=e.chid,s=$("#conferencechatsection"),a=e.isDummyChat(),c=r.getActiveChatId();if(!c||c===o){if(a&&(r.isThreadChatAllowed()?r.setDummyThreadChatId(o):(r.setDummyChatId(o),e.handleEmptyState()),DummyCwinUtils.isDummyCwinExists(o))){var d=r.getMembersCount();r.getConfigurations().isChatAccessibleToExternalUser()||(d-=r.getGuestMembersCount()),(e=ChatUI.exist[o])&&e.updateChatParticipants(Resource.getRealValue(d<2?"channel.tip.joinedparticip":"chat.participants.count",d+""))}if(s.find("#"+o).length)return a||e.focus(),"function"==typeof t&&t(),ZCSmartConferenceUI.addToggleForRHSChatHeader(r,s),void s.find('[purpose="chatview"]').show();MainUI.handleIframes(o),WmsImpl.isGuestUser()||ChannelTabsUI.switchToMessagesTab(o),e.isThreadChat()&&NestedChatUI.isExist(e.getChid())&&e.popOut();var l=e.win();s.html(l),ZCSmartConferenceUI.addToggleForRHSChatHeader(r,s),l.show(),CodeSnippet.handleThemeForAVChat(!0),ZCScroll.customScroll(l.find("#chatbody"),!0),e.getScrollDown(),e.focus(),"function"==typeof t&&t()}}}},handleChatWindowClosed:function(e){ConferenceImpl.isValidChatForCurrentSession(e)&&($("#conferencechatsection").empty(),ConferenceHandler.UIEvents.closeRHS())},handleChatWindowBeforeClose:function(e){var t=ConferenceImpl.getCurrentSession();if(t){var n=e.chid;if(!ConferenceImpl.isValidChatForCurrentSession(n)&&t.getSwitchedChatId()!=n)return;t.getActiveChatId()===n&&ZCSmartConferenceImpl.removeChat(n,t),ConferenceUI.isChatInView()&&ConferenceHandler.UIEvents.closeRHS()}},setChatWindowFocus:function(){var e=ConferenceImpl.getCurrentSession();if(e.hasChatId()&&ConferenceUI.isChatInView()){var t=ChatUI.exist[e.getActiveChatId()];t&&(t.getScrollDown(),t.focus())}},setSessionActive:function(){$("#conferencewindow, #conferenceminimizedwindow").addClass("huddle-session-active");var e=ConferenceImpl.getCurrentSession();e&&(e.hasChatId()?ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE):e.isQuickStartPreview()&&ZCSmartConferenceUI.showV2InviteUserPanel(e))},closeRoom:function(){ConferenceImpl.isHuddleTab()&&window.history.pushState({},null,$Util.getUrlPrefix()+"/index.do"),MediaUtil.resetDarkMode();var e=$("#conferencewindow");e.hide(),Conference.isRetryEnabled()&&ZCSmartConferenceImpl.stopInitialRetry(e.attr("session_key")),MediaUtil.removeVideoElemsStreamInContainer(e),e.remove(),Conference.removeAssociatedResourceIFrame(),Conference.hideRhsNotesIFrame(void 0,!0),ConferenceUI.clearConferenceWindowDoms(),ConferenceImpl.clearAllInitialScreenOfferMsgObjs(),Clickoutside.clear("smartconf-reactions"),Clickoutside.clear("conf_user_options"),Clickoutside.clear("invite_users_panel"),Clickoutside.clear("conf_title_edit")},showEndState:function(e,t,n,i,r){var o=$("#conferencewindow");o.html(ZCSmartConferenceTemplates.getEndStateHtml(t,n,i,r)),Conference.isRetryEnabled()&&ZCSmartConferenceImpl.stopInitialRetry(e.getSessionKey()),WmsImpl.isGuestUser()?ZCSmartConferenceUI.showFeedback(e,!0,!1,o):(clearTimeout(ConferenceUI.roomCloseTimeout),ConferenceUI.roomCloseTimeout=setTimeout((function(){ConferenceUI.closeRoom(),ConferenceUI.roomCloseTimeout=void 0,ZCSmartConferenceUI.showFeedback(e,!1,!1)}),2e3))},playIncomingTone:function(){1===Settings.getFromObj("globalsoundnotify")&&1===Settings.getFromObj("av_call_sound_notify")&&(Sound.custom.stop("incomingmediacall"),Sound.custom.play("incomingmediacall",$zcg._MEDIADEFAULTSTATICURL+MediaCallConstants.MEDIA_PATH+MediaCallConstants.fileNames.INCOMING_TONE,{loop:!0}))},updateCard:function(e){var t=e.getId(),n=$("#usercard"+$.escapeSelector(t));if(ZCSmartConferenceUI.updateNvfInfoInMediaContainer(n,e,ConferenceImpl.getCurrentSession()),ZCSmartConferenceUI.showGifInMediaContainer(n,e,ConferenceImpl.getCurrentSession()),!WmsImpl.isLocalUser(t)){var i=e.getEmailId()||"";if(!$WC.Util.isEmpty(i)){var r=n.find("[secondary_info]");r.length?(r.text(i),r.attr("title",i)):n.append($WC.template.replace('<span secondary_info class="bcast-card-subtitle mT5 ellips" title="{{secondary_info}}">{{secondary_info}}</span>',{secondary_info:i}))}var o=e.getLocation()||e.getDepartmentName()||"";if(!$WC.Util.isEmpty(o)){var s=n.find("[tertiary_info]");s.length?(s.text(o),s.attr("title",o)):n.append($WC.template.replace('<span tertiary_info class="bcast-card-subtitle mT5 ellips" title="{{tertiary_info}}">{{tertiary_info}}</span>',{tertiary_info:o}))}}},updateParticipantStatus:function(e){var t=$.escapeSelector(e),n=$("#conferencewindow").find('[conferenceparticipant][user_id="'+t+'"], [pendingparticipant][user_id="'+t+'"]');"undefined"!=typeof Contacts&&n.length>0&&(Contacts.isExist(e)||WmsImpl.isLocalUser(e))&&n.find("#userstatus").attr("class",Contacts.getStatusStyle(e))},pipUtil:{getMediaContainersForPIP:function(){var e=ConferenceImpl.getCurrentSession(),t=ConferenceUI.getConferenceMinimizedWindow(),n=void 0;return e.hasScreenShare()&&!e.isScreenSharer()&&(n=e.isInMinimizedView()?t.find("#conferenceminimizedscreencnt"):ConferenceUI.getConferenceWindow().find("[screencontainer]")),{screenContainer:n}},paintMainSpeakerView:function(e,t){var n=e.getContext("2d"),i=new AVCliqDimensions(0,0,e.width,e.height),r=ConferenceImpl.getCurrentSession(),o=void 0!==t;if(ZCPIPUtil.applyCanvasDimension(n,o?ZCMediaConstants.pip.videoWinDimension:ZCMediaConstants.pip.audioWinDimension),ZCPIPUtil.paintMainBackground(n,i),o)ZCPIPUtil.paintEachVideoInPIP(n,t,{muted:!1,mirror:!1},i.clone());else{var s=r.getMember(r.getActiveSpeaker()),a=Users.getName(s.getId(),s.getName()),c=s.isCurrentUser()?Resource.getRealValue("avcliq.media.pip.speaking.you"):Resource.getRealValue("avcliq.media.pip.speaking",a),d=WmsImpl.isGuestUser()?$("#conferencesessionsubtimer"):$("#conferenceaudiominviewpipsessiontimer"),l=d.find("[hours]").text(),u=d.find("[minutes]").text(),f=d.find("[seconds]").text(),m=parseInt(l)>0,C=(m?l+":":"")+u+":"+f;i.alterMeasurements(e.width,70),ZCPIPUtil.paintBackground(n,"rgba(0,0,0,0.4)",i),i.moveAxis(25,50),ZCPIPUtil.drawText(n,"\ue991",i,{font:"33px ZoFo-ChatBar-v2"}),i.moveAxis(50,-5),ZCPIPUtil.drawText(n,r.getTitle(),i,{maxWidth:e.width/2,font:"27px Lato, sans-serif"});var p=r.getMembersCount(),h=p.toString().length>=3;i.resetAxis(),i.moveAxis(e.width-(h?85:50),50),ZCPIPUtil.drawText(n,p,i,{font:"30px Lato, sans-serif"}),i.moveAxis(-40,2),ZCPIPUtil.drawText(n,"\ue993",i,{font:"33px ZoFo-ChatBar-v2"});var g=m?120:80;i.moveAxis(-(g+20),-35),i.alterMeasurements(g,40),ZCPIPUtil.drawRoundedCornerRectangle(n,i,10,"#de3535"),i.moveAxis(m?12:10,30),ZCPIPUtil.drawText(n,C,i,{font:"24px Lato, sans-serif"}),i.resetAxis(),i.moveAxis(e.width/2,e.height/2),ZCPIPUtil.drawUserImage(n,s.getId(),a,i,100),i.resetAxis(),i.moveAxis(e.width/2,e.height-60),ZCPIPUtil.drawText(n,c,i,{font:"27px Lato, sans-serif",align:"center"})}},paintVideosForPIP:function(){var e=ConferenceImpl.getCurrentSession().getCanvasForPIP(),{screenContainer:t}=this.getMediaContainersForPIP();this.paintMainSpeakerView(e,t)}}},(ConferenceImpl={MAX_PARTICIPANTS:Conference.MAX_PARTICIPANTS,MAX_PARTICIPANTS_AUDIO:Conference.MAX_PARTICIPANTS_AUDIO,MAX_UNIFIED_PARTICIPANTS_AUDIO:Conference.MAX_UNIFIED_PARTICIPANTS_AUDIO,MAX_UNIFIED_PARTICIPANTS_VIDEO:Conference.MAX_UNIFIED_PARTICIPANTS_VIDEO,MIXED_AUDIO_CONF_LIMIT:Conference.MIXED_AUDIO_CONF_LIMIT,MIXED_VIDEO_CONF_LIMIT:Conference.MIXED_VIDEO_CONF_LIMIT,SMARTMODE_MAX_PARTICIPANT_COUNT:Conference.SMARTMODE_MAX_PARTICIPANT_COUNT,SMARTMODE_STREAMING_MAX_COUNT:Conference.SMARTMODE_STREAMING_MAX_COUNT,recordingIndex:void 0,_initialScreenOfferMsgObj:{},previewTrackerObj:{mediaPermissionGiven:!1,mediaErrorShown:!1,started:!1},previewDetails:{localStream:void 0,localAudioStream:void 0,localVideoStream:void 0,chosenType:void 0},notificationTypes:{joined:1,removed:4,switched:5,ringing:6,declined:7,no_response:8,left:2},getCurrentUserId:function(){return WmsImpl.isGuestUser()?$zcg._ANONID:$zcg._ZUID},getConnectionMode:function(){return WebRTCPeerConnectionConstants.connectionModes.UNIFIED},setInitialScreenOfferMsgObj:function(e,t){this._initialScreenOfferMsgObj[e]=t},clearInitialScreenOfferMsgObj:function(e){delete this._initialScreenOfferMsgObj[e]},clearAllInitialScreenOfferMsgObjs:function(e){this._initialScreenOfferMsgObj={}},getInitialScreenOfferMsgObj:function(e){return this._initialScreenOfferMsgObj[e]},getParticipantLimit:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=e||(n?n.getType():Conference.types.VIDEO);t=t||(n?n.getConnectionMode():WebRTCPeerConnectionConstants.connectionModes.PLANB);var r=i===Conference.types.VIDEO;return WebRTCPeerConnectionConstants.isUnifiedPlan(t)?Conference.isAutoStreamingEnabled()&&r?this.SMARTMODE_STREAMING_MAX_COUNT:this.SMARTMODE_MAX_PARTICIPANT_COUNT:r?this.MAX_PARTICIPANTS:this.MAX_PARTICIPANTS_AUDIO},writeToLog:function(e,t){this._logString=this._logString+"\n["+new Date(Date.now())+"] -> "+e,void 0!==t&&(this._logString=this._logString+" "+JSON.stringify(t,null,4))},getAndSetPeopleInfo:function(e){},handlePreviewClose:function(e){window.history.pushState({},null,$Util.getUrlPrefix()+"/index.do");var t=$("#startconference");0!==t.length&&(t.is("[started]")||(this.closeStreamsInPreview(),ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.rhsStartUIClosed)),ZCTrack.track(e||"CONFERENCE_PREVIEW_STATS",this.previewTrackerObj),this.previewTrackerObj={mediaPermissionGiven:!1,mediaErrorShown:!1,started:!1},this.previewDetails={localStream:void 0,localAudioStream:void 0,localVideoStream:void 0,chosenType:void 0},MediaUtil.removeVideoElemsStreamInContainer(t))},handleDeviceChange:function(e,t,n){var i=e.getCurrentMember(),r=i.getAVStream(),o=void 0!==t[ZCMediaDevices.kinds.AUDIO_OUTPUT];if(o){var s=[];if(e.isMixingEnabled())s=Object.values(e.getAudioMediaContainers());else{var a=e.getMembers();for(var c in a){var d=a[c].getAudioContainer();d&&s.push(d)}}Conference.isNomenclatureEnabled()&&s.push(MediaUtil.setAndGetAudioPreviewContainer(e)),MediaManager.setPreferredAudioOutput(s)}if(t[ZCMediaDevices.kinds.AUDIO_INPUT]||t[ZCMediaDevices.kinds.VIDEO_INPUT]){var l=WebRTCUserMedia.streamTypes.AUDIO_ONLY,u=!1;t[ZCMediaDevices.kinds.AUDIO_INPUT]&&t[ZCMediaDevices.kinds.VIDEO_INPUT]?(l=WebRTCUserMedia.streamTypes.AUDIO_VIDEO,u=!0):t[ZCMediaDevices.kinds.VIDEO_INPUT]&&(l=WebRTCUserMedia.streamTypes.VIDEO_ONLY,!1,u=!0);WebRTCUserMedia.requestAndReplaceTracksInStream(r,l,(function(t){ConferenceImpl.hasCurrentSession()?(u&&t._getPrimaryVideoTrack().applyConstraints({width:{min:320,max:320},height:{min:240,max:240},frameRate:{min:15,max:15}}).catch(),i.replaceTracksInStream(t,l),i.setUpdatedAudioStatus(),n&&(MediaManager.checkAndShowMicSwitchedInfo(t,r,!0),ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(e))):WebRTCUserMedia.closeStream(t._getType())}),void 0,void 0,void 0)}else n&&o&&(MediaManager.checkAndShowAddedSpeakerSwitchedInfo(t[ZCMediaDevices.kinds.AUDIO_OUTPUT]),ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(e))},closeStreamsInPreview:function(){var e=this.previewDetails;e.localStream&&(WebRTCUserMedia.closeStream(e.localStream._getType()),e.localStream=void 0),e.localAudioStream&&(WebRTCUserMedia.closeStream(e.localAudioStream._getType()),e.localAudioStream=void 0),e.localVideoStream&&(WebRTCUserMedia.closeStream(e.localVideoStream._getType()),e.localVideoStream=void 0)},handleDevicesAddedInJoiningPage:function(e){ZCSmartConferenceImpl.getJoiningSession();var t=$("#preview_room_window");if(e[ZCMediaDevices.kinds.AUDIO_OUTPUT]){var n=t.find("#audiooutputdropdowncnt"),i=n.attr("selecteddeviceid"),r=e[ZCMediaDevices.kinds.AUDIO_OUTPUT].deviceId;r!==i&&ConferenceImpl.setDeviceInJoinRoom(n.find('[purpose="setDeviceInJoinRoom"][deviceid='+r+"]"),!0)}if(e[ZCMediaDevices.kinds.AUDIO_INPUT]){var o=t.find("#audioinputdropdowncnt"),s=o.attr("selecteddeviceid"),a=e[ZCMediaDevices.kinds.AUDIO_INPUT].deviceId;a!==s&&ConferenceImpl.setDeviceInJoinRoom(o.find('[purpose="setDeviceInJoinRoom"][deviceid='+a+"]"),!0)}},reApplyAudioOutputPreference:function(e){var t=Object.values(e.getAudioMediaContainers());t.push(MediaUtil.setAndGetAudioPreviewContainer(e)),MediaManager.setPreferredAudioOutput(t)},handleAudioUpStreamSwitchSuccess:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==n?(MediaManager.checkAndShowMicSwitchedInfo(e,t,!1),n instanceof ConferenceSession?(n.getCurrentMember().replaceTracksInStream(e,WebRTCUserMedia.streamTypes.AUDIO_ONLY),n.getCurrentMember().setUpdatedAudioStatus()):n.renegotiateAudioUpStream(e),ConferenceImpl.reApplyAudioOutputPreference(n),ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(n)):WebRTCUserMedia.closeStream(e._getType())},handleTrackEndOnJoinPage:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession();if("audio"===t.kind){var i=n.getAudioUpStream();if(i){var r=i._getPrimaryAudioTrack();if(r&&r.id===t.id){WebRTCUserMedia.closeStream(i._getType()),n.setAudioUpStream(void 0);var o=function(e){if(e._setConnectionRestrictionStatus(i),!ZCSmartConferenceImpl.hasJoiningSession())return ZCSmartConferenceImpl.hasCurrentActiveSession()?void ConferenceImpl.handleAudioUpStreamSwitchSuccess(e,i):void WebRTCUserMedia.closeStream(e._getType());n.setAudioUpStream(e),MediaManager.checkAndShowMicSwitchedInfo(e,i,!1);var t=$("#preview_room_window").find("[audiowaves]");e._startAudioFrequencyAnalyser((function(e){return MediaUtil.adjustAudioPulsesCnt(t,e),!0})),ZCSmartConferenceUI.updateAudioDevicesInJoinPreview(n),MediaManager.setPreferredAudioOutput([MediaUtil.setAndGetAudioPreviewContainer(n)])},s=function(){MediaManager.showTrackEndedInfo("audio",void 0),$("#preview_room_window").find('[purpose="toggleAudioInPreview"]').prop("checked",!1),ZCSmartConferenceImpl.changeAVStatusInPreview("audio",!0),ZCSmartConferenceUI.updateAudioDevicesInJoinPreview(n),MediaManager.setPreferredAudioOutput([MediaUtil.setAndGetAudioPreviewContainer(n)])};WebRTCUserMedia.requestAudioStream(o,(function(e){if(e&&e.name===WebRTCUserMedia.errors.OverconstrainedError&&"deviceId"===e.constraint){var t=function(){ZCMediaDevices.clearPreferredAudioInputDevice(),WebRTCUserMedia.requestAudioStream((function(e){o(e)}),s,void 0,void 0)};WebRTCUserMedia.getMediaDevices(t,t)}else s()}))}}}},handleTrackEnd:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i=n instanceof ConferenceSession?n.getCurrentMember().getAVStream():n.getAudioUpStream();ZCMediaUtil.switchToAvailableTrackForTrackEnd(e,t,i,n,{successCB:(e,t)=>{ConferenceImpl.handleAudioUpStreamSwitchSuccess(e,t)},failureCB:()=>{var e=ZCSmartConferenceImpl.getCurrentActiveSession();if(e){var t=ZCMediaPreferences.isSpeechDetectionAllowedByUser();if(t&&WebRTCUserMedia.closeStream(i._getType()),e instanceof ConferenceSession){var n=e.getCurrentMember();n&&t&&(n.setLocalAudioUpStream(void 0),n.updateAudioUpStreamInContainer()),ConferenceHandler.UIEvents.muteAudio()}else t&&e.setAudioUpStream(void 0),ZCSmartConferenceHandler.UIEvents.muteAudio();MediaManager.showTrackEndedInfo("audio",(function(){$WC.$Win.isExist("conference_settings_win")?e instanceof ConferenceSession?ConferenceHandler.UIEvents.setMediaDevices():ZCSmartConferenceHandler.UIEvents.setMediaDevices():ZCSmartConferenceUI.createDeviceSettings(void 0,void 0,!0)})),ConferenceImpl.reApplyAudioOutputPreference(e)}},hasCurrentSession:()=>ZCSmartConferenceImpl.hasCurrentActiveSession()})}},dataModeVsStreamType:{51:WebRTCUserMedia.streamTypes.AUDIO_ONLY,52:WebRTCUserMedia.streamTypes.AUDIO_VIDEO,53:WebRTCUserMedia.streamTypes.AUDIO_VIDEO},dataModeVsConnectionType:{51:WebRTCPeerConnectionConstants.connectionTypes.AUDIO,52:WebRTCPeerConnectionConstants.connectionTypes.VIDEO},serverConstantVsStreamType:{video:WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_VIDEO),audio:WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY)},init:function(){ConferenceUI.bindEvents(),ZCSmartConferenceImpl.init()},isHuddleTab:function(){var e=window.location.href;return e.indexOf("/huddle/")>0||e.indexOf("/groupcall/")>0},isHuddleStreamingTab:function(){return window.location.href.indexOf("/huddlestream/")>0},_runningSession:null,previousSessionId:null,hasCurrentSession:function(){return null!=this._runningSession},getCurrentSession:function(){return this._runningSession},clearRunningSession:function(){this.previousSessionId=this._runningSession.getId(),this._runningSession=null},setCurrentSession:function(e){this.hasCurrentSession()&&this.getCurrentSession().terminate();this._runningSession=e,ConferenceUI.setSessionActive()},startPushToTalk:function(){var e=!1,t=this.getCurrentSession();return t.getCurrentMember().isAudioMuted()&&!t.isInMinimizedView()&&(e=ConferenceHandler.UIEvents.unmuteAudio(),t.setPushToTalkState(e)),e},stopPushToTalk:function(){var e=!1,t=this.getCurrentSession();return!t.isPushToTalkEnabled()||t.getCurrentMember().isAudioMuted()&&!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)||t.isInMinimizedView()||(e=ConferenceHandler.UIEvents.muteAudio())&&t.setPushToTalkState(!1),e},changeAVStatus:function(e,t,n){if(this.hasCurrentSession()){var i=this.getCurrentSession(),r=$Util.getSyncedCurrentTime(),o=i.getCurrentMember();if(o.handleAVStreamStatus(e,t,r,o.getId()),ZCSmartConferenceUI.setParticipantMuteOption(i,o,$("#conferencewindow").find('[conferenceparticipant][userId="'+$.escapeSelector(o.getId())+'"]')),ConferenceUI.isInMinimizedView()&&ConferenceUI.updateAVStatusInMinimizedContainer(o.getId(),e,t),!n){var s={time:r};s[e]={muted:t},ConferenceAPI.updateConnectionStatus(i.getId(),s)}"audio"===e&&(ConferenceUI.updateAudioMutedInfo(i),t&&ConferenceUI.addUnmuteRestrictedHelpTip(i)),i.isInPIP()&&("audio"===e?ZCPIPManager.toggleMicInPIP(t):ZCPIPManager.toggleCamInPIP(t))}else{var a=$("#startconference");if(a.length>0){var c=a.attr("conferencetype")==Conference.types.AUDIO;if("audio"===e){if(t)Conference.isTrackCloseEnabled()?this.previewDetails.localAudioStream&&(WebRTCUserMedia.closeStream(this.previewDetails.localAudioStream._getType()),this.previewDetails.localAudioStream=void 0,this.previewDetails.localStream=void 0):(this.previewDetails.localAudioStream._setConnectionRestrictionForAudio(),this.previewDetails.localStream._setConnectionRestrictionForAudio()),MediaUtil.updateAVStatusInContainer(a,e,t,this.previewDetails.localAudioStream);else if(this.previewDetails.localAudioStream)this.previewDetails.localAudioStream._resetConnectionRestrictionForAudio(),this.previewDetails.localStream._resetConnectionRestrictionForAudio();else{var d=function(e,t){MediaManager.resetStreamRequested(),$('[conferencebutton][purpose="muteAudio"]').addClass("zcf-mic-mute").removeClass("zcf-mic").attr({purpose:"unmuteAudio",title:MediaUtil.getMicOnToolTipForPreview()}),void 0!==e&&MediaManager.handleMediaError(e,t)},l=function(n){MediaManager.resetStreamRequested(),this.previewDetails.localAudioStream=n,this.previewDetails.localStream=n,MediaUtil.updateAVStatusInContainer(a,e,t,n)}.bind(this);MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(l,d)}return}var u=void 0;if(c){var f=c?"AUDIO_ONLY":"AUDIO_VIDEO";u=WebRTCUserMedia.getStream(WebRTCUserMedia.streamTypes[f])}else{if("audio"!==e){if(u=this.previewDetails.localVideoStream,t)u&&(WebRTCUserMedia.closeStream(u._getType()),this.previewDetails.localVideoStream=void 0,MediaUtil.updateAVStatusInContainer(a,e,t,u),a.find("#videoinputdropdowncnt").hide());else if(!u){d=function(e,t){MediaManager.resetStreamRequested(),$('[conferencebutton][purpose="muteVideo"]').addClass("zcf-video-mute").removeClass("zcf-video").attr({purpose:"unmuteVideo",title:Resource.getRealValue("videochat.cameraon")}),void 0!==e&&MediaManager.handleMediaError(e,t)};var m=function(n){MediaManager.resetStreamRequested(),this.previewDetails.localVideoStream=n;var i=$("#conferencevideopreview");MediaUtil.setStreamInContainer(ConferenceImpl.getCurrentUserId(),i,n),MediaUtil.fitVideoContainer(a.find("[conference_video_wrapper]"),i),MediaUtil.updateAVStatusInContainer(a,e,t,u),a.find("#videoinputdropdowncnt").show()}.bind(this);MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream(m,d,void 0,Conference.getVideoEffects())}return}u=this.previewDetails.localAudioStream}u._setTrackStatus(e,t),MediaUtil.updateAVStatusInContainer(a,e,t,u)}}},handlePermissionSuccess:function(){this.createChat()},storeMainChatwindowDisplayProp:function(){this.hasConferenceJoinedWhenMainChatwindowIsPresent="none"!==MainUI.container.find("#chatwindows").css("display")},hasChatWindowDOMInViewWhenStartedOrMaximized:function(){return Boolean(this.hasConferenceJoinedWhenMainChatwindowIsPresent)},handleCreateChat:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession().getId();ConferenceChatWindow.keepVisibleChats(),this.hasfetchChatPermissionNeeded()?ConferenceAPI.fetchChatPermission(e,this.handlePermissionSuccess.bind(this),(function(e){})):this.createChat()},createChat:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();if(e){var t=e.isChatToggleAllowed(),n=e.getActiveChatId(),i=e.getThreadChatId(),r=e.getDummyThreadChatId(),o=e.getDummyChatId();t&&n?this.openChatInConf(n):(i||r)&&this.openChatInConf(i||o),e.isThreadChatAllowed()?this.openChatInConf(i||r||o):e.isPersonalScope()&&void 0===e.getChatId()?this.openChatInConf(o):this.openChatInConf(e.getSwitchedChatId())}},isDummyChatId:function(e){return!!e&&("undefined"!=typeof DummyCwinUtils&&e.startsWith(DummyCwinUtils.CONSTANTS.DUMMY_CHATID_PREFIX))},updateActiveAndSwitchedChatId:function(e,t){e&&(t&&e.getActiveChatId()==t||(e.setActiveChatId(t),e.isThreadChatAllowed()&&e.setSwitchedChatId(t)))},createDetachedChat:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&!DetachedCwin.canOpenAsDetachedCwin(e))if(ConferenceUI.canRenderChatWindow(e)&&ConferenceChatWindow.hasChatExistInViewPort(e))ConferenceChatWindow.handleIfChatExists(e);else{var n={canSwitchChat:!0,switchChatSourceChid:t.getChatId(),onBeforeSwitchCB:e=>{this.updateActiveAndSwitchedChatId(t,e),ConferenceUI.setSwitchChatOnProgress(!0)},onSwitchChatCB:e=>{t.getActiveChatId()===e.switchedChid&&(this.updateActiveAndSwitchedChatId(t,e.switchedChid),ConferenceChatWindow.moveToHidePort(e.sourceChid,!0),ConferenceChatWindow.showSwitchedChat(e.switchedChid),ConferenceUI.setSwitchChatOnProgress(!1))}};DetachedCwin.create(e,n).then(t=>{ConferenceUI.handleNewChatWindowCreated(t,e)})}},createDummyChat:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();e&&(PubSub.subscribe("NotifyDummyCwinReplaceWithNormalCwin","ConferenceChatWindow",ConferenceChatWindow.updateActiveChatId),UI.isDetachedCwinLoaded?ZCSmartConferenceImpl.createDummyChatForSession(e,void 0,!0):LazyLoader.loadDetachedCwinFiles().then(()=>{ZCSmartConferenceImpl.createDummyChatForSession(e,void 0,!0)}))},openChatInConf:function(e){if(e&&!this.isDummyChatId(e)){var t=this;UI.isDetachedCwinLoaded?this.createDetachedChat(e):LazyLoader.loadDetachedCwinFiles().then(()=>{t.createDetachedChat(e)})}else{var n=ChatUI.getWin(e);n?ConferenceUI.handleNewChatWindowCreated(n.win(),e):this.createDummyChat()}},hasfetchChatPermissionNeeded:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();return e.isThreadChatAllowed()&&void 0===e.isChatPermitted()&&!WmsImpl.isGuestConferenceUser()},attachChat:function(e){if(Config.isConferenceChatSwitcherEnabled())this.handleCreateChat();else{var t=ConferenceImpl.getCurrentSession();if(!t.isThreadChatAllowed()||void 0!==t.isChatPermitted()||WmsImpl.isGuestConferenceUser()){var n=function(t){var n=ChatUI.exist[t];n?ConferenceUI.handleChatWindowCreated(n,e):"undefined"!=typeof DummyCwinUtils&&t.startsWith(DummyCwinUtils.CONSTANTS.DUMMY_CHATID_PREFIX)?ZCSmartConferenceImpl.createDummyChatForSession(ConferenceImpl.getCurrentSession(),e):ConversationsList.attachContinueActiveChat(t,!1,e)};t.isChatToggleAllowed()&&t.getActiveChatId()?n(t.getActiveChatId()):void 0!==t.getThreadChatId()?n(t.getThreadChatId()):void 0!==t.getDummyThreadChatId()&&n(t.getDummyThreadChatId()),t.isThreadChatAllowed()?void 0!==t.getThreadChatId()?n(t.getThreadChatId()):void 0!==t.getDummyThreadChatId()?n(t.getDummyThreadChatId()):ZCSmartConferenceImpl.createDummyChatForSession(t,e):t.isPersonalScope()&&void 0===t.getChatId()?void 0!==t.getDummyChatId()?n(t.getDummyChatId()):ZCSmartConferenceImpl.createDummyChatForSession(t,e):n(t.getSwitchedChatId())}else ConferenceAPI.fetchChatPermission(t.getId(),(function(){ConferenceImpl.attachChat(e)}))}},start:function(e,t,n,i,r,o){this.hasCurrentSession()||MediaManager.isRequestPending()||(MediaManager.setRequestPending({module:ZCMediaConstants.sessionTypes.CONFERENCE,request_type:ZCMediaConstants.requestTypes.START,time:Date.now()}),ConferenceAPI.start({title:e.title,conferenceType:e.conferenceType,scopeType:e.scopeType,scopeIds:e.scopeIds,cohostIds:e.cohostIds,panelListIds:e.panelListIds,spotlightUserIds:e.spotlightUserIds,allowMembersInPanelList:e.allowMembersInPanelList,audio:e.audio,video:e.video,dataMode:e.dataMode,associatedResource:e.associatedResource,configurations:e.configurations,scheduledHostId:e.scheduledHostId,eventID:e.eventID,calUID:e.calUID,recurrenceId:e.recurrenceId},(function(){MediaManager.setRequestCompleted(),"function"==typeof t&&t()}),(function(e){MediaManager.setRequestCompleted(),ConferenceUI.closeRoom(),e.message&&UI.updateBanner(e.message,2e3,!0),"function"==typeof n&&n(e)}),i,r,o))},checkAndJoinStreaming:function(e,t,n,i,r){var o=function(e){MediaManager.setRequestCompleted(),ConferenceImpl.isHuddleStreamingTab()&&($("#loadingniceurl").remove(),$("body").removeClass("chnlpermalink"),window.history.pushState({},null,$Util.getUrlPrefix()+"/index.do")),"function"==typeof i&&i(),"streaming_link_not_exist"===e.code&&UI.updateBanner(I18N("cs.link.notexist"),2e3,!0),"conference_already_ended"===e.code?UI.updateBanner(I18N("conference.expired.join"),2e3,!0):"operation_not_allowed"===e.code&&UI.updateBanner(I18N("cs.external.disabled"),2e3,!0)};MediaManager.isRequestPending()&&!r||(MediaManager.setRequestPending({module:ZCMediaConstants.sessionTypes.CONFERENCE,request_type:ZCMediaConstants.requestTypes.GET,id:e}),ConferenceAPI.get("stream-"+e,(function(i){if(MediaManager.setRequestCompleted(),i.is_active&&i.is_streaming&&i.host.id!=ConferenceImpl.getCurrentUserId()){"function"==typeof n&&n(),PrimeTimeImpl.hasCurrentSession()&&PrimeTimeImpl.getCurrentSession().getId()==primeTimeId||MediaManager.handleExistingSessions((function(){WmsImpl.isGuestUser()||Settings.isDarkModeChoosed()||Settings.loadDarkModeFiles(),PrimeTimeUI.openRoom(i.title,i.host.id,i.host.name,PrimeTime.modes.ASSEMBLY,i.scope.type,i.scope.ids,i.associated_resource,void 0,i.chat_permission),"function"==typeof t&&t(),i.mode=PrimeTime.modes.ASSEMBLY,PrimeTimeImpl.joinAssembly(i.conferenceId,i,!0,e)}))}else o(i),i.is_active?i.is_streaming||UI.updateBanner(Resource.getRealValue("cs.stopped"),2e3,!0):UI.updateBanner(Resource.getRealValue("conference.expired.join"),2e3,!0)}),o,!1))},checkAndJoin:function(e,t,n,i,r){var o={conferenceId:e,showPreview:n,encryptedResourceId:i};if(ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.checkAndJoinCalled,o),MediaManager.isRequestPending())ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.joinFlowApiInProgress);else if(MediaManager.isStreamRequested())ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.streamAlreadyRequested);else{var s=function(t,n){MediaManager.resetStreamRequested(),ConferenceImpl.isHuddleTab()&&($("#loadingniceurl").remove(),$("body").removeClass("chnlpermalink"),window.history.pushState({},null,$Util.getUrlPrefix()+"/index.do")),void 0!==t&&MediaManager.handleMediaError(t,n),ConferenceUI.resetJoiningLoader(e,CallHistoryData.getChatForOngoingCall(e),!0),ConferenceUI.removeRingingUI(e)};ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.getApiCalled);var a=ZCSmartConferenceImpl.getCurrentActiveSession(),c=void 0!==a&&a.getId()!==e;MediaManager.setRequestPending({module:ZCMediaConstants.sessionTypes.CONFERENCE,request_type:ZCMediaConstants.requestTypes.GET,id:e}),ConferenceAPI.get(e,(function(o){ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.getApiSuccess),"function"==typeof r&&r(!1),MediaManager.setRequestCompleted(),void 0!==o.conferenceId&&(e=o.conferenceId);var a=o.adhocCallDetails,c="undefined"!=typeof MediaCallImpl?MediaCallImpl.getCurrentSession():void 0,d=!1,l=Conference.isVideoConference(o.type);if(o.is_active){if(o.waiting_room)return $("#loadingniceurl").remove(),$("body").removeClass("chnlpermalink"),ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.openWaitingRoomCalled),void WaitingRoom.open(o);var u=l?new ZCSmartConferenceSession(o):new ConferenceSession(o),f=u.getConfigurations(),m=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.existingSessionCheckSuccess),WmsImpl.isGuestUser()||Settings.isDarkModeChoosed()||Settings.loadDarkModeFiles();var r=!0;if(o.configurations&&(r=f.isScreenShareAllowed(u)),Conference.isAddDeviceEnabled()&&o.is_participant&&!o.screen_share&&ZCSmartConferenceImpl.isActiveMember(o.member_type)&&r)return ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.openTransferPanelCalled),ZCSmartConferenceImpl.openTransferPanel(e,o,t),ConferenceUI.resetJoiningLoader(e,o.scope.chat_id,!0),ConferenceUI.removeRingingUI(e),void("function"==typeof t&&t());if(WmsImpl.isGuestConferenceUser()&&(n=!1),l){var s=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.preferredDevicesSynced),n&&!d?(ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.openJoinSettingsCalled),ZCSmartConferenceImpl.openJoinSettings(e,o,t)):(ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.joinFromCustomPreviewCalled),ZCSmartConferenceImpl.joinFromCustomPreview(e,o,t))};return ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.syncPreferredDevices),void MediaManager.prefetchMetaDetails(s)}if(n&&!d){s=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.preferredDevicesSynced),ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.openJoinSettingsCalled),ConferenceImpl.openJoinSettings(e,o,t)};return ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.syncPreferredDevices),void MediaManager.prefetchMetaDetails(s)}var m=function(e,t){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamError),C()},C=function(n){if(ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamObtained),MediaManager.resetStreamRequested(),d&&void 0!==c&&n){var r=c.getCurrentMember();n._isAudioTrackEnabled()&&n._setTrackStatus("audio",r.isAudioMuted()),ZCMediaPreferences.isSpeechDetectionAllowedByUser()&&r.isAudioMuted()&&n._setConnectionRestrictionStatus(),n._isVideoTrackEnabled()&&n._setTrackStatus("video",r.isVideoMuted()),ConferenceLog.writeToTempEventsLog(ConferenceLog.constants.eventsLog.joinAPICalledForCallConversion)}if(!l){var s=void 0;o.recording&&(s=o.recording_index),ConferenceUI.openRoom(o.title,o.host.id,o.host.name,o.type,o.scope,s,a,o.associated_resource,f.isGridViewAccessible(u),f.isChatAccessibleToExternalUser()),!ZCPermalink.isAccessedFromMeetingPermaLink()&&MediaManager.isChatScope(o.scope.type)||void 0===o.scope.chat_id||ConferenceUI.showRhsChatOption(u);var m=n?n._getType():WebRTCUserMedia.streamTypes.AUDIO_ONLY,C=Users.getName(ConferenceImpl.getCurrentUserId());Conference.isSmartMode(o.mode)||ConferenceUI.addAndGetMediaContainer(ConferenceImpl.getCurrentUserId(),C,e+"_"+ConferenceImpl.getCurrentUserId()+"_"+m),ConferenceUI.handleRingingStatusInUserAdd(void 0,ConferenceImpl.getCurrentUserId())}MediaManager.setRequestPending({module:ZCMediaConstants.sessionTypes.CONFERENCE,request_type:ZCMediaConstants.requestTypes.JOIN,id:e});var p={audio:{muted:!(n&&n._isAudioTrackEnabled()&&!n._isAudioRestrictedForConnection())},sessionKey:o.session_key},h=!(n&&n._isVideoTrackEnabled());l&&(p.video={muted:h});var g=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_VIDEO);(!l||Conference.isSmartMode(o.mode)&&h)&&(g=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY)),p.dataMode=g,(WmsImpl.isGuestConferenceUser()||i)&&(p.encryptedResourceId=Conference.getEncryptedResourceId()||i),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.joinApiCalled,p),ConferenceAPI.join(e,o.type,p,(function(){ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.joinApiSucess),MediaManager.setRequestCompleted(),"function"==typeof t&&t(),"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleJoined(e)}),(function(t){ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.joinApiFailed),MediaManager.setRequestCompleted();var n=l?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY;WebRTCUserMedia.closeStream(n),ConferenceUI.closeRoom(),t&&t.message&&UI.updateBanner(t.message,2e3,!0),ConferenceUI.resetJoiningLoader(e,o.scope.chat_id,!0)}))};if(d||"undefined"==typeof WaitingRoom){if(!l){s=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamRequested),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(C,m)};MediaManager.prefetchMetaDetails(s)}}else{s=function(){C(WaitingRoom.getPreviewSession().getAudioUpStream())};MediaManager.prefetchMetaDetails(s)}}.bind(this);if(void 0!==a&&c&&c.getId()===a.call_id&&(a.caller_id===ConferenceImpl.getCurrentUserId()||a.callee_id===ConferenceImpl.getCurrentUserId()))return d=!0,Conference.isSmartMode(o.mode)&&l&&WebRTCUserMedia.splitTracksInStream(c.getCurrentMember().getAVUpStream()),void m();var C=ZCSmartConferenceImpl.getCurrentActiveSession();C&&C.getId()==e?ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.sameSessionRunningAlready):(ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.existingSessionCheck),MediaManager.handleExistingSessions(m))}else{ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.alreadyEnded);var p=o.is_active?"conference.host.join":"conference.expired.join";UI.updateBanner(Resource.getRealValue(p),2e3,!0),s()}}),(function(e){ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.getApiFailed),"function"==typeof r&&r(!0),MediaManager.setRequestCompleted(),s(e)}),$("#conference-detachedwrapper").find('[conference_id="'+e+'"]').length>0,c)}},openJoinSettings:function(e,t,n,i){var r=function(r){if(MediaManager.resetStreamRequested(),Conference.isSmartMode(t.mode)||r instanceof MediaStream){$("#loadingniceurl").remove(),"function"==typeof n&&n(),t.recording&&(ConferenceImpl.recordingIndex=t.recording_index);var o={conferenceId:e,conferenceType:t.type,conferenceHostId:t.host.id,conferenceHostName:t.host.name,conferenceHostScopeId:t.conferenceHostScopeId,conferenceMode:t.mode,recordingIndex:t.recording_index,title:t.title,scope:t.scope,startTime:t.start_time,sessionId:WmsImpl.getSid(),adhocCallDetails:t.adhocCallDetails,associated_resource:t.associated_resource,configurations:t.configurations,waiting_lobby_requests:t.waiting_lobby_requests,session_key:t.session_key,presentation_requests:t.presentation_requests};t.creatorId&&(o.creatorId=t.creatorId,o.creatorName=t.creatorName);var s=new ZCSmartConferenceSession(o);s.setEncryptedResourceId(t.encryptedResourceId),s.addMember(ZCSmartConferenceImpl.getCurrentUserId(),ZCSmartConferenceImpl.getCurrentUserName(),ZCSmartConferenceConstants.memberTypes.ACTIVE),s.addMember(t.host.id,t.host.name,ZCSmartConferenceConstants.memberTypes.ACTIVE),r instanceof MediaStream?(r._hasAudioTrack()&&s.setAudioUpStream(r),r._hasVideoTrack()&&s.setVideoUpStream(r)):s.setAudioUpStreamBlockedStatus(!0),s.isCurrentUserHost()&&s.setAsNotified(),ZCSmartConferenceImpl.setJoiningSession(s),ConferenceUI.closeWaitingRoom();var a=ZCSmartConferenceImpl.getJoiningSession();a.addPreviewRoomNetworkPredictor(),ZCSmartConferenceUI.openPreviewRoom(a),s.hasVideoUpStream()&&MediaUtil.setAndPlayStreamInMediaContainer($("#smartconferencepreview"),stream,!0),s.hasAudioUpStream()||ZCSmartConferenceImpl.changeAVStatusInPreview("audio",!0)}else"function"==typeof i&&i()},o=Conference.isVideoConference(t.type),s=function(){var e=function(e){if(e instanceof MediaStream){var t=function(){r(e)};WebRTCUserMedia.getMediaDevices(t,t)}else r(e)};o?(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_VIDEO,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioVideoStream(e,i)):(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(e,e))};WebRTCUserMedia.getMediaDevices(s,s),ConferenceUI.setStreamAccess(e)},joinFromPreviewRoom:function(e){ZCSmartConferenceImpl.clearJoiningSession(),ZCSmartConferenceUI.closePreviewRoom(),ConferenceLog.setTempEventsLog(e.getEventsLogString(),e.getEventsLogObject());var t=void 0;e.isRecording()&&(t=e.getRecordingReferenceIndex(),ConferenceImpl.recordingIndex=t);var n={type:e.getScopeType(),ids:e.getScopeIds()};(n.chat_id=e.getChatId(),ConferenceUI.openRoom(e.getTitle(),e.getHostId(),e.getHost().getName(),e.getType(),n,t,e.getAdhocCallDetails(),e.getAssociatedResourceData(),e.getConfigurations().isGridViewAccessible(e)),e.isAudioUpStreamBlocked())&&$("#conferencewindow").attr("audio_stream_blocked","true");MediaManager.isChatScope(n.type)||void 0===n.chat_id||ConferenceUI.showRhsChatOption(),WmsImpl.isGuestUser()&&GuestChatUtils.proxyObjects();var i=e.getAudioUpStream(),r=i?i._getType():WebRTCUserMedia.streamTypes.AUDIO_ONLY,o=Users.getName(ConferenceImpl.getCurrentUserId()),s=e.getId();e.isSmartMode()||ConferenceUI.addAndGetMediaContainer(ConferenceImpl.getCurrentUserId(),o,s+"_"+ConferenceImpl.getCurrentUserId()+"_"+r),ConferenceUI.handleRingingStatusInUserAdd(e,ConferenceImpl.getCurrentUserId()),MediaManager.setRequestPending({module:ZCMediaConstants.sessionTypes.CONFERENCE,request_type:ZCMediaConstants.requestTypes.JOIN,id:s});var a={audio:{muted:!(i&&i._isAudioTrackEnabled()&&!i._isAudioRestrictedForConnection())},sessionKey:e.getSessionKey()},c=!(i&&i._isVideoTrackEnabled());e.isVideoConference()&&(a.video={muted:c});var d=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_VIDEO);(e.isAudioConference()||e.isSmartMode()&&c)&&(d=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY)),a.dataMode=d,a.encryptedResourceId=e.getEncryptedPublicResorceId(),ConferenceAPI.join(s,e.getType(),a,(function(){MediaManager.setRequestCompleted(),"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleJoined(s),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(e)}),(function(t){MediaManager.setRequestCompleted();var i=e.isVideoConference()?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY;WebRTCUserMedia.closeStream(i),ConferenceUI.closeRoom(),t&&t.message&&UI.updateBanner(t.message,2e3,!0),ConferenceUI.resetJoiningLoader(s,n.chat_id,!0)}))},setDeviceInJoinRoom:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession(),i=e.parents("[dropdowncnt]"),r=i.attr("selecteddeviceid"),o=e.attr("deviceid"),s=i.attr("devicekind");if(o!==r){i.find("[dropdowninput]").text(e.attr("devicelabel")),i.attr("selecteddeviceid",o);var a=ZCMediaDevices.get(s,o);ZCMediaDevices.setPreferredDevice(a,!Conference.isCurrentUserGuest());var c=!n.hasAudioUpStream()||!n.getAudioUpStream()._isAudioTrackEnabled()||n.getAudioUpStream()._isAudioRestrictedForConnection(),d=!n.hasVideoUpStream()||!n.getVideoUpStream()._isVideoTrackEnabled();if(ZCMediaDevices.isAudioOutputDeviceKind(s))return MediaManager.setPreferredAudioOutput([MediaUtil.setAndGetAudioPreviewContainer(n)]),void(t&&(MediaManager.checkAndShowAddedSpeakerSwitchedInfo(a),ZCSmartConferenceUI.updateAudioDevicesInJoinPreview(n)));var l=n.getAudioUpStream(),u=function(e,t){MediaManager.resetStreamRequested();var n=$("#preview_room_window"),i="video",r="toggleVideoInPreview";WebRTCUserMedia.isAudioStreamType(t)&&(i="audio",r="toggleAudioInPreview"),n.find('[purpose="'+r+'"]').prop("checked",!1),n.find("#"+s+"dropdowncnt").remove(),ZCSmartConferenceImpl.changeAVStatusInPreview(i,!0),MediaManager.handleMediaError(e,t)};if(ZCMediaDevices.isAudioInputDeviceKind(s)){if(!n.hasAudioUpStream())return;WebRTCUserMedia.closeStream(n.getAudioUpStream()._getType()),n.setAudioUpStream(void 0),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream((function(e){MediaManager.resetStreamRequested(),n.setAudioUpStream(e),ZCSmartConferenceImpl.changeAVStatusInPreview("audio",c);var i=$("#preview_room_window").find("[audiowaves]");e._startAudioFrequencyAnalyser((function(e){return MediaUtil.adjustAudioPulsesCnt(i,e),!0})),t&&(MediaManager.checkAndShowMicSwitchedInfo(e,l,!0),ZCSmartConferenceUI.updateAudioDevicesInJoinPreview(n))}),u)}else if(ZCMediaDevices.isVideoInputDeviceKind(s)){if(!n.hasVideoUpStream())return;WebRTCUserMedia.closeStream(n.getVideoUpStream()._getType()),n.setVideoUpStream(void 0),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream((function(e){MediaManager.resetStreamRequested(),n.setVideoUpStream(e),Conference.applyVideoConstraints(e,n),MediaUtil.setAndPlayStreamInMediaContainer($("#smartconferencepreview"),e,!0),ZCSmartConferenceImpl.changeAVStatusInPreview("video",d)}),u,void 0,Conference.getVideoEffects(n))}}},getTitleInStartUI:function(e){var t=e.find("#conferencetopic");return(t.length?t.val():e.find("[title_field]").text()).trim()},getResourceDataInStartUI:function(e){var t=void 0,n=e.find("#conference_associated_resource_url");if(Conference.isAssociatedResourcesEnabled()&&n.length>0){var i=n.val().trim();i.length&&(t={type:"townhall",url:i})}return t},getScopeDataInStartUI:function(e){var t=void 0,n=void 0,i=e.find("[conferencescoperadiobuttons]");if(0!==i.length)t=i.find("input:checked").val(),n=MediaManager.isChatScope(t)?[ConferenceImpl.chatSuggestion.getSelectedValue()]:ConferenceImpl.usersSuggestion.getSelectedListValues();else{t=e.attr("scopetype");var r=e.attr("scopeids");""!==r&&(n=r.split(","))}return{type:t,ids:n}},requestAndOpenStartPreviewPage:function(e){if(ConferenceImpl.validateStartInputs()){var t=e.find("#call_start_video_mode"),n=!1;t.length?n=t.is(":checked"):e.find("#video_conf_selected").length&&(n=!0);var i=n?Conference.types.VIDEO:Conference.types.AUDIO;ConferenceImpl.requestStartPreviewPage(i,(function(){var t={type:i,host:{id:ZCSmartConferenceImpl.getCurrentUserId(),name:ZCSmartConferenceImpl.getCurrentUserName()},recording:Conference.isRecordingAllowed()&&e.find("[conferencerecordingcheckbox]").is(":checked"),mode:Conference.modes.SMART,title:ConferenceImpl.getTitleInStartUI(e),scope:ConferenceImpl.getScopeDataInStartUI(e),associated_resource:ConferenceImpl.getResourceDataInStartUI(e),configurations:ConferenceImpl.getSelectedConfigurations()};ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.openStartPreviewCalledAfterStreamAccess,t),ConferenceImpl.openStartPreviewPage(ZCSmartConferenceConstants.startPreviewSessionId,t)}))}else ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.invalidInputsForStartPreview)},requestStartPreviewPage:function(e,t){Conference.isVideoConference(e);var n=function(n){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamObtained),MediaManager.resetStreamRequested(),ConferenceImpl.previewTrackerObj.mediaPermissionGiven=!0,ConferenceImpl.previewDetails.localAudioStream=n,ConferenceImpl.previewDetails.chosenType=e;var i=function(){"function"==typeof t&&t()};WebRTCUserMedia.getMediaDevices(i,i)},i=function(e,t){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamError),MediaManager.resetStreamRequested(),ConferenceImpl.previewTrackerObj.mediaErrorShown=!0,MediaManager.handleMediaError(e,t),"function"==typeof errorCallback&&errorCallback()};MediaManager.prefetchMetaDetails((function(){var e=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.deviceListUpdated),ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.audioStreamRequested),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(n,i)};ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.updateDeviceListCalled),WebRTCUserMedia.getMediaDevices(e,e)}))},openStartPreviewPage:function(e,t){t.recording&&(ConferenceImpl.recordingIndex=(new Date).getTime());var n=new ZCSmartConferenceSession({conferenceId:e,conferenceType:t.type,conferenceHostId:t.host.id,conferenceHostName:t.host.name,conferenceMode:t.mode,title:t.title,scope:t.scope,sessionId:WmsImpl.getSid(),adhocCallDetails:t.adhocCallDetails,associated_resource:t.associated_resource,configurations:t.configurations,waiting_lobby_requests:t.waiting_lobby_requests,session_key:t.session_key,presentation_requests:t.presentation_requests});n.setEncryptedResourceId(t.encryptedResourceId),n.addMember(t.host.id,t.host.name,ZCSmartConferenceConstants.memberTypes.ACTIVE),ConferenceImpl.previewDetails.localAudioStream instanceof MediaStream&&n.setAudioUpStream(ConferenceImpl.previewDetails.localAudioStream),ConferenceImpl.previewDetails.localVideoStream instanceof MediaStream&&(Conference.applyVideoConstraints(ConferenceImpl.previewDetails.localVideoStream,n),n.setVideoUpStream(ConferenceImpl.previewDetails.localVideoStream)),ZCSmartConferenceImpl.setJoiningSession(n);var i=ZCSmartConferenceImpl.getJoiningSession();if(i.addPreviewRoomNetworkPredictor(),ZCSmartConferenceUI.openPreviewRoom(i),ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.startPreviewPageShown),n.hasAudioUpStream()||(ZCSmartConferenceImpl.changeAVStatusInPreview("audio",!0),ConferenceLog.writeToLog(ConferenceLog.constants.infoEvents.noAudio)),n.isVideoConference()){var r=function(){var e=$("#preview_room_window");e.find('[smartconferencebutton][purpose="startFromPreviewRoom"]').removeAttr("disabled"),n.hasVideoUpStream()?e.find('[purpose="toggleVideoInPreview"]').prop("checked",!0):ZCSmartConferenceImpl.changeAVStatusInPreview("video",!0)};Conference.isVideoDisabledInJoinByUser()?(ConferenceLog.writeToLog(ConferenceLog.constants.infoEvents.videoDisabledInJoinForUser),r()):ZCSmartConferenceImpl.handleVideoPreviewUnmute(n,r,r)}},startFromPreviewRoom:function(){if(ZCSmartConferenceImpl.hasJoiningSession()){var e=ZCSmartConferenceImpl.getJoiningSession();e.removePreviewRoomNetworkPredictor(),e.writeToEventsLog(ConferenceLog.constants.eventsLog.startMeetingFromPreview),ZCSmartConferenceImpl.clearJoiningSession(),ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.startMeetingClicked);var t=e.getTitle(),n=e.getAssociatedResourceData(),i=e.getScopeType(),r=e.getScopeIds(),o=e.getType(),s=Conference.isVideoConference(o),a=$("#startconference"),c=a.attr("conference_skey"),d=void 0,l=void 0,u=void 0,f=void 0;c&&(d=a.attr("scheduled_host_id"),l=a.attr("event_id"),u=a.attr("cal_uid"),f=a.attr("recurrence_id"));var m=void 0,C=ConferenceImpl.speakersSuggestion.getSelectedListValues();s&&Conference.isSpotLightEnabled()&&(m=ConferenceImpl.spotlightUserSuggestion.getSelectedListValues());var p=e.getRecordingReferenceIndex();ConferenceImpl.recordingIndex=p,ConferenceImpl.previewTrackerObj.started=!0;var h=!1,g=!1,v=WebRTCUserMedia.getStreamTypeInString(s?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY);a.attr("started",!0);var S=void 0;if(s){var I=e.getAudioUpStream(),_=e.getVideoUpStream();ZCSmartConferenceImpl.handleNewSessionStart(t,o,i,r,I,_,void 0,n),(S=ZCSmartConferenceImpl.getOutgoingSession()).setVideoEffects(e.getVideoEffects()),S.setRememberVideoEffectsStatus(e.canRememberVideoEffects()),S.setEventsLogString(e.getEventsLogString()),S.setEventsLogObject(e.getEventsLogObject()),ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.meetingStartClicked),h=!(I&&I._isAudioTrackEnabled()&&!I._isAudioRestrictedForConnection()),(g=!(_&&_._isVideoTrackEnabled()))&&(v=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY))}else{var w=WebRTCUserMedia.streamTypes.AUDIO_ONLY,b=WebRTCUserMedia.getStream(w),U={type:i,ids:r};ConferenceUI.openRoom(t,ConferenceImpl.getCurrentUserId(),Users.getName(ConferenceImpl.getCurrentUserId()),o,U,ConferenceImpl.recordingIndex,void 0,n),ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.meetingStartClicked),h=!(b&&b._isAudioTrackEnabled()&&!b._isAudioRestrictedForConnection()),s&&(g=!(b&&b._isVideoTrackEnabled())),ConferenceLog.setTempEventsLog(e.getEventsLogString(),e.getEventsLogObject())}var R=ConferenceImpl.cohostsSuggestion.getSelectedListValues(),T=ConferenceImpl.getSelectedConfigurations();$WC.$Win.destroy("start_conference_win");var y={title:t,conferenceType:o,scopeType:i,scopeIds:r,panelListIds:C,spotlightUserIds:m,cohostIds:R,allowMembersInPanelList:!1,audio:{muted:h},dataMode:v};n&&(y.associatedResource=n),s&&(y.video={muted:g}),T&&(y.configurations=T),y.scheduledHostId=d,y.eventID=l,y.calUID=u,y.recurrenceId=f,ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.startApiCalled,ZCJQuery.extend({},y,{conferenceSkey:c,recordingIndex:p})),this.storeMainChatwindowDisplayProp(),ConferenceImpl.start(y,(function(){ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.startApiSuccess)}),(function(e){if(s){if(ZCSmartConferenceImpl.hasOutgoingSession()){var t=ZCSmartConferenceImpl.getOutgoingSession();ZCSmartConferenceImpl.endConference(t.getId(),!1)}}else ConferenceImpl.handleEnd(!1);ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.startApiFailed,e)}),c,p)}},quickStartFromPreviewRoom:function(){if(ZCSmartConferenceImpl.hasJoiningSession()){var e=ZCSmartConferenceImpl.getJoiningSession();e.writeToEventsLog(ConferenceLog.constants.eventsLog.startApiCalledForQuickMeeting),ZCSmartConferenceImpl.clearJoiningSession();var t=e.getTitle(),n=e.getScopeType(),i=e.getScopeIds(),r=e.getType(),o=Conference.isVideoConference(r),s=e.getRecordingReferenceIndex(),a=!1,c=!1,d=WebRTCUserMedia.getStreamTypeInString(o?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY);if(s&&(ConferenceImpl.recordingIndex=s),o){var l=e.getAudioUpStream(),u=e.getVideoUpStream();ZCSmartConferenceImpl.handleNewSessionStart(t,r,n,i,l,u,void 0,void 0);var f=ZCSmartConferenceImpl.getOutgoingSession();f.setAsQuickStartPreview(),f.setVideoEffects(e.getVideoEffects()),f.setEventsLogString(e.getEventsLogString()),f.setEventsLogObject(e.getEventsLogObject()),ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.meetingStartClicked),a=!(l&&l._isAudioTrackEnabled()&&!l._isAudioRestrictedForConnection()),(c=!(u&&u._isVideoTrackEnabled()))&&(d=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY))}else{var m=e.getAudioUpStream(),C={type:n,ids:i};ConferenceUI.openRoom(t,ConferenceImpl.getCurrentUserId(),Users.getName(ConferenceImpl.getCurrentUserId()),r,C,s,void 0,void 0),$("#conferencewindow").attr("isQuickStart","true"),ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.meetingStartClicked),a=!(m&&m._isAudioTrackEnabled()&&!m._isAudioRestrictedForConnection()),o&&(c=!(m&&m._isVideoTrackEnabled())),ConferenceLog.setTempEventsLog(e.getEventsLogString(),e.getEventsLogObject())}var p={title:t,conferenceType:r,scopeType:n,scopeIds:i,panelListIds:void 0,spotlightUserIds:void 0,allowMembersInPanelList:!1,audio:{muted:a},dataMode:d};o&&(p.video={muted:c}),ConferenceImpl.start(p,void 0,(function(){o?ZCSmartConferenceImpl.hasOutgoingSession()&&ZCSmartConferenceImpl.endConference(ZCSmartConferenceImpl.getOutgoingSession().getId(),!1):ConferenceImpl.handleEnd(!1)}),void 0,s)}},handleEnd:function(e,t){var n;if((n=this.getCurrentSession())&&n.isWindowInFullScreen()&&(ConferenceImpl.getCurrentSession().setWindowInFullScreen(!1),ZCMediaDomUtil.exitFullScreen()),SessionTimers.clearTimer("conferencesessiontimer"),SessionTimers.clearTimer("conferencesessionsubtimer"),clearTimeout(ConferenceUI.clearRingAllTimeout),ConferenceUI.clearRingAllTimeout=void 0,ZCSmartConferenceUI.clearRhsGestureFilterMap(),ZCSmartConferenceUI.clearRhsSearchValue(),ZCSmartConferenceUI.clearRhsSearchTimeout(),ZCSmartConferenceUI.clearBottomPaneSearchValue(),ZCSmartConferenceUI.clearBottomPaneSearchTimeout(),ZCSmartConferenceUI.clearListViewInstance(),ConferenceUI.closeMinimizedWindow(),"undefined"!=typeof EventsDB){var i=$("#huddle-landing-cnt");MediaUtil.removeVideoElemsStreamInContainer(i),i.remove(),"undefined"!=typeof WaitingRoom&&(MediaUtil.clearAudioPreview(WaitingRoom),WaitingRoom.clearPreviewSession())}if($("#conferencewindow").removeClass("huddle-session-active"),!this.hasCurrentSession()&&!WmsImpl.isGuestUser())return ConferenceUI.closeRoom(),void WebRTCUserMedia.closeAllStreams();if(n=this.getCurrentSession()){var r=n.getId();Clickoutside.clear(r+"dropdowncnt"),ZCSmartConferenceUI.closeHostLeaveConfirmation(r);var o=n.isHost(ConferenceImpl.getCurrentUserId());e&&(o?ConferenceAPI.stop(r):ConferenceAPI.leave(r,(function(){"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleLeft(r)})),WmsImpl.isGuestUser()||$("#conferencewindow").hide()),n.terminate(),this.clearRunningSession();var s=n.getActiveChatId();if(Config.isConferenceChatSwitcherEnabled()){ConferenceChatWindow.updateAllChatHeaderImage(),ConferenceChatWindow.closeOpenedConferenceChatsIfIsNotInMainChatWindowViewport();let e=ConferenceImpl.hasChatWindowDOMInViewWhenStartedOrMaximized();ConferenceChatWindow.moveChatsToMainChatwindowViewportIfIsInVisibleChats(e)}void 0!==s&&(ZCSmartConferenceImpl.removeChat(s,n),MediaManager.updateGroupCallOptionsInChatHeader(n.getChatId())),n.isSilentConference()&&MediaCallImpl.hasCurrentSession()&&MediaCallImpl.getCurrentSession().isMigratedCall()&&MediaCallImpl.handleEnd(n.getAdhocCallId(),e),MessageOperations.chatClose.close(n.getDummyChatId()),MessageOperations.chatClose.close(n.getDummyThreadChatId()),ZCSmartConferenceUI.sendConferenceEndtoNotebook(r),ZCSmartConferenceUI.clearRingingTimeout(),n.updateEventsLog(),ConferenceLog.pushWmsDiffToServer(n.getId()),n.isInPIP()&&ZCSmartConferenceImpl.exitFromPIPMode(n)}!WmsImpl.isGuestUser()&&e?(ConferenceUI.closeRoom(),n&&ZCSmartConferenceUI.showFeedback(n,!1,!1)):n&&(e&&o&&!t&&(t=ZCMediaConstants.endCases.sessionEnd),ConferenceUI.showEndState(n,e,n.getTitle(),n.getHostName(),t)),WebRTCUserMedia.closeAllStreams(),ConferenceHandler.UIEvents.handlePopups(),WhiteBoard.handleWhiteBoardEnd(),PresentationImpl.handleEnd(n),$WC.$Win.destroy("recording_alert"),$WC.$Win.destroy("conference_settings_win"),$WC.$Win.destroy("track_ended_info"),$WC.$Win.destroy("device_switched_info"),$WC.$Win.destroy("presentation_end_alert"),ZCSmartConferenceUI.destroyChatNotificationDom(),clearTimeout(ZCSmartConferenceUI.recordingConsentTimer),delete ZCSmartConferenceUI.recordingConsentTimer,ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!1),"undefined"!=typeof RemoteWork&&RemoteWork.isInRemoteWorkView()&&RemoteWork.syncDetailsUI(),ConferenceLog.clearLogString(),ConferenceChatWindow.clear()},handleEndForAdhocCall:function(e){var t=ZCSmartConferenceImpl.getSessionForAdhocCall(e);if(void 0===t){var n=ConferenceImpl.hasCurrentSession()?ConferenceImpl.getCurrentSession().getAdhocCallId():$("#conferencewindow").attr("adhoccallid");void 0!==n&&n===e&&ConferenceImpl.handleEnd(!0)}else ZCSmartConferenceImpl.endConference(t.getId(),!0)},handleChatRemoved:function(e){var t=ConferenceImpl.getCurrentSession();null!=t&&t.hasChatId()&&t.getChatId()===e&&this.handleEnd(!0)},handleDummyThreadChatClosed:function(e){var t=ConferenceImpl.getCurrentSession();t&&t.isThreadChatAllowed()&&t.getDummyThreadChatId()==e&&t.setChatPermission(void 0)},onCwinHeaderUpdate:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();e&&MediaUtil.isInMaximizedView()&&ZCSmartConferenceUI.addToggleForRHSChatHeader(e,e.getChatContainer())},_startSession:function(e,t){var n=new ConferenceSession(e);if((t&&n.setAsQuickStartPreview(),ConferenceImpl.setCurrentSession(n),n.setEventsLogString(ConferenceLog.getTempEventsLogString()),n.setEventsLogObject(ConferenceLog.getTempEventsLogObject()),ConferenceLog.clearTempEventsLog(),n.isInUnifiedPlan())&&MediaManager.getClientSupport().multi_stream){var i=WebRTCUserMedia.getStream(WebRTCUserMedia.getStreamTypesInInt(ConferenceImpl.serverConstantVsStreamType[e.conferenceType]));i&&i._hasVideoTrack()&&i._getPrimaryVideoTrack().applyConstraints({width:{min:320,max:320},height:{min:240,max:240},frameRate:{min:15,max:15}}).catch()}n.initUpStream(e);var r=WebRTCUserMedia.getStream(WebRTCUserMedia.streamTypes.SCREEN);return r&&ConferenceImpl.addScreenInSession(r),ConferenceImpl.triggerSessionTimer(),MediaManager.updateGroupCallOptionsInChatHeader(n.getChatId()),ConferenceUI.setParticipantMuteAllOption(n),void 0!==e.public_url&&n.setPublicUrl(e.public_url),WmsImpl.isGuestConferenceUser()&&($zcg.inviteeInfo={name:n.getHostName()}),"undefined"!=typeof RemoteWork&&RemoteWork.isInRemoteWorkView()&&RemoteWork.syncDetailsUI(),n},setMinimisedStateAfterSessionConversion:function(e){var t=$("#conferenceminimizedwindow");if(t.length){if(!$WC.Util.isEmpty(t[0].style.top)){var n=t.position();e.setMiniPlayerPosition({top:n.top,left:n.left})}t.remove(),ConferenceUI.showMinimizedWindow()}else{var i=$("#conferencewindow"),r=i.attr("mini_player_top_pos");$WC.Util.isEmpty(r)||e.setMiniPlayerPosition({top:parseInt(r),left:parseInt(i.attr("mini_player_left_pos"))})}},addScreenInSession:function(e){if(ConferenceImpl.hasCurrentSession()){var t=ConferenceImpl.getCurrentSession();if(!t.isPresentationStream()){if(t.hasScreenShare()&&!t.isScreenSharer())return void WebRTCUserMedia.closeStream(e._getType());ConferenceUI.handleScreenShareStart()}t.isPresentationStream()&&PresentationUI.showPresentationIndicator(t),t.isInUnifiedPlan()&&!t.isPresentationStream()&&e._getPrimaryVideoTrack().applyConstraints({frameRate:{min:Conference.SS_FRAMERATE,max:Conference.SS_FRAMERATE}}).catch(),t.initScreenUpStream(e)}else WebRTCUserMedia.closeStream(e._getType())},isValidChatForCurrentSession:function(e){if(!ConferenceImpl.hasCurrentSession())return!1;if(e.startsWith("dummy"))return!0;var t=ConferenceImpl.getCurrentSession(),n=t.getChatId(),i=t.getThreadChatId();return!(!i||i!==e)||(!(!n||n!==e)||!(!n||!n.includes(e)))},triggerSessionTimer:function(){var e=ConferenceImpl.getCurrentSession();e&&(SessionTimers.setTimer("conferencesessiontimer",{startTime:e.startTime}),SessionTimers.setTimer("conferencesessionsubtimer",{startTime:e.startTime}))},validateStartInputs:function(){var e=!0,t=$("#start_conference_win"),n=t.find("[conferencescoperadiobuttons]");if(0!==n.length){var i=n.find("input:checked").val();if(MediaManager.isChatScope(i)){var r=this.chatSuggestion.getSelectedValue();e=!$WC.Util.isEmpty(r)}else{e=0!==ConferenceImpl.usersSuggestion.getSelectedListValues().length}}t.find("[conference_modes] [selected]").attr("type");e=e&&MediaUtil.isValidTitle(t.find("#conferencetopic").val());var o=t.find("#conferencestartbutton");return e?o.removeAttr("disabled"):o.attr("disabled",""),e},updateStartUIParticipantsHint:function(e){var t=ConferenceImpl.getParticipantLimit(e,ConferenceImpl.getConnectionMode()),n="",i=Conference.isCurrentUserGuest()?Conference.MAX_PANEL_MEMBERS:Plan.getGroupCallLimit();n=t>i?Resource.getRealValue("conference.footer.plan.hint",[i]):Resource.getRealValue("conference.footer."+e,[t]);var r=$("#startconference");r.find("#conference_hint_footer").text(n),Conference.isSpotLightEnabled()&&(r.find("[spotConfSpotlightOpt]").toggleClass("dN",e===Conference.types.AUDIO),ConferenceUI.toggleAddRoleCntInStartWin(r.find("[add_roles_opt]"))),ConferenceImpl.validateStartInputs()},getRecordingName:function(e){var t=e.name.trim();return t+=!e.audio&&!e.video||void 0!==e.video&&e.video?".mp4":".mp3"},playRecordingViaLink:function(e,t,n,i){var r={nrs_id:e.nrs_id,host:{id:e.owner.id}},o=this.getRecordingName(e),s=!e.audio&&!e.video||void 0!==e.video&&e.video,a={hidedownloadicon:!0,miniplayer:!s,link_id:t,is_from_sametab:n};i&&(a.encrypted_key=i),ZCTrack.track("RECORDING_PLAYED",{TRIGGER:"SHAREABLE_LINK"}),MediaRecordingPlayer.open(r,e.index,o,null,s,a)},getRecordingCheckboxConfig:function(e,t){var n=this.getRecordingConfigValue(e),i=Settings.getFromObj("conference_recording",!0),r=n==ZCMediaConstants.callRecordingConfig.user_choice&&void 0!==i?i:n,o=t||r==ZCMediaConstants.callRecordingConfig.enabled,s=Settings.getFromObj("last_recording_status",!0);return r==ZCMediaConstants.callRecordingConfig.user_choice&&(o=s==ZCMediaConstants.callRecordingConfig.enabled),{checked:o&&Conference.isRecordingAllowed(),disabled:n!=ZCMediaConstants.callRecordingConfig.user_choice||!Conference.isRecordingAllowed(),admin_config:n}},getRecordingConfigValue:function(e){var t=SecurityManager.getModuleConfig("group_call_recording","allowed_group_call_recording");if($WC.Util.isEmpty(t))return ZCMediaConstants.callRecordingConfig.user_choice;if("general"==t.selected_configuration)return ZCMediaConstants.callRecordingConfig[t.general_configuration];if($WC.Util.isEmpty(e))return ZCMediaConstants.callRecordingConfig[t.advanced_configuration.adhoc_chats];if(new $CliqChatId(e).isChannel()){var n=Channels.getByChid(e);if(Channels.isPublicChannel(n))return ZCMediaConstants.callRecordingConfig[t.advanced_configuration.org_channels];if(Channels.isTeamChannel(n))return ZCMediaConstants.callRecordingConfig[t.advanced_configuration.team_channels];if(Channels.isPrivateChannel(n))return ZCMediaConstants.callRecordingConfig[t.advanced_configuration.private_channels];if(Channels.isExternalChannel(n))return ZCMediaConstants.callRecordingConfig[t.advanced_configuration.external_channels]}return ZCMediaConstants.callRecordingConfig[t.advanced_configuration.adhoc_chats]},getRoleBasedSelectedConfigurationValue:function(e){let t=[],n=ConferenceConfiguration.getUserTypes();for(let i in n){let r=n[i];$("#cc_"+e+"_"+r).prop("checked")&&t.push(r)}return t},getStateBasedSelectedConfigurationValue:function(e){return $("#cc_"+e).prop("checked")?"enabled":"disabled"},getInvertedStateBasedSelectedConfigurationValue:function(e){return $("#cc_"+e).prop("checked")?"disabled":"enabled"},getTypeBasedSelectedConfigurationValue:function(e){return $("#cc_"+e+"_config").find('[name="cc_'+e+'"]:checked').attr("cc_value")},getSelectedConfigurations:function(){let e={};return $("#conference_configurations").length&&(e.screen_share=this.getRoleBasedSelectedConfigurationValue("screen_share"),e.grid_view=this.getRoleBasedSelectedConfigurationValue("grid_view"),e.recording_access=$("#cc_recording_access_value").attr("cc_value"),e.waiting_room=this.getInvertedStateBasedSelectedConfigurationValue("waiting_room"),e.chat_access=this.getStateBasedSelectedConfigurationValue("chat_access"),e.chat_type=$("#cc_meeting_chat_type_value").attr("cc_value"),e.edit_whiteboard=this.getStateBasedSelectedConfigurationValue("edit_whiteboard"),e.special_reactions=this.getStateBasedSelectedConfigurationValue("special_reactions"),e.reaction_view=this.getTypeBasedSelectedConfigurationValue("reaction_view"),Conference.isPresentationsAllowed()&&(e.presentation=this.getRoleBasedSelectedConfigurationValue("presentation"))),e},openDeviceSettings:function(e,t,n,i,r){let o=MediaDeviceWidget.getCurrentConfig(t,n,i,r);$("#conf-settings-lhs").find("[settingstab]").removeClass("active"),$("#conf-devicesetting-lhs").addClass("active");var s=ZCSmartConferenceImpl.getCurrentActiveSession();$("#conference_settings_body").html(ConferenceTemplates.getDeviceSettingsHtml(e,o,s)),s.isVideoConference()&&(s.clearVideoEffectsPreview(),s.hasVideoUpStream()?MediaUtil.setAndPlayStreamInMediaContainer($("#smartconference_settings_preview"),s.getVideoUpStream(),!0):ZCSmartConferenceImpl.changeAVStatusInSettingsPreview("video",!0)),s.hasAudioUpStream()&&s.getAudioUpStream()._isAudioTrackEnabled()&&!s.getAudioUpStream()._isAudioRestrictedForConnection()||ZCSmartConferenceImpl.changeAVStatusInSettingsPreview("audio",!0)},handleReactionConfigUpdate(e){let t=$("#smartconf-all-reactions"),n=e.isAllReactionsAllowed();n?n?t.find("[data-index="+Smiley.SMILEY_ANIM+"]").show():t.is(":visible")&&(t.find("[data-index="+Smiley.SMILEY_ANIM+"]").hide(),Smiley.handleTabNavigation(t,t.find("[data-index="+Smiley.GIPHY+"]"))):t.hide(),$("#smartconf-all-reactions-btn").toggleClass("dN",!n);var i=e.isSpecialReactionsAllowed();$("#smartconf-special-reactions").toggleClass("dN",!i)},handleEditWhiteboardConfigurationUpdate:function(e){Conference.isWhiteBoardAllowed()&&(e.isAllowedToEditWhiteboard()?ConferenceUI.addRequestEditWhiteboardOption():ConferenceUI.removeRequestEditWhiteboardOption())}}).chatSuggestion={search:function(e){$("#conference-chat-selection-list").empty();var t={searchin:SearchAgent.CHATHISTORY,chathistoryhtml:SearchHTML.chat,channelshtml:SearchHTML.channel,ignore121chat:!0,ignorebot:!0,channelcategory:1,val:e,listid:"conference-chat-selection-list",emptycallback:function(){this.displayNoResultFound()}.bind(this),clearcallback:function(){this.displayNoResultFound()}.bind(this)},n=SearchAgent.search(t);return n&&this.displayResultDOM(),n},handleAction:function(){if(ConferenceImpl.validateStartInputs(),Conference.isRecordingEnabled()){var e=ConferenceImpl.getRecordingCheckboxConfig(this.getSelectedValue()),t=$("#enable_recording");t.children().first().prop("checked",e.checked),t.next().text(I18N("conference.recording.label."+e.admin_config)),e.disabled?t.attr("disabled","disabled"):t.removeAttr("disabled")}},handleInputValueChange:function(){ConferenceImpl.validateStartInputs()},getSelectedValue:function(){return $("#conference-chat-selection").find("[input_value]").attr("input_value")},displayNoResultFound:function(){$("#conference-chat-selection-list").html('<div class="p10 textcent">'+Resource.getRealValue("common.search.result.none")+"</div>"),this.displayResultDOM()},displayResultDOM:function(){var e=$("#conference-chat-selection-results");e.find("[purpose='search']").first().addClass("sel"),e.is(":visible")||Clickoutside.bind({srcid:"conference-chat-selection-search-field",destid:"conference-chat-selection-results"}),ZCScroll.scrollTop(e,0)},clear:function(){$("#conference-chat-selection-results").hide(),Clickoutside.clear("conference-chat-selection-results")}},ConferenceImpl.usersSuggestion={id:"conference-users-selection",limit:ConferenceImpl.MAX_PARTICIPANTS_AUDIO,getResultsListID:function(){return this.id+"-list"},getResultsListContainer:function(){return $("#"+this.getResultsListID())},getResultsContainerID:function(){return this.id+"-results"},getResultsContainer:function(){return $("#"+this.getResultsContainerID())},getSearchFieldInputID:function(){return this.id+"-search-field"},getSearchFieldContainer:function(){return $("#"+this.id)},getSelectedList:function(){return this.getSearchFieldContainer().find("[data-selections]").children()},getSelectedListValues:function(){var e=[];return this.getSelectedList().each((function(){this.hasAttribute("key")&&e.push(this.getAttribute("key"))})),e},search:function(e){this.getResultsListContainer().empty();var t=this.getSelectedListValues();if(!(t.length>=this.limt)){var n={searchin:SearchAgent.CONTACTS+SearchAgent.ORGCONTACTS,val:e,ignorelist:t,listid:this.getResultsListID(),contactshtml:SearchHTML.user,orgcontactshtml:SearchHTML.user,emptycallback:function(){this.displayNoResultFound(e)}.bind(this),clearcallback:function(){this.clear()}.bind(this)},i=SearchAgent.search(n);return i?this.displayResultDOM():this.clear(),i}UI.updateBanner(Resource.getRealValue("common.sel.group.limit",[this.limit]),2e3,!0)},handleAction:function(e,t,n){t.length&&ConferenceImpl.validateStartInputs()},clear:function(){ConferenceImpl.validateStartInputs(),this.getResultsContainer().hide(),this.getResultsListContainer().empty(),Clickoutside.clear(this.getResultsContainerID())},displayNoResultFound:function(e){SearchField.checkAndAddEmailInAutocomplete(this.id,e,!1,ConferenceTemplates.externalUserNode)},displayResultDOM:function(){if(!(this.getSelectedListValues().length>=this.limit)){var e=this.getResultsContainer();e.find("[purpose='search']").first().addClass("srchbn sel"),e.is(":visible")||Clickoutside.bind({srcid:this.getSearchFieldInputID(),destid:this.getResultsContainerID()}),ZCScroll.scrollTop(e,0)}}},ConferenceAPI={get:function(e,t,n,i,r){var o={};if(i&&(o["X-Conference-Stop-Ringing"]=!0),o.session_id=WmsImpl.getSid(),r)o.skipEncryptedMeetingId=!0;else{let t=Conference.isMeetingLink();if(t||Conference.isStreamingLink(e)){let n,i;t?(n="X-Encrypted-Meeting-Resource-Id",i=Conference.getEncryptedResourceId()):(n="X-Streaming-Resource-Id",e=e.split("stream-").slice(-1),i=Conference.getEncryptedResourceId()||e),void 0!==i&&(o[n]=i)}if(void 0===o["X-Encrypted-Meeting-Resource-Id"]){let e=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==e&&(o["X-Encrypted-Meeting-Resource-Id"]=e.getEncryptedPublicResorceId())}}MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e,type:"GET",headers:o,success:function(e){"function"==typeof t&&t(e)},error:function(e){"function"==typeof n&&n(e)}})},fetchChatPermission:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e,type:"GET",data:{chat_permission:!0},success:function(n){var i=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==i&&i.getId()===e&&i.setChatPermission(n.chat_permission),"function"==typeof t&&t(n)},error:function(e){"function"==typeof n&&n(e)}})},start:function(e,t,n,i,r,o){var s={type:e.scopeType};if(MediaManager.isChatScope(e.scopeType)){if(void 0===e.scopeIds[0])return;s.chat_id=e.scopeIds[0]}else{var a=[],c=[];e.scopeIds&&e.scopeIds.forEach((function(e){$WC.Matcher.check("emailid",e)?c.push(e):a.push(e)})),0!==a.length&&(s.user_ids=a),0!==c.length&&(s.email_ids=c)}var d={title:e.title,type:e.conferenceType,scope:s};if(e.associatedResource&&(d.associated_resource=e.associatedResource),e.audio&&(d.audio=e.audio),e.video&&(d.video=e.video),e.dataMode&&(d.data_mode=e.dataMode),r&&(d.recording_index=r),e.configurations&&(d.configurations=e.configurations,Conference.userDefaultConfiguration=e.configurations),e.cohostIds&&e.cohostIds.length&&(d.cohost_ids=e.cohostIds),MediaManager.getClientSupport().multi_stream){d.connection_mode=WebRTCPeerConnectionConstants.connectionModes.UNIFIED;var l=Conference.isVideoConference(e.conferenceType);d.conference_mode=Conference.modes.SMART,d.speaker_count=Conference.MAX_ACTIVE_SPEAKER,d.main_speaker_count=Conference.MAIN_SPEAKER_COUNT,d.enable_mixing=!0,d.participant_count=Conference.isAutoStreamingEnabled()&&l?Conference.SMARTMODE_STREAMING_MAX_COUNT:Conference.SMARTMODE_MAX_PARTICIPANT_COUNT,e.panelListIds&&e.panelListIds.length&&(d.panel={user_ids:e.panelListIds,allow_members:e.allowMembersInPanelList}),Conference.isSpotLightEnabled()&&l&&e.spotlightUserIds&&e.spotlightUserIds.length&&(d.spotlight={user_ids:e.spotlightUserIds}),void 0!==Conference.MAX_PARTICIPANT_COUNT&&(d.participant_count=Conference.MAX_PARTICIPANT_COUNT),d.enable_mixing=!0}var u={};i&&(u.conference_skey=i),e.scheduledHostId&&(u.scheduled_host_id=e.scheduledHostId),e.eventID&&(u.event_id=e.eventID),e.calUID&&(u.calendaruid=e.calUID),e.recurrenceId&&(u.recurrence_id=e.recurrenceId),u.session_id=WmsImpl.getSid(),MediaAPI.getConferenceAjaxWrapper()({url:void 0!==o?"/v2/calls/"+o+"/users":"/v2/conferences",type:"POST",data:d,headers:u,contentType:"application/json",status:{loading:$("#conferencestartbutton")},success:function(e,n,i,r,o){var s,a=l?ZCSmartConferenceUI.getConferenceWindow():ConferenceUI.getConferenceWindow();$WC.Util.isEmpty(o.recording_index)?(ConferenceUI.hideRecordingIndication(a),s=ZCMediaConstants.callRecordingConfig.disabled):(ConferenceUI.showRecordingIndication(a),s=ZCMediaConstants.callRecordingConfig.enabled),$WC.Util.isEmpty(o.session_key)||(a.attr("session_key",o.session_key),ZCSmartConferenceImpl.hasOutgoingSession()&&ZCSmartConferenceImpl.getOutgoingSession().setSessionKey(o.session_key),Conference.isRetryEnabled()&&ZCSmartConferenceImpl.triggerStartInitialRetry(l,o.session_key)),Settings.store.last_recording_status=s,"function"==typeof t&&t(),ConferenceLog.updateWebRTCStatsConfiguration(o)},error:function(e){"function"==typeof n&&n(e)}})},startScreenShare:function(e,t,n,i){var r={};i&&(r.device_id=i),MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/screenshare",type:"POST",contentType:"application/json",data:{description:t,ice_candidate:n},headers:r})},stopScreenShare:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/screenshare",type:"DELETE",success:function(){"function"==typeof t&&t()}})},getMediaSessionDetailsAsGuest:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/guest/v2/mediasessions/"+e,type:"GET",headers:{"X-Encrypted-Meeting-Resource-Id":Conference.getEncryptedResourceId()},data:t,success:function(e){"function"==typeof n&&n(e.data)}})},reconnect:function(e,t,n){var i="";void 0!==n&&(i="/peers/"+n),MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+i+"/reconnect",type:"POST",contentType:"application/json",headers:{session_id:WmsImpl.getSid()},data:{connection_type:t}})},retryStart:function(e,t){var n=ZCSmartConferenceConstants.requests.retryStart+e;MediaManager.isCustomRequestPending(n)||(MediaManager.setCustomRequestAsPending(n),MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/retry",type:"POST",contentType:"application/json",headers:{session_id:WmsImpl.getSid()},data:t,success:function(){MediaManager.setCustomRequestAsCompleted(n)},error:function(){MediaManager.setCustomRequestAsCompleted(n)}}))},endScreenShare:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/endscreenshare",type:"POST",success:function(){"function"==typeof n&&n()}})},startSecondarySession:function(e,t,n,i,r){var o=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:o+e+"/devices",type:"POST",contentType:"application/json",headers:{session_id:WmsImpl.getSid(),device_id:t},data:n,success:function(e){"function"==typeof i&&i(e)},error:function(e){"function"==typeof r&&r(e)}})},stopSecondarySession:function(e,t){var n=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:n+e+"/devices",type:"DELETE",headers:{session_id:WmsImpl.getSid(),device_id:t},success:function(e){"function"==typeof successCallBack&&successCallBack(e)},error:function(e){"function"==typeof errorCallBack&&errorCallBack(e)}})},join:function(e,t,n,i,r){var o={connection_type:t};void 0!==n&&(n.memberType&&(o.member_type=n.memberType),n.audio&&(o.audio=n.audio),n.video&&(o.video=n.video),n.dataMode&&(o.data_mode=n.dataMode));var s={session_id:WmsImpl.getSid()};if(n.encryptedResourceId)s["X-Encrypted-Meeting-Resource-Id"]=n.encryptedResourceId;else{let e=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==e&&(s["X-Encrypted-Meeting-Resource-Id"]=e.getEncryptedPublicResorceId())}MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/join",type:"PUT",data:o,headers:s,contentType:"application/json",success:function(r,o,s,a,c){Conference.isRetryEnabled()&&ZCSmartConferenceImpl.triggerJoinInitialRetry(Conference.isVideoConference(t),n.sessionKey,e),void 0!==r&&(ConferenceImpl.hasCurrentSession()?ConferenceHandler.wmsEvents.setChatId(r):ZCSmartConferenceHandler.wmsEvents.setChatId(r)),"function"==typeof i&&i(),ConferenceLog.updateWebRTCStatsConfiguration(c)},error:function(e){"function"==typeof r&&r(e)}})},sendSDP:function(e,t,n,i,r,o,s,a){var c={};a&&(c.device_id=a);var d="";"answer"===o&&void 0!==s&&(d="/peers/"+s),MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+d+"/"+o,type:"PUT",data:{description:n,ice_candidate:i,type:r,connection_type:t},headers:c,contentType:"application/json"})},updateIceCandidates:function(e,t,n,i,r,o,s){if(i.length){var a={};s&&(a.device_id=s);var c={ice_candidates:i,type:r,connection_type:t},d="";void 0!==n?d="/peers/"+n:c.is_upstream=o,MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+d+"/icecandidate",type:"PUT",data:c,headers:a,contentType:"application/json"})}},notifyNegotiation:function(e,t,n){var i={connection_type:t,ssrc_list:n,type:"handshake"};MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/updatestatus",type:"POST",data:i,contentType:"application/json"})},getHostDetails:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/hostdetails",type:"GET",success:function(e){"function"==typeof t&&t(e)}})},updateConnectionStatus:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/updateconnectionstatus",type:"POST",contentType:"application/json",data:t})},updateMuteAllStatus:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/mute",type:"POST",contentType:"application/json",data:t,success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},updateUnmuteRestriction:function(e,t,n,i,r){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/unmuterestriction",type:"POST",contentType:"application/json",data:{data_mode:t,unmute_restricted:n},success:function(){"function"==typeof i&&i()},error:function(){"function"==typeof r&&r()}})},updateMuteStatusForUser:function(e,t,n,i,r){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/mute",type:"POST",contentType:"application/json",data:n,success:function(){"function"==typeof i&&i()},error:function(){"function"==typeof r&&r()}})},setAsHost:function(e,t,n,i){this.setRole(e,t,ZCSmartConferenceConstants.roles.HOST,n,i)},setAsCohost:function(e,t,n,i){this.setRole(e,t,ZCSmartConferenceConstants.roles.COHOST,n,i)},setRole:function(e,t,n,i,r){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/"+n,type:"POST",success:function(){"function"==typeof i&&i()},error:function(){"function"==typeof r&&r()}})},removeFromCohost:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/cohost",type:"DELETE",success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},setInSpotLight:function(e,t,n,i,r,o){var s={};void 0!==n&&(s.restrict_speakers_audio=n),void 0!==i&&(s.restrict_speakers_video=i);var a=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:a+"/v2/conferences/"+e+"/peers/"+t+"/spotlight",type:"POST",data:s,contentType:"application/json",success:function(){"function"==typeof r&&r()},error:function(){"function"==typeof o&&o()}})},setUsersInSpotLight:function(e,t,n,i,r,o){var s={};t.length>0&&(s.user_ids=t),void 0!==n&&(s.restrict_speakers_audio=n),void 0!==i&&(s.restrict_speakers_video=i);var a=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:a+"/v2/conferences/"+e+"/spotlight",type:"PUT",data:s,contentType:"application/json",success:function(){"function"==typeof r&&r()},error:function(){"function"==typeof o&&o()}})},removeFromSpotLight:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:r+"/v2/conferences/"+e+"/peers/"+t+"/spotlight",type:"DELETE",success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},updateSpotLightConfig:function(e,t,n,i,r){var o={};void 0!==t&&(o.restrict_speakers_audio=t),void 0!==n&&(o.restrict_speakers_video=n);var s=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:s+"/v2/conferences/"+e+"/spotlight",type:"PUT",data:o,contentType:"application/json",success:function(){"function"==typeof i&&i()},error:function(){"function"==typeof r&&r()}})},disableSpotLight:function(e,t,n){var i=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:i+"/v2/conferences/"+e+"/spotlight",type:"DELETE",success:function(){"function"==typeof t&&t()},error:function(){"function"==typeof n&&n()}})},renegotiate:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/renegotiate",type:"POST",contentType:"application/json",data:{description:t,connection_type:n}})},notifyStart:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/invitation",type:"POST",contentType:"application/json",headers:{session_id:WmsImpl.getSid()},success:function(){"function"==typeof t&&t()},error:function(){"function"==typeof n&&n()}})},configure:function(e,t,n,i,r){var o={configurations:{}};o.configurations[t]=n,MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/configure",type:"PUT",contentType:"application/json",data:o,success:function(){"function"==typeof i&&i(o)},error:function(e){"function"==typeof r&&r(e)}})},updateTitle:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e,type:"PUT",contentType:"application/json",data:{title:t},status:{success:Resource.getRealValue("conference.rename.success")},success:function(e){"function"==typeof n&&n(e)},error:function(){"function"==typeof i&&i()}})},knock:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/knock",type:"PUT",success:function(e){"function"==typeof t&&t(e)},status:{loading:$("#conference-btn")}})},assignHostAndLeave:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/leave",type:"POST",contentType:"application/json",data:{host_id:t},headers:{session_id:WmsImpl.getSid()},status:{loading:n},success:function(){"function"==typeof i&&i()}})},leave:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/leave",type:"POST",success:function(){"function"==typeof t&&t()}})},stop:function(e){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e,type:"DELETE"})},kickOut:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/kickout",type:"POST"})},startRingingForUser:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/ring",type:"POST"})},cancelRingingForUser:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/ring",type:"DELETE"})},startRingingForAll:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/ring",type:"POST"})},stopRingingForAll:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/ring",type:"DELETE"})},decline:function(e){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/decline",type:"POST"})},raiseSpeakerRequest:function(e){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/raisespeakerrequest",type:"POST",headers:{session_id:WmsImpl.getSid()}})},dropSpeakerRequest:function(e){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/dropspeakerrequest",type:"POST"})},raiseMediaSessionRequest:function(e,t,n,i){var r={};r.type=t,void 0!==i&&(r.add_info=i);var o=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:o+e+"/requests",type:"POST",data:r,contentType:"application/json",success:function(e){"function"==typeof n&&n(e)}})},dropPresentationRequest:function(e,t,n){var i=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:i+e+"/requests/"+t,type:"DELETE",success:function(e){"function"==typeof n&&n(e)}})},approveMediaSesssionRequest:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:r+e+"/peers/"+t+"/requests/"+n+"/approve",type:"POST",success:function(){"function"==typeof i&&i()},error:function(){"function"==typeof errorCallBack&&errorCallBack()}})},denyMediaSessionRequest:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:r+e+"/peers/"+t+"/requests/"+n+"/reject",type:"POST",success:function(){"function"==typeof i&&i()},error:function(){"function"==typeof errorCallBack&&errorCallBack()}})},approveSpeakerRequest:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/approvespeakerrequest",type:"POST",contentType:"application/json",data:{session_id:n}})},denySpeakerRequest:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/denyspeakerrequest",type:"POST"})},removeFromSpeaker:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/speaker",type:"DELETE",success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},startBroadcast:function(e,t,n){let i=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:i+e+"/broadcast",type:"POST",success:function(e,n,i,r,o){"function"==typeof t&&t(o.streaming_id)},error:function(){"function"==typeof n&&n()}})},stopBroadcast:function(e,t,n){let i=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:i+e+"/broadcast",type:"DELETE",success:function(){"function"==typeof t&&t()},error:function(){"function"==typeof n&&n()}})},startRecording:function(e,t,n){let i=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:i+e+"/recordings",type:"POST",status:{success:"media.recordings.started.banner"},success:function(e){"function"==typeof t&&t(e.data.index)},error:function(){"function"==typeof n&&n()}})},stopRecording:function(e,t,n,i){let r=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:r+e+"/recordings/"+t+"/stop",type:"POST",status:{success:"media.recordings.stopped.banner"},success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},verifyRecordingLinkPassword:function(e,t,n,i,r,o,s){MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/conferences/"+e+"/recordings/"+t+"/links/"+n+"/verify",type:"POST",data:{password:i},contentType:"application/json",status:{loading:r},success:function(e){"function"==typeof o&&o(e.encrypted_key)},error:function(e){"function"==typeof s&&s(e)}})},verifyRecordingLink:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/recordings/"+e,type:"GET",success:function(e){"function"==typeof t&&t(e)},error:function(e){"function"==typeof n&&n(e)}})},updateConfigurations:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:r+"/v2/conferences/"+e+"/configurations",type:"PUT",data:t,contentType:"application/json",status:{success:"cc.savebanner"},success:()=>{"function"==typeof n&&n()},error:()=>{"function"==typeof i&&i()}})},enableFocusedMode:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/focus",type:"POST",data:{user_ids:t},contentType:"application/json",success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},switchFocusedUsers:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/focus",type:"PUT",data:{user_ids:t},contentType:"application/json",success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},disableFocusedMode:function(e,t,n){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/focus",type:"DELETE",success:function(){"function"==typeof t&&t()},error:function(){"function"==typeof n&&n()}})},react:function(e,t,n){var i={smiley_code:t,user_ids:n,version:1};MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/react",type:"POST",data:i,contentType:"application/json"})},bulkReact:function(e,t){var n=WmsImpl.isGuestConferenceUser()?"/guest":"/api";MediaAPI.getConferenceAjaxWrapper()({url:n+"/v2/conferences/"+e+"/reactions",type:"POST",contentType:"application/json",data:t})},clearNonVerbalFeedback:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/conferences/"+e+"/gestures/"+t+"/clear",type:"POST",status:{loading:n},success:function(){"function"==typeof i&&i()}})},voteNVF:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:r+e+"/gestures/"+t,type:"PUT",status:{loading:n},success:function(e){"function"==typeof i&&i(e)}})},unvoteNVF:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:r+e+"/gestures/"+t,type:"DELETE",status:{loading:n},success:function(e){"function"==typeof i&&i(e)}})},reactGIF:function(e,t,n){var i=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:i+e+"/gifs",type:"POST",contentType:"application/json",data:{url:t},success:function(e){"function"==typeof n&&n(e)}})},switchLayout:function(e,t,n,i){var r=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:r+e+"/layout",type:"POST",contentType:"application/json",data:{type:t},success:function(e){"function"==typeof n&&n(e)},error:function(){"function"==typeof i&&i(resp)}})},sendAck:function(e,t,n,i){var r={type:t};r=ZCJQuery.extend({},r,n);var o=WmsImpl.isGuestConferenceUser()?"/v2/conferences/":"/api/v2/conferences/";MediaAPI.getConferenceAjaxWrapper()({url:o+e+"/ack",type:"POST",contentType:"application/json",data:r,success:function(e){"function"==typeof i&&i(e)}})},updateLog:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/log",type:"PUT",contentType:"application/json",data:t})},updateWmsLog:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/wmslog",type:"PUT",contentType:"application/json",data:t})},invite:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/invite",type:"POST",data:{ids:t,send_invite_mail:n,is_groupcall_switch:i},contentType:"application/json",status:{success:Resource.getRealValue("conference.invite.success"),error:Resource.getRealValue("conference.invite.failure")}})},revokeInvite:function(e,t,n,i){MediaAPI.getConferenceAjaxWrapper()({url:"/v2/conferences/"+e+"/peers/"+t+"/revokeinvite",type:"POST",contentType:"application/json",status:{success:Resource.getRealValue("avcliq.conf.invite.revoke.success")},success:function(){"function"==typeof n&&n()},error:function(){"function"==typeof i&&i()}})},uploadClientLog:function(e,t,n,i){if(!$WC.Util.isEmpty(t)){var r={url:"/v2/conferences/"+e+"/clientlogs",type:"POST"};if($zcg._CONFERENCE_AV_DOMAIN_ROUTING&&MediaUtil.isNewAVDomainRoutingEnabled()&&AVCliqIframeHandler.isLoaded())r.fileHash={fileData:t,fileName:e,fileParamName:"logfile",formDataParams:{subject:n,description:i}},r.sendStringAsFile=!0;else{let o=MediaUtil.getLogAsFile(t,e);if(void 0===o)return;r.data=$ZCAjx.formData({subject:n,description:i},"logfile",o,!0),r.processData=!1,r.contentType=!1}MediaAPI.getConferenceAjaxWrapper()(r)}},getUserConfigurations:function(e){Conference.userDefaultConfiguration?e():MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/settings/calls",success:function(t){Conference.userDefaultConfiguration=t.data.group_call_configs,e()},error:function(){Conference.userDefaultConfiguration=ConferenceConfiguration.getDefaultConfigurations(),e()}})},updateUserInfo:function(e){MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/conferences/"+e+"/userinfo",type:"PUT"})},pushConnectionNetworkDetails:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/conferences/"+e+"/stats",type:"POST",contentType:"application/json",data:{stats:t}})},pushConnectionStats:function(e,t){MediaAPI.getConferenceAjaxWrapper()({url:"/api/v2/conferences/"+e+"/stats",type:"PUT",contentType:"application/json",data:{stats:t}})}};var ConferenceTemplates={};ConferenceTemplates={startUI:'<div id="startconference" class="mcontent flex-col" parent_container conferencetype="{{conference_type}}" {{event_attributes}} scopetype="{{scope_type}}" scopeids="{{scope_ids}}"><div page_state="1" class="brdcst-main flxG dflx flx-dirC page1">{{conference_firstpage}}<div class="bcast-sPage-2 flexG"><div class="flex-col flexG"><div title_field class="clr-M font22 fontB textC fshrink">{{conference_title}}</div><div conference_video_wrapper class="flexG mT24 flexM"><div id="conferencevideopreview" class="bcast-screen bcast-bg flexM"><video id="media_cnt" class="video-screen"></video>{{buffer_loader}}{{user_image_cnt}}<div user_card_wrapper class="{{hide_card}}"></div><div media_configure_cnt class="bcast-vdo-btns flexM"></div></div></div><div id="device_pickers" class="fshrink mT30"></div>{{recording_input}}</div></div></div><div footer_cnt class="bcast-footer"><div class="flexG"><span class="zc-advance-btn dN fontB" style="display: inline;" conferencebutton purpose="toggleConfigurationsWindow"><span>{{permissions}}</span><em class="zcf-slide-up slide-icon"></em></span></div><div class="zcl-btn zcl-btn--secondary mR20" {{custom_attribute}} purpose="{{button_purpose}}" backward_cta>{{back_cta_label}}</div><div id="conferencestartbutton" class="zcl-btn zcl-btn--primary" disabled conferencebutton purpose="switchStartView" forward_cta>{{forward_cta_label}}</div></div></div>{{configurations_html}}',startUIHeader:'<div class="flexG"><div><span class="bold">{{title}}</span></div><div class="font15 clr6 mrgT10">{{hint}}</div></div>',startUIFirstPage:'<div class="bcast-sPage-1"><div class="flexC bcast-form mT20"><div class="bcast-form-label zcl-required fshrink ellips">{{topic_label}}</div><div class="bcast-form-control posrel flexG"><input id="conferencetopic" type="text" class="zcl-input" conferenceinput keyup-purpose="validateTitle" placeholder="{{topic_placeholder}}"><span id="conferencetopiccount" class="limit-txt" category="charcount" limit="{{topic_limit}}"></span></div></div>{{host_indicator_field}}{{associated_resource_html}}{{select_scope_html}}{{chat_input_html}}{{users_input_html}}{{cohosts_input_html}}{{speakers_input_html}}{{spotlight_input_html}}{{add_roles_opt}}{{toggle_mode}}{{recording_input}}</div>',startUIWrapper:'<div class="flexC bcast-form {{custom_class}}" {{custom_attribute}}><div class="bcast-form-label fshrink ellips">{{label}}{{label_icon}}</div><div class="bcast-form-control flexG">{{body_html}}</div></div>',userCard:'<div id="usercard{{user_id}}" class="bcast-card {{show_card}} {{guest_class}}">{{more_options}}<div class="smartconf-bubble-nvf-preview flexM dN" nvf_preview></div><div class="smartconf-bubble-gif-preview flexM dN" gif_preview></div><div class="bcast-card-info flexM dN" card_mute_status><span class="zcf-mic-mute mic-mute-clr" ></span></div>{{more_opt}}<div class="bcast-card-img" user_card_img>{{buffer_loader}}{{user_image_cnt}}</div><span class="bcast-card-title ellips"><span class="bcast-card-host-ind mR5 zcf-owner bcast-gold {{hide_host_tag}}" host_indicator data-title="{{host_title}}"></span><span class="ellips bcast-card-name curP" userid="{{user_id}}" conferencebutton purpose="showUserOptions"  user_card_name {{conference_bcast_card_attr}}>{{user_name}}</span>{{info_opt}}</span><span class="bcast-host-info {{hide_host_tag}}" host_indicator><span class="bcast-card-host-ind mL25 zcf-owner bcast-gold {{hide_host_tag}}" host_indicator data-title="{{host_title}}"></span></span>{{secondary_info}}{{tertiary_info}}</div>',userImageContainer:'<div class="usr-img-cnt vhcenter bdrR100 {{user_image_display_class}}" userimagecnt><div audiowaves class="touranim dN"></div><img class="bdrR100 zc-bdrR100 wh100" {{user_image_onload}} user_image src="{{user_img}}" {{user_img_onerror}} user_dp><img class="bdrR100 zc-bdrR100 wh100 dN" {{user_image_onload}} user_image {{user_img_onerror}} org_user_dp><span class="dN conf-username" user_name>{{user_name}}</span></div>',userImage:'<img class="bdrR100 zc-bdrR100 wh100 zc-wh100"  user_image/>',associatedResourceHtml:'<div class="flexC bcast-form"><div class="bcast-form-label fshrink ellips">{{associate_title}}</div><div class="bcast-form-control flexG"><input id="conference_associated_resource_url" type="text" class="zcl-input" placeholder="{{resource_placeholder}}"></div></div>',layoutOptionsHtml:'<div id="layout_options" class="media-btns-box media-view-change flexC mR12" toggleUIView><div class="hudl-box font14 zcf-grid-view tooltip-up" id="conference_gridview" conferencebutton purpose="switchToGridView" tooltip-title="{{grid_view}}"></div><div class="hudl-box font19 zcf-galaxy tooltip-up active" id="conference_galaxyview" conferencebutton purpose="switchToGalaxyView" tooltip-title="{{galaxy_view}}"></div></div>',chatNotificationLayoutHtml:`<div id="conference-chat-notification" chat_id="{{chat_id}}" conferencebutton purpose="openRHSChatFromNotification" class="zcl-popup zc-notification-popup zc-notification-topright" style="display: none;">\n\t\t   <div class="zc-notification-action flexC">\n\t\t      <span conferencebutton purpose="closeChatNotification" class="zcf-close clr-icon cur p4"></span>\n\t\t   </div>\n\t\t   <div id="chat-notification-message-list" >{{messages_list_html}}</div>\n\t\t   <div class="flexC mT10 textC">\n\t\t      <div class="flx1"><span class="zcl-btn-theme--link fontB font14" chat_id="{{chat_id}}" conferencebutton purpose="openRHSChatFromNotification">${I18N("common.view")}</span></div>\n\t\t   </div>\n\t\t </div>`,chatNotificationMessageHtml:'<div id="notification_{{msguid}}" message_type="{{type}}" class="zc-notification-item">\n\t\t      <div class="flexC">\n\t\t         <span class="zcl-img xs mR6"><img src="{{image_url}}"></span>\n\t\t         <span class="fontB ellips mR20">{{name}}</span>\n\t\t      </div>\n\t\t      <div class="font14 line20 mT6 ellips-L2">{{message}}</div>\n\t\t   </div>',recordingLinkPasswordHeader:`<div id="recording-link-password-head" class="mheader" uid="{{uid}}" link_id="{{link_id}}">\n\t         <div class="zcl-img lg flexM mAuto zcf-unlock"></div>\n\t         <div class="font16 fontB mT15">${I18N("mr.passwordprompt.title")}</div>\n\t         <span id="winclose" class="zchat-close cclose"></span>\n\t      </div>`,recordingLinkPasswordHtml:`<div class="mcontent">\n\t         <div class="pB30">\n\t            <div class="font15">${I18N("mr.passwordprompt.desc")}</div>\n\t            <div class="mT24">\n\t               <div class="posrel">\n\t                  <input id="recording-link-password-text" type="password" class="zcl-input pR20" maxlength="30" placeholder="${I18N("formbuilder.info.password")}">\n\t                  <span id="recording-link-password-invalid" class="error-txt dN">${I18N("mr.password.invalid")}</span>\n\t                  <span class="zcf-hidden zcl-input-infoicon clr-icon-lite curP" visibility_type="hidden" title="${I18N("mr.permalink.showpassword")}" data-type="toggle_password_visibility" documentclick="handleRecording"></span>\n\t               </div>\n\t            </div>\n\t         </div>\n\t         <div class="mcontent_btn_con textR"><button id="winclose" class="zcl-btn-sm mL20 zcl-btn--secondary">${I18N("common.cancel")}</button><button data-type="verify_recording_link_password" documentclick="handleRecording" class="zcl-btn-sm mL20 zcl-btn--primary line1">${I18N("common.access")}</button>\n\t         </div>\n\t      </div>`,settingsLayoutHtml:`<div class="flexC avcliq-setting-main wh100">\n\t      <div class="fshrink avcliq-setting-lhs h100">\n\t         <div class="font18 fontB zcl-hdrline">${I18N("common.settings")}</div>\n\t         <div id="conf-settings-lhs" class="mT20">\n\t            <div id="conf-config-lhs" class="flexC zcl-list-item2 {{active_class}} {{configuration_cls}}" settingstab {{button_attr}} purpose="switchToConfigurationsTab"><span class="zcl-img md flexM zcf-setting fshrink mR10"></span>${I18N("common.permission")}</div>\n  \t\t\t\t<div id="conf-devicesetting-lhs" class="flexC mT30 zcl-list-item2" settingstab {{button_attr}} purpose="setMediaDevices"><span class="zcl-img md flexM zcf-device-setting fshrink mR10"></span>${I18N("videochat.settings.devicesettings")}</div>\n  \t\t\t\t{{video_effects}}\n  \t\t\t\t{{personal_config}}\n\t         </div>\n\t      </div>\n\t      <div class="flexG ovrflwH h100">\n\t      \t<div id="conference_settings_body" class="flexG flex-col ovrflwH h100">\n\t      \t\t{{settings_body_html}}\n\t      \t</div>\n\t      </div>\n\t   </div>`,configurationsSettingsLayoutHtml:`<div class="zcl-win-subcategory fshrink conf-config pT10 pB10">\n\t\t    <div class="flexC curD">${I18N("common.permission")}</div>\n\t\t</div>\n\t\t<div class="clr-S font14 line24 pLR36 wrd-brk mB10">{{cc_description}}</div>\n\t\t<div class="flexG ovrflwA">\n\t\t\t{{configurations_html}}\n\t\t</div>`,configurationsStartPageHtml:`<div id="conference_configurations" class="chl-adpopup wh100 zindex3 dN">\n\t\t   <div class="channel-advance-cont flex-col">\n\t\t      <div class="flex-col flexG ovrflwH">\n\t\t         <div class="zcl-win-subcategory configuration-modal-header fshrink" conferencebutton purpose="toggleConfigurationsWindow">\n\t\t            <div class="zc-advance-btn flexC">${I18N("common.permission")}<span class="zcf-slide-down slide-icon slide-icon_down"></span></div>\n\t\t         </div>\n\t\t\t\t <div class="flexG ovrflwA">\n\t\t\t\t \t{{configurations_html}}\n\t\t\t\t </div>\n\t\t      </div>\n\t\t      <div class="channelRHS-advance-ftr flexC">`+`<button class="zcl-btn zcl-btn--primary mLA" conferencebutton purpose="toggleConfigurationsWindow">${I18N("common.close")}</button></div>\n\t\t   </div>\n\t\t</div>`,labelWithCheckBoxHtml:'<td class="{{class_var}}">\n\t\t\t\t\t\t\t    <label class="flexIC curP mL3" checkboxcontainer {{label_custom_attr}}><div class="zcl-checkbox"><input id="{{id}}" type="checkbox" config_name="presentation" conferencecheckbox purpose="updateConfigurations" {{input_custom_attr}}><span class="zcf-tick flexM"></span>\n\t\t\t\t\t\t\t    \t</div>\n\t\t\t\t\t\t\t    \t<span class="configuration-loader zcl-rloader mR5 dN"></span>\n\t\t\t\t\t\t\t    </label>\n\t\t\t\t\t\t\t </td>',configurationsHtml:`<div class="pLR36 mT16 mB35">\n\t\t   <table class="groupcall-tbl {{remove_ext_category_bdr}}">\n\t\t      <tbody>\n\t\t         <tr>\n\t\t            <th rowspan="2" class="brdr-btm-transpt">${I18N("messagesource.messageaction")}</th>\n\t\t            <th colspan="{{num_of_col}}">${I18N("module.participants")}</th>\n\t\t         </tr>\n\t\t         <tr>\n\t\t            <th>{{cohost}}</th>\n\t\t            <th>{{org_member}}</th>\n\t\t            <th class="{{remove_ext_category}}">{{external_user}}</th>\n\t\t         </tr>\n\t\t         <tr class="{{screen_share_cls}}">\n\t\t            <td class="groupcall-tbl-title-cel">${I18N("cc.screen_share")}</td>\n\t\t            <td>`+'<label class="flexIC curP mL3" checkboxcontainer {{cc_screen_share_cohost_disabled}}><div class="zcl-checkbox"><input id="cc_screen_share_cohost" type="checkbox" config_name="screen_share" conferencecheckbox purpose="updateConfigurations" {{cc_screen_share_cohost}}><span class="zcf-tick flexM"></span></div><span class="configuration-loader zcl-rloader mR5 dN"></span></label></td>\n\t\t            <td><label class="flexIC curP mL3" checkboxcontainer {{cc_screen_share_same_org_disabled}}><div class="zcl-checkbox"><input id="cc_screen_share_same_org" type="checkbox" config_name="screen_share" conferencecheckbox purpose="updateConfigurations" {{cc_screen_share_same_org}}><span class="zcf-tick flexM"></span></div><span class="configuration-loader zcl-rloader mR5 dN"></span></label></td>\n\t\t           \t<td class="{{remove_ext_category}}"><label class="flexIC curP mL3" checkboxcontainer {{cc_screen_share_external_user_disabled}}><div class="zcl-checkbox"><input id="cc_screen_share_external_user" type="checkbox" config_name="screen_share" conferencecheckbox purpose="updateConfigurations" {{cc_screen_share_external_user}}><span class="zcf-tick flexM"></span></div><span class="configuration-loader zcl-rloader mR5 dN"></span></label>'+`</td>\n\t\t         </tr>\n\t\t         <tr>\n\t\t            <td class="groupcall-tbl-title-cel">${I18N("cc.grid_view")}</td>\n\t\t            <td>`+'<label class="flexIC curP mL3" checkboxcontainer {{cc_grid_view_cohost_disabled}}><div class="zcl-checkbox"><input id="cc_grid_view_cohost" type="checkbox" config_name="grid_view" conferencecheckbox purpose="updateConfigurations" {{cc_grid_view_cohost}}><span class="zcf-tick flexM"></span></div><span class="configuration-loader zcl-rloader mR5 dN"></span></label></td>\n\t\t            <td><label class="flexIC curP mL3" checkboxcontainer {{cc_grid_view_same_org_disabled}}><div class="zcl-checkbox"><input id="cc_grid_view_same_org" type="checkbox" config_name="grid_view" conferencecheckbox purpose="updateConfigurations" {{cc_grid_view_same_org}}><span class="zcf-tick flexM"></span></div><span class="configuration-loader zcl-rloader mR5 dN"></span></label></td>\n\t\t            <td class="{{remove_ext_category}}"><label class="flexIC curP mL3" checkboxcontainer {{cc_grid_view_external_user_disabled}}><div class="zcl-checkbox"><input id="cc_grid_view_external_user" type="checkbox" config_name="grid_view" conferencecheckbox purpose="updateConfigurations" {{cc_grid_view_external_user}}><span class="zcf-tick flexM"></span></div><span class="configuration-loader zcl-rloader mR5 dN"></span></label>'+`</td>\n\t\t         </tr>\n\t\t         <tr class="{{presentation_cls}}">\n\t\t            <td class="groupcall-tbl-title-cel">${I18N("media.presentation.start")}</td>\n\t\t            {{cohost_checkbox_html}}\n\t\t            {{sameorg_checkbox_html}}\n\t\t            {{ext_org_checkbox_html}}\n\t\t         </tr>\n\t\t      </tbody>\n\t\t   </table>\n\t\t</div>\n\t\t<div class="zcl-win-subcategory">${I18N("cc.general_configurations")}</div>\n\t\t<div class="conference-config-cont mTB20 {{recording_access_cls}}">\n\t\t   <div class="flexG ellips pTB10">${I18N("cc.recording_access")}</div>\n\t\t   <div class="flex-base">\n\t\t      <div>\n\t\t         <div id="cc_recording_access" class="channelreplydrpdown drpdwn-wrp view-recording">\n\t\t            <div class="drpdwn-input flexC" conferencebutton purpose="showRecordingAcesssDropdown">\n\t\t               <div id="cc_recording_access_value" class="drpdwn-label ellips" cc_value="{{cc_recording_access_value}}">{{cc_recording_access}}</div>\n\t\t               <em class="zcf-downArrow srchin-downArrow"></em>\n\t\t            </div>\n\t\t            <div id="cc_recording_access_dropdown" class="drpdwn-option" style="display: none;">\n\t\t               <div class="option-list ps-container ps-theme-default">\n\t\t                  <div id="recording_access_host" class="flexC option-item {{recording_access_host}}" cc_value="host" conferencebutton purpose="selectRecordingAccessOption">\n\t\t                     <div class="option-desc ellips">\n\t\t                        <div class="opt-title ellips">${I18N("cc.recording_access.host")}</div>\n\t\t                     </div>\n\t\t                  </div>\n\t\t                  <div id="recording_access_cohosts" class="flexC option-item {{recording_access_cohosts}}" cc_value="cohosts" conferencebutton purpose="selectRecordingAccessOption">\n\t\t                     <div class="option-desc ellips">\n\t\t                        <div class="opt-title ellips">${I18N("cc.recording_access.cohosts")}</div>\n\t\t                     </div>\n\t\t                  </div>\n\t\t                  <div id="recording_access_attendees" class="flexC option-item {{recording_access_attendees}}" cc_value="attendees" conferencebutton purpose="selectRecordingAccessOption">\n\t\t                     <div class="option-desc ellips">\n\t\t                        <div class="opt-title ellips">${I18N("cc.recording_access.attendees")}</div>\n\t\t                     </div>\n\t\t                  </div>\n\t\t                  <div id="recording_access_invitees" class="flexC option-item  {{recording_access_invitees}}" cc_value="invitees" conferencebutton purpose="selectRecordingAccessOption">\n\t\t                     <div class="option-desc ellips">\n\t\t                        <div class="opt-title ellips">${I18N("cc.recording_access.invitees")}</div>\n\t\t                     </div>\n\t\t                  </div>\n\t\t               </div>\n\t\t            </div>\n\t\t         </div>\n\t\t      </div>\n\t\t   </div>\n\t\t</div>\n\t\t<div class="conference-config-cont mTB20 {{remove_ext_category}}">\n\t\t   <div class="flexG ellips">${I18N("cc.waiting_lobby")}</div>\n\t\t   <div class="flex-base">`+'<label class="zcl-switch zcl-switch-sm no-icon" checkboxcontainer><input id="cc_waiting_room" type="checkbox" config_name="waiting_room" conferencecheckbox purpose="updateConfigurations" {{cc_waiting_room}}><span class="slider"><em class="switch"></em><div class="zcl-dot--loader"><span></span><span></span><span></span></div></span></label>'+`</div>\n\t\t</div>\n\t\t<div class="conference-config-cont mTB20 {{remove_ext_category}}">\n\t\t   <div class="flexG ellips">${I18N("cc.chat_access")}</div>\n\t\t   <div class="flex-base">`+'<label class="zcl-switch zcl-switch-sm no-icon" checkboxcontainer><input id="cc_chat_access" type="checkbox" config_name="chat_access" conferencecheckbox purpose="updateConfigurations" {{cc_chat_access}}><span class="slider"><em class="switch"></em><div class="zcl-dot--loader"><span></span><span></span><span></span></div></span></label>'+`</div>\n\t\t</div>\n\t\t<div class="conference-config-cont mTB20">\n\t\t   <div class="flexG ellips pTB10">${I18N("cc.meeting_chat_type")}</div>\n\t\t   <div class="flex-base">\n\t\t      <div>\n\t\t         <div id="cc_meeting_chat_type" class="channelreplydrpdown drpdwn-wrp {{cc_meeting_chat_type_disabled_cls}}">\n\t\t            <div class="drpdwn-input flexC" conferencebutton purpose="showMeetingChatTypeDropdown">\n\t\t               <div id="cc_meeting_chat_type_value" class="drpdwn-label ellips" cc_value="{{cc_meeting_chat_type_value}}">{{cc_meeting_chat_type}}</div>\n\t\t               <em class="zcf-downArrow srchin-downArrow"></em>\n\t\t            </div>\n\t\t            <div id="cc_meeting_chat_type_dropdown" class="drpdwn-option" style="display: none;">\n\t\t               <div class="option-list ps-container ps-theme-default">\n\t\t                  <div id="meeting_chat_type_channel" class="flexC option-item {{meeting_chat_type_channel}}" cc_value="channel" conferencebutton purpose="selectMeetingChatTypeOption">\n\t\t                     <div class="option-desc ellips">\n\t\t                        <div class="opt-title ellips">${I18N("cc.meetingchattype.channel")}</div>\n\t\t                     </div>\n\t\t                  </div>\n\t\t                  <div id="meeting_chat_type_thread" class="flexC option-item {{meeting_chat_type_thread}}" cc_value="thread" conferencebutton purpose="selectMeetingChatTypeOption">\n\t\t                     <div class="option-desc ellips">\n\t\t                        <div class="opt-title ellips">${I18N("cc.meetingchattype.thread")}</div>\n\t\t                     </div>\n\t\t                  </div>\n\t\t               </div>\n\t\t            </div>\n\t\t         </div>\n\t\t      </div>\n\t\t   </div>\n\t\t</div>\n\t\t<div class="conference-config-cont {{cc_meeting_chat_type_info_disabled_cls}}"><div class="zcl-hint-box max-wI flexG">{{cc_meeting_chat_type_info}}</div></div>\n\t\t<div class="conference-config-cont mTB20 {{whiteboard_cls}}">\n\t\t   <div class="flexG ellips">${I18N("cc.edit_whiteboard")}</div>\n\t\t   <div class="flex-base">`+'<label class="zcl-switch zcl-switch-sm no-icon" checkboxcontainer><input id="cc_edit_whiteboard" type="checkbox" config_name="edit_whiteboard" conferencecheckbox purpose="updateConfigurations" {{cc_edit_whiteboard}}><span class="slider"><em class="switch"></em><div class="zcl-dot--loader"><span></span><span></span><span></span></div></span></label></div>\n\t\t</div>'+`<div class="conference-config-cont mTB20">\n\t\t   <div class="flexG ellips">${I18N("smiley.signs")}</div>\n\t\t   <div class="flex-base">`+'<label class="zcl-switch zcl-switch-sm no-icon" checkboxcontainer><input id="cc_special_reactions" type="checkbox" config_name="special_reactions" conferencecheckbox purpose="updateConfigurations" {{cc_special_reactions}}><span class="slider"><em class="switch"></em><div class="zcl-dot--loader"><span></span><span></span><span></span></div></span></label>'+`</div>\n\t\t</div>\n\t\t<div class="conference-config-cont mTB20">\n\t\t   <div class="flexG ellips">${I18N("message.option.reaction")}</div>\n\t\t   <div class="flex-base">\n\t\t      <div id="cc_reaction_view_config" class="flexIC">`+`<label for="cc_reaction_view_all" class="zcl-radio mR20"><input id="cc_reaction_view_all" name="cc_reaction_view"  type="radio" config_name="reaction_view" conferencecheckbox purpose="updateConfigurations" cc_reaction_view class="dN" cc_value="all" {{cc_reaction_view_all}}><span class="radio-btn-marked mR6"></span><div class="ellips line18 clr-M">${I18N("cc.all_reactions")}</div></label>`+'<label for="cc_reaction_view_basic" class="zcl-radio"><input id="cc_reaction_view_basic" name="cc_reaction_view" type="radio" config_name="reaction_view" conferencecheckbox purpose="updateConfigurations" cc_reaction_view class="dN" cc_value="basic" {{cc_reaction_view_basic}}><span class="radio-btn-marked mR6"></span><div class="line18 clr-M flexC">\n\t\t               <span>{{basic_reactions}} - </span>\n\t\t               <span class="flexC zc-recentemoji-list mL4">\n\t\t                  <div class="smlynone" title="Thumbs up">\n\t\t                     <div class="zcslymsg-anim-24-thumbsup" code=":thumbsup!:"></div>\n\t\t                  </div>\n\t\t                  <div class="smlynone" title="Clap">\n\t\t                     <div class="zcslymsg-anim-24-clap" code=":clap!:"></div>\n\t\t                  </div>\n\t\t                  <div class="smlynone" title="Love">\n\t\t                     <div class="zcslymsg-anim-24-love" code=":love!:"></div>\n\t\t                  </div>\n\t\t                  <div class="smlynone" title="Cool">\n\t\t                     <div class="zcslymsg-anim-24-cool" code=":cool!:"></div>\n\t\t                  </div>\n\t\t                  <div class="smlynone" title="Raising hand">\n\t\t                     <div class="zcslymsg-anim-24-raising-hand" code=":raising-hand!:"></div>\n\t\t                  </div>\n\t\t                  <div class="smlynone" title="Fireworks">\n\t\t                     <div class="zcslymsg-anim-24-fireworks" code=":fireworks!:"></div>\n\t\t                  </div>\n\t\t               </span>\n\t\t            </div>\n\t\t         </label>\n\t\t      </div>\n\t\t   </div>\n\t\t</div>',eachDeviceCategoryHtml:'<div id="{{category}}dropdowncnt" class="flexC zc-av-device-drpdwn" selecteddeviceid="{{selected_device_id}}" dropdowncnt devicekind="{{category}}">\n\t\t      <div class="flexG">{{label}}</div>\n\t\t      <div class="mLR40 textL w50 zcl-dropdown-wrp">\n\t\t         <div class="zcl-dropdown-input" mediamodulebuttons purpose="openDevicesDropDown"><span class="font14 fshrink zcl-dropdown-icon {{icon}}"></span><span class="zcl-dropdown-label ellips" dropdowninput>{{selected_device_name}}</span><span class="zcf-downArrow fon12 fshrink zcl-dropdown-icon"></span></div>\n\t\t         <div id="{{category}}dropdown" class="zcl-menu-wrap no-pointer" dropdown style="display: none;">\n\t\t            {{devices_dropdown_list_html}}\n\t\t         </div>\n\t\t      </div>\n\t\t </div>',deviceDropdownListItem:'<div class="zcl-menu-item" deviceid="{{device_id}}" devicelabel="{{device_name}}" mediadevicewidgetbutton purpose="selectDevice">\n\t\t        <div class="flexG ellips">{{device_name}}</div>\n\t\t  </div>',deviceSettingsHtml:`<div class="zcl-win-subcategory fshrink conf-config pT10 pB10">\n\t\t   <div class="flexC curD">${I18N("videochat.settings.devicesettings")}</div>\n\t\t</div>\n\t\t<div id="media_device_widget" class="mT30 pLR30">\n    \t \t{{category_list_html}}\n\t\t</div>`,startRecordingConsentHeader:'<div class="zcl-img xl flexM mAuto bg-success"><em class="zcf-mic clrW mT10"></em></div>\n\t\t <div class="flexM font16 textC line24 mT12">{{start_recording_hint}}</div>',startRecordingConsentHtml:`<div class="modalwindow2-footer flexC justifyE">\n    \t\t<div class="zcl-btn zcl-btn--secondary" conferencebutton purpose="handleLeaveMeetingUponRecordingStart">${I18N("common.leave")}</div>\n    \t\t<div class="zcl-btn bg-success mL20" conferencebutton purpose="handleContinueMeetingUponRecordingStart">${I18N("common.continue")}</div>\n    \t </div>`,getChatNotificationMessageHtml(e){let t="true"==e.threadmsg,n=$WC.template.replace(this.chatNotificationMessageHtml,{msguid:e.msguid,image_url:Users.getImgUrlById(e.sender),type:t?"thread":"parent",name:Users.getName(e.sender,e.dname)+(t?"":" @"+e.title)});return $WC.template.replace(n,{message:MsgTemplate.getMsgHTML(e)},"InSecureHTML")},getChatNotificationLayoutHtml:function(e,t){let n=$WC.template.replace(this.chatNotificationLayoutHtml,{chat_id:e.chid});return $WC.template.replace(n,{messages_list_html:this.getChatNotificationMessageHtml(e)},"InSecureHTML")},getStartRecordingConsentHeader:function(e){return $WC.template.replace(this.startRecordingConsentHeader,{start_recording_hint:Resource.getRealValue("conference.recording.started",[$WC.$CUtil.processXSS(e)])})},getRecordingLinkPasswordHeader:function(e,t){return $WC.template.replace(this.recordingLinkPasswordHeader,{uid:e.id,link_id:t})},getLabelWithCheckBoxHtml:function(e,t){return $WC.template.replace(this.labelWithCheckBoxHtml,{label_custom_attr:"{{"+e+"_disabled}}",id:e,class_var:t?"{{remove_ext_category}}":"",input_custom_attr:"{{"+e+"}}"})},replacePresentationLabels:function(e,t){return $WC.template.replace(e,{cohost_checkbox_html:t?this.getLabelWithCheckBoxHtml("cc_presentation_cohost"):"",sameorg_checkbox_html:t?this.getLabelWithCheckBoxHtml("cc_presentation_same_org"):"",ext_org_checkbox_html:t?this.getLabelWithCheckBoxHtml("cc_presentation_external_user",!0):""},"InSecureHTML")},getConfigurationsHtml:function(e,t,n){let i="undefined"==typeof OrgFeatures||OrgFeatures.isIntranetRequest(),r=Conference.isRecordingAllowed(),o=Conference.isWhiteBoardAllowed(),s=Conference.isScreenShareAllowed(),a=Conference.isPresentationsAllowed(),c=void 0!==t,d=c&&t.isCurrentUserCohost(),l={$cohost:"cc.cohost",$org_member:"cc.same_org",$external_user:"cc.external_user",$basic_reactions:"cc.basic_reactions",recording_access_cls:r?"":"dN",whiteboard_cls:o?"":"dN",screen_share_cls:s?"":"dN",presentation_cls:a?"":"dN",remove_ext_category:i?"":"dN",num_of_col:i?"3":"2",remove_ext_category_bdr:i?"":"bdr-right"};if(s){let t=e.screen_share.includes(ZCSmartConferenceConstants.configurationUserTypes.COHOST),n=d&&!t;l.cc_screen_share_cohost=t?"checked":"",l.cc_screen_share_same_org=e.screen_share.includes("same_org")?"checked":"",l.cc_screen_share_external_user=e.screen_share.includes("external_user")?"checked":"",l.cc_screen_share_cohost_disabled=d?"disabled":"",l.cc_screen_share_same_org_disabled=n?"disabled":"",l.cc_screen_share_external_user_disabled=n?"disabled":""}var u=this.replacePresentationLabels(this.configurationsHtml,a&&e.presentation);if(a&&e.presentation){let t=e.presentation.includes(ZCSmartConferenceConstants.configurationUserTypes.COHOST),n=d&&!t;l.cc_presentation_cohost=t?"checked":"",l.cc_presentation_same_org=e.presentation.includes("same_org")?"checked":"",l.cc_presentation_external_user=e.presentation.includes("external_user")?"checked":"",l.cc_presentation_cohost_disabled=d?"disabled":"",l.cc_presentation_same_org_disabled=n?"disabled":"",l.cc_presentation_external_user_disabled=n?"disabled":""}let f=e.grid_view.includes(ZCSmartConferenceConstants.configurationUserTypes.COHOST),m=d&&!f;if(l.cc_grid_view_cohost=f?"checked":"",l.cc_grid_view_same_org=e.grid_view.includes("same_org")?"checked":"",l.cc_grid_view_external_user=e.grid_view.includes("external_user")?"checked":"",l.cc_grid_view_cohost_disabled=d?"disabled":"",l.cc_grid_view_same_org_disabled=m?"disabled":"",l.cc_grid_view_external_user_disabled=m?"disabled":"",l.cc_recording_access_value="invitees",r){let t=e.recording_access;l.$cc_recording_access="cc.recording_access."+t,l.cc_recording_access_value=t,l["recording_access_"+t]="sel_status"}l.cc_waiting_room="enabled"!==e.waiting_room?"checked":"",l.cc_chat_access="disabled"!==e.chat_access?"checked":"";let C="thread",p=!1,h=void 0!==n&&new $CliqChatId(n).isChannel();if(h){let t=Channels.getByChid(n);"host_choice"===(C=void 0!==t&&"undefined"!=typeof ChannelConfig?ChannelConfig.getMeetingChatTypeConfigFromChannelObject(t):"host_choice")&&(p=!0,C=e.chat_type||"thread")}else C=e.chat_type||"thread";l.$cc_meeting_chat_type="cc.meetingchattype."+C,l.cc_meeting_chat_type_value=C,l["meeting_chat_type_"+C]="sel_status",l.cc_meeting_chat_type_disabled_cls=c||h&&!p?"drpdwn-disable":"",l.$cc_meeting_chat_type_info="cc.meeting_chat_type."+C+".hint",l.cc_meeting_chat_type_info_disabled_cls=h&&!p?"":"dN",o&&(l.cc_edit_whiteboard="disabled"!==e.edit_whiteboard?"checked":""),l.cc_special_reactions="disabled"!==e.special_reactions?"checked":"";let g="basic"!==e.reaction_view;return l.cc_reaction_view_all=g?"checked":"",l.cc_reaction_view_basic=g?"":"checked",$WC.template.replace(u,l)},getSettingsLayoutHtml:function(e,t){let n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=n.hasHostPermission();var r=$WC.template.replace('<div id="conf-personal-config-lhs" class="flexC mT30 zcl-list-item2 mR10" settingstab smartconferencebutton purpose="switchToPersonalConfigurations"><span class="zcf-personalise-settng zcl-img md flexM fshrink mR10"></span>{{label}}</div>',{$label:"cc.personal.settings"}),o="";n.isVideoConference()&&(o=$WC.template.replace('<div id="conf-video-effects-lhs" class="flexC mT30 zcl-list-item2 mR10" settingstab smartconferencebutton purpose="switchToVideoEffects"><span class="zcf-video-blur zcl-img md flexM fshrink mR10"></span>{{label}}</div>',{$label:"cc.video.effects"}));let s=$WC.template.replace(this.settingsLayoutHtml,{personal_config:r,video_effects:o,active_class:t?"":"active",settings_body_html:i&&!t?this.getConfigurationsBodyHtml(e,n):$Util.emptyStateHtml({imageclass:"zcl-rloader"})},"InSecureHTML");return $WC.template.replace(s,{configuration_cls:i?"":"dN",button_attr:n instanceof ConferenceSession?"conferencebutton":"smartconferencebutton"})},getConfigurationsBodyHtml:function(e,t){ZCTrack.track("MEETING_PERMISSIONS",{TRIGGER:"DURING_CALL"});let n=$WC.template.replace(this.configurationsSettingsLayoutHtml,{configurations_html:this.getConfigurationsHtml(e,t,void 0!==t?t.getChatId():void 0)},"InSecureHTML");return $WC.template.replace(n,{$cc_description:"cc.description"})},getConfigurationsStartPageHtml:function(e,t){return $WC.template.replace(this.configurationsStartPageHtml,{configurations_html:this.getConfigurationsHtml($.isEmptyObject(e)?ConferenceConfiguration.getDefaultConfigurations():e,void 0,t)},"InSecureHTML")},getDeviceSettingsHtml:function(e,t,n){if(Conference.isNomenclatureEnabled())return this.getV2DeviceSettingsHtml(e,t,n);var i=[],r=[],o=[];function s(e){var n="",i=void 0;return e.forEach((function(e){(ZCMediaDevices.isAudioInputDevice(e)?t[ZCMediaDevices.kinds.AUDIO_INPUT]&&t.audioInputDeviceId==e.deviceId:ZCMediaDevices.isAudioOutputDevice(e)?t[ZCMediaDevices.kinds.AUDIO_OUTPUT]&&t.audioOutputDeviceId==e.deviceId:t[ZCMediaDevices.kinds.VIDEO_INPUT]&&t.videoInputDeviceId==e.deviceId)&&(i=e),n+=$WC.template.replace(ConferenceTemplates.deviceDropdownListItem,{device_id:e.deviceId,device_name:e.label})})),i=void 0===i&&e.length?e[0]:i,{html:n,selected:i}}function a(e,t,n,i,r){var o=void 0!==r.selected,s=$WC.template.replace(ConferenceTemplates.eachDeviceCategoryHtml,{$label:t,icon:n,selected_device_id:o?r.selected.deviceId:"",selected_device_name:o?r.selected.label:I18N("videochat.settings.nodevice"),category:i});return s=$WC.template.replace(s,{devices_dropdown_list_html:r.html},"InSecureHTML")}e.forEach((function(e){ZCMediaDevices.isVideoInputDevice(e)?i.push(e):ZCMediaDevices.isAudioInputDevice(e)?r.push(e):o.push(e)}));var c="";return t[ZCMediaDevices.kinds.VIDEO_INPUT]&&(c+=a(0,"emoji.camera","zcf-video",ZCMediaDevices.kinds.VIDEO_INPUT,s(i))),t[ZCMediaDevices.kinds.AUDIO_INPUT]&&(c+=a(0,"emoji.microphone","zcf-mic",ZCMediaDevices.kinds.AUDIO_INPUT,s(r))),t[ZCMediaDevices.kinds.AUDIO_OUTPUT]&&(c+=a(0,"videochat.settings.soundoutput","msi-ldspeaker",ZCMediaDevices.kinds.AUDIO_OUTPUT,s(o))),$WC.template.replace(this.deviceSettingsHtml,{category_list_html:c},"InSecureHTML")},getV2DeviceSettingsHtml:function(e,t,n){var i=n.isVideoConference(),r=!n.hasAudioUpStream()||!n.getAudioUpStream()._isAudioTrackEnabled()||n.getAudioUpStream()._isAudioRestrictedForConnection(),o=!n.hasVideoUpStream()||!n.getVideoUpStream()._isVideoTrackEnabled(),s=ZCSmartConferenceTemplates.getPreviewAudioInputDevicePickerHtml(n,void 0,!0),a=ZCSmartConferenceTemplates.getPreviewAudioOutputDevicePickerHtml(n,void 0,!0),c=MediaTemplates.getMediaControlOption({headerKey:"media.setdevices.audioinput",iconClass:r?"zcf-mic-mute":"zcf-mic",needsSeparator:!1,checkboxAttribute:"smartconferencemediacheckbox",checkboxPurpose:"toggleAudioInSessionPreview",isSelected:!r,customClass:"smartconf-mic-toggle",customAttribute:"audio_toggle_in_preview",deviceDropDown:s}),d="";""!==a&&(d=MediaTemplates.getOutputAudioControlOption({headerKey:"media.setdevices.audiooutput",customClass:"",customAttribute:"audio_output_toggle_in_preview",needsSeparator:!1,audioOutputAttribute:"smartconferencebutton",audioOutputPurpose:"playDummySoundInPreviewPage",disablePlayBtn:n.isAudioUpStreamBlocked()?"zcf-disable-play-btn":"",deviceDropDown:a}));var l="",u="",f="",m="";if(i){var C=ZCSmartConferenceTemplates.getPreviewVideoInputDevicePickerHtml(n,void 0,!0);l=MediaTemplates.getMediaControlOption({headerKey:"media.setdevices.videoinput",iconClass:o?"zcf-video-mute":"zcf-video",needsSeparator:!1,checkboxAttribute:"smartconferencemediacheckbox",checkboxPurpose:"toggleVideoInSessionPreview",isSelected:!o,customClass:"smartconf-cam-toggle",customAttribute:"video_toggle_in_preview",deviceDropDown:C}),u=o?"dN":"";var p="";n.getCurrentMember().isVideoMuted()&&(p="zcdisabled"),m=$WC.template.replace('<div class="mT10 line1 pL4 {{check_box_disabled}}" video_mirror>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{video_mirror_checkbox}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>',{video_mirror_checkbox:MediaTemplates.getCheckboxHtml("conf_video_mirror_toggle","cc.video.mirror",ZCMediaPreferences.isRotateVideoEnabledByUser(),"smartconferencebutton","toggleVideoRotateConfigForDeviceSettings",!0),check_box_disabled:p},"InSecureHTML")}else f="smartconf-audio-preview";var h=$WC.template.replace(`<div class="zcl-win-subcategory fshrink conf-config pT10 pB10">\n\t\t\t\t\t\t\t\t\t\t\t<div class="flexC curD">${I18N("videochat.settings.devicesettings")}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="smartconf-preview-main-settings flex-col">\n\t\t\t\t\t\t\t\t\t\t\t<div id="smartconf_video_effects_config_cnt" class="flex flexG pLR24">\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="smartconf_video_effects_config_preview" class="posrel flex-col smartconf-preview-video-container smartconf-preview-left">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div id="smartconference_settings_preview" class="smartconf-preview-video flexM alignselfS">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{audio_card}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zcl-rloader posabs sm" loader></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="flexM smartconf-userimg posabs {{img_class}}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img userImage src="{{img_src}}">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<video class="wh100 zindex1"></video> `+'{{disable_video}}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t    {{video_mirror_option}}\n\t\t\t\t\t\t\t\t\t\t\t    </div>\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="media_device_widget" class="w100 mL10 flexG">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zc-av-device-segment-cnt">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{video_control}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{audio_control}}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{audio_output_control}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{system_requirement_link}}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>',{audio_card:MediaTemplates.getAudioCardHtml(n.getCurrentUserId()),audio_control:c,video_control:l,audio_output_control:d,system_requirement_link:MediaTemplates.getSystemRequirementLinkHtml(),disable_video:i&&n.isVideoUpStreamBlocked()?MediaTemplates.getCameraDisabledInfo():"",video_mirror_option:m},"InSecureHTML");return $WC.template.replace(h,{img_class:u,img_src:Users.getImgUrlById(n.getCurrentUserId()),mode_class:f})},getLayoutOptionsHtml:function(){return $WC.template.replace(this.layoutOptionsHtml,{$grid_view:"media.grid",$galaxy_view:"media.galaxy"})},getAssociatedResourceHtml:function(){return ConferenceTemplates.associatedResourceHtml},getMutedInfoCntHtml:function(e){var t=e.getCurrentMember();if(!t.isAudioUnmuteRestricted()||t.isCohost()){var n=MediaUtil.getMuteShortCutFnKey();return MediaTemplates.getTopBandHtml({id:"audioMutedInfoCnt",customClass:"smartconf-audio-muted-banner",contentResourceParams:"media.muted.info",shortCutResourceParams:["media.muted.additional.shortcut",n],shortContentResourceParams:["media.muted.shortcut",n],icons:[{className:"zcf-mic-mute"}]})}var i=ZCSmartConferenceUI.getMuteBandContent(e);return MediaTemplates.getTopBandHtml({id:"audioMutedInfoCnt",customClass:"smartconf-audio-muted-banner",contentResourceParams:i,icons:[{className:"zcf-mic-mute"}]})},getUserCardHtml:function(e,t,n,i,r,o,s,a){var c=$WC.template.replace(this.userCard,{secondary_info:$WC.Util.isEmpty(i)?"":'<span secondary_info class="bcast-card-subtitle mT5 ellips" data-title="{{secondary_info}}">{{secondary_info}}</span>',tertiary_info:$WC.Util.isEmpty(r)?"":'<span tertiary_info class="bcast-card-subtitle mT5 ellips" data-title="{{tertiary_info}}">{{tertiary_info}}</span>',buffer_loader:s?"":MediaTemplates.getBufferLoader(),user_image_cnt:ConferenceTemplates.userImageContainer,more_opt:'<div id="conf_user_more_opts" class="bcast-more-opt zcf-moreS flexM dN" conferencebutton purpose="showUserOptions" userid="{{user_id}}"></div>',info_opt:'<em id="conf_user_more_opts" class ="bcast-info-icon zcf-info-filled bcast-info-more-opt curP dN" conferencebutton purpose="showUserOptions" userid="{{user_id}}"></em>'},"InSecureHTML"),d="zcf-mic";if(WmsImpl.isLocalUser()){var l=WebRTCUserMedia.getStream(o);!l||l._isAudioTrackEnabled()&&!l._isAudioRestrictedForConnection()||(d="zcf-mic-mute")}return $WC.template.replace(c,{user_img:ZCSmartConferenceTemplates.getUserImgUrl(e),user_image_display_class:"",user_image_onload:s?" onload=ZCSmartConferenceHandler.onImageLoadEvents.audioCardUserImage(this) ":"",user_img_onerror:" onerror=ZCSmartConferenceHandler.onImageLoadErrorEvents.removeAudioCardUserImage(this) ",user_id:e,audio_muted:d,conference_bcast_card_attr:s?"conferencebcastcardtitle":"",user_name:Users.getName(e,t),secondary_info:void 0!==i?i:"",tertiary_info:void 0!==r?r:"",more_options:"",show_card:a?"":"dN",background_image:$zcg._IMGDEFAULTSTATICURL+"/media/audio-card-bg.png",$host_title:"media.host",hide_host_tag:n?"":"hide",guest_class:WmsImpl.isGuestUserId(e)?"smartconf-guest-card-cnt":""})},getMediaConfigureOptionsHtml:function(e,t,n){var i='<div class="hudl-box zcf-mic{{audio_muted}}" conferencebutton purpose="{{mic_btn_purpose}}" tooltip-title="{{mic_state_tooltip}}"></div>'+(e===Conference.types.VIDEO?'<div class="hudl-box zcf-video{{video_muted}}" title="{{cam_state_tooltip}}" conferencebutton purpose="{{cam_btn_purpose}}"></div>':""),r=void 0!==t&&(!t._isAudioTrackEnabled()||t._isAudioRestrictedForConnection()),o=void 0===n||!n._isVideoTrackEnabled();return $WC.template.replace(i,{audio_muted:r?"-mute":"",video_muted:o?"-mute":"",mic_state_tooltip:r?MediaUtil.getMicOnToolTipForPreview():MediaUtil.getMicOffToolTipForPreview(),$cam_state_tooltip:o?"videochat.cameraon":"videochat.cameraoff",mic_btn_purpose:r?"unmuteAudio":"muteAudio",cam_btn_purpose:o?"unmuteVideo":"muteVideo"})},overflowOptions:'<div class="bcast-more active" style="display: none;"><em class="zcf-more-h"></em><div class="zcl-menu-wrap zcl-menu-wrap_dark no-pointer" style="display: none;"><div class="zcl-menu-item"><em class="zcf-mic-mute mR10"></em>{{mute_audio}}</div><div class="zcl-menu-item"><em class="zcf-owner mR10"></em>{{make_host}}</div><div class="zcl-menu-item zcl-neg-menu-item"><em class="zcf-call mR10"></em>{{end_key}}</div></div></div>',minimizedUI:'<div id="conferenceminimizedwindow" conferencetype="{{conference_type}}" class="nite-mode huddle-minimize-con bcast-bg {{screen_share}} {{huddle_type}} {{pip_class}} {{pinclass}} {{audio_muted_class}} {{unmute_restricted_class}} {{stream_restricted_class}} {{session_active_class}} {{screen_share_class}} {{silent_member_class}} {{recording_class}}">{{muted_info}}<div class="huddle-minimize-wrap flexG posrel flex-col ovrflwH wh100">{{header_html}}<div class="huddle-minimize-vdo-wrapper" id="conferenceminimizedgridcontainer"><div class="huddle-minimize-opt"><div class="flexM huddle-minimize-opt-cont"><div class="hudl-box {{audio_icon}} smartconf-btns_mic tooltip-up {{hide_class}}" tooltip-title="{{audio_status_title}}" conferencebutton purpose="{{audio_purpose}}"></div>{{mute_video}}{{request_to_speak}}<div class="hudl-box zcf-audio huddle-end-conf tooltip-up" tooltip-title="{{end_title}}" conferencebutton purpose="leave"></div>{{screen_share_opt}}</div><div id="footer_pin" class="PT-footer-pin {{arrow}}" conferencebutton purpose={{pinstate_in_minimizedview}} min_footer_pin title="{{participants_visibility}}"></div></div></div><div id="conferenceminimizedfooter" class="huddle-minimize-ftr {{hide_mini_player}}" minimized_video_player><div id="conferenceminimizeduserstrip" class="huddle-film-strip flexM"></div></div><div minimized_audio_player class="w100 huddle-mini-audio-player {{hide_audio_mini_player}}" active_speaker_id="{{active_speaker_id}}">{{audio_mini_player}}</div>{{pip_mini_player}}</div>{{screenshare_indicator}}</div>',minScreenShareContainer:'<div id="conferenceminimizedscreencnt" class="huddle-minimize-vdo huddle-minimize-scrn {{hide_mini_player}}" minimized_video_player>{{buffer_loader}}</div>',minimizedAudioPlayer:'<div class="bcast-miniview-audio bcast-bg flexC"><div class="bcast-img-60 fshrink">{{buffer_loader}}{{user_image_cnt}}</div><div class="flexG pL14 flexC">{{header_html}}</div><div class="fshrink flexC"><div class="hudl-box {{audio_icon}} smartconf-btns_mic tooltip-up {{custom_class}}" tooltip-title="{{audio_status_title}}" conferencebutton purpose="{{audio_purpose}}"></div><div class="hudl-box zcf-maximize tooltip-up" tooltip-title="{{maximize_title}}" conferencebutton purpose="maximizeWindow"></div><div class="hudl-box zcf-audio huddle-end-conf tooltip-up" tooltip-title="{{end_title}}" conferencebutton purpose="leave"></div></div></div>',pipMiniPlayer:'<div minimized_audio_player_pip class="wh100 huddle-mini-audio-player-pip dN"><div class="bcast-miniview-audio bcast-bg flex-col">{{pip_header_html}}<div class="flexM flexG"><div class="hudl-box smartconf-btns_mic tooltip-up {{audio_icon}}" tooltip-title="{{audio_status_title}}" conferencebutton purpose="{{audio_purpose}}"></div><div class="hudl-box zcf-audio huddle-end-conf tooltip-up" tooltip-title="{{end_title}}" conferencebutton purpose="leave"></div><div class="hudl-box zcf-sharemedia tooltip-up" tooltip-title="{{share_media_title}}" conferencebutton purpose="showShareOptions"></div><div class="hudl-box zcf-moreS tooltip-up" tooltip-title="{{more_option_title}}" conferencebutton purpose="showMoreOptions"></div><div class="smartconf-btn-separator mL14"></div><div class="hudl-box zcf-pip tooltip-up active" tooltip-title="{{close_pip_title}}" smartconferencebutton purpose="exitPIP"></div></div></div></div>',minimisedAudioStripItemHtml:'<div class="huddle-film-strip-item flexM fdirC" audio_strip_item>\n\t\t\t<div class="huddle-video-img">\n\t\t\t\t<div class="wh100 bdrR100">\n\t\t\t\t\t<img class="bdrR100 wh100" user_image onerror="ZCSmartConferenceHandler.onImageLoadErrorEvents.removeAudioCardUserImage(this)" />\n\t\t\t\t</div>\n\t\t\t\t<div class="huddle-mute-indicator flexM zcf-mic-mute dN"></div>\n\t\t\t</div>\n\t\t\t<span class="flexM huddle-host-indicator dN" host_indicator><span class="zcf-owner bcast-gold font11"></span></span>\n\t\t</div>',currentUserInMinimizedView:'<div class="huddle-video-ripple alignM"><span class="{{icon_class}} font10"></span><span class="touranim"></span></div>',HostUI:'<div class="hudl-usr-info ellips flexC" userinfo><span class="zcf-owner mLR5 fshrink"></span></div>',mainUI:'<div id="conferencewindow" conferencetype="{{conference_type}}" conferencecontainer class="huddle-wrp nite-mode bcast-bg huddle-galaxy huddle-grid-view huddle-loading zc-av-conference-connecting huddle-footer-hide {{layout_class}} {{huddle_type}} {{permission_class}} {{guest_user_class}} {{new_rhs_class}} smartconf-bottom-pane-hide"  host_id="{{host_id}}" recording_index="{{recording_index}}"><main id="conferencemainsection" class="huddle-main dflx huddle-new-ftr">{{v2_header_html}}<section id="conferencevideosection" class="hudl-sec bcast-bg flexG flexM">{{header_html}}<div id="audio_strip" class="huddle-audio-strip-cnt flexM fshrink dN"></div><div class="media-info-tooltip ellips dN" id="userInfoTooltip"></div>{{video_loader_cnt}}<div id="conferencevideowrapper" class="hudl-vdo-wrp flexM {{scroll_class}}"><div class="galaxy-stars dN" style="background-image: url({{stars_background_svg}});"></div>{{audio_loader_cnt}}{{grid_parent}}<div id="presenter_view" class="huddle-audio-strip-cnt flexM fshrink dN"></div></div><div id="selfscreenwrapper" class="dN"></div><div id="conferencewbwrapper" class="hudl-wb-wrp dN"></div><div id="conferencepresentationwrapper" class="hudl-wb-wrp hide"></div><div id="conferencenotificationcontainer" class="PT-notification-box PT-list flex-col dN"></div>{{bottom_pane_section}}<footer class="hudl-ftr fshrink flexC" id="conferencefooter">{{ring_toaster}}{{layout_options}}{{session_options}}<div id="footer_pin" class="PT-footer-pin zcf-downArrow hide" conferencebutton purpose="hideUserStrip" title="{{hide_participants}}"></div></footer></section><div id="confreactionsviewcnt" class="smartconf-reaction-wrap animEmoji"></div></main>{{rhs_section}}</div>',loaderHtml:'<div id="{{id}}" class="{{custom_class}} {{align_class}} textC"><div class="zcl-rloader-bg"><div class="zcl-rloader-sm"></div></div><div class="mT10 font16 fontB {{custom_class}}-text" content>{{content}}</div></div>',loaderMaskHtml:'<div class="smartconf-mask"></div>',videoContainer:'<div id="{{id}}" videocontainer uid="{{uid}}" class="hudl-vdo-box {{huddle_mode}} {{galaxyview_position}}"><div class="huddle-video-holder wh100 {{hide_video}}" videoholder inlinecontainer="false"><div class="huddle-vdo-options"><div class="hudl-box--secondary zcf-fullscrn mL12" targetElemId="{{id}}" tooltip-title="{{open_full_screen}}" conferencebutton purpose="openInFullScreen"></div><div class="hudl-box--secondary zcf-close mL12 dN" targetelemid="{{id}}" close_window conferencebutton purpose="closeWindow" title="{{close_screen}}"></div></div>{{buffer_loader}}{{user_image_cnt}}<video></video><div class="hudl-usr-info ellips flexC" avstatuscnt video_status = {{video_statuscnt}} audio_status = {{audio_statuscnt}} is_owner = {{ishost}} userinfo>{{host_identifier}}<span class="flexG ellips" username>{{user_name}}</span><span class="mute-info-btn zcf-mic-mute dN" title="{{audio_mute_title}}" audioMutedStatus></span><span class="mute-info-btn zcf-video-mute dN" title="{{video_mute_title}}" videoMutedStatus></span></div></div><div user_card_wrapper class="user-card-wrapper w100 {{hide_card}}">{{user_card}}</div></div>',gridContainer:'<div class="huddle-grid-box flexM fdirC {{muted_class}} {{active_speaker_class}}" audio_grid_box user_id="{{user_id}}"><div class="zcl-img xxl"><img user_image src="{{user_img_src}}" {{user_img_onerror}} /><div class="zcl-indicator flexM zcf-mic-mute dN"></div></div><span class="mT15 w100 flexM"><span class="zcf-owner bcast-gold {{hide_host_tag}} mR5" host_indicator data-title="{{host_title}}"></span><span class="ellips" user_name>{{user_name}}</span></span><div class="smartconf-bubble-nvf-preview flexM dN" nvf_preview></div><div class="smartconf-bubble-gif-preview flexM dN" gif_preview></div>{{more_opt}}</div>',audioGridWrapper:'<div id="audio_grid_wrp" class="huddle-grid-wrp wh100 dN"><div id="audio_grid_dom_holder" class="flexM flexW alignContentC wh100"><div id="audio_grid_first_row" class="huddle-grid-row flexM w100 h25 dN"></div><div id="audio_grid_second_row" class="huddle-grid-row flexM w100 h25 dN"></div><div id="audio_grid_third_row" class="huddle-grid-row flexM w100 h25 dN"></div><div id="audio_grid_fourth_row" class="huddle-grid-row flexM w100 h25 dN"></div></div><div class="smartconf-grid-nav-btn smartconf-grid-nav-prev flexM dN" gridPrevNavigationBtn prevPageNo=1 conferencebutton purpose="showPreviousGridPage"><span class="zcf-leftArrow mR6"></span><span pageNo>1</span></div><div class="smartconf-grid-nav-btn smartconf-grid-nav-next flexM dN" gridNextNavigationBtn nextPageNo=1 conferencebutton purpose="showNextGridPage"><span pageNo>1</span><span class="zcf-rightArrow mL6"></span></div></div>',screenContainer:'<div id="{{id}}" screencontainer uid="{{uid}}" class="hudl-vdo-box huddle-screen-box wh100"><div class="smartconf-container-opts flexC">{{layout_opt}}<div class="smartconf-container-opt smartconf-fullscrn-btn zcf-fullscrn flexM tooltip-right0 dN" tooltip-title="{{open_full_screen}}" smartconferencebutton purpose="openPresenterViewInFullScreen"></div></div>{{buffer_loader}}<video id="screen_video_dom_{{id}}"></video><div class="hudl-usr-info ellips flexC">{{host_identifier}}<span class="flexG ellips">{{user_name}}</span></div></div>',whiteBoardContainer:'<div whiteboardcontainer class="wh100 flex-col flexM p6"><div class="conf-wb wh100 flex-col"><div class="huddle-wb-options fshrink"><span id="wb_title" class="wb-tpbr-itm p5 flexG pL15 font14">{{title}}</span><span id="wb_participants" class="flexC wb-tpbr-itm"></span><span class="wb-tpbr-sep"></span><span class="zcf-more wb-tpbr-itm curP" data-uid="{{data_uid}}" associate-id="{{associate_id}}" associate-type="{{associate_type}}" whiteboardbutton purpose="showOptions"></span>{{layout_opt}}<span class="wb-tpbr-sep"></span><span class="zcf-fullscrn wb-tpbr-itm curP" targetElemId="{{target_id}}" tooltip-title="{{open_full_screen}}" whiteboardbutton purpose="openInFullScreen"></span></div><div class="wb-if-box wb-if-br flexG posrel">{{buffer_loader}}<iframe class="wb-if-br wh100 posA vsbH" {{src_url}} data-uid="{{data_uid}}" enablejsapi="1" frameBorder="0"></iframe></div></div></div>',externalUserNode:'<div uid="{{value}}" data-val="{{value}}" elemtype="emailids" purpose="search" class="zcrtchtcontct remcontact flexC font13 sel"><span class="list-img posl"><img src="{{image_url}}"></span><span class="ellips list-cnt mrgL10 line18">{{value}}</span></div>',rhsContainer:'<aside id="conferencerhscnt" conferencetransition transition-purpose="animateRhs" class="hudl-aside dflx flx-dirC huddl-participant-view {{associated_resource_parent_class}}"><header conferencerhsheader class="huddle-aside-header fshrink">{{chat_icon}}<div class="huddle-aside-part-hdr huddle-hdr-item" conferencebutton purpose="openParticipantsInRHS"><span class="hudl-hdr-item-icon zcf-users"></span><span>{{participant_section_header}}</span><span class="mL3">(<span participants_count>{{participants_count}}</span>)</span></div>{{associated_resource}}<div class="zcf-close huddle-hdr-close tooltip-left" tooltip-title="{{close_rhs}}" conferencebutton purpose="closeRHS"></div></header><section class="hudl-aside-sec flexG"><div class="huddl-aside-wrp" conferencetransition transition-purpose="switchRhsView"><div id="smartconferenceusersection" class="flx1 flex-col w50 ovrflwH rhs-dN"><div class="smartconf-aside-v2-header dN flexC line19 mLR14 pTB10"><div class="font16 fontB flexG">{{participant_section_header}}</div><div class="zcf-closeB clr-icon font11 cur posrel tooltip-left" conferencebutton purpose="closeRHS" tooltip-title="{{close_rhs}}"></div></div>{{search_cnt}}<div id="smartconferenceuserslist" class="ovrflwA smartconf-user-list"></div></div><div id="conferencechatsection" class="flx1 zcmcembd zcmsgbothside chtwndws zcsmallchat rhs-dN {{custom_class}}">{{chat_section}}</div><div id="conferencechatsectionhideport" class="dN"></div></div></section></aside>',rhsAssociatedResourceHeader:'<div class="huddle-aside-res-hdr huddle-hdr-item {{associatedresource_display_class}}" conferencebutton purpose="openAssociatedResource"><span class="hudl-hdr-item-icon zcf-townhall"></span>{{resource_title}}<span id="showAssociatedResourceTabOption" conferencebutton purpose="showAssociatedResourceTabOptions" class="zcf-more clr-icon pLR10"></span></div>',rhsContainerChatIcon:'<div id="conferencechattab" class="huddle-aside-chat-hdr huddle-hdr-item" conferencebutton purpose="openChatInRHS"><span class="zcf-chat hudl-hdr-item-icon"><span class="msgnotify" conferenceunreadmsgcount></span></span>{{chat_section_header}}</div>',rhsListUserHtml:'<div class="huddle-list-item flexC {{custom_class}}" conferenceparticipant user_id="{{user_id}}" userId="{{user_id}}"><div {{hover_attributes}} class="huddle-list-img-cnt {{hover_info_class}} fshrink"><img class="huddle-list-img" src="{{user_img_src}}">{{raise_hand_indicator}}<div id="userstatus" class="{{user_status}}"></div></div><div class="huddle-list-name font15 flexG ellips"><span class="flexC flexG"><span class="ellips {{hover_info_class}}" {{hover_attributes}} >{{user_name}}</span>{{user_tag}}<em class="bcast-info-icon zcf-info-filled {{referral_display_class}}" userid="{{user_id}}" title="{{referrer_info}}" conferencereferraltitle></em>{{host_indicator}}</span></div>{{request_approve_cnt}}{{action_cnt}}</div>',rhsPendingUserListHtml:'<div class="huddle-list-item flexC" pendingparticipant user_id="{{user_id}}" userId="{{user_id}}"><div {{hover_attributes}} class="huddle-list-img-cnt {{hover_info_class}} fshrink"><img class="huddle-list-img" src="{{user_img_src}}" originalsrc="{{user_img_src}}">{{invite_revoke_optn}}<div id="userstatus" class="{{user_status}}"></div></div><div class="huddle-list-name font15 flexG ellips"><span class="flexC flexG"><span class="ellips {{hover_info_class}}" {{hover_attributes}}>{{user_name}}</span>{{user_tag}}</span><div class="clr-lp1 mT4" people_user_info></div></div>{{action_cnt}}</div>',sessionOptions:'<div class="huddle-ftr-session-opts flexG flexM posrel" id="filmstrip"><div id="sessionLHS" class= "flexC flx1">{{toggleuiview}}{{invite_users}}{{local_user_preview}}</div><div id="waitinglobbyrequestscnt" class="media-btns-box flexM mR10 dN huddle-presentrequest_btn"><div id="waitinglobbyrequestsbtn" class="hudl-box font22 zcf-waitingparticipants tooltip-up" tooltip-title="{{waitingroom_title}}" smartconferencebutton purpose="handleWaitingLobbyRequestBtn"><span id="waitinglobbyrequestscount" class="msgnotify" count>0</span></div></div><div class="media-btns-box flexM mR10 dN huddle-presentrequest_btn" presentrequestscnt><div class="hudl-box font22 zcf-sharescrn tooltip-up" conferencebutton purpose="openPresentationRequestsWin"><span class="msgnotify" count>0</span></div></div><div class="media-btns-box flexM mR10 dN huddle-raisehand_btn" raisedhandscountcnt><div class="hudl-box font22 zcf-raisehand" conferencebutton purpose="openParticipantsInRHS"><span class="msgnotify" count>0</span></div></div><div id="conferenceoptionset" class="media-btns-box flexM" sessionOptions><div class="hudl-box zcf-mic smartconf-btns_mic tooltip-up" tooltip-title="{{mute_audio_title}}" conferencebutton purpose="muteAudio"></div>{{mute_video}}{{request_to_speak}}<div class="hudl-box zcf-audio huddle-end-conf tooltip-up" tooltip-title="{{end_title}}" conferencebutton purpose="leave"></div>{{reaction_option}}{{share_options}}<div class="hudl-box zcf-moreS tooltip-up" tooltip-title="{{more_title}}" conferencebutton purpose="showMoreOptions"></div></div><div class="flx1 flexC justifySB mL12">{{screen_share_indicator}}{{presentation_indicator}}<div class="flexC mLA">{{bottom_pane_option}}<div class="media-btns-box {{screen_opt_class}} mL12 flexM">{{pip_option}}{{minimize_option}}{{fullscreen_option}}</div></div></div></div>',minimizeWindowOption:'<div class="hudl-box font17 zcf-mini-player tooltip-up" conferencebutton purpose="minimizeWindow" tooltip-title="{{minimize_title}}"></div>',fullScreenOption:'<div class="hudl-box font16 zcf-fullscrn tooltip-up tooltip-right0" targetElemId="body" conferencebutton purpose="openInFullScreen" tooltip-title="{{fullscreen_title}}"></div>',pipOption:'<div class="smartconf-btn smartconf-pip-switcher zcf-pip tooltip-up {{custom_class}}" tooltip-title="{{title}}" smartconferencebutton purpose="openInPIP"></div>',inviteUsersOption:'<div class="media-btns-box media-copylink flexC mR12" inviteUsersButton><div class="hudl-box font17 zcf-memberAdd tooltip-up" id="conference_inviteuser" conferencebutton purpose="openInviteUserPanel" tooltip-title="{{title}}"></div></div>',audioStripItemHtml:'<div class="huddle-audio-strip-item flexM fdirC" audio_strip_item><div class="huddle-audio-strip-item-img"><div class="wh100 bdrR100 flexM"><img class="bdrR100 wh100" user_image onerror="ZCSmartConferenceHandler.onImageLoadErrorEvents.removeAudioCardUserImage(this)" /><span class="ellips dN" user_name>{{user_name}}</span></div><div class="huddle-mute-indicator flexM font10 zcf-mic-mute dN"></div></div><span class="huddle-audio-strip-item-title ellips mT4 pLR20 textC w100"><span class="zcf-owner mR3 bcast-gold font14 dN" host_indicator></span><span class="ellips fontB font14" user_name>{{user_name}}</span></span><div class="smartconf-bubble-nvf-preview flexM dN" nvf_preview></div><div class="smartconf-bubble-gif-preview flexM dN" gif_preview></div><div class="smartconf-info flexM" card_mute_status ><div class="zcf-mic-mute mic-mute-clr font16"></div></div><span class="bcast-host-info" host_indicator><span class="zcf-owner smartconf-host-icon mL25 bcast-gold font15"  data-title="{{host_title}}"></span></span></div>',optionsDropDownItem:'<div class="zcl-menu-item ellips {{custom_class}}" conferencebutton purpose="{{purpose}}"><span icon class="{{icon}} zcl-menu-item-icn mR10"></span><span content>{{content}}</span></div>',splitOptionsDropDownItem:'<div class="zcl-menu-item ellips zcl-menu-item_split">{{parent_option}}<div class="zcl-dropdown-divider fshrink"></div><div class="fshrink zcl-menu-item pLR12 {{custom_class}}" conferencebutton purpose="{{purpose}}">{{content}}</div></div>',endState:'<div id="guest_exit_info" class="hp-exit-page"><div id="guest_exit_cnt" class="hp-exit-info flexM fdirC"><div class="hp-box-bg flexM"><img width="50" height="50" src="{{exit_icon}}"></div><div class="font24 mT20">{{header}}</div><div class="hp-exit-help {{margin_class}}">{{info}}</div>{{rejoin_btn}}</div></div>',ringingUI:'<div class="AV-call-wrapper AV-call-initial" conference_id="{{id}}"><div class="impulse halignC"></div><div class="AV-call-main"><div class="AV-call-status"><div class="font15 ellips textC mT50 w75">{{user_name}}</div><div class="mT12 font13 fontB">{{invites}}</div><div class="flexM w75"><div class="mT12 font15 ellips">{{title}}</div><div class="zcf-failed AV-call-warning fshrink mT8 zc-av-dN" before_join_network_strength title="{{network_strength_tooltip}}"></div></div><div actions_container class="flexC mT25 posrel"><div class="AV-call-box {{pick_icon}} AV-call-box-ans zc-av-mR20" title="{{accept}}" conferencebutton purpose="joinFromNotification"></div><div class="AV-call-box {{decline_icon}} AV-call-box-end" title="{{decline}}" conferencebutton purpose="declineFromNotification"></div></div></div></div></div>',minimizedWaitingRoom:'<div id="huddle-minimized-waitingcnt" class="huddle-particpnt-con event-waiting-con waitingroom-huddle waitingroom-huddle-minimize" ><span class="waiting-room-close zcf-close flexM" conferencebutton purpose="closeWaitingWindow" title="{{common_close}}"></span><section class="huddle-particpnt-section"><main class="huddle-particpnt-main ellips"><header class="huddle-particpnt-hdr flexC fontB"><span class="waiting-room-back zcf-leftArrow1 zcf-maximize flexM" conferencebutton purpose="maximizeWaitingWindow" title="{{common_fullscreen}}"></span><span id="mini_waitingroom_title_cnt" class="huddle-participant-title flexC ellips flexC"><span class="{{conf_type_icon}} clr-S__dark fshrink mR5"></span><span class="ellips huddle-participant-title-txt">{{conference_title}}</span>{{live_timer}}</span></header><div class="font14 fontB mT10 mL40 ellips"><span class="clr-S__dark font13 mR5">{{common_host}} :</span>{{conference_host}}</div></main><aside id="mini_waitingroom_preview_cnt" class="huddle-particpnt-aside huddle-room">{{timer_or_btn_html}}</aside></section></div>',conferenceBtnHtml:'<button id="minimizedview-conference-btn" event_id="{{event_id}}" caluid="{{cal_uid}}" {{recurrence_id}} conferencebutton purpose="{{btn_purpose}}" type="default" class="hp-btn alignM"><span class="hpf-getstart mR10 {{hide_icon}}" meeting_start_btn_icon></span><span join_btn_content>{{btn_title}}</span></button>',notificationItemHtml:'<div class="PT-list-item flexC fadePTNotification ellips" notifylistitem="{{type}}" userId="{{user_id}}"><div class="PT-userImg fshrink mR10"><img class="wh100 bdrR100" src="{{user_img}}">{{video_switch}}</div><div class="ellips flexG font14 flexC"><div class="PT-list-name fontB ellips">{{user_name}}</div><div class="f-shrink font16">{{notify_content}}</div></div></div>',multiSelectDropDownHtml:'<div class="posrel {{display_class}}" {{custom_attribute}}="{{custom_attribute_value}}"><div id="{{id}}" class="cur zc-form-multi-sel"><span class="zc-form-icons"><span class="msi-darrw zcclr" purpose="showResultsDom"></span></span><div class="zc-form-input" purpose="showResultsDom"><span data-selections></span><input id="{{id}}-search-field" placeholder="{{place_holder}}"/></div><div id="{{id}}-results" class="zc-native-sel-cntr"><div id="{{id}}-list" class="zc-native-sel-list macscroll"></div></div></div></div>',getCountdownTimer:function(e){return $WC.template.replace(WaitingRoom.html.countdownTimer,{$hours:"common.hrs",$minutes:"common.mins",$seconds:"common.secs",timer_id:e||"huddle-timer"})},getWaitingroomBtnHtml:function(e,t){var n=EventsMain.UTIL.getEventFromElem(t),i=n.getRecurrenceId();return $WC.template.replace(this.conferenceBtnHtml,{btn_purpose:e?"startScheduledConference":"joinScheduledConference",$btn_title:e?"common.start.meeting":"common.join.meeting",hide_icon:e?"":"dN",event_id:n.getId(),recurrence_id:i?"recurrence_id="+i:"",cal_uid:n.getCalendarUID()})},getMinimizedWaitingroomHtml:function(e,t,n,i,r){var o=$WC.template.replace(this.minimizedWaitingRoom,{timer_or_btn_html:e,conf_type_icon:Conference.isVideoConference(r)?"zcf-video":"zcf-call",live_timer:i?WaitingRoom.html.liveTimer:""},"InSecureHTML");return $WC.template.replace(o,{$common_close:"common.close",$common_fullscreen:"videochat.fullscreen",$common_host:"media.host",conference_title:t,conference_host:n})},getNotificationHtml:function(e,t,n){var i="",r=t?t.getId():n.id,o=t?t.getName():n.name,s={user_id:r,user_name:Users.getName(r,o),user_img:Users.getImgUrlById(r),$notify_content:"",type:""+e};return e==ConferenceImpl.notificationTypes.joined?s.$notify_content="primetime.joined.notify":e==ConferenceImpl.notificationTypes.removed?s.$notify_content="conference.user.removed":e==ConferenceImpl.notificationTypes.switched?s.$notify_content="conference.user.switched":e==ConferenceImpl.notificationTypes.ringing?s.$notify_content="conference.user.ringing":e==ConferenceImpl.notificationTypes.declined?s.$notify_content="conference.user.busy":e==ConferenceImpl.notificationTypes.ringing&&(s.$notify_content="conference.user.no_response"),i=$WC.template.replace(this.notificationItemHtml,s),i=$WC.template.replace(i,{video_switch:e==ConferenceImpl.notificationTypes.switched?'<span class="PT-box-20 zcf-video2 hudl-filled-video-icon"></span>':""},"InSecureHTML")},getMiniAudioPlayerHtml:function(e,t,n){ConferenceImpl.getCurrentSession();var i=MediaTemplates.getHeaderComponentHtml({customClass:"media-hdr-minimz",customAttribute:"smartconferenceheader",module:"conferencebutton",backBtnClass:"dN",backBtnPurpose:"maximizeWindow",componentIconClass:"zcf-call",timerId:"conferenceaudiominviewsessiontimer",title:e,header:e,ignoreBackOption:Conference.isCurrentUserGuest(),backBtnTitle:"videochat.fullscreen",showParticipantsCount:!0,participantsCount:t,recordingIndex:n,isPreviewRoom:!1});return $WC.template.replace(ConferenceTemplates.minimizedAudioPlayer,{header_html:i},"InSecureHTML")},getSilentSpeakerInfoCntHtml:function(){return MediaTemplates.getTopBandHtml({id:"silentSpeakerInfoCnt",customClass:"smartconf-silent-spkr-banner",contentResourceParams:"conference.silent.speaker.hint",shortContentResourceParams:"conference.silent.speaker.hint.short",icons:[{className:"zcf-mic-mute"}],closeOption:{customAttribute:"conferencebutton",purpose:"closeSilentSpeakerInfo",titleResourceParams:"common.hide"}})},getShareOptionsHtml:function(e){var t="",n=e.isCurrentUserHost(),i=e.hasHostPermission(),r=(e.isVideoConference(),e.isPersonalScope(),e.getConfigurations()),o={screenShareOpt:Conference.isScreenShareAllowed()&&e.isActiveMember(),whiteBoardOpt:Conference.isWhiteBoardAllowed()&&e.getMembersCount()<=100&&(i||Conference.isPresentationRequestsEnabled())&&e.isInUnifiedPlan()&&e.isMixingEnabled(),presentationOpt:Conference.isPresentationsAllowed()&&e.isActiveMember()},s={},a=e.getMember(ConferenceImpl.getCurrentUserId());n?s={screenShareOpt:e.isScreenSharer()?["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active zcl-neg-menu-item",!1]:["startScreenShare","zcf-sharescrn","common.screenshare","",!1],whiteBoardOpt:e.isWhiteBoardCreator()?["stopWhiteBoard","zcf-whiteboard-end","whiteboard.stop","active zcl-neg-menu-item",!1]:["startWhiteBoard","zcf-whiteboard","whiteboard.start","",!1],presentationOpt:e.isPresenter()?["stopPresentation","zcf-presentation-end","media.presentation.stop","active zcl-neg-menu-item",!1]:["startPresentation","zcf-presentation","media.presentation.start","",!1]}:(e.isScreenSharer()?s.screenShareOpt=["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active zcl-neg-menu-item",!1]:r.isScreenShareAllowed()||a.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?s.screenShareOpt=["startScreenShare","zcf-sharescrn","common.screenshare","",!1]:a.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?s.screenShareOpt=["dropScreenShareRequest","zcf-scrn-shr-stop","media.present.request.ss.drop","active zcl-neg-menu-item",!1]:s.screenShareOpt=["raiseScreenShareRequest","zcf-sharescrn","media.present.request.ss","",!1],e.isWhiteBoardCreator()?s.whiteBoardOpt=["stopWhiteBoard","zcf-whiteboard-end","whiteboard.stop","active zcl-neg-menu-item",!1]:i||a.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.WHITEBOARD)?s.whiteBoardOpt=["startWhiteBoard","zcf-whiteboard","whiteboard.start","",!1]:a.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.WHITEBOARD)?s.whiteBoardOpt=["dropWhiteboardRequest","zcf-whiteboard-end","media.present.request.wb.drop","active zcl-neg-menu-item",!1]:s.whiteBoardOpt=["raiseWhiteboardRequest","zcf-whiteboard","media.present.request.wb","",!1],e.isPresenter()?s.presentationOpt=["stopPresentation","zcf-presentation-end","media.presentation.stop","active zcl-neg-menu-item",!1]:r.isPresentationAllowed()||a.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.PRESENTATION)?s.presentationOpt=["startPresentation","zcf-presentation","media.presentation.start","",!1]:a.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.PRESENTATION)?s.presentationOpt=["dropPresentationRequest","zcf-presentation-end","media.present.reqeuest.presentation.drop","active zcl-neg-menu-item",!1]:s.presentationOpt=["raisePresentationRequest","zcf-presentation","media.present.request.presentation","",!1]);for(var c,d,l=Object.keys(o),u=0;u<l.length;u++){var f=l[u];if(o[f]){var m=s[f];t+=(c=ConferenceTemplates.optionsDropDownItem,d=m,$WC.template.replace(c,{purpose:d[0],icon:d[1],$content:d[2],custom_class:d[3]}))}}return $WC.template.replace('<div id="{{id}}shrdropdowncnt" class="hudl-mute-opt zcl-menu-wrap" align="top"><div class="smartconf-drpdwn-opts">{{options}}</div></div>',{id:e.getId(),options:t},"InSecureHTML")},getMoreOptionsHtml:function(e){var t="",n=e.hasHostPermission(),i=e.getConfigurations(),r=ConferenceImpl.getRecordingConfigValue(e.getChatId()),o=void 0!==MediaUtil.BRIDGE&&MediaUtil.BRIDGE.isMediaFeedbackEnabled(),s={screenShareOpt:!Conference.isWhiteBoardAllowed()&&!Conference.isPresentationsAllowed()&&Conference.isScreenShareAllowed()&&e.isActiveMember(),recording:Conference.isRecordingAllowed()&&n&&r==ZCMediaConstants.callRecordingConfig.user_choice,streaming:e.isSmartMode()&&Conference.isStreamingEnabled()&&n&&e.isActiveMember(),notebookIntegration:Conference.isNotebookIntegrationEnabled()&&!Conference.isNotebookLHSEnabled(),settings:!0,feedback:o};let a=e.isRequestPending(ZCSmartConferenceConstants.requests.startStopRecording);var c={screenShareOpt:e.isScreenSharer()?["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active",!1]:["startScreenShare","zcf-sharescrn","common.screenshare","",!1],recording:e.isRecording()?["stopRecording","AV-call-record-icon AV-call-record-icon-circle flexM zc-av-mR10","media.recording.stop",a?"zcdisabled":"active",!1]:["startRecording","AV-call-record-icon AV-call-record-icon-circle flexM zc-av-mR10","media.recording.start",a?"zcdisabled":"",!1],streaming:e.isStreaming()?["stopBroadcast","zcf-primetime","conference.streaming.stop","active",!0]:["startBroadcast","zcf-primetime","conference.streaming.start","",!1],minimizeOption:["minimizeWindow","zcf-mini-player","videochat.minimize","",!1],notebookIntegration:["takeNotes","zcf-notebook","common.notes","",!1],settings:["openSettings","zcf-setting","common.settings","",!1],feedback:["showFeedbackPopup","msi-feedback","profileview.help.sendfeedback",!1]},d=e.getMember(ConferenceImpl.getCurrentUserId());e.isScreenSharer()?c.screenShareOpt=["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active zcl-neg-menu-item",!1]:i.isScreenShareAllowed()||d.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?c.screenShareOpt=["startScreenShare","zcf-sharescrn","common.screenshare","",!1]:d.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?c.screenShareOpt=["dropScreenShareRequest","zcf-scrn-shr-stop","media.present.request.ss.drop","active zcl-neg-menu-item",!1]:c.screenShareOpt=["raiseScreenShareRequest","zcf-sharescrn","media.present.request.ss","",!1];var l={streaming:["showStreamingPopup","","","zcf-setting"]};function u(e,t){return $WC.template.replace(e,{purpose:t[0],icon:t[1],$content:t[2],custom_class:t[3]})}for(var f=Object.keys(s),m=0;m<f.length;m++){var C=f[m];if(s[C]){var p=c[C];if(p[4]){var h=$WC.template.replace(ConferenceTemplates.splitOptionsDropDownItem,{parent_option:u(ConferenceTemplates.optionsDropDownItem,p)},"InSecureHTML");t+=u(h,l[C])}else t+=u(ConferenceTemplates.optionsDropDownItem,p)}}return $WC.template.replace('<div id="{{id}}dropdowncnt" class="hudl-mute-opt zcl-menu-wrap" align="top"><div class="smartconf-drpdwn-opts">{{options}}</div></div>',{id:e.getId(),options:t},"InSecureHTML")}};var ConferenceHandler={};ConferenceHandler={peerConnectionEvents:{sendOffer:function(e,t,n,i,r,o){ConferenceImpl.getCurrentSession();WebRTCPeerConnectionConstants.isScreenConnection(t)&&WebRTCPeerConnectionConstants.isInit(r)?ConferenceAPI.startScreenShare(e,n,i):ConferenceAPI.sendSDP(e,t,n,i,r,"offer");var s={conferenceId:e,connectionType:t,processType:r,iceCandidate:i,streamType:o};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendOffer,s)},sendAnswer:function(e,t,n,i,r,o){ConferenceAPI.sendSDP(e,t,n,i,r,"answer",o);var s={conferenceId:e,connectionType:t,processType:r,iceCandidate:i,hostId:o};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendAnswer,s),ZCSmartConferenceImpl.pushSendAnswerInEventLog(ConferenceImpl.getCurrentSession(),t)},updateIceCandidates:function(e,t,n,i,r,o){ConferenceAPI.updateIceCandidates(e,t,n,i,r);var s={conferenceId:e,connectionType:t,processType:r,iceCandidates:i,hostId:n};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.updateIce,s),ZCSmartConferenceImpl.pushUpdateIceCandidatesInEventLog(ConferenceImpl.getCurrentSession(),t,o)},handleConnected:function(e,t,n,i,r,o,s){var a=ConferenceImpl.getCurrentSession(),c=(WebRTCPeerConnectionConstants.isRestart(s)||WebRTCPeerConnectionConstants.isReInit(s),WebRTCPeerConnectionConstants.isScreenConnection(t));!c&&o&&a&&a.isHost(ConferenceImpl.getCurrentUserId())&&!a.hasNotifiedStart()&&(a.setAsNotified(),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiCalled),ConferenceAPI.notifyStart(e,(function(){var e={};if(MediaManager.isChatScope(a.scopeType)){var t=new $CliqChatId(a.scopeIds[0]);e.chatType=t.isChannel()?"channel":"chat"}var n=a.getCurrentMember().getAVStream();e.mic_muted=!n._isAudioTrackEnabled();var i=a.getType();i===Conference.types.VIDEO&&(e.camera_muted=!n._isVideoTrackEnabled()),e.type=i,e.connectionMode=WebRTCPeerConnectionConstants.connectionModes.PLANB,ZCTrack.track("CONFERENCE_STARTED",e),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiSuccess)}),(function(){a.resetNotified(),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiFailed)})));var d=a.getMember(i);d&&(c?d.setScreenReconnectionStatus(!0):d.setAVReconnectionStatus(!0)),a.setConnectionStatus(t,o,!1);var l={conferenceId:e,connectionType:t,processType:s,isUpStream:o,streamType:r,hostId:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.connected,l)},handlePlay:function(e,t,n,i,r){$(r).parents("[videocontainer]").find("[bufferloadercnt]").empty();var o=ConferenceImpl.getCurrentSession(),s=o.getMember(t),a=WebRTCPeerConnectionConstants.isScreenConnection(e);a?(s.setScreenReconnectionStatus(!0),n instanceof MediaStream&&o.isSilentConference()&&AdhocCallBridge.publish(o,"handleScreenStream",{associatedSessionId:o.getAdhocCallId(),screenStream:n,userId:t})):(s.setUpdatedAudioStatus(),s.setAVReconnectionStatus(!0)),ConferenceUI.isInMinimizedView()&&(a?ConferenceUI.setScreenInMinimizedView():(ConferenceUI.updateStreamInMinimizedView(t,$("#conferenceminimizedgridcontainer").find('[user_id="'+$.escapeSelector(t)+'"]')),ConferenceUI.updateStreamInMinimizedView(t,$("#conferenceminimizeduserstrip").find('[user_id="'+$.escapeSelector(t)+'"]')))),o.setConnectionStatus(e,!1,!1)},handleRenegotiate:function(e,t,n,i){ConferenceAPI.renegotiate(e,n,WebRTCUserMedia.getStreamTypeInString(i))},reconnectStream:function(e,t,n,i,r){var o=ConferenceImpl.getCurrentSession(),s=o.getMember(n);WebRTCPeerConnectionConstants.isScreenConnection(t)?s.setScreenReconnectionStatus(!1):s.setAVReconnectionStatus(!1),r||ConferenceAPI.reconnect(e,t,n),o.setConnectionStatus(t,r,!0);var a={conferenceId:e,connectionType:t,isUpStream:r,streamType:i,connectionHostId:n};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.failed,a)}},PIPEvents:{onChange:function(e,t){var n=ConferenceImpl.getCurrentSession();n&&!t&&ZCSmartConferenceImpl.exitFromPIPMode(n)},onHangup:function(){ConferenceImpl.getCurrentSession()&&ConferenceImpl.handleEnd(!0)},onMicToggle:function(e){ConferenceImpl.getCurrentSession()&&(e?ConferenceHandler.UIEvents.unmuteAudio():ConferenceHandler.UIEvents.muteAudio())},isAudioMuted:function(){var e=ConferenceImpl.getCurrentSession();if(e)return e.getCurrentMember().isAudioMuted()}},unifiedPeerConnectionEvents:{sendOffer:function(e,t,n,i,r,o){var s=ConferenceImpl.getCurrentSession();WebRTCPeerConnectionConstants.isScreenConnection(t)&&WebRTCPeerConnectionConstants.isInit(r)?ConferenceAPI.startScreenShare(e,n,i):ConferenceAPI.sendSDP(e,t,n,i,r,"offer");var a={conferenceId:e,connectionType:t,processType:r,streamType:o,iceCandidate:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendOffer,a),s&&(WebRTCPeerConnectionConstants.isAudioConnection(t)?s.writeToEventsLog(ConferenceLog.constants.eventsLog.sendAudioOffer):WebRTCPeerConnectionConstants.isVideoConnection(t)&&s.writeToEventsLog(ConferenceLog.constants.eventsLog.sendVideoOffer))},sendAnswer:function(e,t,n,i,r){var o=ConferenceImpl.getCurrentSession(),s=o.getLastOffererId();ConferenceAPI.sendSDP(e,t,n,i,r,"answer",s);var a={conferenceId:e,connectionType:t,processType:r,iceCandidate:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendAnswer,a),ZCSmartConferenceImpl.pushSendAnswerInEventLog(o,t)},notifyNegotiation:function(e,t,n){var i=ConferenceImpl.getCurrentSession();void 0!==n&&i&&i.isInUnifiedPlan()&&!i.isMixingEnabled()&&ConferenceAPI.notifyNegotiation(e,t,n)},updateIceCandidates:function(e,t,n,i,r){var o=[];for(var s in n)o.push(n[s].candidate);ConferenceAPI.updateIceCandidates(e,t,void 0,o,i,r);var a={conferenceId:e,connectionType:t,processType:i,iceCandidates:n,isUpStream:r};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.updateIce,a),ZCSmartConferenceImpl.pushUpdateIceCandidatesInEventLog(ConferenceImpl.getCurrentSession(),t,r)},handleConnected:function(e,t,n,i,r,o){var s=ConferenceImpl.getCurrentSession(),a=!0;s&&s.getId()===e&&(a=s.hasAudioUpStreamConnection()),ConferenceUI.getConferenceWindow().removeClass("zc-av-conference-connecting");WebRTCPeerConnectionConstants.isRestart(o)||WebRTCPeerConnectionConstants.isReInit(o);var c=WebRTCPeerConnectionConstants.isScreenConnection(t);c||!r&&a||!s||!s.isHost(ConferenceImpl.getCurrentUserId())||s.hasNotifiedStart()||(s.setAsNotified(),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiCalled),ConferenceAPI.notifyStart(e,(function(){var e={};if(MediaManager.isChatScope(s.scopeType)){var t=new $CliqChatId(s.scopeIds[0]);e.chatType=t.isChannel()?"channel":"chat"}var n=s.getCurrentMember().getAVStream();e.mic_muted=!n||!n._isAudioTrackEnabled()||n._isAudioRestrictedForConnection();var i=s.getType();i===Conference.types.VIDEO&&(e.camera_muted=!n||!n._isVideoTrackEnabled()),e.type=i,e.connectionMode=WebRTCPeerConnectionConstants.connectionModes.UNIFIED,ZCTrack.track("CONFERENCE_STARTED",e),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiSuccess)}),(function(){s.resetNotified(),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiFailed)})));var d=s.getCurrentMember();if(c?d.setScreenReconnectionStatus(!0):WebRTCPeerConnectionConstants.isAudioConnection(t)&&(r?d.setAudioReconnectionStatus(!0):(Conference.notifyDownStreamConnectedForAdhocCall(s),d.setAudioDownStreamReconnectionStatus(!0))),s.setConnectionStatus(t,r,!1),Conference.isStatsEnabled()&&s.getMembersCount()<=ConferenceLog.participantLimitForStats&&WebRTCPeerConnectionConstants.isAudioConnection(t)&&s.isInUnifiedPlan()&&s.isMixingEnabled()){ConferenceLog.networkStats.connectionIds=WebRTCPeerConnectionStats.getConnectionIds("conferences"),ConferenceLog.connectionStats.connectionIds=WebRTCPeerConnectionStats.getConnectionIds("conferences");var l=e+"_"+r+"_"+t;WebRTCPeerConnectionStats.initiateGathering(l,"conferences",n,{isUpStream:r,connectionType:t,conferenceId:e,isSSRCBased:!0,statsGatheringIntervalTime:ConferenceLog.statsGatheringIntervalTime},{networkInfoCallBack:ConferenceLog.networkStats.callBack,updateStatsCallBack:ConferenceLog.connectionStats.callBack})}var u={conferenceId:e,connectionType:t,processType:o,isUpStream:r,streamType:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.connected,u)},handleTrack:function(e,t,n,i){var r=ConferenceImpl.getCurrentSession();if(r&&"audio"===t.kind)if(r.isMixingEnabled())r.setMixedAudioDownStream(i);else{var o=r.getMemberWithAudioStreamId(i.id);o&&(o.setAudioDownStream(i),o.setUpdatedAudioStatus())}},reconnectStream:function(e,t,n,i){var r=ConferenceImpl.getCurrentSession(),o=r.getCurrentMember();WebRTCPeerConnectionConstants.isScreenConnection(t)?o.setScreenReconnectionStatus(!1):WebRTCPeerConnectionConstants.isAudioConnection(t)&&(i?o.setAudioReconnectionStatus(!1):o.setAudioDownStreamReconnectionStatus(!1)),r.setConnectionStatus(t,i,!0),i||ConferenceAPI.reconnect(e,t);var s={conferenceId:e,connectionType:t,isUpStream:i,streamType:n};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.failed,s)},handleLocalSdpError:function(e,t,n,i,r,o){var s={msgType:"localSdpError",conferenceId:e,connectionType:t,processType:n,error:i,remoteSdp:r,localSdp:o};_printLogMsg(JSON.stringify(s),"groupcall")},handleRenegotiate:function(e,t,n,i){ConferenceAPI.renegotiate(e,n,t)},handleConnectionError:function(e,t){ZCSmartConferenceImpl.checkAndShowUDPBlockedInfo(e,t)}},dcConnectionEvents:{sendOffer:function(e,t,n,i,r,o){ConferenceAPI.sendSDP(e,n,i,r,o,"offer");var s={conferenceId:e,connectionType:n,processType:o,iceCandidate:r,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendOffer,s);var a=ConferenceImpl.getCurrentSession();a&&a.writeToEventsLog(ConferenceLog.constants.eventsLog.sendDCOffer)},updateIceCandidates:function(e,t,n,i,r){ConferenceAPI.updateIceCandidates(e,n,t,i,r);var o={conferenceId:e,connectionType:n,processType:r,iceCandidates:i,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.updateIce,o);var s=ConferenceImpl.getCurrentSession();s&&s.writeToEventsLog(ConferenceLog.constants.eventsLog.sendDCIceCandidates)},handleConnected:function(e,t,n){var i={conferenceId:e,connectionType:n,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.connected,i);var r=ConferenceImpl.getCurrentSession();r&&r.setConnectionStatus(n,!0,!1)},reconnectStream:function(e,t,n){var i={conferenceId:e,connectionType:n,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.failed,i);var r=ConferenceImpl.getCurrentSession();r&&r.setConnectionStatus(n,!0,!0)},handleData:function(e,t,n){var i=ConferenceImpl.getCurrentSession();if(i&&i.isInUnifiedPlan())if(5007===e.type){var r=e.syncData,o=JSON.parse(r.speakers),s=o.shift();i.setActiveSpeaker(s),GalaxyView.swapSpeaker(s,i.isInGalaxyLayout()&&!i.isInMinimizedView()),i.setSecondarySpeakers(o),ConferenceUI.setActiveSpeakersInAudioStrip(i),ConferenceUI.setActiveSpeakersInMinimisedView(i),ConferenceUI.setActiveSpeakerIndicatorInGrid(i)}else 5004===e.type?ConferenceHandler.UIEvents.muteAudio():5501===e.type&&ConferenceHandler.mexEvents[e.syncData.operation](e.syncData)},handleConnectionError:function(e,t){ZCSmartConferenceImpl.checkAndShowUDPBlockedInfo(e,t)}},wmsEvents:{handleConferenceStart:function(e){var t={conferenceId:e.conferenceId,conferenceType:e.conferenceType,sessionId:e.sessionId};if(ConferenceLog.writeToLog(ConferenceLog.constants.wmsEvents.conferenceStart,t),e.sessionId===WmsImpl.getSid())if(Conference.isRetryEnabled()&&ZCSmartConferenceImpl.stopInitialRetry(e.session_key),ConferenceLog.pushWmsDiff(ConferenceLog.wmsMsgTypes.START,e.conferenceId,e.messageTime),ZCSmartConferenceImpl.hasCurrentActiveSession())ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.anotherSessionLive,{existingSessionId:ZCSmartConferenceImpl.getCurrentActiveSession().getId()});else if(!Conference.isSmartMode(e.conferenceMode)||Conference.isAudioConference(e.conferenceType)){var n=$("#conferencewindow");if(n.length){var i=n.attr("session_key");if(!$WC.Util.isEmpty(i)&&i!==e.session_key)return;var r=ConferenceImpl._startSession(e,"true"===n.attr("isQuickStart"));if(r.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedConferenceStart),e.configurations&&ConferenceHandler.wmsEvents.updateConfigurations({conferenceId:e.conferenceId,data:e.configurations}),!r.isSmartMode())return;r.connectDownStreamInUnifiedPlan(e),ConferenceImpl.setMinimisedStateAfterSessionConversion(r)}}else ZCSmartConferenceHandler.wmsEvents[e.opr](e);else ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.sidMismatch,{currentSesionId:WmsImpl.getSid()})},handleConferenceEnd:function(e){var t={conferenceId:e.conferenceId};ConferenceLog.writeToLog(ConferenceLog.constants.wmsEvents.conferenceEnd,t),"undefined"!=typeof CallHistoryData&&CallHistoryData.removeOngoingCall(e.conferenceId);var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var i=ConferenceImpl.getCurrentSession();i&&i.getId()==e.conferenceId&&ConferenceImpl.handleEnd(!1)}},handleGuestConfigurationsUpdate:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()==e.conferenceId)t.updateGuestConfigurations(e.configurations);else{var n=ConferenceImpl.getCurrentSession();n&&n.getId()==e.conferenceId&&n.updateGuestConfigurations(e.configurations)}},updateTitle:function(e){CallHistoryData.updateOnGoingCallTitleByNrsId(e.conferenceId,e.title);var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&t.getId()===e.conferenceId&&(t.setTitle(e.title),ZCSmartConferenceUI.updateConferenceTitle(t),e.actionUserId!==t.getCurrentUserId()&&UI.updateBanner(Resource.getRealValue("conference.renamed.host",e.title)))},handleSessionParticipants:function(e){var t=ConferenceImpl.getCurrentSession();t&&t.getId()==e.conferenceId&&(t.updateMembersInMixing(e),e.cohostsDetails&&t.updateCohostDetails(e.cohostsDetails.userIds,e.cohostsDetails.time,!1),ConferenceUI.updateUserInfoInWhiteBoardContainer(t))},handleSessionExpired:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();n&&n.getId()==e.conferenceId&&n.getInitiatedTime()<e.messageTime&&(!e.sessionId||WmsImpl.isSameBrowser(e.sessionId))&&ConferenceImpl.handleEnd(!1,ZCMediaConstants.endCases.sessionExpired)}},handleScreenShareEnd:function(e){var t={conferenceId:e.conferenceId,screenSharerId:e.screenSharerId};ConferenceLog.writeToLog(ConferenceLog.constants.wmsEvents.SSEnd,t);var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var i=ConferenceImpl.getCurrentSession();if(i&&i.getId()===e.conferenceId){var r=i.getScreenSharer();r&&e.screenSharerId===r.getId()&&e.screenSharerId===i.getCurrentUserId()&&(ConferenceUI.resetScreenShareOption(),void 0!==e.actionUserId&&e.actionUserId!==e.screenSharerId&&UI.updateBanner(Resource.getRealValue("avcliq.conf.ssended",[Resource.getRealValue(i.isHost(e.actionUserId)?"media.host":"cc.cohost").toLowerCase()]),2e3,!0)),i.disconnectScreenDownStream(e.screenSharerId)}}},handleDownstreamConnected:function(e){var t=MediaCallImpl.getCurrentSession();t&&e.adhocCallDetails.call_id===t.getId()&&(t.getMember(e.userId).setAsDownStreamConnectedForConvertedCall(),t.getCurrentMember().isDownStreamConnectedForConvertedCall()&&Conference.closeAssociatedCallConnection(t))},handleScheduledConferenceStart:function(e){EventsMain.loadFiles((function(){EventsUtil.handleConferenceStart(e)}))},handleScheduledConferenceStarttime:function(e){EventsMain.loadFiles((function(){var t=EventsUtil.hasStartPermission(e.organizer_zuid,e.cohost_ids);EventsUtil.handleScheduledConferenceStarttime(e.event_id,t)}))},handleAnswerSDP:function(e){var t={conferenceId:e.conferenceId,connectionType:e.connectionType,remoteIceCandidates:e.remoteIceCandidates};ConferenceLog.writeToLog(ConferenceLog.constants.wmsEvents.answerSdpReceived,t),ConferenceLog.pushAnswerWmsDiffBasedOnConn(e.conferenceId,e.connectionType,e.connectionDataMode,e.messageTime);var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var i=ConferenceImpl.getCurrentSession();if(i&&i.getId()==e.conferenceId){var r=i.getCurrentMember();if(WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType))r.updateScreenConnectionLocalIceCandidates(),r.setScreenConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates);else if(WebRTCPeerConnectionConstants.isDataChannelConnection(e.connectionType))r.updateDCConnectionLocalIceCandidates(),r.setDCConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates);else if(i.isInPlanB())r.updateAVConnectionLocalIceCandidates(),r.setAVConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates);else{var o=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(o)&&(r.updateAudioConnectionLocalIceCandidates(),r.setAudioConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates))}if(WebRTCPeerConnectionConstants.isDataChannelConnection(e.connectionType))i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedDCAnswer);else if(!WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType)){o=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(o)?i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedAudioAnswer):WebRTCPeerConnectionConstants.isVideoConnection(o)&&i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedVideoAnswer)}}}},handleAVStatus:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)return ZCSmartConferenceHandler.wmsEvents[e.opr](e),void AdhocCallBridge.publish(t,"handleAVStatus",{associatedSessionId:t.getAdhocCallId(),msgObj:e});var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=ConferenceImpl.getCurrentUserId(),r=i===e.actionUserId,o=e.userIds.split(",");for(var s in o){var a=o[s],c=i===a;if(!c||!r){var d=n.getMember(a);if(d){var l=d.isAudioUnmuteRestricted(),u=d.isAudioMuted(),f="video";e.audio&&(f="audio",void 0!==e.unmuteRestricted&&n.setUserAudioUnmuteRestrictedStatus(a,e.unmuteRestricted,e.time,e.actionUserId)),e.actionUserId===a||e[f].muted?(c&&ConferenceUI.setMicMutedOption(),d.handleAVStreamStatus(f,e[f].muted,e.time,e.actionUserId)):ConferenceUI.updateMutedInfoInList(n,d),ConferenceUI.isInMinimizedView()&&ConferenceUI.updateAVStatusInMinimizedContainer(d.getId(),f,e[f].muted),c&&void 0!==e.unmuteRestricted&&ConferenceUI.updateMuteRestrictionStatus(u,l,n,d,e.actionUserId,e[f].muted,!0,!0)}}}n.hasHostPermission()&&ConferenceUI.setParticipantMuteAllOption(n),AdhocCallBridge.publish(n,"handleAVStatus",{associatedSessionId:n.getAdhocCallId(),msgObj:e})}},setRemoteIceCandidates:function(e){var t={conferenceId:e.conferenceId,connectionType:e.connectionType,connectionHostId:e.connectionHostId,connectionDataMode:e.connectionDataMode};ConferenceLog.writeToLog(ConferenceLog.constants.wmsEvents.setRemoteIceCandidatesReceived,t),ConferenceLog.pushWmsDiff(ConferenceLog.wmsMsgTypes.DOWN_REMOTE_ICE,e.conferenceId,e.messageTime);var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var i=ConferenceImpl.getCurrentSession();if(i&&i.getId()==e.conferenceId)if(i.isInPlanB()||WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType)){var r=i.getMember(e.connectionHostId);WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType)?(r.setScreenConnectionRemoteIceCandidates(),r.updateScreenConnectionLocalIceCandidates(),i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedScreenAnswerCallback)):(r.setAVConnectionRemoteIceCandidates(),r.updateAVConnectionLocalIceCandidates())}else{r=i.getCurrentMember();var o=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(o)&&(r.setAudioDownStreamConnectionRemoteIceCandidates(),r.updateAudioDownStreamConnectionLocalIceCandidates(),i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedAudioAnswerCallback))}}},handleOfferSDP:function(e){var t={conferenceId:e.conferenceId,connectionType:e.connectionType};if(ConferenceLog.writeToLog(ConferenceLog.constants.wmsEvents.offerSdpReceived,t),e.sessionId===WmsImpl.getSid()){ConferenceLog.pushOfferWmsDiffBasedOnConn(e.conferenceId,e.connectionType,e.connectionDataMode,e.messageTime);var n=ZCSmartConferenceImpl.getCurrentSession();if(Conference.isRetryEnabled()&&(ZCSmartConferenceImpl.stopInitialRetryBasedOnOffer(e.session_key,e.connectionType,e.connectionDataMode),!n&&ZCSmartConferenceImpl.hasOutgoingSession()&&ZCSmartConferenceImpl.getOutgoingSession().getSessionKey()===e.session_key&&(n=new ZCSmartConferenceSession(e),ZCSmartConferenceImpl.convertOutgoingToCurrentSession(n))),n&&n.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var i=ConferenceImpl.getCurrentSession(),r=!1,o=WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType);if(i){if(i.getId()!=e.conferenceId)return}else{var s=$("#conferencewindow");if(0===s.length)return;if(o)return void ConferenceImpl.setInitialScreenOfferMsgObj(e.conferenceId,e);e.conferenceType=s.attr("conferenceType"),(i=ConferenceImpl._startSession(e,!1)).isCurrentUserHost()&&i.setAsNotified(),"true"===s.attr("audio_stream_blocked")&&i.setAudioUpStreamBlockedStatus(!0),r=!0}if(e.configurations&&ConferenceHandler.wmsEvents.updateConfigurations({conferenceId:e.conferenceId,data:e.configurations}),e.waiting_lobby_requests&&(i.setWaitingLobbyRequests(e.waiting_lobby_requests),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(i)),e.special_reactions&&(e.special_reactions.conferenceId=i.getId(),ZCSmartConferenceImpl.handleSpecialReactionData(e.special_reactions)),i.setNativeWigetId(e.nativeWidgetMessageId),e.cohostsDetails&&i.updateCohostDetails(e.cohostsDetails.userIds,e.cohostsDetails.time,!1),o)i.isPresentationStream()||i.connectScreenDownStream(e),i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedScreenOffer);else{var a=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(a)?i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedAudioOffer):WebRTCPeerConnectionConstants.isVideoConnection(a)&&i.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedVideoOffer),i.connectDownStreamInUnifiedPlan(e)}if(ConferenceUI.addUserInList(i,e.host.id),e.audioMuteAll){var c=e.audioMuteAll;void 0===c.actionUserId&&(c.actionUserId=i.getHostId()),i.setMuteAllStatusForParticipants("audio",c.muted,c.time,c.actionUserId,c.excludedIds,c.unmuteRestricted,!0,!1)}if(r&&(ConferenceImpl.setMinimisedStateAfterSessionConversion(i),e.ppt&&!i.hasPresentation())){var d=new Presentation(e.ppt);i.setPresentation(d),d.open()}var l=ConferenceImpl.getInitialScreenOfferMsgObj(e.conferenceId);!o&&l&&(ConferenceImpl.clearInitialScreenOfferMsgObj(e.conferenceId),this.handleOfferSDP(l))}}else ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.sidMismatchIn,{currentSesionId:WmsImpl.getSid()})},handleDeviceAdd:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleUserDeviceIn:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getId()===e.conferenceId&&(t.isPrimarySession()||t.getSecondarySessionId()!==e.device_id)){var n=void 0,i=void 0;if(e.up_stream){var r=e.up_stream;n={audio:r.audio,video:r.video,screen:r.screen},r.audio&&(t.setSecondaryAudioUpStreamStatus(!0),t.closeAudioUpStreamConnection(),t.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.AUDIO,!0,!1)),r.video&&(t.setSecondaryVideoUpStreamStatus(!0),t.closeVideoUpStreamConnection(),t.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.VIDEO,!0,!1)),r.screen&&(t.setSecondaryScreenUpStreamStatus(!0),t.closeScreenUpStreamConnection(),t.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.SCREEN,!0,!1)),ZCSmartConferenceUI.updatePrimarySessionStreamOptions(t)}if(e.down_stream)e.down_stream.audio&&(t.closeAudioDownStreamConnection(),t.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.AUDIO,!1,!1),i={audio:!0});(n||i)&&ConferenceAPI.sendAck(e.conferenceId,ZCSmartConferenceConstants.ackTypes.CONNECTIONS_CLOSED,{up_stream:n,down_stream:i})}},handleUserDeviceOut:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getId()===e.conferenceId&&t.isPrimarySession()){var n=e.up_stream;if(e.up_stream){if(n.audio)t.setSecondaryAudioUpStreamStatus(!1),(t.isOldImpl()?ConferenceHandler:ZCSmartConferenceHandler).UIEvents.muteAudio();n.video&&(t.setSecondaryVideoUpStreamStatus(!1),ZCSmartConferenceHandler.UIEvents.muteVideo()),n.screen&&t.setSecondaryScreenUpStreamStatus(!1),ZCSmartConferenceUI.updatePrimarySessionStreamOptions(t)}if(e.down_stream)e.down_stream.audio&&(t.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.AUDIO,!1,!0),ConferenceAPI.reconnect(e.conferenceId,WebRTCPeerConnectionConstants.connectionTypes.AUDIO))}},handleReinit:function(e){if(e.sessionId===WmsImpl.getSid()){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()==e.conferenceId){var i=n.getCurrentMember();if(e.upStream){var r=e.upStream;r.audio&&i.reinitAudioUpstream(),r.screen&&i.reinitScreenUpStream()}}}}},handleUserOut:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()==e.conferenceId){var i=ConferenceImpl.getCurrentUserId();if(e.userId!==i||e.sessionId&&!WmsImpl.isSameBrowser(e.sessionId)){ConferenceUI.handleReplacedHostCallback(n,e.assignedHostId,e.previousHostId,e.messageTime);var r=n.getMember(e.userId);if(r&&r.getJoinedTime()>e.messageTime)return;ConferenceUI.showNotification(ConferenceImpl.notificationTypes.removed,r,{id:e.userId}),n.removeMember(e.userId),ConferenceUI.removeUserFromList(n,e.userId),ConferenceUI.handleBottomPaneVisibility(n),ConferenceUI.handleBottomPaneParticipantsVisibility(n),$("#conferencewindow,#conferenceminimizedwindow").find("[participants_count]").text(n.getMembersCount()),void 0!==e.special_reactions&&(e.special_reactions.conferenceId=n.getId(),ZCSmartConferenceImpl.handleSpecialReactionData(e.special_reactions))}else{if(n.getInitiatedTime()<e.messageTime){var o=void 0;e.actionUserId&&e.actionUserId!==i?o=ZCMediaConstants.endCases.kickedOut:e.previousHostId&&e.previousHostId===i&&(o=ZCMediaConstants.endCases.assignHostAndLeave),ConferenceImpl.handleEnd(!1,o)}}ConferenceUI.updateUserInfoInWhiteBoardContainer(n),ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!0)}}},handleReplacedHost:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();ConferenceUI.handleReplacedHostCallback(n,e.assignedHostId,e.previousHostId,e.messageTime)}},handleLiveReaction:function(e){if(void 0===e.version){var t=ConferenceImpl.getCurrentSession();t&&ZCSmartConferenceUI.showReaction(t,{customData:{smileyCode:e.smiley_code}})}},handleReactions:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getId()===e.conferenceId){var n=t.getPreviousReactionsGroup(),i=e.reactions,r=t.isInMinimizedView()?ZCSmartConferenceUI.maxReactionSlotsInMinView:ZCSmartConferenceUI.maxReactionSlots,o=2*r,s=0;for(var a in i){var c=parseInt(i[a]);n[a]&&((c-=n[a])>=0?delete n[a]:(n[a]=-c,c=0),i[a]=c),s+=c}if(s<=0)return;var d={};for(var a in i)d[a]=s>o?Math.max(Math.floor(parseInt(i[a])/s*o),1):parseInt(i[a]);var l=[];for(var a in d)l=l.concat(new Array(d[a]).fill(a));var u=1,f=0;function m(){for(var e=r*u;f<l.length&&f<e;)ZCSmartConferenceUI.showReaction(t,{customData:{smileyCode:l[f]}},u),f++;u++}setTimeout(m,0),l.length>r*u&&setTimeout(m,500)}},setChatId:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},setNativeWidgetMessageId:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)t.setNativeWigetId(e.nativeWidgetMessageId);else{var n=ConferenceImpl.getCurrentSession();n&&n.getId()==e.conferenceId&&n.setNativeWigetId(e.nativeWidgetMessageId)}},updateInvitedMembers:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();n&&n.getId()==e.conferenceId&&(n.updateInvitedMembers(e.invitedMembersObject),n.hasPopulatedPendingUsersList()&&(ConferenceUI.populateYetToJoinList(n,n.getInvitedMemberIds()),ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE),ZCSmartConferenceUI.checkAndShowRhsSearch(n)))}},updateUserInviteRevoked:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&t.getId()==e.conferenceId&&(t.removeFromInvitedMembers(e.removedUser),ZCSmartConferenceUI.getListViewInstance().removeItem(e.removedUser,ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection")))},handleSpecialReactions:function(e){ZCSmartConferenceImpl.handleSpecialReactionData(e)},handleGifs:function(e){ZCSmartConferenceImpl.handleGifs(e)},handleParticipantLimitExceeded:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();WmsImpl.getSid()!==e.sessionId||n&&n.getId()!==e.conferenceId||(ConferenceImpl.handleEnd(!1),UI.updateBanner(Resource.getRealValue("media.room.full"),2e3,!0))}},handleScreenShareMaxLimit:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId)if(ConferenceHandler.UIEvents.stopScreenShare(),n.isScreenSharer())n.disconnectScreenDownStream(n.getCurrentMember().getId());else n.getCurrentMember().disconnectScreenDownStream()}},handleInvalidParticipant:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();WmsImpl.getSid()!==e.sessionId||n&&n.getId()!==e.conferenceId||ConferenceImpl.handleEnd(!1)}},handleConferenceLimitForChat:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();WmsImpl.getSid()!==e.sessionId||n&&n.getId()!==e.conferenceId||ConferenceImpl.handleEnd(!1)}},handleUserIn:function(e){if(WmsImpl.isLocalUser(e.userId)&&(ConferenceUI.removeRingingUI(e.conferenceId),e.ppt&&(n=ZCSmartConferenceImpl.getCurrentActiveSession())&&!n.hasPresentation())){var t=new Presentation(e.ppt);n.setPresentation(t),t.open()}var n,i=ZCSmartConferenceImpl.getCurrentSession();i&&i.getId()===e.conferenceId?ZCSmartConferenceHandler.wmsEvents[e.opr](e):(n=ConferenceImpl.getCurrentSession())&&n.getId()===e.conferenceId&&(n.updateMemberInMixing(e),e.cohostsDetails&&n.updateCohostDetails(e.cohostsDetails.userIds,e.cohostsDetails.time,!1),n.handleRingingState(e.userId,void 0,e.userName,!0))},handleMuteAllStatus:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=e.audio?"audio":"video";n.setMuteAllStatusForParticipants(i,e[i].muted,e.time,e.actionUserId,e.excludedIds,e.unmuteRestricted,!1,!0)}}},handleUnmuteRestrictionStatus:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();n&&n.getId()===e.conferenceId&&e.audio&&n.setAudioUnmuteRestrictedStatusForParticipants(e.audio.unmuteRestricted,e.time,e.actionUserId,!0)}},updateUserConnectionMode:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=n.getMember(e.userId);i&&(i.setMemberConnectionMode(e.memberConnectionMode),n.isCurrentUser(e.userId)&&(i.isOnDemandConnectionMember()?"audio"===e.muteDataMode?ConferenceHandler.UIEvents.muteAudio():"audiovideo"===e.muteDataMode&&(ConferenceHandler.UIEvents.muteAudio(),ConferenceHandler.UIEvents.muteVideo()):i.isSilentConnectionMember()&&(e.actionUserId?(n.switchToSilentMember(),ZCSmartConferenceUI.showSwitchedToSilentInfo()):i.isCohost()||i.isSilentMember()||n.isScreenSharer()||ConferenceAPI.sendAck(n.getId(),ZCSmartConferenceConstants.ackTypes.SWITCHED_TO_SILENT,void 0,(function(){n.switchToSilentMember()})))))}}},handleSwitchedMemberType:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=n.getMember(e.userId);if(i){i.setMemberType(e.memberType),ConferenceUI.modifyUserInList(n,i.getId());var r=i.getAVMediaContainer();r&&(i.setAVMediaContainer(void 0),ConferenceUI.removeMediaContainer($(r).parents("[videocontainer]").attr("id"))),ConferenceUI.handleBottomPaneVisibility(n),ConferenceUI.handleBottomPaneParticipantsVisibility(n)}}}},handleNewSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=n.getMember(e.requesterId);i&&(i.setSpeakerRequest(),i.setSessionId(e.requesterSessionId),ConferenceUI.modifyUserInList(n,i.getId()))}}},handleCancelledSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=n.getMember(e.cancelledUserId);i&&(i.resetSpeakerRequest(),ConferenceUI.modifyUserInList(n,i.getId()))}}},handleDeniedSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=n.getMember(e.deniedUserId);if(i&&(i.resetSpeakerRequest(),ConferenceUI.modifyUserInList(n,i.getId())),n.isCurrentUser(i.getId()))$('[conferencebutton][purpose="dropSpeakerRequest"]').removeClass("smartconf-requested").attr("purpose","raiseSpeakerRequest")}}},handleApprovedSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)ZCSmartConferenceHandler.wmsEvents[e.opr](e);else{var n=ConferenceImpl.getCurrentSession();if(n&&n.getId()===e.conferenceId){var i=n.getMember(e.approvedUserId);if(i){i.setMemberType(ZCSmartConferenceConstants.memberTypes.ACTIVE),e.memberConnectionMode&&i.setMemberConnectionMode(e.memberConnectionMode),i.resetSpeakerRequest(),ConferenceUI.modifyUserInList(n,i.getId()),i.addAndSetMediaContainer();var r=i.getAVMediaContainer();if(r)$(r).parents("[videocontainer]").find("[bufferloadercnt]").empty();i.updateDetailsInCard(),ConferenceUI.updateAudioConferenceUI(i.getId()),i.setUpdatedAudioStatus(),ConferenceUI.updateMutedInfoInList(n,i),ConferenceUI.handleBottomPaneVisibility(n),ConferenceUI.handleBottomPaneParticipantsVisibility(n)}if(n.isCurrentUser(i.getId()))$('[conferencebutton][purpose="dropSpeakerRequest"]').removeClass("smartconf-requested").attr("purpose","raiseSpeakerRequest"),n.checkAndInitAudioUpstream(),ConferenceUI.updateSessionOptions(n)}}},handleFocusViewEnabled:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleVideoQualitySwitch:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&e.video_quality===ZCMediaConstants.videoQuality.HD&&t.handleHDVideoState(!0)},handleFocusViewDisabled:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleUserAddedInSpotLight:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&t.addUserInSpotLight(e.userId,e.messageTime,e.actionUserId)},handleUsersAddedInSpotLight:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&t.setSpotLightAsEnabled(e.user_ids,e.messageTime,e.actionUserId,e.restrictSpeakersAudio,e.restrictSpeakersVideo)},handleUserRemovedFromSpotLight:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&t.removeUserFromSpotLight(e.userId,e.messageTime,e.actionUserId)},handleSpotLightConfigUpdate:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&t.updateSpotLightConfig(e.actionUserId,e.messageTime,e.restrictSpeakersAudio,e.restrictSpeakersVideo)},handleSpotLightDisabled:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&t.setSpotLightAsDisabled(e.messageTime,e.actionUserId)},handleMediaSessionRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getId()===e.conferenceId){var n=e.userId;if(e.requestType===ZCSmartConferenceConstants.KNOCK)e.requestState===ZCSmartConferenceConstants.requestStates.PENDING?t.setWaitingLobbyRequest(n,e):e.requestState===ZCSmartConferenceConstants.requestStates.CANCELLED&&t.resetWaitingLobbyRequest(n),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(t);else{var i=t.getMember(n);i&&(e.requestState===ZCSmartConferenceConstants.requestStates.PENDING?i.setPresentationRequest(e.requestType,e.requestedTime):e.requestState===ZCSmartConferenceConstants.requestStates.CANCELLED&&i.resetPresentationRequest(e.requestType),t instanceof ZCSmartConferenceSession?ZCSmartConferenceUI.updatePresentationRequestsList(t):ConferenceUI.updatePresentationRequestsList(t))}}},handleMediaSessionRequestApproval:function(e){var t=e.userId,n=e.requestType===ZCSmartConferenceConstants.KNOCK;if(n&&t===ConferenceImpl.getCurrentUserId()){if(UI.updateBanner(I18N("media.waitingroomreq.accepted")),0===$("#huddle-landing-cnt").length)return;ConferenceImpl.checkAndJoin(e.conferenceId,(function(){"undefined"!=typeof WaitingRoom&&(MediaUtil.clearAudioPreview(WaitingRoom),WaitingRoom.clearPreviewSession())}),!1,Conference.getEncryptedResourceId())}else{var i=ZCSmartConferenceImpl.getCurrentActiveSession(),r=i instanceof ZCSmartConferenceSession;if(i&&i.getId()===e.conferenceId)if(n)i.resetWaitingLobbyRequest(t),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(i);else{var o=i.getMember(t);if(o&&o.resetPresentationRequest(e.requestType),i.isCurrentUser(o.getId())){var s="media.present.request.approved.member";e.requestType===ZCSmartConferenceConstants.presentationType.WHITEBOARD?(s="media.present.request.approved.member.wb",o.setPresentationRequestAsApproved(e.requestType),ZCSmartConferenceImpl.startWhiteBoard()):e.requestType===ZCSmartConferenceConstants.presentationType.SCREENSHARE?(s="media.present.request.approved.member.ss",o.setPresentationRequestAsApproved(e.requestType),r?ZCSmartConferenceUI.startScreenShare():ConferenceUI.startScreenShare()):e.requestType===ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD?(s="media.present.request.approved.member.editwb",r?ZCSmartConferenceUI.removeRequestEditWhiteboardOption():ConferenceUI.removeRequestEditWhiteboardOption()):e.requestType===ZCSmartConferenceConstants.presentationType.PRESENTATION&&(s="media.present.request.approved.member.pres",o.setPresentationRequestAsApproved(e.requestType),ZCSmartConferenceImpl.startPresentation()),UI.updateBanner(Resource.getRealValue(s))}r?ZCSmartConferenceUI.updatePresentationRequestsList(i):ConferenceUI.updatePresentationRequestsList(i)}}},handleMediaSessionRequestRejection:function(e){var t=e.userId,n=e.requestType===ZCSmartConferenceConstants.KNOCK;if(n&&t===ConferenceImpl.getCurrentUserId()){if(0===$("#huddle-landing-cnt").length)return;return ConferenceUI.closeWaitingRoom(),void $(ZCSmartConferenceTemplates.getJoinRequestRejectedHtml()).appendTo("body")}var i=ZCSmartConferenceImpl.getCurrentActiveSession(),r=i instanceof ZCSmartConferenceSession;if(i&&i.getId()===e.conferenceId){t=e.userId;if(n)i.resetWaitingLobbyRequest(t),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(i);else{var o=i.getMember(t);if(o&&o.resetPresentationRequest(e.requestType),i.isCurrentUser(o.getId())){var s="media.present.request.denied.member";e.requestType===ZCSmartConferenceConstants.presentationType.WHITEBOARD?s="media.present.request.denied.member.wb":e.requestType===ZCSmartConferenceConstants.presentationType.SCREENSHARE?s="media.present.request.denied.member.ss":e.requestType===ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD&&(s="media.present.request.denied.member.editwb",ZCSmartConferenceUI.toggleRequestEditWhiteboardButton(i,!1)),UI.updateBanner(Resource.getRealValue(s))}r?ZCSmartConferenceUI.updatePresentationRequestsList(i):ConferenceUI.updatePresentationRequestsList(i)}}},handleClearPresentationRequests:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=t instanceof ZCSmartConferenceSession;if(t&&t.getId()===e.conferenceId){var i=e.allowedPresentations,r=e.userIds;if(!$.isEmptyObject(i))for(var o in i){var s=t.getMember(o),a=i[o];s&&a.forEach((function(e){s.resetPresentationRequest(e)}))}$.isEmptyObject(r)||(r=r.split(",")).forEach((function(e){var n=t.getMember(e);n&&n.resetAllPresentationRequests()})),n?ZCSmartConferenceUI.updatePresentationRequestsList(t):ConferenceUI.updatePresentationRequestsList(t)}},startRinging:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},startRingingAll:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},stopRinging:function(e){"self"!==e.trigger?ZCSmartConferenceHandler.wmsEvents[e.opr](e):void 0!==e.sessionId&&e.sessionId===WmsImpl.getSid()||ConferenceUI.removeRingingUI(e.conferenceId)},stopRingingAll:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},declineCall:function(e){if(!Conference.isSmartMode(e.mode)||Conference.isAudioConference(e.conferenceType)){var t=ConferenceImpl.getCurrentSession(),n=t&&t.getId()===e.conferenceId,i=e.target[0].id;WmsImpl.isLocalUser(i)?ConferenceUI.removeRingingUI(e.conferenceId):n&&t.handleRingingState(i,MediaCallConstants.ringingStates.declined)}else ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleLastChunk:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleRefreshMpd:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},updateStreamingViewerCount:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleModifiedCohosts:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId)return ZCSmartConferenceHandler.wmsEvents[e.opr](e),void this.updateConfigurations({conferenceId:e.conferenceId,data:t.getConfigurations().configurations});var n=ConferenceImpl.getCurrentSession();n&&n.getId()===e.conferenceId&&(n.updateCohostDetails(e.cohostUserIds,e.time,!0),this.updateConfigurations({conferenceId:e.conferenceId,data:n.getConfigurations().configurations}))},updateConfigurations:function(e){let t=ZCSmartConferenceImpl.getCurrentActiveSession();if(void 0===t)return;let n=e.data,i=(t.isHost(ConferenceImpl.getCurrentUserId()),t.getConfigurations());if(i.updateConfigurations(n),n.grid_view){let e,n=i.isGridViewAccessible(t);t instanceof ZCSmartConferenceSession?!(e=$("#videogridcontainer").length>0)&&n?($("#smartconf_main_container").prepend(ZCSmartConferenceTemplates.getGridContainerHtml(t)),$("#sessionOptionsLHS").prepend(ZCSmartConferenceTemplates.getLayoutOptions(t))):e&&!n&&(ZCSmartConferenceUI.switchToStageLayout(!1),$("#videogridcontainer").remove(),$("#layout_options").remove()):t instanceof ConferenceSession&&(!(e=$("#layout_options").length>0)&&n?($("#filmstrip").prepend(ConferenceTemplates.getLayoutOptionsHtml()),$("#conference_galaxyview").addClass("active")):e&&!n&&(ConferenceHandler.UIEvents.switchToGalaxyView(),$("#layout_options").remove()))}if(i.isChatAccessibleToExternalUser()&&Conference.isCurrentUserGuest()){t.getScopeType();let e=t instanceof ZCSmartConferenceSession&&0===$("#smartconferencechattab").length,n=t instanceof ConferenceSession&&0===$("#conferencechattab").length;if(e?ZCSmartConferenceUI.showRhsChatOption():n&&ConferenceUI.showRhsChatOption(),e||n){let t=$WC.template.replace(MediaTemplates.v2HeaderChatOptionHtml,{display_class:"",icon_class:"zcf-chat",$title:"common.chat",custom_attribute:e?"smartconferencebutton openchatrhsbutton":"conferencebutton openchatrhsbutton",purpose:"openChatInRHS",unreadCountAttribute:"conferenceunreadmsgcount"});$("#rhsparticipantsoption").before(t)}}if(n.special_reactions){let t={conferenceId:e.conferenceId,status:n.special_reactions};ZCSmartConferenceImpl.handleSpecialReactionData(t)}if(n.reaction_view&&ConferenceImpl.handleReactionConfigUpdate(i),n.edit_whiteboard){t instanceof ZCSmartConferenceSession?ZCSmartConferenceImpl.handleEditWhiteboardConfigurationUpdate(i):ConferenceImpl.handleEditWhiteboardConfigurationUpdate(i)}if(n.screen_share){t instanceof ZCSmartConferenceSession?ZCSmartConferenceUI.updatePresentationRequestsList(t):ConferenceUI.updatePresentationRequestsList(t)}},handleUserInfo:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},setStreamingId:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},removeStreamingId:function(e){ZCSmartConferenceHandler.wmsEvents[e.opr](e)},handleJoinPresentation:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=new Presentation(e);t.setPresentation(n),t.isPresenter()||n.open()},handleEndPresentation:function(e){PresentationHandler.handleStopPresentation()},handlePresentationSlideChange:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession().getPresentation(),n=e[PresentationConstants.SLIDE_NO],i=e[PresentationConstants.ANIM_INDEX],r=e[PresentationConstants.SLIDE_UPDATED_TIME],o=e[PresentationConstants.PREVIOUS_SLIDE_NO],s=PresentationImpl.getCurrentSlideNo();PresentationImpl.isTimeEligibleToUpdateSlide(r)&&(s==o&&(zsSlideShow.set.jumpTo.call(zsSlideShow,{slideNo:n,animIndex:i}),PresentationImpl.setLastSlideUpdatedTime(r)),t.setPresenterSlideNo(n),t.setPresenterAnimIndex(i),PresentationUI.replaceHostIndicator(PresentationUI.getContainer().find("#slidecontainer_leftnav_cnt"),t.getPresenterSlideNo()))}},mexEvents:{handleReaction:function(e){var t=ConferenceImpl.getCurrentSession();t&&ZCSmartConferenceUI.showReaction(t,e)},handleRecording:function(e){ZCSmartConferenceHandler.mexEvents.handleRecording(e)}},UIEvents:{switchStartView:function(e,t){var n=$("#startconference"),i=n.children().first(),r=parseInt(i.attr("page_state"))+(t.is("[forward_cta]")?1:-1);switch(r){case ConferenceUI.startPageState.CLOSED:ConferenceUI.closeStartWin();break;case ConferenceUI.startPageState.CONFIGURE:ConferenceUI.togglePageChange(i,r);case ConferenceUI.startPageState.PREVIEW:if(ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.showStartPreviewButtonClicked),Conference.isNomenclatureEnabled())return void(MediaManager.isStreamRequested()?ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.streamAlreadyRequested):ConferenceImpl.requestAndOpenStartPreviewPage(n));break;case ConferenceUI.startPageState.START:var o=ConferenceImpl.getTitleInStartUI(n);if(!MediaUtil.isValidTitle(o)||MediaManager.isStreamRequested())return;var s=ConferenceImpl.getResourceDataInStartUI(n),a=ConferenceImpl.getScopeDataInStartUI(n),c=a.type,d=a.ids,l=n.attr("conferencetype"),u=Conference.isVideoConference(l),f=void 0,m=void 0,C=void 0;Conference.isRecordingAllowed()&&n.find("[conferencerecordingcheckbox]").is(":checked")&&(C=(new Date).getTime(),ConferenceImpl.recordingIndex=C);var p=n.attr("conference_skey"),h=void 0,g=void 0,v=void 0,S=void 0;if(p){h=n.attr("scheduled_host_id"),g=n.attr("event_id"),v=n.attr("cal_uid"),S=n.attr("recurrence_id");var I=EventsDB.getObject(g,v,S);I&&I._configurations&&(I._configurations.cohost_ids&&(f=I._configurations.cohost_ids),I._configurations.speakers&&(m=I._configurations.speakers))}ConferenceImpl.previewTrackerObj.started=!0;var _=!1,w=!1,b=WebRTCUserMedia.getStreamTypeInString(u?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY);if($("#startconference").attr("started",!0),u)ZCSmartConferenceImpl.handleNewSessionStart(o,l,c,d,ConferenceImpl.previewDetails.localAudioStream,ConferenceImpl.previewDetails.localVideoStream,void 0,s),_=!(ConferenceImpl.previewDetails.localAudioStream&&ConferenceImpl.previewDetails.localAudioStream._isAudioTrackEnabled()&&!ConferenceImpl.previewDetails.localAudioStream._isAudioRestrictedForConnection()),(w=!(ConferenceImpl.previewDetails.localVideoStream&&ConferenceImpl.previewDetails.localVideoStream._isVideoTrackEnabled()))&&(b=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY));else{var U=u?WebRTCUserMedia.streamTypes.AUDIO_VIDEO:WebRTCUserMedia.streamTypes.AUDIO_ONLY,R=WebRTCUserMedia.getStream(U),T={type:c,ids:d};ConferenceUI.openRoom(o,ConferenceImpl.getCurrentUserId(),Users.getName(ConferenceImpl.getCurrentUserId()),l,T,ConferenceImpl.recordingIndex,void 0,s),_=!(R&&R._isAudioTrackEnabled()&&!R._isAudioRestrictedForConnection()),u&&(w=!(R&&R._isVideoTrackEnabled()))}var y=ConferenceImpl.getSelectedConfigurations();$WC.$Win.destroy("start_conference_win");var M={title:o,conferenceType:l,scopeType:c,scopeIds:d,cohostIds:f,panelListIds:m,allowMembersInPanelList:!1,audio:{muted:_},dataMode:b};s&&(M.associatedResource=s),u&&(M.video={muted:w}),y&&(M.configurations=y),M.scheduledHostId=h,M.eventID=g,M.calUID=v,M.recurrenceId=S,ConferenceImpl.start(M,void 0,(function(){u?ZCSmartConferenceImpl.hasOutgoingSession()&&ZCSmartConferenceImpl.endConference(ZCSmartConferenceImpl.getOutgoingSession().getId(),!1):ConferenceImpl.handleEnd(!1)}),p,C)}},toggleConfModeInStart:function(e,t){var n=t.is(":checked")?Conference.types.VIDEO:Conference.types.AUDIO;ConferenceImpl.updateStartUIParticipantsHint(n)},showAddCohostsInput:function(e,t){ConferenceUI.toggleRoleInputsInStartWin(t,"cohosts_select_input")},showAddSpeakersInput:function(e,t){ConferenceUI.toggleRoleInputsInStartWin(t,"speakers_select_input")},showAddSpotLightInput:function(e,t){ConferenceUI.toggleRoleInputsInStartWin(t,"spotlight_select_input")},joinFromRemoteWork:function(e,t){Conference.join(t.attr("nrs_id"),ZCMediaConstants.triggerSource.REMOTE_WORK)},joinFromNotification:function(e,t){var n=t.parents("[conference_id]"),i=n.attr("conference_id"),r=n.find("[actions_container]");r.html('<div class="bffr-ldr vhcenter mT16" bufferloadercnt></div>'),$Util.animateBufferLoader(r.find("[bufferloadercnt]"),9),Conference.join(i,ZCMediaConstants.triggerSource.CALL_INCOMING_UI,(function(){ConferenceUI.removeRingingUI(i)}))},declineFromNotification:function(e,t){var n=t.parents("[conference_id]").attr("conference_id");ConferenceUI.removeRingingUI(n),ConferenceAPI.decline(n)},joinScheduledConference:function(e,t){EventsMain.UTIL.joinConference(t)},knockConferenceSession:function(e,t){var n=t.attr("conference_id");ConferenceAPI.knock(n,(function(e){var t=$("#conference-btn");$Util.Button.showCompletionAndResetContent(t,!1),$("#huddle-landing-cnt").find("[roomState]").text(Resource.getRealValue("conference.banner.knock.pending"))}))},startScheduledConference:function(e,t){EventsMain.UTIL.startConference(t)},openDescWin:function(e,t){WaitingRoom.openDescriptionPopup(e,t)},closeDescWin:function(){WaitingRoom.closeDescriptionPopup()},setDevice:function(e,t){Clickoutside.handleClickOnChild(e);var n=t.parents("[dropdowncnt]"),i=n.attr("selecteddeviceid"),r=t.attr("deviceid"),o=n.attr("devicekind");if(r!==i){n.find("[dropdowninput]").text(t.attr("devicelabel")),n.attr("selecteddeviceid",r);var s=t.parents("#startconference"),a=ConferenceImpl.previewDetails.chosenType,c=s.find("#conferencevideopreview");ZCMediaDevices.setPreferredDevice(ZCMediaDevices.get(o,r),!Conference.isCurrentUserGuest());var d=function(e,t){MediaManager.resetStreamRequested(),ConferenceUI.closeStartWin(),MediaManager.handleMediaError(e,t)},l=function(e){MediaManager.resetStreamRequested(),ConferenceImpl.previewDetails.localStream=e,ConferenceImpl.previewDetails.localAudioStream=e,e._setTrackStatus("audio",f),m&&e._setConnectionRestrictionForAudio(),e._hasVideoTrack()&&e._setTrackStatus("video",C),s.find("[media_configure_cnt]").html(ConferenceTemplates.getMediaConfigureOptionsHtml(a,e,e)),MediaUtil.setStreamInContainer(ConferenceImpl.getCurrentUserId(),c,e);var t=u?c.find("[audiowaves]"):c.find("[user_card_wrapper] [audiowaves]");e._startAudioFrequencyAnalyser((function(e){return MediaUtil.adjustAudioPulsesCnt(t,e),!0}))},u=Conference.isVideoConference(a),f=!1,m=!1,C=!1;if(u)if(f=void 0===ConferenceImpl.previewDetails.localAudioStream||!ConferenceImpl.previewDetails.localAudioStream._isAudioTrackEnabled(),m=void 0!==ConferenceImpl.previewDetails.localAudioStream&&ConferenceImpl.previewDetails.localAudioStream._isAudioRestrictedForConnection(),C=void 0===ConferenceImpl.previewDetails.localVideoStream||!ConferenceImpl.previewDetails.localVideoStream._isVideoTrackEnabled(),ZCMediaDevices.isAudioInputDeviceKind(o)){if(ConferenceImpl.previewDetails.localAudioStream)WebRTCUserMedia.closeStream(ConferenceImpl.previewDetails.localAudioStream._getType()),ConferenceImpl.previewDetails.localAudioStream=void 0;else if(Conference.isTrackCloseEnabled())return;MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream((function(e){MediaManager.resetStreamRequested(),ConferenceImpl.previewDetails.localAudioStream=e,e._setTrackStatus("audio",f),m&&e._setConnectionRestrictionForAudio(),s.find("[media_configure_cnt]").html(ConferenceTemplates.getMediaConfigureOptionsHtml(a,e,ConferenceImpl.previewDetails.localVideoStream))}),d)}else ZCMediaDevices.isVideoInputDeviceKind(o)&&(c.find("#media_cnt")[0]._removeStream(),ConferenceImpl.previewDetails.localVideoStream&&(WebRTCUserMedia.closeStream(ConferenceImpl.previewDetails.localVideoStream._getType()),ConferenceImpl.previewDetails.localVideoStream=void 0),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream((function(e){MediaManager.resetStreamRequested(),ConferenceImpl.previewDetails.localVideoStream=e,e._setTrackStatus("video",C),MediaUtil.setStreamInContainer(ConferenceImpl.getCurrentUserId(),c,e),s.find("[media_configure_cnt]").html(ConferenceTemplates.getMediaConfigureOptionsHtml(a,ConferenceImpl.previewDetails.localAudioStream,e))}),d,void 0,Conference.getVideoEffects()));else{c.find("#media_cnt")[0]._removeStream();var p=ConferenceImpl.previewDetails.localStream;if(f=!p||!p._isAudioTrackEnabled(),m=p&&p._isAudioRestrictedForConnection(),C=!p||!p._isVideoTrackEnabled(),p)WebRTCUserMedia.closeStream(p._getType());else if(Conference.isTrackCloseEnabled())return;ConferenceImpl.previewDetails.localStream=void 0,ConferenceImpl.previewDetails.localAudioStream=void 0,u?(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_VIDEO,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioVideoStream(l,d)):(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream(l,d))}}},startWhiteBoard:function(e,t){ConferenceUI.removeDropDown(),ZCSmartConferenceImpl.startWhiteBoard()},raiseWhiteboardRequest:function(e,t){ConferenceUI.removeDropDown();var n=ConferenceImpl.getCurrentSession();ConferenceAPI.raiseMediaSessionRequest(n.getId(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,(function(t){n.getCurrentMember().setPresentationRequest(ZCSmartConferenceConstants.presentationType.WHITEBOARD);var i=ConferenceUI.getConferenceWindow();ConferenceHandler.UIEvents.showShareOptions(e,i.find("[purpose=showShareOptions]")),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},dropWhiteboardRequest:function(e,t){ConferenceUI.removeDropDown();var n=ConferenceImpl.getCurrentSession();ConferenceAPI.dropPresentationRequest(n.getId(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,(function(){n.getCurrentMember().resetPresentationRequest(ZCSmartConferenceConstants.presentationType.WHITEBOARD);ConferenceUI.getConferenceWindow();UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},raiseWbEditRequest:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=n.getCurrentMember();n&&!i.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&ConferenceAPI.raiseMediaSessionRequest(n.getId(),ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD,(function(e){i.setPresentationRequest(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD),ZCSmartConferenceUI.toggleRequestEditWhiteboardButton(n,!0),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},dropWbEditRequest:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=n.getCurrentMember();n&&i.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&ConferenceAPI.dropPresentationRequest(n.getId(),ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD,(function(){i.resetPresentationRequest(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD),ZCSmartConferenceUI.toggleRequestEditWhiteboardButton(n,!1),UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},stopWhiteBoard:function(e,t){ConferenceUI.removeDropDown();var n=ConferenceImpl.getCurrentSession();WhiteBoard.closeWhiteBoard(n.getId(),"group_call",n.getCurrentWhiteBoardId())},startPresentation:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();PresentationHandler.startPresentation(n)},stopPresentation:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n.getPresentation().stop(n)},raisePresentationRequest:function(e,t){PresentationHandler.raiseRequest(e)},dropPresentationRequest:function(e,t){PresentationHandler.dropRequest(e)},showShareOptions:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=n.getId(),r=i+"shrdropdowncnt";if(n&&0===t.children().length){var o=ConferenceTemplates.getShareOptionsHtml(n);t.attr("id",i+"shrdropdownopt"),t.addClass("active").removeAttr("tooltip-title").html(o),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:r,doNotClose:function(e,t,n){return n&&n.target.id===i+"shrdropdownopt"},customHide:function(e){t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.share")),$("#"+e.destid).remove()}})}else t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.share")),$("#"+r).remove(),Clickoutside.clear(r)},showMoreOptions:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=n.getId(),r=i+"dropdowncnt";if(n&&0===t.children().length){var o=ConferenceTemplates.getMoreOptionsHtml(n);t.attr("id",i+"dropdownopt"),t.addClass("active").removeAttr("tooltip-title").html(o),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:r,doNotClose:function(e,t,n){return n&&n.target.id===i+"dropdownopt"},customHide:function(e){t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.more")),$("#"+e.destid).remove()}})}else t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.more")),$("#"+r).remove(),Clickoutside.clear(r)},startScreenShare:function(e,t){ConferenceUI.removeDropDown(),ConferenceUI.startScreenShare()},raiseScreenShareRequest:function(e,t){ConferenceUI.removeDropDown();var n=ConferenceImpl.getCurrentSession();ConferenceAPI.raiseMediaSessionRequest(n.getId(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,(function(t){n.getCurrentMember().setPresentationRequest(ZCSmartConferenceConstants.presentationType.SCREENSHARE);var i=ConferenceUI.getConferenceWindow();Conference.isWhiteBoardAllowed()?ConferenceHandler.UIEvents.showShareOptions(e,i.find("[purpose=showShareOptions]")):ConferenceHandler.UIEvents.showMoreOptions(e,i.find("[purpose=showMoreOptions]")),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},dropScreenShareRequest:function(e,t){ConferenceUI.removeDropDown();var n=ConferenceImpl.getCurrentSession();ConferenceAPI.dropPresentationRequest(n.getId(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,(function(){n.getCurrentMember().resetPresentationRequest(ZCSmartConferenceConstants.presentationType.SCREENSHARE);ConferenceUI.getConferenceWindow();UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},stopScreenShare:function(e,t){ConferenceUI.removeDropDown();var n=ConferenceImpl.getCurrentSession();ConferenceUI.resetScreenShareOption(),ConferenceAPI.stopScreenShare(n.getId())},stopScreenShareFromBottomBand:function(e,t){this.stopScreenShare(e,t)},startBroadcast:function(e,t){ZCSmartConferenceHandler.UIEvents.startBroadcast(e,t)},stopBroadcast:function(e,t){ZCSmartConferenceHandler.UIEvents.stopBroadcast(e,t)},showStreamingPopup:function(e,t){ZCSmartConferenceUI.showStreamingPopup()},startRecording:function(e,t){Clickoutside.handleClickOnChild(e);var n=ConferenceImpl.getCurrentSession();n.isRequestPending(ZCSmartConferenceConstants.requests.startStopRecording)||n.hasHostPermission()&&(n.setRequestAsPending(ZCSmartConferenceConstants.requests.startStopRecording),ConferenceAPI.startRecording(n.getId(),(function(e){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording),n.setRecordingReferenceIndex(e),n.sendRecordingStatusToParticipants(),ConferenceUI.showRecordingIndication(ConferenceUI.getConferenceWindow())}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording)})))},stopRecording:function(e,t){Clickoutside.handleClickOnChild(e);var n=ConferenceImpl.getCurrentSession();n.isRequestPending(ZCSmartConferenceConstants.requests.startStopRecording)||n.hasHostPermission()&&(n.setRequestAsPending(ZCSmartConferenceConstants.requests.startStopRecording),ConferenceAPI.stopRecording(n.getId(),n.getRecordingReferenceIndex(),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording),n.setRecordingReferenceIndex(void 0),n.sendRecordingStatusToParticipants(),ConferenceUI.hideRecordingIndication(ConferenceUI.getConferenceWindow())}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording)})))},showFeedbackPopup:function(e){ZCSmartConferenceHandler.UIEvents.showFeedbackPopup(e)},openSettings:function(e){ZCSmartConferenceHandler.UIEvents.openSettings(e)},switchToConfigurationsTab:function(){ZCSmartConferenceHandler.UIEvents.switchToConfigurationsTab()},updateConfigurations:function(e,t){if(!$WC.$Win.isExist("conference_settings_win"))return;let n,i,r,o,s={},a=t.attr("config_name");ConferenceConfiguration.getRoleBasedConfigs().includes(a)?(n=t.is(":checked"),(i=t.parents("[checkboxcontainer]")).addClass("media-requesting"),r=()=>{i.removeClass("media-requesting")},o=()=>{t.prop("checked",!n),i.removeClass("media-requesting")},s[a]=ConferenceImpl.getRoleBasedSelectedConfigurationValue(a)):ConferenceConfiguration.getStateBasedConfigs().includes(a)?(n=t.is(":checked"),(i=t.parents("[checkboxcontainer]")).addClass("loading_progress"),r=()=>{i.removeClass("loading_progress")},o=()=>{t.prop("checked",!n),i.removeClass("loading_progress")},s[a]="waiting_room"===a?ConferenceImpl.getInvertedStateBasedSelectedConfigurationValue(a):ConferenceImpl.getStateBasedSelectedConfigurationValue(a)):ConferenceConfiguration.getTypeBasedConfigs().includes(a)&&(s[a]=ConferenceImpl.getTypeBasedSelectedConfigurationValue(a)),ConferenceAPI.updateConfigurations(ZCSmartConferenceImpl.getCurrentActiveSession().getId(),s,r,o)},goToStore:function(){$WC.$Win.destroy("extension_install_preview"),ScreenShare.Extension.openStore()},minimizeWindow:function(){ConferenceUI.removeDropDown(),ConferenceUI.showMinimizedWindow()},minimizeWaitingWindow:function(){ConferenceUI.showMinimizedWaitingWindow()},showUserOptions:function(e,t){Clickoutside.handleClickOnChild(e);var n=ConferenceImpl.getCurrentSession();if(n){var i=t.attr("userid"),r=n.getMember(i);r&&ZCSmartConferenceUI.showUserOptions(e,t,n,r)}},takeNotes:function(){ConferenceUI.removeDropDown();var e=ConferenceImpl.getCurrentSession();NotebookIntegration.open(e.getId(),(function(){NotebookIntegration.setDefaultNoteTitle(e.getTitle())}))},closeWaitingWindow:function(){ConferenceUI.closeWaitingRoom()},maximizeWaitingWindow:function(){ConferenceUI.maximizeWaitingWindow()},maximizeWindow:function(){ConferenceUI.showMaximizedWindow(),ConferenceUI.handleResize()},showStripView:function(e,t,n){var i=ConferenceImpl.getCurrentSession();ConferenceUI.removeDropDown(),i.isAudioConference()&&GalaxyView.hideUserInfo(),this.showUserStrip(),i.setCurrentLayout(ConferenceUI.layouts.STRIP),$("#conferencewindow").addClass("huddle-strip-view").removeClass("huddle-grid-view"),ConferenceUI.setVideosInStripView(),ConferenceUI.handleResize(void 0,-ConferenceUI.STRIP_HEIGHT)},hideStripView:function(e,t,n){var i=ConferenceImpl.getCurrentSession();ConferenceUI.removeDropDown();var r=$("#filmstrip");this.hideUserStrip();var o=i.isInStripLayout(),s=o?i.getPreviousLayout():i.getCurrentLayout();s&&s==ConferenceUI.layouts.GALAXY?(i.setCurrentLayout(ConferenceUI.layouts.GALAXY),o&&(ConferenceUI.updateGalaxyUI(),r.find(".zcf-galaxy").addClass("active"),r.find(".zcf-grid-view").removeClass("active"),$("#conferencevideowrapper").css("width",""))):ConferenceUI.switchToNewGridLayout(!0),$("#conferencewindow").addClass("huddle-grid-view").removeClass("huddle-strip-view"),ConferenceUI.removeVideosInStripView(),ConferenceUI.handleResize(void 0,ConferenceUI.STRIP_HEIGHT)},openInFullScreen:function(e,t){ZCMediaDomUtil.openFullScreen($(t.attr("targetElemId"))[0],(function(){ConferenceUI.handleOpenFullScreen(t)}),(function(e,n){n?ConferenceUI.handleOpenFullScreen(t):ConferenceUI.handleExitFullScreen(t)}))},exitFromFullScreen:function(e,t){ZCMediaDomUtil.exitFullScreen()},muteAudio:function(e,t){return MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)&&MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioForUnmute),ConferenceImpl.hasCurrentSession()?ConferenceUI.setMicMutedOption():ConferenceUI.setMicMutedOptionInPreview(),ConferenceImpl.changeAVStatus("audio",!0,!1),t&&(0===t.parents("#startconference").length?ZCTrack.track("CONFERENCE_MIC_MUTED"):t.parents("#conferencevideopreview").find("[card_mute_status]").removeClass("dN")),!0},unmuteAudio:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&(n.isAudioUnmuteRestricted()||n.isPrimarySession()&&n.hasSecondaryAudioUpStream()))return!1;if(!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)){var i=function(){var e=$('[conferencebutton][purpose="unmuteAudio"]'),t=n?MediaUtil.getMicOffToolTip():MediaUtil.getMicOffToolTipForPreview();e.addClass("zcf-mic").removeClass("zcf-mic-mute").attr({purpose:"muteAudio","tooltip-title":t}),ConferenceImpl.changeAVStatus("audio",!1,!1),n&&(ConferenceUI.closeUnmuteConfirmPrompt(),ConferenceUI.closeSpeechDetectedInfo())};if(n){var r=n.getCurrentMember();if(r.getAVStream())i();else{MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute),MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute)||(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute),WebRTCUserMedia.requestAudioStream((function(e){MediaManager.resetStreamRequested(),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute),MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)?(MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioForUnmute),i(),r.replaceAudioUpStream(e,n)):WebRTCUserMedia.closeStream(e._getType())}),(function(e,t){MediaManager.resetStreamRequested(),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioForUnmute),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute),void 0!==e&&MediaManager.handleMediaError(e,t),ConferenceImpl.changeAVStatus("audio",!0,!0)})))}}else i();return t&&1===t.parents("#startconference").length&&t.parents("#conferencevideopreview").find("[card_mute_status]").addClass("dN"),!0}},closeScreenShareIndicator:function(e,t){var n=ZCJQuery(t),i=ConferenceImpl.getCurrentSession();n.parents("[screen_share_indicator_v2]").addClass("zc-av-hide"),i.isInMinimizedView()&&($("#conferenceminimizedwindow").removeClass("huddle_screen_share_ind"),i.setMiniViewScreenShareIndicationClosed())},closePresentationIndicator:function(e,t){ZCJQuery(t).parents("[presentation_indicator_v2]").addClass("zc-av-hide")},unmuteAudioFromHelptip:function(e,t){this.unmuteAudio(e,t)},muteVideo:function(e,t){return ConferenceUI.setVideoMutedOption(),ConferenceImpl.changeAVStatus("video",!0,!1),t&&0===t.parents("#startconference").length&&ZCTrack.track("CONFERENCE_CAMERA_MUTED"),!0},unmuteVideo:function(e,t){return $('[conferencebutton][purpose="unmuteVideo"]').addClass("zcf-video").removeClass("zcf-video-mute").attr({purpose:"muteVideo",title:Resource.getRealValue("videochat.cameraoff")}),ConferenceImpl.changeAVStatus("video",!1,!1),!0},muteAllParticipantsAudio:function(e,t){ZCSmartConferenceImpl.updateMuteAllParticipantsStatus("audio",!0,$("#smartconferenceuserslist"))},unmuteAllParticipantsAudio:function(e,t){ZCSmartConferenceImpl.updateMuteAllParticipantsStatus("audio",!1,$("#smartconferenceuserslist"))},switchToGalaxyView:function(e,t){ConferenceUI.switchToGalaxyLayout()},switchToGridView:function(e,t){ConferenceUI.switchToNewGridLayout(!1)},showPreviousGridPage:function(e,t){ConferenceUI.showGridPage(parseInt(t.attr("prevPageNo")))},showNextGridPage:function(e,t){ConferenceUI.showGridPage(parseInt(t.attr("nextPageNo")))},showUserStrip:function(e,t){$('[conferencebutton][purpose="showUserStrip"]').addClass("zcf-downArrow").removeClass("zcf-upArrow").attr({title:Resource.getRealValue("primetime.hide.participants"),purpose:"hideUserStrip"}),$("#conferencewindow, #conferenceminimizedwindow").removeClass("huddle-footer-hide"),ConferenceImpl.getCurrentSession().setFooterVisiblity(!0),ConferenceUI.handleResize(void 0,-ConferenceUI.STRIP_HEIGHT)},hideUserStrip:function(e,t){$('[conferencebutton][purpose="hideUserStrip"]').addClass("zcf-upArrow").removeClass("zcf-downArrow").attr({title:Resource.getRealValue("primetime.show.participants"),purpose:"showUserStrip"}),$("#conferencewindow, #conferenceminimizedwindow").addClass("huddle-footer-hide"),ConferenceImpl.getCurrentSession().setFooterVisiblity(!1),ConferenceUI.handleResize(void 0,ConferenceUI.STRIP_HEIGHT)},showBottomPane:function(){ConferenceUI.showBottomPane(!0)},hideBottomPane:function(){ConferenceUI.hideBottomPane()},setMediaDevices:function(){if(ConferenceImpl.hasCurrentSession()){ConferenceUI.removeDropDown();var e=ConferenceImpl.getCurrentSession(),t=e.getCurrentMember().getAVStream(),n={handleCustomUI:function(e,t,n,i,r){ConferenceImpl.openDeviceSettings(e,t,n,i,r)}};if(t||(n[ZCMediaDevices.kinds.AUDIO_INPUT]=!1),void 0!==t||Conference.isNomenclatureEnabled()){var i=[];if(e.isMixingEnabled())i=Object.values(e.getAudioMediaContainers());else{var r=e.getMembers();for(var o in r){var s=r[o].getAudioContainer();s&&i.push(s)}}e.isAudioConference()&&(n[ZCMediaDevices.kinds.VIDEO_INPUT]=!1);MediaDeviceWidget.show((function(t){$WC.Util.isEmptyObject(t)||(ZCMediaDevices.setPreferredDevices(t,!Conference.isCurrentUserGuest()),ConferenceImpl.hasCurrentSession()&&ConferenceImpl.handleDeviceChange(e,t,!1))}),n,t,t,i[0],(function(){MediaUtil.clearAudioPreview(e)}))}}},openChatInRHS:function(){ConferenceUI.openChatInRHS()},openParticipantsFromRingingStatus:function(){this.openParticipantsInRHS()},openParticipantsInRHS:function(){var e=ConferenceImpl.getCurrentSession();if(e){var t=$("#conferencewindow"),n=t.find("#conferencerhscnt");if(Conference.hideAssociatedResourceIFrame(e.getId()),Conference.hideRhsNotesIFrame(e.getId()),n.hasClass("huddl-participant-view")?$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN"):(n.addClass("huddl-participant-view").removeClass("huddl-chat-view huddl-associatedresource-view huddl-notes-view"),$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN")),ZCSmartConferenceUI.resetHeaderOptions(t,ZCSmartConferenceUI.headerOptions.PARTICIPANTS),!t.hasClass("show-aside"))ConferenceUI.handleResize(-ConferenceUI.getRhsWidth()),t.addClass("show-aside"),this.handlePopups(),e.isInGalaxyLayout()&&$("#conferencevideowrapper").css("width",""),e&&e.hasOngoingPresentation()&&ConferenceUI.adjustPresenterViewWithRHSWindow(e);var i=t.find('[smartconferenceinput][keyup-purpose="searchParticipants"]');i&&i.is(":visible")&&i.focus(),ZCSmartConferenceUI.initiateListView(e),ConferenceUI.getAndPopulateYetToJoinList(e)}},openPresentationRequestsWin:function(e,t){var n=ConferenceImpl.getCurrentSession(),i=n.getId(),r=i+"presentrequestscnt";if(n&&0===t.find("#"+r).length){var o=ZCSmartConferenceTemplates.getPendingPresentationRequestsHtml(n,"conferencebutton");t.attr("id",i+"presentrequestsopt"),t.addClass("active").removeAttr("tooltip-title").append(o),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:r,doNotClose:function(e,t,n){return n&&n.target.id===i+"presentrequestsopt"},customHide:function(e){t.removeClass("active").attr("tooltip-title",Resource.getRealValue("media.presentation.requests")),$("#"+e.destid).remove()}})}else t.removeClass("active").attr("tooltip-title",Resource.getRealValue("media.presentation.requests")),$("#"+r).remove(),Clickoutside.clear(r)},approvePresentationRequest:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.attr("userId"),r=t.attr("presentationType"),o=n.getMember(i),s=function(){ConferenceAPI.approveMediaSesssionRequest(n.getId(),i,r,(function(){o.resetPresentationRequest(r),UI.updateBanner(Resource.getRealValue("conference.banner.knock.hostaccept")),t.parents("[presentrequestitem]").remove(),ConferenceUI.updateHeadersStatus(n),r===ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD&&WhiteBoard.setUserAsEditorForCurrentBoard(i,n)}))};n.hasOngoingPresentation()&&r!==ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD?ZCSmartConferenceUI.showPresentationSwitchDialog(n,n.getCurrentPresentionOwner(),o,r,s):s()}},denyPresentationRequest:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.attr("userId"),r=t.attr("presentationType");ConferenceAPI.denyMediaSessionRequest(n.getId(),i,r,(function(){n.getMember(i).resetPresentationRequest(r),UI.updateBanner(Resource.getRealValue("conference.banner.knock.hostreject")),t.parents("[presentrequestitem]").remove(),ConferenceUI.updateHeadersStatus(n)}))}},openAssociatedResource:function(){var e=ConferenceImpl.getCurrentSession();if(e){var t=$("#conferencewindow"),n=t.find("#conferencerhscnt");Conference.hideRhsNotesIFrame(e.getId()),n.hasClass("huddl-associatedresource-view")?$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN"):(n.addClass("huddl-associatedresource-view").removeClass("huddl-chat-view huddl-participant-view huddl-notes-view"),$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN"));var i=e.getAssociatedResourceData(),r=$("#conference-associatedresource-iframe");r.length<1?"townhall"===i.type&&t.append(ZCSmartConferenceTemplates.getAssociatedResourceIframeHtml(e)):r.show(),ZCSmartConferenceUI.resetHeaderOptions(t,ZCSmartConferenceUI.headerOptions.TOWN_HALL),t.hasClass("show-aside")||(ConferenceUI.handleResize(-ConferenceUI.getRhsWidth()),t.addClass("show-aside"),this.handlePopups(),e.isInGalaxyLayout()&&$("#conferencevideowrapper").css("width",""))}},showAssociatedResourceTabOptions:function(e,t){ZCSmartConferenceUI.showAssociatedResourceTabOptions(e,t)},reloadAssociatedResource:function(){var e=$("#conference-associatedresource-iframe");if($("#associatedResourceTabOptions").hide(),e.length<1)this.openAssociatedResource();else{var t=ConferenceImpl.getCurrentSession().getAssociatedResourceData(),n=t.url.includes("?")?"&":"?";e.find("iframe")[0].src=t.url+n+"frameorigin="+$Util.getFrameOrigin()}},closeRHS:function(e,t){var n=$("#conferencewindow");$("#smartconferenceusersection, #conferencechatsection").addClass("rhs-dN"),n.removeClass("show-aside"),ZCSmartConferenceUI.resetHeaderOptions(n,void 0);var i=ConferenceImpl.getCurrentSession();this.handlePopups(),Conference.hideAssociatedResourceIFrame(i.getId());var r=!1;if(t){var o=t.attr("id");r="rhsnotesoption"===o||"rhsnotesoption_close"===o}Conference.hideRhsNotesIFrame(i.getId(),r),i.isInGalaxyLayout()&&$("#conferencevideowrapper").css("width","")},showGesturesFilter:function(){Clickoutside.bind({srcid:"gestures-filter",destid:"gestures-filter-dropdown"})},clearGesturesFilter:function(e,t){$("#gestures-filter-dropdown").find('input[type="checkbox"]').prop("checked",!1),$("#gestures-filter").attr("filter","").removeClass("zc-funnel-filter"),ZCSmartConferenceUI.setRhsGestureFilterMap(void 0),Clickoutside.handleClickOnChild(e,t)},applyGesturesFilter:function(e,t){var n=$("#gestures-filter-dropdown").find('input[type="checkbox"]:checked');if(n.length>0){for(var i=[],r=0;r<n.length;r++)i.push(n[r].getAttribute("gesture"));i=i.join(),$("#gestures-filter").attr("filter",i).addClass("zc-funnel-filter"),ZCSmartConferenceUI.setRhsGestureFilterMap(i),Clickoutside.handleClickOnChild(e,t)}},handlePopups:function(){var e=ConferenceImpl.getCurrentSession()instanceof ConferenceSession;if($WC.$Win.isExist("huddle-invite-modal")){if(!e)return void $WC.$Win.destroy("huddle-invite-modal");$("#huddle-invite-modal").removeClass("rhs-visible").addClass(ConferenceUI.isRhsOpen()?"rhs-visible":"")}},openInviteUserPanel:function(e,t){ConferenceUI.removeDropDown();var n=$("#invite_users_panel"),i=ZCJQuery(t).attr("invite_user_rhs");n.length?ZCSmartConferenceUI.closeV2InviteUserPanel():ZCSmartConferenceUI.openInviteUserPanel("true"===i)},showChatAddMemberAlert:function(e,t,n){var i=t.length>1?'<div class="mheader_icn msi-adduser clr-green"></div>':'<div class="mheader_icn"><img src="'+Users.getImgUrlById(t[0])+'" width="38" height="38"/></div>',r=(e=$WC.$CUtil.processXSS(e),[{text:Resource.getRealValue("info.chat.addhere"),colour:$WC.$Dlg.GREEN_BUTTON,action:n}]);$WC.$Dlg.confirm({id:"addmemberalert",version:2,class:"zcdalogbx zcbg_mask alert_dialog",headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:i,ispositive:!0,header:Resource.getRealValue("info.chat.addmember.header",[e])}),bodyhtml:$WC.$Dlg.frameBodyInfoHTML({info:[Resource.getRealValue("info.chat.addmember.info1")]}),buttons:r})},leave:function(e,t){var n=ConferenceImpl.getCurrentSession();e&&n&&n.isCurrentUserHost()&&ZCSmartConferenceImpl.hasMoreThanOneActiveMember(n)?ZCSmartConferenceUI.showEndOptions(n,"conferencebutton",e,t):ConferenceImpl.handleEnd(!0)},assignAsHostAndLeave:function(e,t){var n=ZCSmartConferenceHandler.assignHostSuggestion.getSelectedListValue();if(!$WC.Util.isEmpty(n)){var i=t.attr("conference_id");ConferenceAPI.assignHostAndLeave(i,n,t,(function(){ConferenceImpl.handleEnd(!1,ZCMediaConstants.endCases.assignHostAndLeave),"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleLeft(i)}))}},showHostLeaveConfirmation:function(e,t){ZCSmartConferenceUI.showHostLeaveConfirmation(ConferenceImpl.getCurrentSession(),"conferencebutton")},endConferenceAfterConfirmation:function(e,t){ConferenceImpl.handleEnd(!0)},rejoin:function(){document.location.reload()},revokeInvite:function(e,t){ZCSmartConferenceHandler.UIEvents.revokeInvite(e,t)},startRinging:function(e,t){ZCSmartConferenceHandler.UIEvents.startRinging(e,t)},cancelRinging:function(e,t){ZCSmartConferenceHandler.UIEvents.cancelRinging(e,t)},startRingingForAll:function(e,t){ZCSmartConferenceHandler.UIEvents.startRingingForAll(e,t)},stopRingingForAll:function(e,t){ZCSmartConferenceHandler.UIEvents.stopRingingForAll(e,t)},raiseSpeakerRequest:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&!n.hasRequestedToSpeak()){var i=function(){ConferenceAPI.raiseSpeakerRequest(n.getId()),n.setSpeakerRequest(),$('[conferencebutton][purpose="raiseSpeakerRequest"]').addClass("smartconf-requested").attr("purpose","dropSpeakerRequest");var e=n.getCurrentMember();ConferenceUI.modifyUserInList(n,e.getId())};if(n.hasAudioUpStream())i();else{MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream((function(e){MediaManager.resetStreamRequested(),n.getCurrentMember().setLocalAudioUpStream(e),i()}),(function(e,t){MediaManager.resetStreamRequested(),void 0!==e&&MediaManager.handleMediaError(e,t)}))}}},dropSpeakerRequest:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&n.hasRequestedToSpeak()){ConferenceAPI.dropSpeakerRequest(n.getId()),n.resetSpeakerRequest(),$('[conferencebutton][purpose="dropSpeakerRequest"]').removeClass("smartconf-requested").attr("purpose","raiseSpeakerRequest");var i=n.getCurrentMember();ConferenceUI.modifyUserInList(n,i.getId())}},approveSpeakerRequest:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.parents("[userId]").attr("userId"),r=n.getMember(i);r.resetSpeakerRequest(),ConferenceAPI.approveSpeakerRequest(n.getId(),i,r.getSessionId()),ConferenceUI.modifyUserInList(n,r.getId())}},denySpeakerRequest:function(e,t){var n=ConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.parents("[userId]").attr("userId"),r=n.getMember(i);r.resetSpeakerRequest(),ConferenceAPI.denySpeakerRequest(n.getId(),i),ConferenceUI.modifyUserInList(n,r.getId())}},closeSilentSpeakerInfo:function(e,t){var n=ConferenceImpl.getCurrentSession();n&&(n.setSilentSpeakerInfoAsHidden(),ConferenceUI.updateSilentSpeakerInfo(n))},toggleParticipantsUnmuteRestriction:function(e,t){var n=t.is(":checked"),i=!n,r=ConferenceImpl.getCurrentSession();if(!r.isAudioMutedForAllParticipants())return r.setAllowAudioUnmuteCheckboxStatus(n),void ConferenceUI.resetMuteOptionsInParticipantList(r);if(r.isRequestPending(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction))t.prop("checked",!n);else{r.setAllowAudioUnmuteCheckboxStatus(n);var o=t.parents("[checkboxContainer]");o.addClass("smartconf-requesting"),r.setRequestAsPending(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),ConferenceAPI.updateUnmuteRestriction(r.getId(),"audio",i,(function(){r.setRequestAsCompleted(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),r.setAudioUnmuteRestrictedStatusForParticipants(i,$Util.getSyncedCurrentTime(),r.getCurrentUserId(),!0),o.removeClass("smartconf-requesting")}),(function(){r.setRequestAsCompleted(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),t.prop("checked",!n),r.setAllowAudioUnmuteCheckboxStatus(!n),o.removeClass("smartconf-requesting")}))}},showRecordingAlertToAttendees:function(e){$WC.$Win.create({id:"recording_alert",class:"modalwindow modalwindow2 zcalgncntr deleterecording zcbg_mask recording-modalwindow",header:ConferenceTemplates.getStartRecordingConsentHeader(e),html:ConferenceTemplates.startRecordingConsentHtml})},toggleConfigurationsWindow:function(){let e=$("#conference_configurations");"block"===e[0].style.display?e.slideUp(400,(function(){e.removeClass("chlovrly")})):(ZCTrack.track("MEETING_PERMISSIONS",{TRIGGER:"START_UI"}),e.slideDown(400,(function(){e.addClass("chlovrly")})))},showRecordingAcesssDropdown:function(){Clickoutside.bind({srcid:"cc_recording_access",destid:"cc_recording_access_dropdown",closeOnClickSrc:!0});let e=ZCSmartConferenceImpl.getCurrentActiveSession();$("#recording_access_host").toggleClass("dN",0===$("#conference_configurations").length&&void 0!==e&&e.isCurrentUserCohost())},selectRecordingAccessOption:function(e,t){Clickoutside.handleClickOnChild(e);let n=t.attr("cc_value"),i=$("#cc_recording_access_value");$("#cc_recording_access").find('[purpose="selectRecordingAccessOption"]').removeClass("sel_status"),$("#recording_access_"+n).addClass("sel_status"),i.attr("cc_value",n),i.text(I18N("cc.recording_access."+n));let r=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==r&&ConferenceAPI.updateConfigurations(r.getId(),{recording_access:n})},showMeetingChatTypeDropdown:(e,t)=>{Clickoutside.bind({srcid:"cc_meeting_chat_type",destid:"cc_meeting_chat_type_dropdown",closeOnClickSrc:!0})},selectMeetingChatTypeOption:(e,t)=>{Clickoutside.handleClickOnChild(e);let n=t.attr("cc_value"),i=$("#cc_meeting_chat_type_value");$("#cc_meeting_chat_type").find('[purpose="selectMeetingChatTypeOption"]').removeClass("sel_status"),$("#meeting_chat_type_"+n).addClass("sel_status"),i.attr("cc_value",n),i.text(I18N("cc.meetingchattype."+n))},handleLeaveMeetingUponRecordingStart:function(){ConferenceImpl.hasCurrentSession()?ConferenceHandler.UIEvents.leave():ZCSmartConferenceImpl.hasCurrentSession()&&ZCSmartConferenceHandler.UIEvents.endConference(void 0,$('[smartconferencebutton][purpose="endConference"]')),clearTimeout(ZCSmartConferenceUI.recordingConsentTimer),Sound.stop("recordingConsent"),$WC.$Win.destroy("recording_alert")},handleContinueMeetingUponRecordingStart:function(){clearTimeout(ZCSmartConferenceUI.recordingConsentTimer),Sound.stop("recordingConsent"),$WC.$Win.destroy("recording_alert")},openRHSChatFromNotification:function(e,t){let n=ZCSmartConferenceImpl.getCurrentActiveSession();if(void 0!==n){n instanceof ConferenceSession?ConferenceHandler.UIEvents.openChatInRHS():n instanceof ZCSmartConferenceSession&&ZCSmartConferenceHandler.UIEvents.openChatInRHS();let i=Conference.domCache.get("#chat-notification-message-list").children();"thread"===i[i.length-1].getAttribute("message_type")&&(t=$("#conference-rhs-thread")),ZCSmartConferenceHandler.UIEvents.toggleRHSChat(e,t)}},closeChatNotification:function(){ZCSmartConferenceUI.closeChatNotification()},requestToJoinFromWaitingRoom:function(e,t){ConferenceAPI.raiseMediaSessionRequest(t.attr("conference_id"),ZCSmartConferenceConstants.KNOCK,()=>{let e=$("#conference-btn");e.addClass("disabled"),e.text(I18N("conference.waiting.button")),$("#waiting-room-state").text(I18N("conference.banner.knock.pending"))})}},UITransitionEvents:{animateRhs:function(){ConferenceUI.handleResize(),ConferenceUI.setChatWindowFocus()},switchRhsView:function(){$("#smartconferenceusersection, #conferencechatsection").removeClass("rhs-dN"),ConferenceUI.setChatWindowFocus()}},UIKeyUpEvents:{validateTitle:function(e,t){$Dom.limitInput(t),ConferenceImpl.validateStartInputs()}}};var ConferenceSession=function(e){this._id=e.conferenceId,this._type=e.conferenceType,this.sessionId=e.sessionId,this._sessionKey=e.session_key,this._hostId=e.conferenceHostId,this._hostName=e.conferenceHostName,this._hostSetTime=-1,e.creatorId?(this._creatorId=e.creatorId,this._creatorName=e.creatorName):(this._creatorId=e.conferenceHostId,this._creatorName=e.conferenceHostName),this.title=e.title,this.startTime=e.startTime,this._adhocCallDetails=e.adhocCallDetails,this._secondarySpeakerList=[],this._connectionMode=e.connectionMode||WebRTCPeerConnectionConstants.connectionModes.PLANB,this._conferenceMode=e.conferenceMode||Conference.modes.NORMAL,this._unifiedSpeakerCount=e.speakerCount||Conference.MAX_ACTIVE_SPEAKER,this.scopeType=e.scope.type,e.scope.chatId&&(this.scopeIds=[e.scope.chatId],this._chatId=e.scope.chatId,this._threadChatId=e.scope.threadChatId),this._configurations=new ConferenceConfiguration(e.conferenceHostScopeId,e.configurations),this._guestConfigurations=e.guest_configurations||{},this.turnServers=e.turnServers,this._lastOffererId=void 0,this.members={},this.guestMembers={},this._invitedMembersObject=e.invitedMembersObject||{},this._leftMembersNames={},this._blockedUsersList=e.blockedUsersList||[],this._hasNotifiedStart=!1,this._previousLayout=void 0,this._previousSSLayout=void 0,this._currentLayout=this._type===Conference.types.AUDIO?ConferenceUI.layouts.GALAXY:ConferenceUI.layouts.GRID,this._currentView=ConferenceUI.views.MAXIMIZED,this._footerVisibility=!0,this._screenShareUserId=void 0,this._activeSpeaker=this._hostId,this._publicUrl=e.public_url,this._isPushToTalkEnabled=!1,this._isAudioStripShown=!1,this._audioUpStreamBlocked=!1,this._videoUpStream=void 0,this._audioTrackEndedInfo={},this._rippleTimer=null,this._encryptedResourceId=e.encryptedResourceId,this._nativeWidgetMessageId=e.nativeWidgetMessageId,this._associatedResourceData=e.associated_resource,this._isThreadsAllowed=e.threads_allowed,this._miniPlayerProperty={prevSize:{width:"540px",height:"338px"},prevPosition:{top:"",left:""}},this._ringingStates={},this._recordingRefIndex=ConferenceImpl.recordingIndex||e.recordingIndex,ConferenceImpl.recordingIndex=void 0,this._sessionInitiatedTime=-1,this._lastAudioOfferTime=-1,this._lastVideoOfferTime=-1,e.messageTime&&(this._sessionInitiatedTime=e.messageTime),this._isMixingEnabled=e.isMixingEnabled,this._isForceMuted=e.isForceMuted,this._mixedAudioDownStreams={},this._mixedAudioDownStreamContainers={},this._previewAudioContainer=void 0,this._audioStatusForAllParticipants={time:-1,muted:!1,muteStatusSetBy:void 0,excludedIds:[],restrictionTriggeredTime:-1,unmuteRestricted:!1,restrictionStatusSetBy:void 0,restrictionExcludedIds:[]},this._isAllowAudioUnmuteCheckboxEnabled=!0,this._activeIndicationTimer=void 0,this._isStreaming=!1,this._streamingId=void 0,this._viewersCount=0,this._reactionsDB=new ReactionsDB,this._configurations.isSpecialReactionsAllowed()&&this._reactionsDB.setNonVerbalFeedbackStatus(!0),this._currentReactionsGroup={},this._previousReactionsGroup={},this._isMiniViewScreenShareIndicationClosed=!1,this._showBottomPane=!1,this._userIdsInView={},this._hasPopulatedPendingUsersList=!1,this._currentScreenLayout=ZCSmartConferenceConstants.screenLayouts.getSSLayout(),this._audioUpStream=void 0,this._screenUpStream=void 0,this._eventsLogString="",this._hasSentEventsLog=!1,this._eventsLogObj={},this._audioUpStreamReconnecting=!1,this._screenUpStreamReconnecting=!1,this._dcReconnecting=!1,this._audioDownStreamReconnecting=!1,this._screenDownStreamReconnecting=!1,this._audioUpStreamConnected=!1,this._screenUpStreamConnected=!1,this._isDataChannelConnected=!1,this._hadScreenShare=!1,this._wasFeedbackShown=!1,this._audioDownStreamConnected=!1,this._screenDownStreamConnected=!1,this._pendingRequests={},this._waitingLobbyRequests={},e.waiting_lobby_requests&&this.setWaitingLobbyRequests(e.waiting_lobby_requests),this._whiteBoard={currentBoard:void 0,boards:{}},e.cohostsDetails?this._cohostsDetails={actionTime:e.cohostsDetails.time,previousUserIds:[],userIds:e.cohostsDetails.userIds}:this._cohostsDetails={actionTime:-1,previousUserIds:[],userIds:[]},this._isQuickStartPreview=!1,this._hasSecondaryAudioUpStream=!1,this._hasSecondaryVideoUpStream=!1,this._hasSecondaryScreenUpStream=!1,this._currentGridPageInView=1,this._currentGridPageSize=20,this._gridLayoutDetails={},this._callMergeEvents=void 0,this._isSilentSpeakerInfoHidden=!1,this._isInFullScreen=!1,this._presentation=void 0,this._isPresentationStreaming=!1,this._pipCanvasElem=void 0};ConferenceSession.prototype={initUpStream:function(e){WebRTCUserMedia.getStreamTypesInInt(ConferenceImpl.serverConstantVsStreamType[e.conferenceType]);var t=this.getCurrentUserId(),n=new ConferenceMember(this._id,t,Users.getName(t),$zcg._EMAILID,e.turnUserName,e.turnCredential,e.messageTime);e.memberType&&n.setMemberType(e.memberType),e.memberConnectionMode&&n.setMemberConnectionMode(e.memberConnectionMode),e.hasRequestedToSpeak&&n.setSpeakerRequest(),n.initAudioUpStream(this),this.members[t]=n,this.updateJoinedUserInGridLayoutDetails(n),Conference.isGuestUserId(t)&&(this.guestMembers[t]=n),ConferenceUI.addUserInList(this,t),WebRTCUserMedia.getStream(WebRTCUserMedia.streamTypes.AUDIO_ONLY)||(ConferenceUI.setMicMutedOption(),ConferenceImpl.changeAVStatus("audio",!0,!0)),this.isForceMuted()&&(n.setAudioUnmuteRestrictedStatus(e.unmuteRestricted),ConferenceHandler.UIEvents.muteAudio(),ConferenceUI.addUnmuteRestrictedHelpTip(this)),(this.isInUnifiedPlan()||this.isSmartMode())&&(n.initDataChannel(this.turnServers),this.isOnDemandConnectionMember()&&ConferenceHandler.UIEvents.muteAudio()),this.isSmartMode()&&ConferenceUI.updateSessionOptions(this)},hasAudioUpStreamConnection:function(){return this.getCurrentMember().hasAudioUpStreamConnection()},hasAudioDownStreamConnection:function(){return this.getCurrentMember().hasAudioDownStreamConnection()},hasScreenUpStreamConnection:function(){return this.getCurrentMember().hasScreenConnection()},hasScreenDownStreamConnection:function(){var e=this.getScreenSharer();if(e&&!this.isScreenSharer())return e.hasScreenConnection()},isUDPBlockedForAllConnections:function(){var e=this.getCurrentMember(),t=this._dcConnection&&this._dcConnection.isUDPBlocked(),n=e.getAudioUpStreamConnection(),i=e.getAudioDownStreamConnection();return n&&n.hasConnectionMonitor()&&(t=n.isUDPBlocked()),i&&i.hasConnectionMonitor()&&(t=i.isUDPBlocked()),t},checkAndInitAudioUpstream:function(){this.getCurrentMember().initAudioUpStream(this)},initScreenUpStream:function(e){this._screenShareUserId=this.getCurrentUserId(),this.setAsScreenShared(),this.getCurrentMember().initScreenUpStream(this.turnServers,e._getType())},connectDownStreamInUnifiedPlan:function(e){var t=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode],n=WebRTCPeerConnectionConstants.isAudioConnection(t);if(n){if(this.getLastAudioOfferTime()>e.joinedTime)return;this.setLastAudioOfferTime(e.joinedTime)}else{if(this.getLastVideoOfferTime()>e.joinedTime)return;this.setLastVideoOfferTime(e.joinedTime)}this.setLastOffererId(e.host.id);var i=e.members;for(var r in i){var o=i[r],s=this.getMember(r);if(s||(s=new ConferenceMember(this._id,r,o.name,void 0,e.turnUserName,e.turnCredential,o.joinedTime),o.memberType&&s.setMemberType(o.memberType),o.memberConnectionMode&&s.setMemberConnectionMode(o.memberConnectionMode),o.hasRequestedToSpeak&&s.setSpeakerRequest(),o.referrerInfo&&s.setReferrerInfo(o.referrerInfo),s.isActiveMember()&&s.addAndSetMediaContainer(),this.members[r]=s,this.updateJoinedUserInGridLayoutDetails(s),Conference.isGuestUserId(r)&&(this.guestMembers[r]=s),o.id=r,ConferenceUI.addUserInList(this,r)),s.setJoinedTime(o.joinedTime),o.streamId){var a=o.streamId.split(",");n?(s.setAudioMid(o.mid),s.setAudioStreamId(a[0]),s.setAudioTrackId(a[1])):(s.setVideoMid(o.mid),s.setVideoTrackId(a[1]))}s.updateDetailsInCard(),s.updateAVStreamStatus(o),this.isAudioConference()?ConferenceUI.updateAudioConferenceUI(s.getId()):s.setUpdatedVideoStatus(),s.setUpdatedAudioStatus(),ConferenceUI.updateMutedInfoInList(this,s)}this.isInGridLayout()&&(ConferenceUI.updateGridUI(),$("#conferencewindow").removeClass("ss-galaxy-view")),$("#conferenceminimizedwindow,#conferencewindow").find("[participants_count]").text(this.getMembersCount());var c=this.getCurrentMember(),d=e.offerSdp,l=e.remoteIceCandidates;n&&this.isSmartMode()&&e.offerDetails&&e.offerDetails.audio&&(d=e.offerDetails.audio.offerSdp,l=e.offerDetails.audio.remoteIceCandidates),c.connectDownStreamInUnifiedPlan(t,this.turnServers,d,l,e.ssrcList)},connectScreenDownStream:function(e){var t=this.getMember(e.host.id);if(t){if(t.getLastScreenOfferTime()>e.joinedTime)return;var n=t.getScreenPeerConnection();n&&n.close()}else t=new ConferenceMember(this._id,e.host.id,e.host.name,void 0,e.turnUserName,e.turnCredential,e.joinedTime),e.memberType&&t.setMemberType(e.memberType),e.memberConnectionMode&&t.setMemberConnectionMode(e.memberConnectionMode),e.hasRequestedToSpeak&&t.setSpeakerRequest(),t.addAndSetMediaContainer(),this.members[e.host.id]=t,this.updateJoinedUserInGridLayoutDetails(t),ConferenceUI.addUserInList(this,e.host.id);t.setLastScreenOfferTime(e.joinedTime),this._screenShareUserId=e.host.id,this.setAsScreenShared(),this._screenDownStreamReconnecting=!1,t.connectScreenDownStream(this.turnServers,WebRTCUserMedia.streamTypes.SCREEN,e.offerSdp,e.remoteIceCandidates)},setScreenSharerId:function(e){this._screenShareUserId=e},disconnectScreenDownStream:function(e){if(this.isUserScreenSharer(e)){var t=this.getMember(this._screenShareUserId);t&&(this.isScreenSharer()?this._screenUpStreamReconnecting=!1:this._screenDownStreamReconnecting=!1,this._screenShareUserId=void 0,t.disconnectScreenDownStream(),ConferenceUI.updateConnectionStatus(this),this.isSilentConference()&&AdhocCallBridge.publish(this,"handleScreenRemoved",{associatedSessionId:this.getAdhocCallId(),userId:t.getId()}))}},closeAudioUpStreamConnection:function(){this.getCurrentMember().closeAudioUpStreamConnection(),this._audioUpStreamReconnecting=!1},closeScreenUpStreamConnection:function(){this.getCurrentMember().closeScreenUpStreamConnection(),this._screenUpStreamReconnecting=!1},closeAudioDownStreamConnection:function(){this.getCurrentMember().closeAudioDownStreamConnection()},setMiniViewScreenShareIndicationClosed:function(){this._isMiniViewScreenShareIndicationClosed=!0},resetMiniViewScreenShareIndicationClosed:function(){this._isMiniViewScreenShareIndicationClosed=!1},isMiniViewScreenShareIndicationClosed:function(){return this._isMiniViewScreenShareIndicationClosed},setConnectionStatus:function(e,t,n){var i=this.getCurrentMember(),r=!n,o=void 0;WebRTCPeerConnectionConstants.isAudioConnection(e)?t?(i.setAudioReconnectionStatus(r),this._audioUpStreamReconnecting=n,this._audioUpStreamConnected=!n,o=n?ConferenceLog.constants.eventsLog.audioUpStreamFailed:ConferenceLog.constants.eventsLog.audioUpStreamConnected):(i.setAudioDownStreamReconnectionStatus(r),this._audioDownStreamReconnecting=n,this._audioDownStreamConnected=!n,o=n?ConferenceLog.constants.eventsLog.audioDownStreamFailed:ConferenceLog.constants.eventsLog.audioDownStreamConnected):WebRTCPeerConnectionConstants.isScreenConnection(e)?t?(this._screenUpStreamReconnecting=n,this._screenUpStreamConnected=!n,i.setScreenReconnectionStatus(r)):(this._screenDownStreamReconnecting=n,this._screenDownStreamConnected=!n,o=n?ConferenceLog.constants.eventsLog.screenDownStreamFailed:ConferenceLog.constants.eventsLog.screenDownStreamConnected):WebRTCPeerConnectionConstants.isDataChannelConnection(e)&&t&&(this._dcReconnecting=n,this._isDataChannelConnected=!n,o=n?ConferenceLog.constants.eventsLog.dcFailed:ConferenceLog.constants.eventsLog.dcConnected),ConferenceUI.updateConnectionStatus(this),o&&this.writeToEventsLog(o),!this.isDataChannelConnected()||this.hasAudioUpStreamConnection()&&!this.isAudioUpStreamConnected()||this.hasAudioDownStreamConnection()&&!this.isAudioDownStreamConnected()||this.hasScreenDownStreamConnection()&&!this.isScreenDownStreamConnected()||this.updateEventsLog()},updateMembersInMixing:function(e){var t=e.members;for(var n in t){var i=t[n],r=this.getMember(n);if(r)i.audio?(r.updateAVStreamStatus(i),void 0!==i.audio.unmuteRestricted&&r.setAudioUnmuteRestrictedStatus(i.audio.unmuteRestricted)):r.isActiveMember()&&!r.isCurrentUser()&&r.updateAVStreamStatus({audio:{muted:!1,time:i.joinedTime}});else{r=new ConferenceMember(this.getId(),n,i.name,void 0,e.turnUserName,e.turnCredential,i.joinedTime),i.memberType&&r.setMemberType(i.memberType),i.memberConnectionMode&&r.setMemberConnectionMode(i.memberConnectionMode),i.hasRequestedToSpeak&&r.setSpeakerRequest(),i.referrerInfo&&r.setReferrerInfo(i.referrerInfo),r.isActiveMember()&&r.addAndSetMediaContainer(),this.members[n]=r,this.updateJoinedUserInGridLayoutDetails(r),Conference.isGuestUserId(n)&&(this.guestMembers[n]=r),r.updateAVStreamStatus(i),i.audio&&void 0!==i.audio.unmuteRestricted&&r.setAudioUnmuteRestrictedStatus(i.audio.unmuteRestricted),e.cohostsDetails&&ZCSmartConferenceImpl.updateUserCohostState(this,n),i.id=n,ConferenceUI.addUserInList(this,n);var o=r.getAVMediaContainer();if(o)$(o).parents("[videocontainer]").find("[bufferloadercnt]").empty()}r.updateDetailsInCard(),ConferenceUI.updateAudioConferenceUI(r.getId()),r.setUpdatedAudioStatus(),ConferenceUI.updateMutedInfoInList(this,r)}ConferenceUI.handleBottomPaneVisibility(this),ConferenceUI.handleBottomPaneParticipantsVisibility(this),this.isInGridLayout()&&ConferenceUI.updateGridUI(),$("#conferenceminimizedwindow, #conferencewindow").find("[participants_count]").text(this.getMembersCount())},updateMemberInMixing:function(e){if(this.isAudioConference()&&this.isSmartMode()){var t=this.getCurrentMember(),n={turnUserName:t.getTurnUserName(),turnCredential:t.getTurnCredential()},i={};i[e.userId]={name:e.userName,joinedTime:e.messageTime,memberType:e.memberType,memberConnectionMode:e.memberConnectionMode},e.hasRequestedToSpeak&&(i[e.userId].hasRequestedToSpeak=e.hasRequestedToSpeak),e.audio&&(i[e.userId].audio=e.audio),e.video&&(i[e.userId].video=e.video),n.members=i,e.cohostsDetails&&(n.cohostsDetails=e.cohostsDetails),this.updateMembersInMixing(n)}},subscribe:function(e){this._callMergeEvents=e},unSubscribe:function(){this._callMergeEvents=void 0},hasSubscribed:function(){return void 0!==this._callMergeEvents},setSilentSpeakerInfoAsHidden:function(){this._isSilentSpeakerInfoHidden=!0},isSilentSpeakerInfoHidden:function(){return this._isSilentSpeakerInfoHidden},setWindowInFullScreen:function(){this._isInFullScreen=!0},isWindowInFullScreen:function(){return this._isInFullScreen},isInPIP:function(){return this._pipCanvasElem&&this._pipCanvasElem.isInPIP()},getCanvasForPIP:function(){return this._pipCanvasElem||(this._pipCanvasElem=document.createElement("canvas")),this._pipCanvasElem},isPresentationStream:function(){return this._isPresentationStreaming},setAsPresentationStream:function(){this._isPresentationStreaming=!0},resetPresentationStream:function(){this._isPresentationStreaming=!1},getPresentation:function(){return this._presentation},setPresentation:function(e){this._presentation=e,Conference.isPresentationStreamingEnabled()&&this.setAsPresentationStream()},isPresenter:function(){return this.getCurrentUserId()===this.getPresenterId()},isUserPresenter:function(e){return e===this.getPresenterId()},hasPresentation:function(){return void 0!==this.getPresenterId()},hasPresentationContainer:function(){return void 0!==this.getPresenterId()&&this.getCurrentUserId()!==this.getPresenterId()},getSubscribedHandler:function(){return this._callMergeEvents},getTurnServers:function(){return this.turnServers},isInUnifiedPlan:function(){return WebRTCPeerConnectionConstants.isUnifiedPlan(this.getConnectionMode())},isInPlanB:function(){return WebRTCPeerConnectionConstants.isPlanB(this.getConnectionMode())},isSmartMode:function(){return Conference.isSmartMode(this._conferenceMode)},getMode:function(){return this._conferenceMode},isOldImpl:function(){return!0},isQuickStartPreview:function(){return this._isQuickStartPreview},setAsQuickStartPreview:function(){this._isQuickStartPreview=!0},isMixingEnabled:function(){return this._isMixingEnabled||this.isSmartMode()},isFocusedModeEnabled:function(){return!1},isForceMuted:function(){return this._isForceMuted},setThreadChatId:function(e){this._threadChatId=e},getThreadChatId:function(){return this._threadChatId},setDummyThreadChatId:function(e){this._dummyThreadChatId=e},getDummyThreadChatId:function(){return this._dummyThreadChatId},setDummyChatId:function(e){this._dummyChatId=e},getDummyChatId:function(){return this._dummyChatId},getActiveChatId:function(){return this._activeChatId?this._activeChatId:this.isThreadChatAllowed()?this._threadChatId||this._dummyThreadChatId:this._chatId||this._dummyChatId},isSessionChatAThread:function(){return void 0!==this._chatId&&-1!=this._chatId.indexOf("-T-")},getParentChatIdFromSessionThread:function(){var e;return this.isSessionChatAThread()&&(e=ConversationsList.getParentChatId(this._chatId)),e},setActiveChatId:function(e){this._activeChatId=e},getSwitchedChatId:function(e){return this._switchedChatId||this._chatId},setSwitchedChatId:function(e){this._switchedChatId=e},isChatPermitted:function(){return this._isChatPermitted},isChatToggleAllowed:function(){return this._isChatPermitted&&this._isThreadsAllowed},setChatPermission:function(e){this._isChatPermitted=e},getEncryptedPublicResorceId:function(){return this._encryptedResourceId},setNativeWigetId:function(e){e&&(this._nativeWidgetMessageId=e)},getNativeWidgetMessageId:function(){var e=this._nativeWidgetMessageId;if(void 0===e&&!this.isPersonalScope()){var t=NativeWidgetHandler.getMsgObj(this.getId(),"huddlewidget");void 0!==t&&(e=t.msguid)}return e},getAssociatedResourceData:function(){return this._associatedResourceData},hasAssociatedResourceData:function(){return void 0!==this._associatedResourceData},isThreadChatAllowed:function(){return this._isThreadsAllowed},isChatAllowedForCurrentUser:function(){return!(this.isChatScope()&&!this.isThreadChatAllowed())},sendNetworkDetails:function(e){var t=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),opr:"stats_header",data:e});this.getCurrentMember()._dcConnection.send(t)},sendConnectionStats:function(e){var t=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),opr:"stats_data",data:e});this.getCurrentMember()._dcConnection.send(t)},_getDataForMex:function(e,t){var n={};return n.type=e,n.packetType=1,n.conferenceId=this.getId(),n.processId=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n.userId=this.getCurrentUserId(),n.syncData=JSON.stringify(t),n.binaryData="",n},setMemberType:function(e){this.getCurrentMember().setMemberType(e)},isSilentConnectionMember:function(){return this.getCurrentMember().isSilentConnectionMember()},isOnDemandConnectionMember:function(){return this.getCurrentMember().isOnDemandConnectionMember()},setMemberConnectionMode:function(e){this.getCurrentMember().setMemberConnectionMode(e)},hasRequestedToSpeak:function(){return this.getCurrentMember().hasRequestedToSpeak()},setSpeakerRequest:function(){this.getCurrentMember().setSpeakerRequest()},resetSpeakerRequest:function(){this.getCurrentMember().resetSpeakerRequest()},isActiveMember:function(){return this.getCurrentMember().isActiveMember()},isSilentMember:function(){return this.getCurrentMember().isSilentMember()},getMemberType:function(){return this.getCurrentMember().getMemberType()},hasSentEventsLog:function(){return this._hasSentEventsLog},setEventsLogAsSent:function(){return this._hasSentEventsLog=!0},getEventsLogString:function(){return this._eventsLogString},getEventsLogObject:function(){return this._eventsLogObj},setEventsLogString:function(e){this._eventsLogString=e},setEventsLogObject:function(e){this._eventsLogObj=e},writeToEventsLog:function(e){if(!this.hasSentEventsLog()){var t=(new Date).getTime();this._eventsLogString=this._eventsLogString+"["+e+"]:["+t+"]\n",this._eventsLogObj[e]||(this._eventsLogObj[e]=t)}},updateEventsLog:function(){ZCSmartConferenceImpl.updateEventsLog(this)},isAudioUpStreamReconnecting:function(){return this._audioUpStreamReconnecting},isScreenUpStreamReconnecting:function(){return this._screenUpStreamReconnecting},isDataChannelReconnecting:function(){return this._dcReconnecting},isAudioDownStreamReconnecting:function(){return this._audioDownStreamReconnecting},isScreenDownStreamReconnecting:function(){return this._screenDownStreamReconnecting},isAudioUpStreamConnected:function(){return this._audioUpStreamConnected},isScreenUpStreamConnected:function(){return this._screenUpStreamConnected},isDataChannelConnected:function(){return this._isDataChannelConnected},isAudioDownStreamConnected:function(){return this._audioDownStreamConnected},isScreenDownStreamConnected:function(){return this._screenDownStreamConnected},setBottomPaneStatus:function(e){this._showBottomPane=e},canShowBottomPane:function(){return this._showBottomPane},setUserIdInView:function(e){this._userIdsInView[e]=!0},removeUserIdFromView:function(e){delete this._userIdsInView[e]},getUserIdsInView:function(){var e=Conference.isNomenclatureEnabled(),t=[];for(var n in this._userIdsInView){var i=GalaxyView.getLayer(n);(e||5!==i)&&t.push(n)}return t},getUserIdsInHiddenLayer:function(){var e=[];for(var t in this._userIdsInView){5===GalaxyView.getLayer(t)&&e.push(t)}return e},hasAudioUpStream:function(){var e=this.getCurrentMember().getAVStream();return e&&e._hasAudioTrack()},getAudioUpStream:function(){return this.getCurrentMember().getAVStream()},hasVideoUpStream:function(){return!1},clearVideoEffectsPreview:function(){},isStreaming:function(){return this._isStreaming},setStreamingStatus:function(e){this._isStreaming=e},getViewersCount:function(){return this._viewersCount},setViewersCount:function(e){this._viewersCount=e},getStreamingLink:function(){return $zcg._SERVERURL+"/huddlestream/"+this._streamingId},setStreamingId:function(e){this._streamingId=e},getConferenceMode:function(){return this._conferenceMode},getConnectionMode:function(){return this._connectionMode},getUnifiedSpeakerCount:function(){return this._unifiedSpeakerCount},isPushToTalkEnabled:function(){return this._isPushToTalkEnabled},setPushToTalkState:function(e){this._isPushToTalkEnabled=e},handleMuteShortcut:function(){var e=!1,t=this.getCurrentMember();return t&&(e=t.isAudioMuted()?ConferenceHandler.UIEvents.unmuteAudio():ConferenceHandler.UIEvents.muteAudio()),e},isSilentConference:function(){return void 0!==this._adhocCallDetails},getAdhocCallDetails:function(){return this._adhocCallDetails},getAdhocCallId:function(){return this.isSilentConference()?this._adhocCallDetails.call_id:void 0},isMigratedForRecording:function(){return this.isSilentConference()&&this._adhocCallDetails.recording_migration},isAudioConference:function(){return this._type===Conference.types.AUDIO},isVideoConference:function(){return this._type===Conference.types.VIDEO},getVideoUpStream:function(){return this._videoUpStream},isPrimarySession:function(){return!0},hasSecondaryAudioUpStream:function(){return this._hasSecondaryAudioUpStream},hasSecondaryVideoUpStream:function(){return this._hasSecondaryVideoUpStream},hasSecondaryScreenUpStream:function(){return this._hasSecondaryScreenUpStream},setSecondaryAudioUpStreamStatus:function(e){this._hasSecondaryAudioUpStream=e},setSecondaryVideoUpStreamStatus:function(e){this._hasSecondaryVideoUpStream=e},setSecondaryScreenUpStreamStatus:function(e){this._hasSecondaryScreenUpStream=e},isHost:function(e){return this._hostId===e},getHostSetTime:function(){return this._hostSetTime},replaceHost:function(e,t,n){this._hostSetTime>n||(this.setAsNotified(),this._hostId=e,ConferenceUI.handleReplacedHost(this,e,t))},isCurrentUser:function(e){return this.getCurrentUserId()===e},isCurrentUserHost:function(){return this._hostId===this.getCurrentUserId()},isCurrentUserCohost:function(){return this.getCurrentMember().isCohost()},hasHostPermission:function(){return this.isCurrentUserHost()||this.isCurrentUserCohost()},getScopeType:function(){return this.scopeType},isChatScope:function(){return this.scopeType===ZCMediaConstants.scopeTypes.CHAT},isEventScope:function(){return MediaManager.isEventScope(this.scopeType)},isPersonalScope:function(){return this.scopeType===ZCMediaConstants.scopeTypes.PERSONAL},setAudioStripVisibility:function(e){this._isAudioStripShown=e},isAudioStripVisible:function(){return this._isAudioStripShown},isAudioUpStreamBlocked:function(){return this._audioUpStreamBlocked},setAudioUpStreamBlockedStatus:function(e){this._audioUpStreamBlocked=e},getRecordingReferenceIndex:function(){return this._recordingRefIndex},isRecording:function(){return void 0!==this._recordingRefIndex},setRecordingReferenceIndex:function(e){this._recordingRefIndex=e},sendRecordingStatusToParticipants:function(){var e={};this._recordingRefIndex&&(e.recording_index=this._recordingRefIndex);var t=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.CUSTOM,{userId:this.getCurrentUserId(),userName:Users.getDisplayName(this.getCurrentUserId()),operation:"handleRecording",customData:e});this.getCurrentMember()._dcConnection.send(t)},sendReaction:function(e){var t=0;void 0!==this._currentReactionsGroup[e]&&(t=this._currentReactionsGroup[e]),this._currentReactionsGroup[e]=++t,void 0===this._reactionGroupingTimeout&&(this._reactionGroupingTimeout=setTimeout(function(){for(var e in this._reactionGroupingTimeout=void 0,this._currentReactionsGroup)this._previousReactionsGroup[e]?this._previousReactionsGroup[e]=this._previousReactionsGroup[e]+this._currentReactionsGroup[e]:this._previousReactionsGroup[e]=this._currentReactionsGroup[e];ConferenceAPI.bulkReact(this.getId(),this._currentReactionsGroup),this._currentReactionsGroup={}}.bind(this),1e3)),ZCSmartConferenceUI.showReaction(this,{customData:{smileyCode:e}})},getActiveSpeaker:function(){return this._activeSpeaker},setActiveSpeaker:function(e){this._activeSpeaker=e},setMiniPlayerSize:function(e){this._miniPlayerProperty.prevSize=e},setMiniPlayerPosition:function(e){this._miniPlayerProperty.prevPosition=e},getMiniPlayerSize:function(){return this._miniPlayerProperty.prevSize},getMiniPlayerPosition:function(){return this._miniPlayerProperty.prevPosition},setLastOffererId:function(e){this._lastOffererId=e},setLastAudioOfferTime:function(e){this._lastAudioOfferTime=e},getLastAudioOfferTime:function(){return this._lastAudioOfferTime},setLastVideoOfferTime:function(e){this._lastVideoOfferTime=e},getLastVideoOfferTime:function(){return this._lastVideoOfferTime},getLastOffererId:function(){return this._lastOffererId},isScreenSharer:function(){return this.getCurrentUserId()===this._screenShareUserId&&!this.isPresentationStream()},isUserScreenSharer:function(e){return e===this._screenShareUserId},hasScreenShare:function(){return void 0!==this._screenShareUserId},hasScreenShareContainer:function(){return void 0!==this._screenShareUserId&&this.getCurrentUserId()!==this._screenShareUserId},hadScreenShare:function(){return this._hadScreenShare},setAsScreenShared:function(){this._hadScreenShare=!0},wasFeedbackShown:function(){return this._wasFeedbackShown},setFeedbackAsShown:function(){this._wasFeedbackShown=!0},hasNotifiedStart:function(){return this._hasNotifiedStart},setAsNotified:function(){this._hasNotifiedStart=!0},resetNotified:function(){this._hasNotifiedStart=!1},isFooterVisible:function(){return this._footerVisibility},setFooterVisiblity:function(e){this._footerVisibility=e},isInStripLayout:function(){return this._currentLayout===ConferenceUI.layouts.STRIP},isInGridLayout:function(){return this._currentLayout===ConferenceUI.layouts.GRID},isInGalaxyLayout:function(){return this._currentLayout===ConferenceUI.layouts.GALAXY},setPreviousLayout:function(e){this._previousLayout=e},setPreviousSSLayout:function(e){this._previousSSLayout=e},setCurrentLayout:function(e){this._previousLayout=this._currentLayout,this._currentLayout=e},getCurrentLayout:function(){return this._currentLayout},getPreviousLayout:function(){return this._previousLayout},getPreviousSSLayout:function(){return this._previousSSLayout},setCurrentView:function(e){this._currentView=e},setCurrentScreenLayout:function(e){this._currentScreenLayout=e},getCurrentScreenLayout:function(){return this._currentScreenLayout},isScreenInTopView:function(){return ZCSmartConferenceConstants.screenLayouts.isInTopView(this._currentScreenLayout)},isScreenInRhsView:function(){return ZCSmartConferenceConstants.screenLayouts.isInRhsView(this._currentScreenLayout)},isScreenInActiveSpeakerView:function(){return ZCSmartConferenceConstants.screenLayouts.isInActiveSpeakerView(this._currentScreenLayout)},isInMinimizedView:function(){return this._currentView===ConferenceUI.views.MINIMIZED},getInitiatedTime:function(){return this._sessionInitiatedTime},setPendingUsersListAsPopulated:function(){this._hasPopulatedPendingUsersList=!0},hasPopulatedPendingUsersList:function(){return this._hasPopulatedPendingUsersList},isRequestPending:function(e){return this._pendingRequests[e]},setRequestAsPending:function(e){this._pendingRequests[e]=!0},setRequestAsCompleted:function(e){delete this._pendingRequests[e]},isAudioMuted:function(){return this.getCurrentMember().isAudioMuted()},isAudioUnmuteRestricted:function(){return this.getCurrentMember().isAudioUnmuteRestricted()},setUserAudioUnmuteRestrictedStatus:function(e,t,n,i){this.getMember(e).setAudioUnmuteRestrictedStatus(t,n,i)},setMuteStatusForUser:function(e,t,n,i,r,o){var s=this.getMember(e);s&&s.setMuteStatus(t,n,i,r,o)},setMuteAllStatusForParticipants:function(e,t,n,i,r,o,s,a){var c="audio"===e;if(t?(r=r||[]).push(i):(o=!1,r=[]),c){if(this._audioStatusForAllParticipants.time>n)return;this._audioStatusForAllParticipants.time=n,this._audioStatusForAllParticipants.muted=t,this._audioStatusForAllParticipants.muteStatusSetBy=i,this._audioStatusForAllParticipants.excludedIds=r,void 0!==o&&(this._audioStatusForAllParticipants.unmuteRestricted=o,this._audioStatusForAllParticipants.restrictionStatusSetBy=i,this._audioStatusForAllParticipants.restrictionTriggeredTime=n,this.setAllowAudioUnmuteCheckboxStatus(!o))}t?this.muteAllParticipants(e,n,i,r,o,s,a):this.resetMuteAllParticipants(e,n,i,a)},muteAllParticipants:function(e,t,n,i,r,o,s){var a=this.getCurrentMember(),c=a.isAudioMuted(),d=a.isAudioUnmuteRestricted(),l=this.getMembers();for(var u in l){var f=l[u];-1!==i.indexOf(u)||this.isHost(u)||f.isCohost()||(o||f.handleAVStreamStatus(e,!0,t,n),void 0!==r&&f.setAudioUnmuteRestrictedStatus(r,t,n))}-1!==i.indexOf(a.getId())||this.isHost(a.getId())||a.isCohost()||(o||ConferenceUI.setMicMutedOption(),ConferenceUI.updateMuteRestrictionStatus(c,d,this,a,n,!0,!1,s),ConferenceUI.updateMutedInfoInList(this,a)),this.hasHostPermission()&&ConferenceUI.setParticipantMuteAllOption(this),ConferenceUI.resetMuteOptionsInParticipantList(this)},resetMuteAllParticipants:function(e,t,n,i){var r=this.getCurrentMember(),o=r.isAudioMuted(),s=r.isAudioUnmuteRestricted(),a=this.getMembers();for(var c in a){if(!this.isHost(c))a[c].setAudioUnmuteRestrictedStatus(!1,t,n)}this.isHost(r.getId())||r.isCohost()||ConferenceUI.updateMuteRestrictionStatus(o,s,this,r,n,!1,!1,i),this.hasHostPermission()&&ConferenceUI.setParticipantMuteAllOption(this),ConferenceUI.resetMuteOptionsInParticipantList(this)},setAudioUnmuteRestrictedStatusForParticipants:function(e,t,n,i){if(!(t<this._audioStatusForAllParticipants.restrictionTriggeredTime)){this._audioStatusForAllParticipants.unmuteRestricted=e,this._audioStatusForAllParticipants.restrictionStatusSetBy=n,this._audioStatusForAllParticipants.restrictionTriggeredTime=t,this.setAllowAudioUnmuteCheckboxStatus(!e);e?this.muteAllParticipants("audio",t,n,this._audioStatusForAllParticipants.excludedIds,e,!0,i):this.resetMuteAllParticipants("audio",t,n,i)}},isAudioMutedForAllParticipants:function(){return this._audioStatusForAllParticipants.muted},isAudioUnmuteRestrictedForAllParticipants:function(){return this._audioStatusForAllParticipants.unmuteRestricted},isAllowAudioUnmuteCheckboxEnabled:function(){return this._isAllowAudioUnmuteCheckboxEnabled},setAllowAudioUnmuteCheckboxStatus:function(e){this._isAllowAudioUnmuteCheckboxEnabled=e},isAudioNotMutedForAnyParticipant:function(){var e=this.getMembers();for(var t in e){var n=e[t];if(n.isActiveMember()&&!n.isCohost()&&!n.isAudioMuted()&&!this.isHost(t))return!0}return!1},isAudioUnmuteRestrictedForAny:function(){var e=this.getMembers();for(var t in e){var n=e[t];if(n.isActiveMember()&&!n.isCohost()&&n.isAudioUnmuteRestricted())return!0}return!1},canShowMuteAllParticipantsOpt:function(){return!!this.hasHostPermission()&&(!this.isAudioMutedForAllParticipants()||this.isAudioNotMutedForAnyParticipant())},canShowUnmuteAllParticipantsOpt:function(){return!!this.hasHostPermission()&&(this.isAudioMutedForAllParticipants()||this.isAudioUnmuteRestrictedForAny())},canShowParticipantsUnmuteRestrictOpt:function(){if(!this.hasHostPermission())return!1;if(this.isAudioMutedForAllParticipants())return!0;var e=this.getCurrentUserId(),t=this.getMembers();for(var n in t){var i=t[n];if(i.isActiveMember()&&!i.isCohost()&&!this.isCurrentUser(n)){var r=i.getAudioMutedBy(),o=i.getAudioUnmuteRestrictedBy();if(r===e||o===e)return!0}}return!1},hasUnmutePermission:function(){return!(this.isAudioUnmuteRestricted()||this.isSilentMember()||this.isPrimarySession()&&this.hasSecondaryAudioUpStream())},getType:function(){return this._type},getChatId:function(){return this.isChatScope()?this.scopeIds[0]:this._chatId},setChatId:function(e){this._chatId=e},hasChatId:function(){return void 0!==this.getChatId()},getId:function(){return this._id},getSessionKey:function(){return this._sessionKey},getTitle:function(){return this.title},setTitle:function(e){this.title=e},getStartTime:function(){return this.startTime},getHostId:function(){return this._hostId},getHostName:function(){return this._hostName},getCreatorId:function(){return this._creatorId},getCreatorName:function(){return this._creatorName},getPublicUrl:function(){return this._publicUrl},setPublicUrl:function(e){this._publicUrl=e},getMember:function(e){return this.members[e]},setLeftMemberName:function(e,t){t&&(this._leftMembersNames[e]=t)},getLeftMemberName:function(e){return this._leftMembersNames[e]},getInvitedMember:function(e){return this._invitedMembersObject[e]},getInvitedMembers:function(){return Object.values(this._invitedMembersObject)},getInvitedMemberIds:function(){return void 0===this._invitedMembersObject&&(this._invitedMembersObject={}),Object.keys(this._invitedMembersObject)},getInvitedMemberIdsForSearch:function(e){var t=[];for(var n in this._invitedMembersObject){var i=this._invitedMembersObject[n];if(void 0!==e&&""!==e){var r=Users.getName(n,i.name);if(void 0===r||-1===r.toLowerCase().indexOf(e))continue}this.isHost(n)||WmsImpl.isLocalUser(n)||WmsImpl.isGuestUserId(n)||void 0!==this.getMember(n)||void 0!==this.getWaitingLobbyRequests()[n]||t.push(n)}return t},updateInvitedMembers:function(e){void 0===this._invitedMembersObject&&(this._invitedMembersObject={}),Object.assign(this._invitedMembersObject,e)},removeFromInvitedMembers:function(e){delete this._invitedMembersObject[e]},getBlockedUserIds:function(){return this._blockedUsersList},updateBlockedUserIds:function(e){this._blockedUsersList=this._blockedUsersList.concat(e)},getConfigurations:function(){return this._configurations},getGuestConfigurations:function(){return this._guestConfigurations},updateGuestConfigurations:function(e){Object.assign(this._guestConfigurations,e)},resetGuestConfigurations:function(){this._guestConfigurations={}},getScreenSharerId:function(){return this._screenShareUserId},getScreenSharer:function(){return this.getMember(this._screenShareUserId)},getWhiteBoardCreator:function(){return this.getMember(this._whiteBoard.boards[this._whiteBoard.currentBoard].creator)},getPresentationOwnerName:function(){var e=this.getPresentor();return Users.getName(e.getId(),e.getName())},getPresentor:function(){return this.getMember(this.getPresenterId())},getPresenterId:function(){var e=this.getPresentation();if(void 0!==e)return e.getPresenterId()},getHost:function(){return this.getMember(this.getHostId())},getCurrentUserId:function(){return ConferenceImpl.getCurrentUserId()},getCurrentMember:function(){return this.members[this.getCurrentUserId()]},getMembersCount:function(){return Object.keys(this.getMembers()).length},getGuestMembersCount:function(){return Object.keys(this.getGuestMembers()).length},getMembers:function(){return this.members},getGuestMembers:function(){return this.guestMembers},getActiveMembers:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.isActiveMember()&&(e[n]=i)}return e},getActiveMembersCount:function(){return Object.keys(this.getActiveMembers()).length},getSilentMembers:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.isSilentMember()&&(e[n]=i)}return e},getSilentMembersCount:function(){return Object.keys(this.getSilentMembers()).length},getRequestedSpeakers:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.hasRequestedToSpeak()&&(e[n]=i)}return e},getRequestedSpeakersCount:function(){return Object.keys(this.getRequestedSpeakers()).length},getWaitingLobbyRequests:function(){return this._waitingLobbyRequests},getWaitingLobbyRequestsCount:function(){return Object.keys(this.getWaitingLobbyRequests()).length},setWaitingLobbyRequest:function(e,t){this._waitingLobbyRequests[e]={name:t.addInfo&&t.addInfo.name?t.addInfo.name:t.name||t.user.name,email:t.addInfo&&t.addInfo.email,bio:t.addInfo&&t.addInfo.bio,status:ZCSmartConferenceConstants.requestStates.PENDING,requestedTime:t.requestedTime||t.time}},setWaitingLobbyRequests:function(e){for(var t in e){var n=e[t];this.setWaitingLobbyRequest(n.user.id,n)}},resetWaitingLobbyRequest:function(e){delete this._waitingLobbyRequests[e]},resetAllWaitingLobbyRequest:function(){this._waitingLobbyRequests={}},setRequestedPresentationsData:function(e){var t=this;e.forEach((function(e){var n=e.user,i=t.getMember(n.id);i&&i.setPresentationRequest(e.type,e.time)}))},getRequestedPresentations:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.hasRequestedToPresent()&&(e[n]=i)}return e},getRequestedPresentationsCount:function(){var e=0,t=this.getRequestedPresentations(),n=this.getConfigurations();for(var i in t){var r=t[i];r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.WHITEBOARD)&&WhiteBoard.hasHostPermission(this)&&e++,r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)&&n.isScreenShareAllowed()&&e++,r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&WhiteBoard.hasHostPermission(this)&&e++,r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.PRESENTATION)&&n.isPresentationAllowed(this)&&e++}return e},getMembersByCategories:function(e,t){var n,i=this.hasHostPermission(),r={},o={},s={},a={},c={};t&&(n=this.getReactionsDB());var d=this.getMembers();for(var l in d){var u=d[l];if(void 0!==e&&""!==e){var f=Users.getName(l,u.getName());if(void 0===f||-1===f.toLowerCase().indexOf(e))continue}if(t)if(!t[n.getUserVote(l)])continue;this.isHost(u.getId())?r[l]=u:u.isCohost()?o[l]=u:u.isActiveMember()?s[l]=u:i&&u.hasRequestedToSpeak()?a[l]=u:u.isSilentMember()&&(c[l]=u)}return{host:r,cohosts:o,activeMembers:s,requestedSpeakers:a,silentMembers:c,spotlightMembers:{}}},getMembersForSearch:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];e[n]={ZUID:n,DNAME:Users.getName(n,i.getName()),EMAILID:""}}return delete e[this.getHostId()],e},getActiveMembersForSearch:function(){var e={},t=this.getActiveMembers();for(var n in t){var i=t[n];e[n]={ZUID:n,DNAME:Users.getName(n,i.getName()),EMAILID:""}}return e},getSecondarySpeakerList:function(){return this._secondarySpeakerList},getMemberWithAudioStreamId:function(e){if(void 0!==e){var t=this.getMembers();for(var n in t){var i=t[n],r=i.getAudioStreamId();if(void 0!==r&&r===e)return i}}},getAudioMediaContainers:function(){return this._mixedAudioDownStreamContainers},setMixedAudioDownStream:function(e){this._mixedAudioDownStreams[e.id]=e;var t=this._mixedAudioDownStreamContainers[e.id];t||(t=new Audio,this._mixedAudioDownStreamContainers[e.id]=t),t.srcObject=e,MediaManager.setPreferredAudioOutput([t]),t.play()},initiateActivePing:function(){this._activeIndicationTimer||(this._activeIndicationTimer=setInterval(function(){var e=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),opr:"ping",status:"alive",callid:this.getId()});this.getCurrentMember()._dcConnection.send(e)}.bind(this),2e4))},stopActivePing:function(){clearInterval(this._activeIndicationTimer),this._activeIndicationTimer=void 0},setSecondarySpeakers:function(e){if(this.isAudioConference()&&0!=e.length){for(var t=$("#conferencevideowrapper"),n=this.getSecondarySpeakerList(),i=0;i<n.length;i++){t.find('[videocontainer][uid="'+n[i]+'"]').find("[ripplecontainer]").remove()}n.splice(0,n.length);for(i=0;i<e.length;i++){t.find('[videocontainer][uid="'+e[i]+'"]').find("[user_card_wrapper]").before('<div class="zc-av-impulse zc-av-impulse-orange dN" ripplecontainer></div>'),n.push(e[i])}clearTimeout(this._rippleTimer),this._rippleTimer=setTimeout((function(e){for(var n=0;n<e.length;n++){var i=t.find('[videocontainer][uid="'+e[n]+'"]');i&&i.find("[ripplecontainer]").remove()}}),3e3,e)}},switchToSilentMember:function(){var e=this.getCurrentMember();e.setMemberType(ZCSmartConferenceConstants.memberTypes.SILENT),ConferenceUI.modifyUserInList(this,e.getId()),ConferenceUI.updateSessionOptions(this),this.closeAudioUpStreamConnection();var t=e.getAVMediaContainer();t&&(e.setAVMediaContainer(void 0),ConferenceUI.removeMediaContainer($(t).parents("[videocontainer]").attr("id")));var n=e.getAudioUpStream();n&&(WebRTCUserMedia.closeStream(n._getType()),e.setLocalAudioUpStream(void 0)),ConferenceUI.handleBottomPaneVisibility(this),ConferenceUI.handleBottomPaneParticipantsVisibility(this)},removeMember:function(e){var t=this.getMember(e);t&&(t.closeConnections(),this.setLeftMemberName(e,t.getName())),delete this.members[e],this.updateLeftUserInGridLayoutDetails(e),Conference.isGuestUserId(e)&&delete this.guestMembers[e]},terminate:function(){clearInterval(this._activeIndicationTimer),this._activeIndicationTimer=void 0,clearTimeout(this._reactionGroupingTimeout),this._reactionGroupingTimeout=void 0;var e=this.members;for(var t in e){e[t].closeConnections()}for(var n in this._mixedAudioDownStreamContainers){this._mixedAudioDownStreamContainers[n].srcObject=null}this._mixedAudioDownStreamContainers=void 0,MediaUtil.clearAudioPreview(this),this.unSubscribe()},getCurrentGridPageInView:function(){return this._currentGridPageInView},setCurrentGridPageInView:function(e){this._currentGridPageInView=parseInt(e)},getCurrentGridPageSize:function(){return this._currentGridPageSize},getGridLayoutDetails:function(){return this._gridLayoutDetails},updateJoinedUserInGridLayoutDetails:function(e){if(e.isActiveMember()){var t=!1,n=this.getCurrentGridPageInView(),i=e.getId(),r=e.getJoinedTime(),o=this.getCurrentGridPageSize(),s=this.getGridLayoutDetails(),a=Object.keys(s).length;if(0===a)s[1]={},s[1][i]=r,t=!0;else{var c=s[a];if(Object.keys(c).length<o)c[i]=r,t=n===a;else{var d=a+1;s[d]={},s[d][i]=r,ConferenceUI.handleGridNavigationButton(ConferenceUI.getConferenceWindow(),this)}t&&ConferenceUI.updateGridPages(this)}}},updateLeftUserInGridLayoutDetails:function(e){this.getCurrentGridPageSize();var t=this.getGridLayoutDetails(),n=Object.keys(t).length;if(0!==n){var i=this.getGridPageNumberByUserId(e);if(void 0!==i){var r=t[i];delete r[e];var o=this.getCurrentGridPageInView(),s=o===i;if(n>i){var a=t[n],c=Object.keys(a),d=c.length,l=c[d-1],u=a[l];delete a[l],s||(s=o===n),1===d&&(delete t[n],s||ConferenceUI.handleGridNavigationButton(ConferenceUI.getConferenceWindow(),this)),r[l]=u}else 0===Object.keys(r).length&&(delete t[i],s||ConferenceUI.handleGridNavigationButton(ConferenceUI.getConferenceWindow(),this));s&&ConferenceUI.updateGridPages(this)}}},getGridPageNumberByUserId:function(e){var t=this.getGridLayoutDetails();for(var n in t){if(void 0!==t[n][e])return parseInt(n)}},getCohostDetails:function(){return this._cohostsDetails},getCohostUserIds:function(){return this._cohostsDetails.userIds},getLastCohostSetTime:function(){return this._cohostsDetails.actionTime},updateCohostDetails:function(e,t,n){var i=this.getCurrentMember(),r=i.isAudioUnmuteRestricted(),o=i.isCohost(),s=this.getCohostDetails();if(!(s.actionTime>t)){var a=s.userIds;for(var c in this._cohostsDetails={actionTime:t,previousUserIds:a,userIds:e},a){if(l=this.getMember(a[c])){var d=-1!==e.indexOf(l.getId());l.setCohostStatus(d),d?l.setAudioUnmuteRestrictedStatus(!1,t,this.getHostId()):!n||this.isCurrentUser(l.getId())||this.isHost(l.getId())||UI.updateBanner(Resource.getRealValue("conference.cohost.removed.info",Users.getName(l.getId(),l.getName())),2e3,!1),ConferenceUI.modifyUserInList(this,l.getId())}}for(var c in e){var l;(l=this.getMember(e[c]))&&(!n||l.isCohost()||this.isCurrentUser(l.getId())||this.isHost(l.getId())||UI.updateBanner(Resource.getRealValue("conference.cohost.assigned.info",Users.getName(l.getId(),l.getName())),2e3,!1),l.setCohostStatus(!0),l.setAudioUnmuteRestrictedStatus(!1,t,this.getHostId()),ConferenceUI.modifyUserInList(this,l.getId()))}i.isCohost()?(r&&ZCSmartConferenceImpl.resetAudioUnmuteRestrictedStatusForUser(i.getId()),!n||o||this.isHost(i.getId())||UI.updateBanner(Resource.getRealValue("conference.cohost.you.assigned"),2e3,!1)):n&&o&&(this.setStreamingId(void 0),UI.updateBanner(Resource.getRealValue("conference.cohost.you.removed"),2e3,!1),ConferenceUI.resetHostPermissions(this)),ConferenceUI.updateCohostOptions(this)}},handleRingingState:function(e,t,n,i,r){if("undefined"!==this._ringingStates[e]||t===MediaCallConstants.ringingStates.ringing){var o=this._ringingStates[e]||{};if(n&&(o.name=n),o.state=t,o.time=$Util.getSyncedCurrentTime(),this._ringingStates[e]=o,this.updateRingingStateText(e),clearTimeout(o.timeout),t===MediaCallConstants.ringingStates.ringing)ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!0),o.timeout=setTimeout(function(){var t=this._ringingStates[e];void 0!==t&&t.state===MediaCallConstants.ringingStates.ringing&&(ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!1),this.handleRingingState(e,MediaCallConstants.ringingStates.no_response),this.updateRingingStateText(e))}.bind(this),MediaCallConstants.callRingingTimeLimit);else{this.removeRingingState(e),ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!1,i);let t=ZCSmartConferenceImpl.getCurrentActiveSession();if(!r&&void 0!==t&&t.hasHostPermission()){let e=$("#yetToJoinSection").find("[ringallbutton]");e&&"stopRingingForAll"===e.attr("purpose")&&!t.hasRingingStateForAnyUser()&&(t instanceof ConferenceSession?(e.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("conferencebutton")),clearTimeout(ConferenceUI.clearRingAllTimeout)):t instanceof ZCSmartConferenceSession&&(e.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton")),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout)))}o.timeout=setTimeout(function(){var t=this._ringingStates[e];void 0!==t&&t.state===MediaCallConstants.ringingStates.ringing||this.updateRingingStateText(e)}.bind(this),5e3)}}},removeRingingState:function(e){this._ringingStates[e]&&(clearTimeout(this._ringingStates[e].timeout),delete this._ringingStates[e])},getRingingStateForUser:function(e){var t=this._ringingStates[e];if(void 0!==t&&(new Date).getTime()-t.time<MediaCallConstants.callRingingTimeLimit)return t.state},updateRingingStateText:function(e){var t=$.escapeSelector(e),n=(this._ringingStates[e]&&this._ringingStates[e].name,$("#smartconferenceuserslist").find('[pendingparticipant][user_id="'+t+'"]'));n.length&&(n.find('[conferencebutton][purpose="startRinging"], [conferencebutton][purpose="cancelRinging"]').remove(),n.find("[ringingContent]").remove(),n.append(ZCSmartConferenceTemplates.getRhsSectionUserRingActionHtml(this,e,"conferencebutton")))},hasRingingStateForAnyUser:function(){return Object.keys(this._ringingStates).length>0},hasOngoingPresentation:function(){return this.hasScreenShare()||this.hasWhiteBoard()||this.hasPresentation()},getCurrentPresentionOwner:function(){return this.hasScreenShare()?this.getScreenSharer():this.hasWhiteBoard()?this.getWhiteBoardCreator():this.hasPresentation()?this.getPresentor():void 0},updateWhiteBoardInfo:function(e){this._whiteBoard.currentBoard=e.boardId,this._whiteBoard.boards[this._whiteBoard.currentBoard]=e,ConferenceUI.checkAndRemoveEditRequestButton()},hasWhiteBoard:function(){return void 0!==this._whiteBoard.currentBoard},getWhiteBoardCreatorId:function(){if(void 0!==this._whiteBoard.currentBoard)return this._whiteBoard.boards[this._whiteBoard.currentBoard].creator},isWhiteBoardCreator:function(){return void 0!==this._whiteBoard.currentBoard&&this._whiteBoard.boards[this._whiteBoard.currentBoard].creator===$zcg._ZUID},getCurrentWhiteBoardId:function(){return this._whiteBoard.currentBoard},getCurrentWhiteBoard:function(){if(void 0!==this._whiteBoard.currentBoard)return this._whiteBoard.boards[this._whiteBoard.currentBoard]},resetCurrentWhiteBoard:function(){this._whiteBoard.currentBoard=void 0},setAudioTrackEndedInfo:function(e){this._audioTrackEndedInfo={trackLabel:e,time:$Util.getSyncedCurrentTime()}},getAudioTrackEndedInfo:function(e){return this._audioTrackEndedInfo},getReactionsDB:function(){return this._reactionsDB},getPreviousReactionsGroup:function(){return this._previousReactionsGroup},getChatContainer:function(){return Conference.domCache.get("#conferencechatsection",!0)},getConferenceWindow:function(){return ConferenceUI.getConferenceWindow()}};var ConferenceMember=function(e,t,n,i,r,o,s){this._conferenceId=e,this._id=t,this._name=n,this._turnUserName=r,this._turnCredential=o,this._type=ZCSmartConferenceConstants.memberTypes.ACTIVE,this._memberConnectionMode=void 0,this._sessionId=void 0,this._emailId=i,this._designation=void 0,this._department=void 0,this._location=void 0,this._audioStatus={time:-1,muted:!1,muteStatusSetBy:void 0,restrictionTriggeredTime:-1,unmuteRestricted:!1,restrictionStatusSetBy:void 0},this._videoStatus={muted:!1,time:-1,muteStatusSetBy:void 0},this._avMediaContainer=null,this._screenMediaContainer,this._screenContainer,this._isReconnectingAVStream=!1,this._isReconnectingScreenStream=!1,this._avReconnectionAttempts=0,this._screenReconnectionAttempts=0,this._isReconnectingAudioStream=!1,this._audioReconnectionAttempts=0,this._isReconnectingAudioDownStream=!1,this._audioDownStreamReconnectionAttempts=0,this._avPeerConnection=null,this._screenPeerConnection,this._audioPeerConnection,this._audioDownStreamPeerConnection,this._dcConnection,this._audioStreamId,this._audioTrackId,this._videoTrackId,this._audioMid,this._videoMid,this._audioDownTrack,this._videoDownTrack,this._audioDownStream,this._audioContainer,this._lastScreenOfferTime=-1,this._joinedTime=s||-1,this._isCohost=!1,this._hasRequestedToSpeak=!1,this._isAudioUpStreamInitiated=!1,this._pendingRequests={},this._presentationRequests={},this._audioUpStream=void 0,this._referrerInfo=void 0,this._defaultUserImageIndex=void 0};ConferenceMember.prototype={_generateConnectionId:function(e){return this._conferenceId+"_"+this._id+"_"+e},getId:function(){return this._id},getName:function(){return this._name},getAVStream:function(){return this._avMediaContainer?this._avMediaContainer.getStream():this._audioUpStream},getAudioUpStream:function(){return this._audioUpStream},getScreenStream:function(){if(this._screenMediaContainer)return this._screenMediaContainer.getStream()},getScreenMediaContainer:function(){return this._screenMediaContainer},getScreenContainer:function(){return this._screenContainer},getScreenPeerConnection:function(){return this._screenPeerConnection},getTurnUserName:function(){return this._turnUserName},getTurnCredential:function(){return this._turnCredential},getAVMediaContainer:function(){return this._avMediaContainer},setAVMediaContainer:function(e){this._avMediaContainer=e},setJoinedTime:function(e){this._joinedTime=e},getJoinedTime:function(){return this._joinedTime},isAudioMuted:function(){return this._audioStatus.muted},getAudioMutedBy:function(){return this._audioStatus.muteStatusSetBy},getAudioUnmuteRestrictedBy:function(){return this._audioStatus.restrictionStatusSetBy},isVideoMuted:function(){return this._videoStatus.muted},isCohost:function(){return this._isCohost},setCohostStatus:function(e){this._isCohost=e},setAsCohost:function(){this._isCohost=!0},removeFromCohost:function(){this._isCohost=!1},setMemberType:function(e){this._type=e},isSilentConnectionMember:function(){return this._memberConnectionMode===ZCSmartConferenceConstants.memberConnectionMode.SILENT},isOnDemandConnectionMember:function(){return this._memberConnectionMode===ZCSmartConferenceConstants.memberConnectionMode.ON_DEMAND},setMemberConnectionMode:function(e){this._memberConnectionMode=e},isActiveMember:function(){return this._type===ZCSmartConferenceConstants.memberTypes.ACTIVE},isSilentMember:function(){return this._type===ZCSmartConferenceConstants.memberTypes.SILENT},getMemberType:function(){return this._type},isCurrentUser:function(){return this.getId()===ConferenceImpl.getCurrentUserId()},isRequestPending:function(e){return this._pendingRequests[e]},setRequestAsPending:function(e){this._pendingRequests[e]=!0},setRequestAsCompleted:function(e){delete this._pendingRequests[e]},getSessionId:function(){return this._sessionId},setSessionId:function(e){this._sessionId=e},setSpeakerRequest:function(){this._hasRequestedToSpeak=!0},resetSpeakerRequest:function(){this._hasRequestedToSpeak=!1},hasRequestedToSpeak:function(){return this._hasRequestedToSpeak},setPresentationRequest:function(e,t){this._presentationRequests[e]={status:ZCSmartConferenceConstants.requestStates.PENDING,requestedTime:t}},resetPresentationRequest:function(e){delete this._presentationRequests[e]},setPresentationRequestAsApproved:function(e){this._presentationRequests[e]={status:ZCSmartConferenceConstants.requestStates.ACCEPTED}},isPresentationRequestApproved:function(e){return!!this.hasRequestedToPresent(e)&&this._presentationRequests[e].status==ZCSmartConferenceConstants.requestStates.ACCEPTED},resetAllPresentationRequests:function(){this._presentationRequests={}},hasRequestedToPresent:function(e){return e?this._presentationRequests[e]:Object.keys(this._presentationRequests).length},getPresentationRequest:function(e){if(e)return this._presentationRequests[e]},getLastScreenOfferTime:function(){return this._lastScreenOfferTime},setLastScreenOfferTime:function(e){this._lastScreenOfferTime=e},updateDetailsInCard:function(){ConferenceUI.updateCard(this)},getEmailId:function(){return this._emailId},getDesignation:function(){return this._designation},getDepartmentName:function(){return this._department},getLocation:function(){return this._location},setPeopleDetails:function(e){this._emailId=e.emailid,this._designation=e.designation,this._department=e.departmentname},setAudioReconnectionStatus:function(e){this._isReconnectingAudioStream=!e,this._audioReconnectionAttempts=e?0:this._audioReconnectionAttempts+1},setAudioDownStreamReconnectionStatus:function(e){this._isReconnectingAudioDownStream=!e,this._audioDownStreamReconnectionAttempts=e?0:this._audioDownStreamReconnectionAttempts+1},setAVReconnectionStatus:function(e){this._isReconnectingAVStream=!e,this._avReconnectionAttempts=e?0:this._avReconnectionAttempts+1;var t=this.getAVMediaContainer();if(t){var n=$(t).siblings("[bufferloadercnt]");n.empty(),e||$Util.animateBufferLoader(n,9)}},setScreenReconnectionStatus:function(e){this._isReconnectingScreenStream=!e,this._screenReconnectionAttempts=e?0:this._screenReconnectionAttempts+1;var t=this._screenContainer.find("[bufferloadercnt]");t.empty(),e||$Util.animateBufferLoader(t,9)},addAndSetMediaContainer:function(){this._avMediaContainer=ConferenceUI.addAndGetMediaContainer(this._id,this._name,this._generateConnectionId(WebRTCUserMedia.streamTypes.AUDIO_ONLY))},getAudioContainer:function(){return this._audioContainer},setAudioDownStream:function(e){this._audioDownStream=e,this._audioContainer||(this._audioContainer=new Audio),this._audioContainer.srcObject=e,MediaManager.setPreferredAudioOutput([this._audioContainer]),this._audioContainer.play().then(function(){var e=ConferenceImpl.getCurrentSession();if(e.isAudioConference()&&($(this._avMediaContainer).parents("[videocontainer]").find("[bufferloadercnt]").empty(),e.isMixingEnabled())){var t=e.getMembers(),n=e.getCurrentUserId();for(var i in t)if(n!==i){var r=t[i].getAVMediaContainer();$(r).parents("[videocontainer]").find("[bufferloadercnt]").empty()}}}.bind(this))},setAudioTrackId:function(e){this._audioTrackId=e},setVideoTrackId:function(e){this._videoTrackId=e},setAudioStreamId:function(e){this._audioStreamId=e},getAudioStreamId:function(){return this._audioStreamId},setAudioMid:function(e){this._audioMid=e},setVideoMid:function(e){this._videoMid=e},getAudioMid:function(){return this._audioMid},getVideoMid:function(){return this._videoMid},setReferrerInfo:function(e){this._referrerInfo=e},getReferrerInfo:function(){return this._referrerInfo},setDefaultUserImageIndex:function(e){this._defaultUserImageIndex=e},getDefaultUserImageIndex:function(){return this._defaultUserImageIndex},initAudioUpStream:function(e){if(this.isActiveMember()){var t=WebRTCUserMedia.streamTypes.AUDIO_ONLY,n=null!==WebRTCUserMedia.getStream(t)?WebRTCUserMedia.getStream(t):void 0;!this._isAudioUpStreamInitiated&&n instanceof MediaStream&&!n._isAudioRestrictedForConnection()&&(this._audioPeerConnection=new UnifiedWebRTCPeerConnection(e.getId(),WebRTCPeerConnectionConstants.connectionTypes.AUDIO,ConferenceHandler.unifiedPeerConnectionEvents,e.getTurnServers(),this.getTurnUserName(),this.getTurnCredential(),!0,n),this._isAudioUpStreamInitiated=!0),this._avMediaContainer=ConferenceUI.addAndGetMediaContainer(this.getId(),this.getName(),this._generateConnectionId(t)),this._avMediaContainer.setStream(n),this.setLocalAudioUpStream(n),this._avMediaContainer.muted=!0,this._avMediaContainer.playStream(function(){$(this._avMediaContainer).parents("[videocontainer]").find("[bufferloadercnt]").empty();var e=this.getAVStream();e._isAudioTrackEnabled()&&!e._isAudioRestrictedForConnection()||(ConferenceUI.setMicMutedOption(),ConferenceImpl.changeAVStatus("audio",!0,!0))}.bind(this))}ConferenceUI.handleBottomPaneVisibility(e),ConferenceUI.handleBottomPaneParticipantsVisibility(e)},setLocalAudioUpStream:function(e){this._audioUpStream=e},updateAudioUpStreamInContainer:function(){this._avMediaContainer.setStream(this._audioUpStream)},hasAudioUpStreamConnection:function(){return void 0!==this._audioPeerConnection},hasAudioDownStreamConnection:function(){return void 0!==this._audioDownStreamPeerConnection},getAudioUpStreamConnection:function(){return this._audioPeerConnection},getAudioDownStreamConnection:function(){return this._audioDownStreamPeerConnection},hasScreenConnection:function(){return void 0!==this._screenPeerConnection},reinitAudioUpstream:function(){this._audioPeerConnection&&this._audioPeerConnection.reinit()},reinitScreenUpStream:function(){this._screenPeerConnection&&this._screenPeerConnection.reinit()},initScreenUpStream:function(e,t){var n=this._generateConnectionId(t);this._screenMediaContainer=ConferenceUI.addAndGetScreenMediaContainer(this._id,this._name,n,$(this._avMediaContainer).parents("[videocontainer]")),this._screenContainer=$("#"+$.escapeSelector(n)),this._screenPeerConnection=new WebRTCPeerConnection(this._conferenceId,this._id,WebRTCPeerConnectionConstants.connectionTypes.SCREEN,ConferenceHandler.peerConnectionEvents,this._screenMediaContainer,e,this._turnUserName,this._turnCredential,t,!0)},initDataChannel:function(e){this._dcConnection=new ConferenceDCConnection(this._conferenceId,this._id,WebRTCPeerConnectionConstants.connectionTypes.DATA_CHANNEL,ConferenceHandler.dcConnectionEvents),this._dcConnection.setTurnCredentials(e,this._turnUserName,this._turnCredential),this._dcConnection.init()},renegotiateAVConnection:function(e){this._avMediaContainer.setStream(e),this._avMediaContainer.playStream(),this.setLocalAudioUpStream(e)},setAudioConnectionRemoteDescription:function(e,t,n){this._audioPeerConnection.setRemoteDescription(e,t,n)},setAVConnectionRemoteDescription:function(e,t,n){this._avPeerConnection.setRemoteDescription(e,t,n)},setScreenConnectionRemoteDescription:function(e,t,n){this._screenPeerConnection.setRemoteDescription(e,t,n)},setDCConnectionRemoteDescription:function(e,t,n){this._dcConnection.setRemoteDescription(e,t,n)},setAudioDownStreamConnectionRemoteIceCandidates:function(){this._audioDownStreamPeerConnection&&this._audioDownStreamPeerConnection.addRemoteIceCandidates()},setAVConnectionRemoteIceCandidates:function(){this._avPeerConnection.addRemoteIceCandidates()},setScreenConnectionRemoteIceCandidates:function(){this._screenPeerConnection.addRemoteIceCandidates()},updateAVConnectionLocalIceCandidates:function(){this._avPeerConnection.updateLocalIceCandidates()},updateAudioConnectionLocalIceCandidates:function(){this._audioPeerConnection.updateLocalIceCandidates()},updateAudioDownStreamConnectionLocalIceCandidates:function(){this._audioDownStreamPeerConnection.updateLocalIceCandidates()},updateScreenConnectionLocalIceCandidates:function(){this._screenPeerConnection.updateLocalIceCandidates()},updateDCConnectionLocalIceCandidates:function(){this._dcConnection.updateLocalIceCandidates()},connectDownStreamInUnifiedPlan:function(e,t,n,i,r){WebRTCPeerConnectionConstants.isAudioConnection(e)&&(this._isReconnectingAudioDownStream&&this._audioDownStreamPeerConnection&&(this._audioDownStreamPeerConnection.close(),this._audioDownStreamPeerConnection=void 0),this._audioDownStreamPeerConnection?this._audioDownStreamPeerConnection._renegotiate(n,i,r):this._audioDownStreamPeerConnection=new UnifiedWebRTCPeerConnection(this._conferenceId,e,ConferenceHandler.unifiedPeerConnectionEvents,t,this._turnUserName,this._turnCredential,!1,void 0,n,i,r))},connectScreenDownStream:function(e,t,n,i){var r=$(this._avMediaContainer).parents("[videocontainer]");r.find("[videoholder]").attr("inlinecontainer","true"),r.addClass("huddle-screen-active");var o=this._generateConnectionId(t);this._screenMediaContainer=ConferenceUI.addAndGetScreenMediaContainer(this._id,this._name,o,r),this._screenContainer=$("#"+$.escapeSelector(o)),this._screenPeerConnection&&this._screenPeerConnection.close(),this._screenPeerConnection=new WebRTCPeerConnection(this._conferenceId,this._id,WebRTCPeerConnectionConstants.connectionTypes.SCREEN,ConferenceHandler.peerConnectionEvents,this._screenMediaContainer,e,this._turnUserName,this._turnCredential,t,!1,n,i)},disconnectScreenDownStream:function(){var e=$(this._avMediaContainer).parents("[videocontainer]");e.find("[videoholder]").attr("inlinecontainer","false"),e.removeClass("huddle-screen-active"),ConferenceUI.removeMediaContainer(this._screenContainer.attr("id")),ConferenceUI.removeScreenFromMinimizedView();ConferenceImpl.getCurrentSession();this._screenMediaContainer=void 0,this._screenContainer=void 0,this._screenPeerConnection&&(this._screenPeerConnection.close(),this._screenPeerConnection=void 0)},openWhiteBoard:function(){var e=$("#conferencewbwrapper"),t=ConferenceImpl.getCurrentSession();ConferenceUI.addAndGetWhiteBoardContainer(e,t)},closeWhiteBoard:function(){ConferenceImpl.getCurrentSession().resetCurrentWhiteBoard(),ConferenceUI.removeWhiteBoardContainer(),ConferenceUI.handleWhiteBoardOpenOrClose()},updateWhiteBoardEditorList:function(){ConferenceUI.updateUserInfoInWhiteBoardContainer(ConferenceImpl.getCurrentSession())},attachAudioInConnection:function(e){var t=this.getAudioUpStream();t&&t._isAudioRestrictedForConnection()&&(t._resetConnectionRestrictionForAudio(),this._audioPeerConnection?this._audioPeerConnection.attachAudioTracks(t):this.initAudioUpStream(e))},detachAudioFromConnection:function(){var e=this.getAudioUpStream();e&&e._setConnectionRestrictionForAudio(),this._audioPeerConnection&&this._audioPeerConnection.detachAudioTracks()},replaceAudioUpStream:function(e,t){this._avMediaContainer&&(this._avMediaContainer.setStream(e),this._avMediaContainer.playStream(),this._avMediaContainer.muted=!0),this.setLocalAudioUpStream(e),this.isActiveMember()&&(this._audioPeerConnection?this._audioPeerConnection.replaceTracksWithoutNegotiation(e,WebRTCUserMedia.streamTypes.AUDIO_ONLY):this.initAudioUpStream(t))},replaceTracksInStream:function(e,t){this._avMediaContainer.setStream(e),this._avMediaContainer.playStream(),this.setLocalAudioUpStream(e),WebRTCUserMedia.isAudioStreamType(t)&&this._audioPeerConnection.replaceTracks(e,WebRTCUserMedia.streamTypes.AUDIO_ONLY)},isAudioUnmuteRestricted:function(){return this._audioStatus.unmuteRestricted},setAudioUnmuteRestrictedStatus:function(e,t,n){this._audioStatus.restrictionTriggeredTime>t||(this._audioStatus.restrictionTriggeredTime=t,this._audioStatus.unmuteRestricted=e,this._audioStatus.restrictionStatusSetBy=n)},setMuteStatus:function(e,t,n,i,r){"audio"===e&&(t&&(this._audioStatus.time=i,this._audioStatus.muted=t,this._audioStatus.muteStatusSetBy=r),this._audioStatus.restrictionTriggeredTime=i,this._audioStatus.unmuteRestricted=n,this._audioStatus.restrictionStatusSetBy=r)},updateAVStreamStatus:function(e){e.audio&&(this._audioStatus.time=e.audio.time,this._audioStatus.muted=e.audio.muted),e.video&&(this._videoStatus.time=e.video.time,this._videoStatus.muted=e.video.muted)},setUpdatedAVStatus:function(){this.setUpdatedAudioStatus(),this.setUpdatedVideoStatus()},setUpdatedAudioStatus:function(){this.handleAVStreamStatus("audio",this._audioStatus.muted,this._audioStatus.time,this._audioStatus.muteStatusSetBy)},setUpdatedVideoStatus:function(){this.handleAVStreamStatus("video",this._videoStatus.muted,this._videoStatus.time,this._videoStatus.muteStatusSetBy)},handleAVStreamStatus:function(e,t,n,i){var r=ConferenceImpl.getCurrentSession(),o=this.getAVStream(),s=void 0;s=this._avMediaContainer?$(this._avMediaContainer).parents("[uid]").attr("uid"):this.getId();var a=$("#conferencewindow").find('[videocontainer][uid="'+$.escapeSelector(s)+'"]'),c=a.find("[videoholder] video"),d=a.find("[avstatuscnt]");if("video"===e){if(this._videoStatus.time>n)return;d.attr("video_status",!t),this._videoStatus.time=n,this._videoStatus.muted=t,this._videoStatus.muteStatusSetBy=i,a.find("[videoMutedStatus]").toggleClass("dN",!t);var l=a.find("[userimagecnt]");return t?(c.addClass("dN"),l.removeClass("dN"),o&&o._disableVideoTrack()):(c.removeClass("dN"),l.addClass("dN"),o&&o._enableVideoTrack())}if(!(this._audioStatus.time>n)){if(this._audioStatus.time=n,this._audioStatus.muted=t,this._audioStatus.muteStatusSetBy=i,d.attr("audio_status",!t),a.find("[audioMutedStatus]").toggleClass("dN",!t),a.find("[card_mute_status]").toggleClass("dN",!t),ConferenceUI.updateMutedInfoInList(r,this),r&&r.isCurrentUser(s)){if(ZCSmartConferenceImpl.changeAVStatusInSettingsPreview(e,t),ZCMediaPreferences.isSpeechDetectionAllowedByUser())return void(t?this.detachAudioFromConnection():this.attachAudioInConnection(r));if(o&&t)return this._avMediaContainer&&this._avMediaContainer.setStream(void 0),WebRTCUserMedia.closeStream(o._getType()),void this.setLocalAudioUpStream(void 0)}return o&&o._hasAudioTrack()?t?o._disableAudioTrack():o._enableAudioTrack():void 0}},closeAudioUpStreamConnection:function(){this._audioPeerConnection&&(this._audioPeerConnection.close(),this._audioPeerConnection=void 0),this._isAudioUpStreamInitiated=!1,this.setLocalAudioUpStream(void 0),this._avMediaContainer&&this._avMediaContainer.setStream(void 0)},closeScreenUpStreamConnection:function(){this._screenPeerConnection&&(this._screenPeerConnection.close(),this._screenPeerConnection=void 0)},closeAudioDownStreamConnection:function(){this._audioDownStreamPeerConnection&&(this._audioDownStreamPeerConnection.close(),this._audioDownStreamPeerConnection=void 0)},closeConnections:function(){this._audioPeerConnection&&this._audioPeerConnection.close(),this._audioDownStreamPeerConnection&&this._audioDownStreamPeerConnection.close(),this._avPeerConnection&&this._avPeerConnection.close(),this._screenPeerConnection&&this._screenPeerConnection.close(),this._dcConnection&&this._dcConnection.close();var e=ConferenceImpl.getCurrentSession();this._screenContainer&&(ConferenceUI.removeMediaContainer(this._screenContainer.attr("id")),e&&e.isScreenSharer()&&ConferenceUI.removeScreenFromMinimizedView());var t=this.getId();this._avMediaContainer?ConferenceUI.removeMediaContainer($(this._avMediaContainer).parents("[videocontainer]").attr("id")):(5===GalaxyView.getLayer(t)&&e&&(GalaxyView.removeParticipant(t,void 0,e.isInGalaxyLayout()&&!e.isInMinimizedView()),e.removeUserIdFromView(t),ConferenceUI.handleHiddenActiveSpeakerCount()),ConferenceUI.removeUserFromBottomPaneList(t)),this._audioContainer&&(this._audioContainer.srcObject=null,this._audioContainer=void 0)}};var UnifiedWebRTCPeerConnection=function(e,t,n,i,r,o,s,a,c,d,l){this._id=e,this._connectionType=t,this._handler=n,this._isUpStream=s,this._stream=a,this._tracksAdded=!1,this._turnServers=i,this._userName=r,this._credential=o,this._audioRtpSenders=[],this._videoRtpSenders=[],this._screenRtpSenders=[],this._localSDP=void 0,this._localIceCandidates=[],this._generatedCandidates=[],this._iceCandidatesGatheringTimer=void 0,this._remoteSDP=c,this._remoteIceCandidates=d||[],this._processType=WebRTCPeerConnectionConstants.processTypes.INIT,this._isReconnecting=!1,this._reconnectTimer=void 0,this._reconnectInterval=void 0,this._canUpdateLocalIceCandidates=!1,this._reconnectCallBack,this._ssrcList=l,this._initialize(this._processType)};UnifiedWebRTCPeerConnection.prototype={_getConfiguration:function(){var e=this._turnServers,t=this._userName,n=this._credential,i=[];return e.forEach((function(e){i.push({urls:e,username:t,credential:n})})),ZCWebRTCPeerConnectionUtil.getConfiguration(i)},_addTracksInConnection:function(){void 0!==this._stream&&(WebRTCPeerConnectionConstants.isScreenConnection(this._connectionType)?this._addScreenTracksInConnection():this._addAVTracksInConnection())},_addAVTracksInConnection:function(){WebRTCPeerConnectionConstants.isAudioConnection(this._connectionType)?this._addAudioTracksInConnection():WebRTCPeerConnectionConstants.isVideoConnection(this._connectionType)&&this._addVideoTracksInConnection()},_addAudioTracksInConnection:function(){var e=!1;return this._stream._isAudioRestrictedForConnection()?e:(this._stream.getTracks().forEach(function(t){"audio"===t.kind&&(this._audioRtpSenders.push(this._connection.addTrack(t,this._stream)),e=!0)}.bind(this)),e)},_addVideoTracksInConnection:function(){var e=!1;return this._stream.getTracks().forEach(function(t){"video"===t.kind&&(this._videoRtpSenders.push(this._connection.addTrack(t,this._stream)),e=!0)}.bind(this)),e},_addScreenTracksInConnection:function(){this._stream.getTracks().forEach(function(e){this._screenRtpSenders.push(this._connection.addTrack(e,this._stream))}.bind(this))},_removeAudioTracksInConnection:function(){return 0!==this._audioRtpSenders.length&&(this._audioRtpSenders.forEach(function(e){this._connection.removeTrack(e)}.bind(this)),this._audioRtpSenders=[],!0)},_removeVideoTracksInConnection:function(){return 0!==this._videoRtpSenders.length&&(this._videoRtpSenders.forEach(function(e){this._connection.removeTrack(e)}.bind(this)),this._videoRtpSenders=[],!0)},_initialize:function(e){this._processType=e,WebRTCPeerConnectionConstants.isReInit(e)&&(this._closeConnection(),clearInterval(this._reconnectInterval),this._reconnectInterval=void 0),this._connection||(this._connection=new RTCPeerConnection(this._getConfiguration())),this._bindEventHandlers(e),this._isUpStream?(!WebRTCPeerConnectionConstants.isReInit(e)&&this._tracksAdded||(this._addTracksInConnection(),this._tracksAdded=!0),this._createOffer(e)):this._createAnswer(!0)},_bindEventHandlers:function(e){var t=!1,n=this._connection,i=function(n){var i=n.candidate;if(i)if(this._generatedCandidates.push(i),this.updateCandidateToConnectionMonitor(i),t){if(this._localIceCandidates.push(i),!this._canUpdateLocalIceCandidates)return;if(!this._iceCandidatesGatheringTimer){var r=function(){this._handler.updateIceCandidates(this._id,this._connectionType,this._localIceCandidates,e,this._isUpStream),this._localIceCandidates=[],this._iceCandidatesGatheringTimer=void 0}.bind(this);this._iceCandidatesGatheringTimer=setTimeout(r,1e3)}}else this._isUpStream?WebRTCPeerConnectionConstants.isRenegotiate(e)||this._handler.sendOffer(this._id,this._connectionType,this._localSDP.sdp,i.candidate,e,this._streamType):this._handler.sendAnswer(this._id,this._connectionType,this._localSDP.sdp,i.candidate,e),t=!0}.bind(this),r=function(t){var i=n.iceConnectionState;WebRTCPeerConnectionConstants.iceConnectionStates.CONNECTED===i||WebRTCPeerConnectionConstants.iceConnectionStates.COMPLETED===i?(this._processType=WebRTCPeerConnectionConstants.processTypes.INIT,this._isReconnecting=!1,clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,this._handler.handleConnected(this._id,this._connectionType,this._connection,this._streamType,this._isUpStream,e),this._isUpStream||"function"!=typeof this._handler.notifyNegotiation||this._handler.notifyNegotiation(this._id,this._connectionType,this._ssrcList),"function"==typeof this._reconnectCallBack&&(this._reconnectCallBack(),this._reconnectCallBack=void 0)):WebRTCPeerConnectionConstants.iceConnectionStates.FAILED===i&&(this._reconnect(),clearInterval(this._reconnectInterval),this._reconnectInterval=setInterval(function(){this._reconnect()}.bind(this),15e3))}.bind(this),o=function(e){this._handler.handleTrack(this._id,e.track,e.transceiver,e.streams[0])}.bind(this);n.onicecandidate=i,n.oniceconnectionstatechange=r,n.ontrack=o;var s=function(t){var i=n.connectionState;WebRTCPeerConnectionConstants.iceConnectionStates.CONNECTED===i?(this._processType=WebRTCPeerConnectionConstants.processTypes.INIT,this._isReconnecting=!1,clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,this._handler.handleConnected(this._id,this._connectionType,this._connection,this._streamType,this._isUpStream,e),this._isUpStream||"function"!=typeof this._handler.notifyNegotiation||this._handler.notifyNegotiation(this._id,this._connectionType,this._ssrcList),"function"==typeof this._reconnectCallBack&&(this._reconnectCallBack(),this._reconnectCallBack=void 0)):WebRTCPeerConnectionConstants.iceConnectionStates.FAILED===i&&(this._reconnect(),clearInterval(this._reconnectInterval),this._reconnectInterval=setInterval(function(){this._reconnect()}.bind(this),15e3))}.bind(this);n.onconnectionstatechange=s},_renegotiate:function(e,t,n){this._remoteSDP=e,this._remoteIceCandidates=t,"connected"===this._connection.connectionState||"connected"===this._connection.iceConnectionState||"completed"===this._connection.iceConnectionState?this._createAnswer(!0,n):this._reconnectCallBack=function(){this._createAnswer(!0,n)}.bind(this)},_reconnect:function(){if(!this._isReconnecting){this._isReconnecting=!0;var e=WebRTCPeerConnectionConstants.processTypes.RESTART;"function"==typeof this._handler.getUpStreamReconnectProcessType&&(e=this._handler.getUpStreamReconnectProcessType()),this._processType=e,clearTimeout(this._reconnectTimer),this._reconnectTimer=setTimeout(function(){this._isReconnecting=!1}.bind(this),1e4),this._isUpStream&&this._initialize(e),this._handler.reconnectStream(this._id,this._connectionType,this._streamType,this._isUpStream)}},_createOffer:function(e){var t={};WebRTCPeerConnectionConstants.isRestart(e)&&(t.iceRestart=!0,this._localIceCandidates=[],this._generatedCandidates=[]);var n=this._connection;n.createOffer(t).then(function(t){this._localSDP=t,n.setLocalDescription(t),WebRTCPeerConnectionConstants.isRenegotiate(e)&&this._handler.handleRenegotiate(this._id,this._connectionType,t.sdp,this._streamType)}.bind(this))},_replaceAnswerValues:function(e){WebRTCPeerConnectionConstants.isAudioConnection(this._connectionType)&&ZCWebRTCPeerConnectionUtil.replaceStereoValuesInSdp(e)},_createAnswer:function(e,t){var n={},i=this._connection,r=function(){void 0!==t&&(this._ssrcList=t),i.createAnswer(n).then(function(e){this._replaceAnswerValues(e),this._localSDP=e,i.setLocalDescription(e).catch(function(e){"function"==typeof this._handler.handleLocalSdpError&&this._handler.handleLocalSdpError(this._id,this._connectionType,this._processType,e,this._remoteSDP,this._localSDP)}.bind(this))}.bind(this))}.bind(this);e?i.setRemoteDescription(this._getRTCSessionDescriptionObj("offer",this._remoteSDP)).then((function(){r()})):(i.setRemoteDescription(this._getRTCSessionDescriptionObj("offer",this._remoteSDP)),r())},setRemoteDescription:function(e,t,n){n&&n.length&&(this._remoteIceCandidates=n);var i=this;this._connection.setRemoteDescription(this._getRTCSessionDescriptionObj(e,t)).then((function(){i.addRemoteIceCandidates()})),this.startConnectionMonitor()},addRemoteIceCandidates:function(){var e=this._connection;this._remoteIceCandidates.forEach((function(t){e.addIceCandidate(new RTCIceCandidate(t))})),this._remoteIceCandidates=[]},updateLocalIceCandidates:function(){this._canUpdateLocalIceCandidates=!0,this._handler.updateIceCandidates(this._id,this._connectionType,this._localIceCandidates,this._processType,this._isUpStream),this._localIceCandidates=[]},startConnectionMonitor:function(){this._processType===WebRTCPeerConnectionConstants.processTypes.INIT&&(this._connectionMonitor=new RTCConnectionMonitor(this._id,this._connection,this._generatedCandidates,this._handler.handleConnectionError),this._connectionMonitor.start())},updateCandidateToConnectionMonitor:function(e){this._connectionMonitor&&this._connectionMonitor.updateCandidates([e])},stopConnectionMonitor:function(){this._connectionMonitor&&this._connectionMonitor.stop()},hasConnectionMonitor:function(){return void 0!==this._connectionMonitor},isUDPBlocked:function(){return this._connectionMonitor&&this._connectionMonitor.isUDPBlocked()},_getRTCSessionDescriptionObj:function(e,t){return new RTCSessionDescription({type:e,sdp:t})},setBitRate:function(e){this._videoRtpSenders.forEach((function(t){var n=t.getParameters();n.encodings||(n.encodings=[{}]),n.encodings[0].maxBitrate=1e3*e,t.setParameters(n)}))},reinit:function(){this._initialize(WebRTCPeerConnectionConstants.processTypes.REINIT)},replaceTracksWithoutNegotiation:function(e,t){if(this._isUpStream){this._stream=e;var n=function(){this.replaceTracks(e,t)}.bind(this);if("function"==typeof RTCRtpSender.prototype.replaceTrack)if(WebRTCUserMedia.isAudioStreamType(t)){if(this._stream._isAudioRestrictedForConnection())return;if(0===this._audioRtpSenders.length)return void n();this._audioRtpSenders.forEach(function(t){t.replaceTrack(e._getPrimaryAudioTrack()).catch(function(){n()}.bind(this))}.bind(this))}else{if(0===this._videoRtpSenders.length)return void n();this._videoRtpSenders.forEach(function(t){t.replaceTrack(e._getPrimaryVideoTrack()).catch(function(){n()}.bind(this))}.bind(this))}else n()}},attachAudioTracks:function(e){this.replaceTracksWithoutNegotiation(e,WebRTCUserMedia.streamTypes.AUDIO_ONLY)},detachAudioTracks:function(){0!==this._audioRtpSenders.length&&this._audioRtpSenders.forEach(function(e){e.replaceTrack(null)}.bind(this))},replaceTracks:function(e,t){this._isUpStream&&(this._stream=e,WebRTCUserMedia.isAudioStreamType(t)?(this._removeAudioTracksInConnection(),this._addAudioTracksInConnection()):(this._removeVideoTracksInConnection(),this._addVideoTracksInConnection()),clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,clearTimeout(this._iceCandidatesGatheringTimer),clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,this._isReconnecting=!1,this._iceCandidatesGatheringTimer=void 0,this._remoteSDP=void 0,this._localSDP=void 0,this._localIceCandidates=[],this._generatedCandidates=[],this._remoteIceCandidates=[],this._initialize(WebRTCPeerConnectionConstants.processTypes.RENEGOTIATE))},_closeConnection:function(){clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,clearTimeout(this._iceCandidatesGatheringTimer),this._iceCandidatesGatheringTimer=void 0,this._connection&&(this._connection.close(),this._connection=void 0),this._isReconnecting=!1,this._tracksAdded=!1,this._canUpdateLocalIceCandidates=!1,this._audioRtpSenders=[],this._videoRtpSenders=[],this._screenRtpSenders=[],this._remoteSDP=void 0,this._localSDP=void 0,this._localIceCandidates=[],this._generatedCandidates=[],this._remoteIceCandidates=[]},close:function(){clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,this.stopConnectionMonitor(),this._closeConnection(),this._stream&&this._isUpStream&&WebRTCUserMedia.closeStream(this._stream._getType())}};var ConferenceDCConnection=function(e,t,n,i){this._id=e,this._hostId=t,this._handler=i,this._connectionType=n,this._turnServer=[],this._userName=void 0,this._credential=void 0,this._connection=void 0,this._dataChannel=void 0,this._sendDataChannel=void 0,this._localSDP=void 0,this._remoteSDP=void 0,this._remoteIceCandidates=[],this._localIceCandidates=[],this._generatedCandidates=[],this._iceCandidatesGatheringTimer=void 0,this._processType=WebRTCPeerConnectionConstants.processTypes.INIT,this._isReconnecting=!1,this._reconnectTimer=void 0,this._reconnectInterval=void 0,this._canUpdateLocalIceCandidates=!1,this._connectionMonitor=void 0};ConferenceDCConnection.prototype={_getConfiguration:function(){var e=this._turnServer,t=this._userName,n=this._credential,i=[];return e.forEach((function(e){i.push({urls:e,username:t,credential:n})})),ZCWebRTCPeerConnectionUtil.getConfiguration(i)},setTurnCredentials:function(e,t,n){this._turnServer=e,this._userName=t,this._credential=n},init:function(){this._connection&&(this._connection.close(),this._connection=void 0),this._connection=new RTCPeerConnection(this._getConfiguration()),this._bindEventHandlers(),this._createDataChannel(),this._createSendDataChannel(),this._createOffer(this._processType)},_bindEventHandlers:function(){var e=!1,t=this._connection,n=function(t){var n=t.candidate;if(n)if(this._generatedCandidates.push(n),this.updateCandidateToConnectionMonitor(n),e){if(this._localIceCandidates.push(n.candidate),!this._canUpdateLocalIceCandidates)return;if(!this._iceCandidatesGatheringTimer){var i=function(){this._handler.updateIceCandidates(this._id,this._hostId,this._connectionType,this._localIceCandidates,this._processType),this._localIceCandidates=[],this._iceCandidatesGatheringTimer=void 0}.bind(this);this._iceCandidatesGatheringTimer=setTimeout(i,1e3)}}else this._handler.sendOffer(this._id,this._hostId,this._connectionType,this._localSDP,n,this._processType),e=!0}.bind(this),i=function(e){var n=t.iceConnectionState;WebRTCPeerConnectionConstants.iceConnectionStates.CONNECTED===n?(this._processType=WebRTCPeerConnectionConstants.processTypes.INIT,this._isReconnecting=!1,clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,"function"==typeof this._handler.handleConnected&&this._handler.handleConnected(this._id,this._hostId,this._connectionType)):WebRTCPeerConnectionConstants.iceConnectionStates.FAILED===n&&(this._reconnect(),clearInterval(this._reconnectInterval),this._reconnectInterval=setInterval(function(){this._reconnect()}.bind(this),3e4))}.bind(this),r=function(e){var n=t.connectionState;WebRTCPeerConnectionConstants.iceConnectionStates.CONNECTED===n?(this._processType=WebRTCPeerConnectionConstants.processTypes.INIT,this._isReconnecting=!1,clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,"function"==typeof this._handler.handleConnected&&this._handler.handleConnected(this._id,this._hostId,this._connectionType)):WebRTCPeerConnectionConstants.iceConnectionStates.FAILED===n&&(this._reconnect(),clearInterval(this._reconnectInterval),this._reconnectInterval=setInterval(function(){this._reconnect()}.bind(this),3e4))}.bind(this),o=function(e){}.bind(this);t.onicecandidate=n,t.oniceconnectionstatechange=i,t.onconnectionstatechange=r,t.ondatachannel=o},_createDataChannel:function(){this._dataChannel&&(this._dataChannel.close(),this._dataChannel=void 0),this._dataChannel=this._connection.createDataChannel("receiveChannel"),this._dataChannel.binaryType="arraybuffer",this._dataChannel.onmessage=function(e){this._handler.handleData(this.getObjectFromMexData(e.data),this._id,this._hostId)}.bind(this)},_createSendDataChannel:function(){this._sendDataChannel&&(this._sendDataChannel.close(),this._sendDataChannel=void 0),this._sendDataChannel=this._connection.createDataChannel("sendChannel"),this._sendDataChannel.onopen=function(){"function"==typeof this._handler.handleSendDataChannelOpen&&this._handler.handleSendDataChannelOpen(this._id,this._hostId)}.bind(this)},getObjectFromMexData:function(e){var t={},n=new DataView(e),i=0;t.type=n.getInt32(),i+=4,t.packetType=n.getInt8(i),i++;var r=new Uint8Array(e),o=n.getInt16(i);i+=2;var s=r.slice(i,i+o);t.conferenceId=new TextDecoder("utf-8").decode(s),i+=o;var a=n.getInt16(i);i+=2;var c=r.slice(i,i+a);t.processId=new TextDecoder("utf-8").decode(c),i+=a;var d=n.getInt16(i);i+=2;var l=r.slice(i,i+d);t.userId=new TextDecoder("utf-8").decode(l),i+=d;var u=n.getInt32(i);i+=4;var f=n.getInt32(i);i+=4;var m=r.slice(i,i+u);t.syncData=JSON.parse(new TextDecoder("utf-8").decode(m)),i+=u;var C=r.slice(i,i+f);return t.binaryData=new TextDecoder("utf-8").decode(C),i+=f,t},createMexData:function(e){var t=new DataView(new ArrayBuffer(2e5)),n=0;t.setInt32(n,e.type),n+=4,t.setInt8(n,e.packetType),n++;var i=new TextEncoder("utf-8").encode(e.conferenceId);t.setInt16(n,i.length),n+=2;for(var r=0;r<i.length;r++)t.setInt8(n,i[r]),n++;var o=new TextEncoder("utf-8").encode(e.processId);t.setInt16(n,o.length),n+=2;for(r=0;r<o.length;r++)t.setInt8(n,o[r]),n++;var s=new TextEncoder("utf-8").encode(e.userId);t.setInt16(n,s.length),n+=2;for(r=0;r<s.length;r++)t.setInt8(n,s[r]),n++;var a=new TextEncoder("utf-8").encode(e.syncData),c=new TextEncoder("utf-8").encode(e.binaryData);t.setInt32(n,a.length),n+=4,t.setInt32(n,c.length),n+=4;for(r=0;r<a.length;r++)t.setInt8(n,a[r]),n++;for(r=0;r<c.length;r++)t.setInt8(n,c[r]),n++;return t.buffer.slice(0,n)},_createOffer:function(e){var t={};WebRTCPeerConnectionConstants.isRestart(e)&&(t.iceRestart=!0,this._localIceCandidates=[],this._generatedCandidates=[]);var n=this._connection;n.createOffer(t).then(function(e){this._localSDP=e,n.setLocalDescription(e)}.bind(this))},setRemoteDescription:function(e,t,n){void 0!==n&&(this._remoteIceCandidates=n),this._connection.setRemoteDescription(this._getRTCSessionDescriptionObj(e,t)).then(function(){this.addRemoteIceCandidates()}.bind(this)),this.startConnectionMonitor()},_getRTCSessionDescriptionObj:function(e,t){return new RTCSessionDescription({type:e,sdp:t})},updateLocalIceCandidates:function(){this._canUpdateLocalIceCandidates=!0,this._handler.updateIceCandidates(this._id,this._hostId,this._connectionType,this._localIceCandidates,this._processType),this._localIceCandidates=[]},addRemoteIceCandidates:function(){var e=this._connection;this._remoteIceCandidates.forEach((function(t){e.addIceCandidate(new RTCIceCandidate(t))})),this._remoteIceCandidates=[]},startConnectionMonitor:function(){this._processType===WebRTCPeerConnectionConstants.processTypes.INIT&&(this._connectionMonitor=new RTCConnectionMonitor(this._id,this._connection,this._generatedCandidates,this._handler.handleConnectionError),this._connectionMonitor.start())},updateCandidateToConnectionMonitor:function(e){this._connectionMonitor&&this._connectionMonitor.updateCandidates([e])},stopConnectionMonitor:function(){this._connectionMonitor&&this._connectionMonitor.stop()},isUDPBlocked:function(){return this._connectionMonitor&&this._connectionMonitor.isUDPBlocked()},send:function(e){try{this._sendDataChannel.send(this.createMexData(e))}catch(e){}},_reconnect:function(){if(!this._isReconnecting){this._isReconnecting=!0,this._processType=WebRTCPeerConnectionConstants.processTypes.RESTART,clearTimeout(this._reconnectTimer);var e=this;this._reconnectTimer=setTimeout((function(){e._isReconnecting=!1}),15e3),this.init(),"function"==typeof this._handler.reconnectStream&&this._handler.reconnectStream(this._id,this._hostId,this._connectionType)}},_closeConnection:function(){clearTimeout(this._reconnectTimer),this._reconnectTimer=void 0,clearTimeout(this._iceCandidatesGatheringTimer),this._iceCandidatesGatheringTimer=void 0,this._connection&&(this._connection.close(),this._connection=void 0),this._isReconnecting=!1,this._canUpdateLocalIceCandidates=!1,this._remoteSDP=void 0,this._localSDP=void 0,this._localIceCandidates=[],this._generatedCandidates=[],this._remoteIceCandidates=[]},close:function(){clearInterval(this._reconnectInterval),this._reconnectInterval=void 0,this._dataChannel&&(this._dataChannel.close(),this._dataChannel=void 0),this._sendDataChannel&&(this._sendDataChannel.close(),this._sendDataChannel=void 0),this.stopConnectionMonitor(),this._closeConnection()}};var ZCSmartConferenceUI={},ZCSmartConferenceConstants={},ZCSmartConferenceImpl={};ZCSmartConferenceUI={_conferenceWindowDoms:{mainWindow:void 0,participantsCountDom:void 0},_secondaryConferenceWindowDoms:{mainWindow:void 0},windowActiveTimeout:void 0,windowActiveTimoutDuration:3e3,clearRingAllTimeout:void 0,maxAvailableSlotsInBottomPane:0,maxReactionSlots:8,maxReactionSlotsInMinView:2,loadParticipantsImageTimeout:void 0,loadParticipantsImageTimeoutDuration:1e3,_rhsGestureFilterMap:void 0,rhsSearchTimeout:void 0,rhsSearchValue:void 0,bottomPaneSearchTimeout:void 0,bottomPaneSearchValue:void 0,resizeInterval:void 0,_listViewInstance:void 0,resizeTimeout:void 0,views:{MINIMIZED:"minimized",MAXIMIZED:"maximized"},headerOptions:{CHAT:"chat",PARTICIPANTS:"participants",TOWN_HALL:"town_hall",NOTES:"notes"},bindEvents:function(){var e=$(document);e.on("click","[smartconferencebutton]",(function(e){e.stopPropagation();var t=$(this),n=t.attr("purpose");"openReactions"!==n&&Clickoutside.handleClick(e),ZCSmartConferenceHandler.UIEvents[n](e,t)})),e.on("mousemove","[smartconferencewindow]",(function(e){clearTimeout(ZCSmartConferenceUI.windowActiveTimeout);var t=ZCSmartConferenceUI.getConferenceWindow();if(!t.hasClass("smartconf-win-active")){t.addClass("smartconf-win-active");var n=ZCSmartConferenceImpl.getCurrentSession();n&&n.isFocusedModeEnabled()&&ZCSmartConferenceUI.handleResize()}ZCSmartConferenceUI.windowActiveTimeout=setTimeout((function(){var e=ZCSmartConferenceImpl.getCurrentSession();e&&e.isInPIP()||(t.removeClass("smartconf-win-active"),e&&e.isFocusedModeEnabled()&&ZCSmartConferenceUI.handleResize())}),ZCSmartConferenceUI.windowActiveTimoutDuration)})),e.on("change",'[smartconferencemediacheckbox][type="checkbox"]',(function(e){e.stopPropagation();var t=$(this),n=t.attr("purpose");ZCSmartConferenceHandler.UIToggleEvents[n](e,t)})),e.on("transitionend","[smartconferencetransition]",(function(e){if(e.target===e.currentTarget){var t=$(this),n=t.attr("transition-purpose");ZCSmartConferenceHandler.UITransitionEndEvents[n](e,t)}})),e.on("focus","[smartconferenceinput]",(function(e){var t=$(this),n=t.attr("focus-purpose");void 0!==n&&"function"==typeof ZCSmartConferenceHandler.UIFocusEvents[n]&&ZCSmartConferenceHandler.UIFocusEvents[n](e,t)})),e.on("keyup","[smartconferenceinput]",(function(e){e.stopPropagation();var t=$(this),n=t.attr("keyup-purpose");ZCSmartConferenceHandler.UIKeyUpEvents[n](e,t)})),e.on("dblclick","[conferencedbclick]",(function(e){e.stopPropagation();var t=$(this),n=t.attr("purpose");ZCSmartConferenceHandler.UIEvents[n](e,t)}))},getConferenceWindow:function(){return this._conferenceWindowDoms.mainWindow},getConferenceParentDOM:function(){return this._conferenceWindowDoms.parentDom},getParticipantCountDom:function(){return this._conferenceWindowDoms.participantsCountDom},setConferenceWindowDoms:function(){var e=$("#smartconferencewindow");this._conferenceWindowDoms.parentDom=$("#smartconference_container"),this._conferenceWindowDoms.mainWindow=e,this._conferenceWindowDoms.participantsCountDom=e.find("[participants_count]")},clearConferenceWindowDoms:function(){this._conferenceWindowDoms={}},setConferenceWindowId:function(e){this.getConferenceWindow().attr("conferenceId",e)},addToggleForRHSChatHeader:function(e,t){e.isChatToggleAllowed()&&t.children().length&&(t.addClass("conference-rhs-chat-multiple"),t.find("#userimage").html($WC.template.replace(ZCSmartConferenceTemplates.getRHSChatToggleHtml(e))))},getListViewInstance:function(){return this._listViewInstance},setListViewInstance:function(e){this._listViewInstance=e},clearListViewInstance:function(){this._listViewInstance=void 0},reinitListView:function(e){var t=ZCSmartConferenceUI.getListViewInstance();void 0!==t&&ZCSmartConferenceUI.setListViewItems(t,e)},initiateListView:function(e){if(void 0===(i=ZCSmartConferenceUI.getListViewInstance())){var t=[ZCSmartConferenceConstants.rhsListCategories.HOST,ZCSmartConferenceConstants.rhsListCategories.COHOSTS,ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS,ZCSmartConferenceConstants.rhsListCategories.KNOCK_REQUESTS,ZCSmartConferenceConstants.rhsListCategories.SPOTLIGHT_PARTICIPANTS,ZCSmartConferenceConstants.rhsListCategories.ACTIVE_PARTICIPANTS,ZCSmartConferenceConstants.rhsListCategories.SILENT_PARTICIPANTS,ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN],n=Math.max(2*Math.ceil(window.innerHeight/60),20),i=new LargeListView("conference-members",$("#smartconferenceuserslist"),n,t,{getCategoryHTML:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n||(n=ZCSmartConferenceImpl.getOutgoingSession()),n){var i=n.isOldImpl(),r=e===ZCSmartConferenceConstants.rhsListCategories.HOST,o="",s="";ZCSmartConferenceUI.getListViewInstance();t=r?void 0:t;var a=void 0,c=void 0;if(r)o="hostSection",s="media.host";else if(e===ZCSmartConferenceConstants.rhsListCategories.COHOSTS)o="cohostSection",s="conference.cohosts";else if(e===ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS)o="speakerRequestSection",s="primetime.header.speaker.requests";else if(e===ZCSmartConferenceConstants.rhsListCategories.SILENT_PARTICIPANTS)o="silentParticipantsSection",s="common.silent.participants";else if(e===ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN)o="yetToJoinSection",s="conference.pending.members",a=i?void 0===ConferenceUI.clearRingAllTimeout?ZCSmartConferenceTemplates.getStartRingAllOption("conferencebutton"):ZCSmartConferenceTemplates.getCancelRingAllOption("conferencebutton"):void 0===ZCSmartConferenceUI.clearRingAllTimeout?ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton"):ZCSmartConferenceTemplates.getCancelRingAllOption("smartconferencebutton");else if(e===ZCSmartConferenceConstants.rhsListCategories.KNOCK_REQUESTS)o="smartconfknockheader",s="conference.header.knock";else if(e===ZCSmartConferenceConstants.rhsListCategories.ACTIVE_PARTICIPANTS){o="activeParticipantsSection",s="common.participants";var d=i?"conferencebutton":"smartconferencebutton",l=i?"conferencecheckbox":"smartconferencemediacheckbox";a=ZCSmartConferenceTemplates.getRhsActiveParticipantsHeaderOpt(n,d),c=$WC.template.replace('<div participantsunmuterestrictionopt class="flexC smartconf-aside-allow-unmute {{display_class}}">{{check_box}}</div>',{display_class:n.canShowParticipantsUnmuteRestrictOpt()?"":"dN",check_box:MediaTemplates.getCheckboxHtml("participantsunmuterestricttoggle","conference.unmute.allow.participants",n.isAllowAudioUnmuteCheckboxEnabled(),l,"toggleParticipantsUnmuteRestriction",!0)},"InSecureHTML")}else e===ZCSmartConferenceConstants.rhsListCategories.SPOTLIGHT_PARTICIPANTS&&(o="spotlightParticipantsSection",s="conference.spotlight.participants");return ZCSmartConferenceTemplates.getRhsSectionListCntHtml(o,s,"",t,a,c,"")}},getItemHTML:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n||(n=ZCSmartConferenceImpl.getOutgoingSession()),n){var i=n.getMember(e);if(i){var r="";return t===ZCSmartConferenceConstants.rhsListCategories.ACTIVE_PARTICIPANTS?r="smartconf-active-part-sec-user":t===ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS?r="smartconf-spk-req-sec-user":t===ZCSmartConferenceConstants.rhsListCategories.SILENT_PARTICIPANTS?r="smartconf-silent-part-sec-user":t===ZCSmartConferenceConstants.rhsListCategories.HOST?r="smartconf-host-sec-user":t===ZCSmartConferenceConstants.rhsListCategories.SPOTLIGHT_PARTICIPANTS&&(r="smartconf-spotlight-part-sec-user"),n.isOldImpl()?ConferenceUI.getRhsSectionUserHtml(n,i,ZCSmartConferenceUI.getRhsSearchValue(),r):ZCSmartConferenceTemplates.getRhsSectionUserHtml(n,i,ZCSmartConferenceUI.getRhsSearchValue(),r)}var o=n.getInvitedMember(e),s=o?o.name:void 0;return void 0===s&&(s=n.getLeftMemberName(e)),n.isOldImpl()?ConferenceUI.getRhsSectionPendingUserHtml(n,e,s,ZCSmartConferenceUI.getRhsSearchValue()):ZCSmartConferenceTemplates.getRhsSectionPendingUserHtml(n,e,s,void 0,ZCSmartConferenceUI.getRhsSearchValue())}},getCategoryCountDOM:function(e){var t;switch(e){case ZCSmartConferenceConstants.rhsListCategories.COHOSTS:t=$("#cohostSection");break;case ZCSmartConferenceConstants.rhsListCategories.ACTIVE_PARTICIPANTS:t=$("#activeParticipantsSection");break;case ZCSmartConferenceConstants.rhsListCategories.SILENT_PARTICIPANTS:t=$("#silentParticipantsSection");break;case ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN:t=$("#yetToJoinSection");break;case ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS:t=$("#speakerRequestSection");break;case ZCSmartConferenceConstants.rhsListCategories.SPOTLIGHT_PARTICIPANTS:t=$("#spotlightParticipantsSection")}if(t)return t.find("[headerCount]")}});ZCSmartConferenceUI.setListViewInstance(i),ZCSmartConferenceUI.setListViewItems(i,e)}},setListViewItems:function(e,t){var n=ZCSmartConferenceUI.getRhsSearchValue(),i=void 0!==n&&n.length>0,r=ZCSmartConferenceUI.getRhsGestureFilterMap(),o=void 0!==r,s=t.getReactionsDB(),a=t.getMembersByCategories(n,r),c={};c[ZCSmartConferenceConstants.rhsListCategories.HOST]=Object.keys(a.host),c[ZCSmartConferenceConstants.rhsListCategories.COHOSTS]=Object.keys(a.cohosts),c[ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS]=Object.keys(a.requestedSpeakers),c[ZCSmartConferenceConstants.rhsListCategories.ACTIVE_PARTICIPANTS]=Object.keys(a.activeMembers),c[ZCSmartConferenceConstants.rhsListCategories.SILENT_PARTICIPANTS]=Object.keys(a.silentMembers),c[ZCSmartConferenceConstants.rhsListCategories.SPOTLIGHT_PARTICIPANTS]=Object.keys(a.spotlightMembers);var d=[],l=t.getChatId();if(void 0!==l){var u=Participants.get(l);if(void 0!==u){var f=u.recipants;if(f)for(var m in f){var C=f[m];if(!Contacts.isBotId(C)){var p=!0;if(i){var h=t.getInvitedMember(C),g=h?h.name:void 0;void 0===g&&(g=t.getLeftMemberName(C));var v=Users.getName(C,g);void 0!==v&&-1!==v.toLowerCase().indexOf(n)||(p=!1)}if(o)r[s.getUserVote(C)]||(p=!1);p&&!WmsImpl.isGuestUserId(C)&&void 0===t.getMember(C)&&void 0===t.getWaitingLobbyRequests()[C]&&d.push(C)}}}}t.isPersonalScope()&&d.concat(t.getInvitedMemberIdsForSearch(n)),c[ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN]=d,e.initialize(c);var S=t.isOldImpl();ZCSmartConferenceUI.setMuteRestrictionInfo(S)},openConferenceWindow:function(e){Settings.isDarkModeChoosed()||Settings.loadDarkModeFiles();var t=ZCSmartConferenceTemplates.getMainWindowHtml(e);$("body").append(t),this.setConferenceWindowDoms(),"undefined"!=typeof MediaCallImpl&&MediaCallImpl.canPerformSilentJoin(e.getAdhocCallDetails())?ZCSmartConferenceUI.getConferenceWindow().addClass("dN"):MediaUtil.setDarkMode()},hideConferenceWindow:function(e){var t=this.getConferenceWindow();t.attr("conferenceId")===e&&(MediaUtil.resetDarkMode(),t.hide())},showConferenceWindow:function(){var e=this.getConferenceWindow();e&&e.show()},closeConferenceWindow:function(e){Conference.removeAssociatedResourceIFrame(),Conference.hideRhsNotesIFrame(e,!0);var t=this.getConferenceWindow();if(Conference.isRetryEnabled()&&t&&ZCSmartConferenceImpl.stopInitialRetry(t.attr("session_key")),t.attr("conferenceId")===e){MediaUtil.resetDarkMode(),(t=$("#smartconference_container")).hide(),MediaUtil.removeVideoElemsStreamInContainer(t),t.remove();var n=$("#smartconfdetachedwrapper");n.hide(),MediaUtil.removeVideoElemsStreamInContainer(n),n.remove(),this.clearConferenceWindowDoms(),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout),ZCSmartConferenceUI.clearRingAllTimeout=void 0,ZCSmartConferenceUI.clearRingingTimeout()}ConferenceImpl.isHuddleTab()&&window.history.pushState({},null,$Util.getUrlPrefix()+"/index.do"),Clickoutside.clear("smartconf-reactions"),Clickoutside.clear("conf_user_options"),Clickoutside.clear("conf_title_edit"),Clickoutside.clear("spotlightdropdowncnt"),ZCSmartConferenceUI.destroyResizeInterval(),ZCSmartConferenceUI.clearRhsGestureFilterMap(),ZCSmartConferenceUI.clearRhsSearchValue(),ZCSmartConferenceUI.clearRhsSearchTimeout(),ZCSmartConferenceUI.clearBottomPaneSearchValue(),ZCSmartConferenceUI.clearBottomPaneSearchTimeout(),ZCSmartConferenceUI.clearListViewInstance()},setSecondaryConferenceWindowDoms:function(){var e=$("#conferencesecondarywindow");this._secondaryConferenceWindowDoms.mainWindow=e},clearSecondaryConferenceWindowDoms:function(){this._secondaryConferenceWindowDoms={}},getSecondaryConferenceWindow:function(){return this._secondaryConferenceWindowDoms.mainWindow},openSecondarySessionWindow:function(e){var t=ZCSmartConferenceTemplates.getSecondarySessionWindowHtml(e);$("body").append(t),this.setSecondaryConferenceWindowDoms(),this.getSecondaryConferenceWindow().setAsDraggable(MediaUtil.getCriteriaForDrag()),SessionTimers.setTimer("conferencesecondarysessiontimer",{startTime:e.getStartTime()})},closeSecondarySessionWindow:function(e){var t=this.getSecondaryConferenceWindow();t.attr("conference_id")===e&&(t.remove(),this.clearSecondaryConferenceWindowDoms(),SessionTimers.clearTimer("conferencesecondarysessiontimer"))},showAssociatedResourceTabOptions:function(e,t){var n=t.attr("id");function i(){var e=$("#associatedResourceTabOptions");e.css("left",t.offset().left-(e.width()+12))}Clickoutside.bind({srcid:n,event:e,destid:"associatedResourceTabOptions",customShow:function(e){var t,n,r,o=$("#associatedResourceTabOptions");o.length?(o.show(),i()):(t=ConferenceImpl.hasCurrentSession()?"conferencebutton":"smartconferencebutton",n={parentClass:"no-pointer font14 conference-associate-resource-options conference-associate-resource-v2-options",parentId:"associatedResourceTabOptions",optionCommonAttr:'purpose="reloadAssociatedResource"',options:[{content:Resource.getRealValue("common.reload"),customAtt:t+' purpose="reloadAssociatedResource"'}]},r=DROP_DOWN.getHtml(n),$("body").append(r),i())},customHide:function(e){$("#associatedResourceTabOptions").hide()}})},resetHeaderOptions:function(e,t){var n=t===ZCSmartConferenceUI.headerOptions.CHAT,i=!n&&t===ZCSmartConferenceUI.headerOptions.PARTICIPANTS,r=!i&&t===ZCSmartConferenceUI.headerOptions.TOWN_HALL,o=!r&&t===ZCSmartConferenceUI.headerOptions.NOTES,s=partcipantsAttrs=townHallAttrs=notesAttrs={purpose:"closeRHS",title:Resource.getRealValue("common.hide")};n||(s={purpose:"openChatInRHS",title:Resource.getRealValue("common.chat")}),i||(partcipantsAttrs={purpose:"openParticipantsInRHS",title:Resource.getRealValue("common.participants")}),r||(townHallAttrs={purpose:"openAssociatedResource",title:Resource.getRealValue("conference.associatedresource.townhall.title")}),o||(notesAttrs={purpose:"openNotesInRHS",title:Resource.getRealValue("common.notes")}),e.find("[openchatrhsbutton]").attr(s).toggleClass("active",n),e.find("[openuserrhsbutton]").attr(partcipantsAttrs).toggleClass("active",i),e.find("[openthrhsbutton]").attr(townHallAttrs).toggleClass("active",r),e.find("[opennotesrhsbutton]").attr(notesAttrs).toggleClass("active",o)},openPreviewRoom:function(e){Settings.isDarkModeChoosed()||Settings.loadDarkModeFiles(),ZCSmartConferenceUI.closePreviewRoom(e),$WC.$Win.destroy("call_info_win"+e.getId()),e.isStartPreview()&&$("#start_conference_win").hide();var t=ZCSmartConferenceTemplates.getPreviewRoomHtml(e);if($("body").append(t),e.hasAudioUpStream()){var n=$("#preview_room_window").find("[audiowaves]");e.getAudioUpStream()._startAudioFrequencyAnalyser((function(e){return MediaUtil.adjustAudioPulsesCnt(n,e),!0}))}MediaUtil.setAndGetAudioPreviewContainer(e)},closePreviewRoom:function(e){var t=$("#preview_room_window");t.hide(),MediaUtil.removeVideoElemsStreamInContainer(t),t.remove(),$WC.$Win.destroy("join_recording_alert"),$WC.$Win.destroy("track_ended_info"),$WC.$Win.destroy("device_switched_info"),e&&e.isStartPreview()&&$("#start_conference_win").show()},showJoinDeviceSettings:function(e){var t=$("#joindevicesettings");t.empty();var n=function(){t.html(ZCSmartConferenceTemplates.getPreviewDevicePickerHtml(e,void 0)),MediaUtil.setAndGetAudioPreviewContainer(e)};WebRTCUserMedia.getMediaDevices(n,n)},showRecordingConsentInJoinPreview:function(e){$WC.$Win.create({id:"join_recording_alert",class:"modalwindow zcl-alert-dialog-2 zcldel-dialog-box zcalgncntr zcbg_mask recording-modalwindow nite-mode",header:ZCSmartConferenceTemplates.getJoinRecordingConsentBodyHtml(),html:ZCSmartConferenceTemplates.getJoinRecordingConsentFooterHtml()})},updateAudioDevicesInJoinPreview:function(e){this.updateAudioDevicesInPreview($("#preview_room_window"),e,!1)},updateAudioDevicesInSessionPreview:function(e){$WC.$Win.isExist("conference_settings_win")&&this.updateAudioDevicesInPreview($("#media_device_widget"),e,!0)},updateAudioDevicesInPreview:function(e,t,n){var i=ZCSmartConferenceTemplates.getPreviewAudioInputDevicePickerHtml(t,void 0,n),r=ZCSmartConferenceTemplates.getPreviewAudioOutputDevicePickerHtml(t,void 0,n),o=e.find("[audio_toggle_in_preview]");o.find("#audioinputdropdowncnt").remove(),o.append(i);var s=e.find("[audio_output_toggle_in_preview]");s.find("#audiooutputdropdowncnt").remove(),s.append(r)},updateStickyInfoStatus:function(e){ZCSmartConferenceUI.getConferenceWindow().toggleClass("smartconf-show-info",e)},updateSessionOptions:function(e){var t=ZCSmartConferenceUI.getConferenceWindow(),n=t.find("[sessionOptions]");n.find('[smartconferencebutton][purpose="muteAudio"], [smartconferencebutton][purpose="unmuteAudio"]').toggleClass("dN",e.isSilentMember()),n.find('[smartconferencebutton][purpose="muteVideo"], [smartconferencebutton][purpose="unmuteVideo"]').toggleClass("dN",e.isSilentMember()),n.find('[smartconferencebutton][purpose="raiseSpeakerRequest"], [smartconferencebutton][purpose="dropSpeakerRequest"]').toggleClass("dN",e.isActiveMember()),n.find('[smartconferencebutton][purpose="showShareOptions"]').toggleClass("dN",e.isSilentMember()),t.removeClass("smartconf-hide-options"),this.updateSilentSpeakerInfo(e)},updateConferenceTitle:function(e){var t=e.isOldImpl()?ConferenceUI.getConferenceWindows():ZCSmartConferenceUI.getConferenceWindow(),n=e.getTitle(),i=t.find("[title_header]");i.text(n),i.each((function(){var e=$(this);e.is("[tooltip-title]")&&e.attr("tooltip-title",n)}))},updatePrimarySessionStreamOptions:function(e){var t=e.isOldImpl()?ConferenceUI.getConferenceWindows():ZCSmartConferenceUI.getConferenceWindow();t.toggleClass("smartconf-restrict-audio-opt",e.hasSecondaryAudioUpStream()),t.toggleClass("smartconf-restrict-video-opt",e.hasSecondaryVideoUpStream())},updateSecSessionConnectionStatus:function(e){var t="common.connecting";e.isScreenUpStreamConnected()&&(t="avcliq.media.screen.sharing.you"),this.getSecondaryConferenceWindow().find("[session_content]").text(Resource.getRealValue(t))},getReconnectionContent:function(e){var t="",n=!1,i=!1,r=e.isDataChannelReconnecting(),o=e.isVideoConference();return e.isAudioDownStreamReconnecting()&&(n=!0,t+=".audio"),o&&e.isVideoDownStreamReconnecting()&&(n=!0,t+=".video"),r?t=Resource.getRealValue("conference.reconnecting"):n?t=Resource.getRealValue("conference"+t+".reconnecting"):(e.isAudioUpStreamReconnecting()&&(i=!0,t+=".audio"),o&&e.isVideoUpStreamReconnecting()&&e.hasVideoUpStream()&&(i=!0,t+=".video"),i&&(t=Resource.getRealValue("conference"+t+".up.reconnecting"))),""===t&&(!e.isDataChannelConnected()||o&&!e.isLayoutDataReceived()&&ZCSmartConferenceImpl.hasMoreThanOneActiveMember(e)||e.hasAudioUpStreamConnection()&&!e.isAudioUpStreamConnected()||o&&e.hasVideoUpStreamConnection()&&e.hasVideoUpStream()&&!e.isVideoUpStreamConnected()||e.hasScreenUpStreamConnection()&&!e.isScreenUpStreamConnected()||e.hasAudioDownStreamConnection()&&!e.isAudioDownStreamConnected()||o&&e.hasVideoDownStreamConnection()&&!e.isVideoDownStreamConnected()||e.hasScreenDownStreamConnection()&&!e.isScreenDownStreamConnected())&&(t=Resource.getRealValue("common.connecting")),t},updateConnectionStatus:function(e){if(e.isPrimarySession()){var t=this.getReconnectionContent(e),n=ZCSmartConferenceUI.getConferenceWindow(),i=n.find("#connectionstateloader");i.find("[content]").text(t),i.toggleClass("dN",""===t),n.toggleClass("smartconf-connecting",""!==t)}else this.updateSecSessionConnectionStatus(e)},showLowBandwidthModeInfo:function(){var e=ZCSmartConferenceUI.getConferenceWindow();e.find("#lowBandwithModeInfoCnt").length||(e.addClass("smartconf-show-bandwidth-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").addClass("smartconf-show-bandwidth-band"),e.find("#conferencev2header").after(ZCSmartConferenceTemplates.getLowBandwidthModeInfoCntHtml()),ZCSmartConferenceUI.getConferenceParentDOM().addClass("smartconf-top-banner"),this.handleResize())},removeLowBandwidthModeInfo:function(){ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-show-bandwidth-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").removeClass("smartconf-show-bandwidth-band"),ZCSmartConferenceUI.getConferenceParentDOM().removeClass("smartconf-top-banner");var e=$("#lowBandwithModeInfoCnt");e.length&&(e.remove(),this.handleResize())},updateLowBandwidthModeInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow(),n=e.getActiveMembersCount();e.isLowBandwidthModeEnabled()&&!e.isLowBandwidthModeInfoHidden()&&0===t.find("#focusedModeInfoCnt").length&&n>e.getBandwidthAllowedSpeakerCount()&&!e.isInGridLayout()?this.showLowBandwidthModeInfo():this.removeLowBandwidthModeInfo(),this.updateSilentSpeakerInfo(e)},showSilentSpeakerInfo:function(){var e=ZCSmartConferenceUI.getConferenceWindow();e.find("#silentSpeakerInfoCnt").length||(e.addClass("smartconf-show-silent-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").addClass("smartconf-show-silent-band"),e.find("#conferencev2header").after(ZCSmartConferenceTemplates.getSilentSpeakerInfoCntHtml()),ZCSmartConferenceUI.getConferenceParentDOM().addClass("smartconf-top-banner"),this.handleResize())},removeSilentSpeakerInfo:function(){ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-show-silent-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").removeClass("smartconf-show-silent-band"),ZCSmartConferenceUI.getConferenceParentDOM().removeClass("smartconf-bottom-banner");var e=$("#silentSpeakerInfoCnt");e.length&&(e.remove(),this.handleResize())},updateSilentSpeakerInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow();e.isSilentMember()&&!e.isSilentSpeakerInfoHidden()&&0===t.find("#focusedModeInfoCnt").length&&0===t.find("#lowBandwithModeInfoCnt").length?this.showSilentSpeakerInfo():this.removeSilentSpeakerInfo(),this.updateAudioMutedInfo(e)},showAudioMutedInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow();if(!t.find("#silentSpeakerInfoCnt").length){var n=t.find("#audioMutedInfoCnt"),i=ZCSmartConferenceTemplates.getAudioMutedInfoCntHtml(e);ZCSmartConferenceUI.getConferenceParentDOM().addClass("smartconf-top-banner"),0===n.length?t.find("#conferencev2header").after(i):n.replaceWith(i),this.handleResize()}},showAudioMuteInfoOnTopBand:function(e){var t=ZCSmartConferenceUI.getConferenceWindow().find("#mutebandindicator"),n=MediaTemplates.getAudioMuteInfo(this.getMuteBandContent(e));0===t.find("[mute_band_indicator]").length?t.append(n):t.html(n)},removeAudioMutedInfo:function(){ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-show-mute-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").removeClass("smartconf-show-mute-band");var e=$("#audioMutedInfoCnt");ZCSmartConferenceUI.getConferenceParentDOM().removeClass("smartconf-top-banner"),e.length&&(e.remove(),this.handleResize())},removeAudioMutedInfoFromTopBand:function(){ZCSmartConferenceUI.getConferenceWindow().find("#mutebandindicator").empty()},getMuteBandContent:function(e){var t=e.getCurrentMember();if(t.isAudioUnmuteRestricted()&&!t.isCohost()){var n=t.getAudioUnmuteRestrictedBy(),i=e.isAudioUnmuteRestrictedForAllParticipants()?"conference.unmute.host.restricted":"conference.user.unmute.host.restricted",r=[];if(void 0!==n&&!e.isHost(n)){var o=e.getMember(n),s=void 0;o&&(s=o.getName()),void 0!==(s=Users.getName(n,s))&&(r=[s],i=e.isAudioUnmuteRestrictedForAllParticipants()?"conference.unmute.cohost.restricted":"conference.user.unmute.cohost.restricted")}var a=[i];for(var c of r)a.push(c);return a}},updateAudioMutedInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow(),n=e.getCurrentMember();!n.isAudioMuted()||e.isSilentMember()||0!==t.find("#silentSpeakerInfoCnt").length||!e.isInFocusedUsers()&&0!==t.find("#focusedModeInfoCnt").length?this.removeAudioMutedInfoFromTopBand():this.showAudioMuteInfoOnTopBand(e),e.isSilentMember()||e.isAudioMutedInfoHidden()||!n.isAudioMuted()||0!==t.find("#focusedModeInfoCnt").length||0!==t.find("#lowBandwithModeInfoCnt").length||0!==t.find("#silentSpeakerInfoCnt").length?this.removeAudioMutedInfo():(this.showAudioMutedInfo(e),this.showAudioMuteInfoOnTopBand(e))},showSwitchedToSilentInfo:function(){UI.updateBanner(Resource.getRealValue("conference.speaker.you.removed"),2e3,!1)},openFocusedModePanel:function(e){if(0===$("#focusedmodepanelcnt").length){var t=ZCSmartConferenceTemplates.getFocusedModePanelHtml(e);if($("body").append(t),Clickoutside.bind({srcid:"smartconfmoreopt",destid:"focusedmodepanelcnt",customShow:function(){},customHide:function(e){ZCSmartConferenceUI.closeFocusedModePanel()}}),SearchField.init("conference-focusedusers-selection"),e.isFocusedModeEnabled()){var n=e.getFocusedUserIds();for(var i in n){var r=n[i],o=e.getMember(r);o&&SearchField.insertSelection("conference-focusedusers-selection","contact",r,Users.getName(r,o.getName()))}}else{var s=e.getCurrentMember();SearchField.insertSelection("conference-focusedusers-selection","contact",s.getId(),Users.getName(s.getId(),s.getName()))}}},closeFocusedModePanel:function(){Clickoutside.clear("focusedmodepanel"),$("#focusedmodepanelcnt").remove()},showFocusedModeInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow(),n=t.find("#focusedModeInfoCnt");n.length?n.find("[content]").text(Resource.getRealValue("conference.focused.mode.onstage",ZCSmartConferenceUI.getFocusedUsersNames(e))):(t.addClass("smartconf-show-focus-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").addClass("smartconf-show-focus-band"),t.find("#conferencev2header").after(ZCSmartConferenceTemplates.getFocusedModeInfoCntHtml(e)),this.handleResize())},removeFocusedModeInfo:function(){ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-show-focus-band"),$("#conference-associatedresource-iframe, #conference-notes-iframe").removeClass("smartconf-show-focus-band");var e=$("#focusedModeInfoCnt");e.length&&(e.remove(),this.handleResize())},updateFocusedModeInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow();if(e.isFocusedModeEnabled()){ZCSmartConferenceUI.closeUnmuteConfirmPrompt(),ZCSmartConferenceUI.closeSpeechDetectedInfo(),t.addClass("smartconf-focused-mode");var n=e.isInFocusedUsers();t.toggleClass("smartconf-focused-user",n),t.toggleClass("smartconf-nonfocused-user",!n),$WC.$Win.isExist("conference_settings_win")&&$WC.$Win.get("conference_settings_win").toggleClass("smartconf-nonfocused-user"),n?this.removeUnmuteRestrictedHelpTipForFocusedMode(e):this.addUnmuteRestrictedHelpTipForFocusedMode(e),this.showFocusedModeInfo(e),e.isInGridLayout()&&(t.attr("wasInGridLayout","true"),this.switchToStageLayout(!0))}else t.removeClass("smartconf-focused-mode smartconf-focused-user smartconf-nonfocused-user"),$WC.$Win.isExist("conference_settings_win")&&$WC.$Win.get("conference_settings_win").removeClass("smartconf-nonfocused-user"),this.removeUnmuteRestrictedHelpTipForFocusedMode(e),this.removeFocusedModeInfo(),"true"!==t.attr("wasInGridLayout")||this.isInMinimizedView()||this.isScreenInView()||e.isSpotLightEnabled()||(t.attr("wasInGridLayout","false"),this.switchToVideoGridLayout());this.updateLowBandwidthModeInfo(e)},updateSpotLightCount:function(e){var t=ZCSmartConferenceUI.getConferenceWindow();e.isSpotLightEnabled()&&t.find("#spotlight_count").text(e.getSpotLightUsersCount())},updateSpotLightInList:function(e,t){var n=this.getListViewInstance();if(void 0!==n){var i=n.getItemCategory(t),r=ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN;if((o=e.getMember(t))&&(r=this.getUserCurrentCategory(e,o)),r!==i)o?this.modifyUserInList(e,t):this.populateYetToJoinList(e,[t]);else{var o,s=$.escapeSelector(t),a=this.getConferenceWindow().find('[smartconferenceparticipant][userId="'+s+'"], [pendingparticipant][userId="'+s+'"]');a.toggleClass("smartconf-spotlight-user-list",e.isUserInSpotLight(t)),(o=e.getMember(t))&&o.isSilentMember()&&ZCSmartConferenceUI.setParticipantMuteOption(e,o,a)}}},updateSpotLightInfo:function(e){var t=ZCSmartConferenceUI.getConferenceWindow();e.isSpotLightEnabled()?(t.addClass("smartconf-spotlight-mode"),e.isInGridLayout()&&(t.attr("wasInGridLayout","true"),this.switchToStageLayout(!0))):(t.removeClass("smartconf-spotlight-mode"),"true"!==t.attr("wasInGridLayout")||this.isInMinimizedView()||this.isScreenInView()||e.isFocusedModeEnabled()||(t.attr("wasInGridLayout","false"),this.switchToVideoGridLayout())),ZCSmartConferenceUI.setCurrentSpeakerIndicatorInStage(e)},addUnmuteRestrictedHelpTipForFocusedMode:function(e){this.removeUnmuteRestrictedHelpTip(e,!1);var t=ZCSmartConferenceUI.getConferenceWindow(),n=t.find('[smartconferencebutton][purpose="unmuteAudio"]').removeAttr("tooltip-title"),i=t.find('[smartconferencebutton][purpose="unmuteVideo"]').removeAttr("tooltip-title"),r=t.find("[rhsAudioMutedStatus]"),o=e.isFocusSetByCurrentUser()?"conference.focused.mode.mute.host.restricted":"conference.focused.mode.mute.restricted",s=ZCSmartConferenceTemplates.getHelptipCntHtml("focusedModeAudioUnmuteRestrictCnt",o);0===n.find("#focusedModeAudioUnmuteRestrictCnt").length&&n.append(s),0===i.find("#videoUnmuteRestrictCnt").length&&i.append(ZCSmartConferenceTemplates.getHelptipCntHtml("videoUnmuteRestrictCnt",o)),0===r.find("#focusedModeAudioUnmuteRestrictCnt").length&&r.append(s)},removeUnmuteRestrictedHelpTipForFocusedMode:function(e){var t=ZCSmartConferenceUI.getConferenceWindow(),n=t.find('[smartconferencebutton][purpose="unmuteAudio"]').attr("tooltip-title",MediaUtil.getMicOnToolTip()),i=t.find('[smartconferencebutton][purpose="unmuteVideo"]').attr("tooltip-title",Resource.getRealValue("videochat.cameraon")),r=t.find("[rhsAudioMutedStatus]");n.find("#focusedModeAudioUnmuteRestrictCnt").remove(),i.find("#videoUnmuteRestrictCnt").remove(),r.find("#focusedModeAudioUnmuteRestrictCnt").remove(),this.addUnmuteRestrictedHelpTip(e)},updateMuteRestrictionStatus:function(e,t,n,i,r,o,s,a){if(a&&!e&&i.isAudioMuted()){var c=i.getAudioMutedBy(),d=[],l=s?"conference.user.host.muted":"conference.all.host.muted";if(void 0!==c&&!n.isHost(c)){var u=n.getMember(c),f=void 0;u&&(f=u.getName()),void 0!==(f=Users.getName(c,f))&&(d=[f],l=s?"conference.user.cohost.muted":"conference.all.cohost.muted")}UI.updateBanner(Resource.getRealValue(l,d),2e3,!1)}i.isAudioUnmuteRestricted()?this.addUnmuteRestrictedHelpTip(n):(this.removeUnmuteRestrictedHelpTip(n),e&&!o&&this.showUnmuteConfirmPrompt(n,r,s,!t))},addUnmuteRestrictedHelpTip:function(e){this.updateMutedInfoInList(e,e.getCurrentMember()),this.updateAudioMutedInfo(e);var t=e.getCurrentMember();if(!t.isCohost()&&t.isAudioUnmuteRestricted()&&t.isAudioMuted()){ZCSmartConferenceUI.closeUnmuteConfirmPrompt(),ZCSmartConferenceUI.closeSpeechDetectedInfo();var n=ZCSmartConferenceUI.getConferenceWindow();n.addClass("smartconf-unmute-restricted-user"),$WC.$Win.isExist("conference_settings_win")&&$WC.$Win.get("conference_settings_win").addClass("smartconf-unmute-restricted-user");var i=n.find('[smartconferencebutton][purpose="unmuteAudio"]').removeAttr("tooltip-title");if(!(i=i.add(n.find("[rhsAudioMutedStatus]"))).find("#focusedModeAudioUnmuteRestrictCnt").length){var r=t.getAudioUnmuteRestrictedBy(),o=e.isAudioUnmuteRestrictedForAllParticipants()?"conference.unmute.host.restricted":"conference.user.unmute.host.restricted",s=[];if(void 0!==r&&!e.isHost(r)){var a=e.getMember(r),c=void 0;a&&(c=a.getName()),void 0!==(c=Users.getName(r,c))&&(s=[c],o=e.isAudioUnmuteRestrictedForAllParticipants()?"conference.unmute.cohost.restricted":"conference.user.unmute.cohost.restricted")}var d=[o];for(var l of s)d.push(l);var u=ZCSmartConferenceTemplates.getHelptipCntHtml("audioUnmuteRestrictCnt",d),f=Resource.getRealValue(o,s);i.each((function(){var e=$(this),t=e.find("#audioUnmuteRestrictCnt");0===t.length?e.append(u):t.text(f)}))}}},removeUnmuteRestrictedHelpTip:function(e){this.updateMutedInfoInList(e,e.getCurrentMember()),this.updateAudioMutedInfo(e);var t=ZCSmartConferenceUI.getConferenceWindow();t.removeClass("smartconf-unmute-restricted-user"),$WC.$Win.isExist("conference_settings_win")&&$WC.$Win.get("conference_settings_win").removeClass("smartconf-unmute-restricted-user");var n=t.find('[smartconferencebutton][purpose="unmuteAudio"]').attr("tooltip-title",MediaUtil.getMicOnToolTip()),i=t.find("[rhsAudioMutedStatus]");n.find("#audioUnmuteRestrictCnt").remove(),i.find("#audioUnmuteRestrictCnt").remove()},showUnmuteConfirmPrompt:function(e,t,n,i){var r=e.getCurrentMember();if(r.isAudioMuted()&&!r.isSilentMember()&&!r.isAudioUnmuteRestricted()&&(!e.isFocusedModeEnabled()||e.isInFocusedUsers())){var o=!0;void 0!==t&&(o=t===e.getHostId());var s=["conference.focused.mode.mute.allowed"];i?s=o?["conference.host.unmute.request"]:["conference.cohost.unmute.request"]:n&&(s=o?["conference.user.unmute.allowed"]:["conference.cohost.user.unmute.allowed"]);var a=void 0;if(o)a=Resource.getRealValue(s[0]);else{var c=void 0,d=e.getMember(t);d&&(c=d.getName()),c=Users.getName(t,c),a=Resource.getRealValue(s[0],c),s.push(c)}var l=ZCSmartConferenceUI.getConferenceWindow(),u=l.find("#allowUnmuteCnt");if(0===u.length){var f=l.find('[smartconferencebutton][purpose="unmuteAudio"]'),m=ZCSmartConferenceTemplates.getHelptipConfirmCntHtml({id:"allowUnmuteCnt",contentParams:s,acceptButton:{purpose:"unmuteAudioFromHelptip",contentKey:"chat.unmute",customAttribute:"smartconferencebutton"},declineButton:{purpose:"closeAllowUnmutePrompt",contentKey:"conference.stay.muted",customAttribute:"smartconferencebutton"}});f.after(m)}else u.find("[content]").text(a)}},showSpeechDetectedInfo:function(){var e=ZCSmartConferenceUI.getConferenceWindow();if(0===e.find("#allowUnmuteCnt").length&&0===e.find("#speech_detected_info").length){var t=e.find('[smartconferencebutton][purpose="unmuteAudio"]');t.append(ZCSmartConferenceTemplates.getHelptipCntHtml("speech_detected_info",["avcliq.media.speech.detected.info",MediaUtil.getMuteShortCutContent()])),t.append(ZCSmartConferenceTemplates.getSpeechIndicatorHtml()),e.addClass("smartconf-speech-ind")}},closeUnmuteConfirmPrompt:function(){$("#allowUnmuteCnt").remove()},closeSpeechDetectedInfo:function(){var e=ZCSmartConferenceUI.getConferenceWindow();e.find("#speech_detected_info").remove(),e.find("#speech_detected_ind").remove(),e.removeClass("smartconf-speech-ind")},updateCohostOptions:function(e){var t=ZCSmartConferenceUI.getConferenceWindow(),n=e.hasHostPermission();t.toggleClass("smartconf-no-perm",!n),ZCSmartConferenceUI.resetMuteOptionsInParticipantList(e),ZCSmartConferenceUI.setParticipantMuteAllOption(e);var i=e.getCurrentMember();if(!i.isAudioUnmuteRestricted()||i.isCohost()||i.isHost()?this.removeUnmuteRestrictedHelpTip(e):this.addUnmuteRestrictedHelpTip(e),n){if(ZCSmartConferenceUI.setNvfCountInUI(e),t.find("[inviteUsersButton]").length<1&&(e.isThreadChatAllowed()||e.isPersonalScope())&&t.find("#bottom_band_video_preview").before(ZCSmartConferenceTemplates.getInviteUsersButtonHtml()),i.isCohost()&&$.isEmptyObject(e.getGuestConfigurations())){ConferenceAPI.getHostDetails(e.getId(),(function(t){if(void 0===t)return;e.updateGuestConfigurations(t.configurations),e.setPublicUrl(t.public_url),t.presentation_requests&&(e.setRequestedPresentationsData(t.presentation_requests),ZCSmartConferenceImpl.updateHeadersStatus(e)),t.waiting_lobby_requests&&(e.setWaitingLobbyRequests(t.waiting_lobby_requests),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(e));let n=t.streaming_id;void 0!==n?ZCSmartConferenceImpl.handleStartStreaming(e,n):ZCSmartConferenceImpl.handleStopStreaming(e)})),ZCSmartConferenceUI.checkAndRemoveEditRequestButton()}}else $("#non_verbal_feedback").children().addClass("dN"),ZCSmartConferenceUI.addRequestEditWhiteboardOption(),ZCSmartConferenceImpl.resetHostPermissions(e);this.modifyRequestedSpeakersInList(e),ZCSmartConferenceUI.updatePresentationRequestsList(e),ZCSmartConferenceUI.updateUserInfoInWhiteBoardContainer(e)},modifyRequestedSpeakersInList:function(e){if(void 0!==ZCSmartConferenceUI.getListViewInstance()){var t=e.getRequestedSpeakers();for(var n in t)this.modifyUserInList(e,n)}},handleReplacedHostCallback:function(e,t,n,i){if(t){e.replaceHost(t,n,i);var r=e.getMember(t);r&&r.resetAllPresentationRequests();ConferenceAPI.getHostDetails(e.getId(),(function(t){if(void 0===t)return;e.updateGuestConfigurations(t.configurations),e.setPublicUrl(t.public_url),t.presentation_requests&&(e.setRequestedPresentationsData(t.presentation_requests),ZCSmartConferenceImpl.updatePresentationRequestsList(e)),t.waiting_lobby_requests&&(e.setWaitingLobbyRequests(t.waiting_lobby_requests),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(e));let n=t.streaming_id;void 0!==n?ZCSmartConferenceImpl.handleStartStreaming(e,n):ZCSmartConferenceImpl.handleStopStreaming(e)}))}},handleReplacedHost:function(e,t,n){var i=e.getMember(t);i&&(this.modifyUserInList(e,i.getId()),this.updateHostIndicator(e,t));var r=e.getMember(n);if(r&&(this.modifyUserInList(e,r.getId()),this.updateHostIndicator(e,n)),e.isCurrentUser(t))UI.updateBanner(Resource.getRealValue("conference.host.you.assigned"),2e3,!1),this.updateHostOptions(e);else{e.isCurrentUser(n)&&this.updateHostOptions(e);var o=void 0;i&&(o=i.getName()),UI.updateBanner(Resource.getRealValue("conference.host.assigned.info",Users.getName(t,o)),2e3,!1)}},updateHostOptions:function(e){this.updateCohostOptions(e);var t=ZCSmartConferenceUI.getConferenceWindow(),n=e.isCurrentUserHost();t.find('[smartconferencebutton][purpose="stopRecording"]').toggleClass("dN",!n);var i=n?"conference.end":"conference.leave";t.find('[smartconferencebutton][purpose="endConference"]').attr("tooltip-title",Resource.getRealValue(i))},updateHostIndicator:function(e,t){var n=e.isHost(t),i=e.getUserMediaContainer(t);i&&i.length&&i.find("[hostIndicator]").toggleClass("dN",!n);var r=e.getUserGridMediaContainer(t);r&&r.length&&r.find("[hostIndicator]").toggleClass("dN",!n)},setCurrentSpeakerIndicatorInStage:function(e){this.getConferenceWindow().find("#smartconf_main_container").find(".smartconf-current-speaker").removeClass("smartconf-current-speaker");var t=e.getCurrentSpeakerId();if(t){var n=e.getUserMediaContainer(t);n&&n.length&&n.addClass("smartconf-current-speaker")}},handleScreenShareStart:function(){var e=this.getConferenceWindow();e.find("[screen_share_indicator_v2]").removeClass("zc-av-hide"),e.addClass("smartconf-screen-share-ind"),ZCSmartConferenceUI.getConferenceParentDOM().addClass("smartconf-bottom-banner");var t=e.find('[smartconferencebutton][purpose="startScreenShare"]');t.length&&(t.attr("purpose","stopScreenShare").addClass("active"),t.find("[icon]").removeClass("zcf-sharescrn").addClass("zcf-scrn-shr-stop"),t.find("[content]").text(Resource.getRealValue("avcliq.media.screenshare.stop")))},resetMuteOptionsInParticipantList:function(e){ZCSmartConferenceUI.getConferenceWindow().find("#smartconferenceusersection").find("[smartconferenceparticipant]").each((function(){var t=$(this),n=t.attr("userId"),i=e.getMember(n);i&&ZCSmartConferenceUI.setParticipantMuteOption(e,i,t)}))},setParticipantMuteOption:function(e,t,n){var i=e.hasHostPermission(),r=e.isAllowAudioUnmuteCheckboxEnabled(),o=e.isCurrentUserHost(),s=t.isCurrentUser(),a=t.isActiveMember(),c=e.isHost(t.getId()),d=t.isCohost(),l=c||d,u=t.isAudioMuted(),f=t.isAudioUnmuteRestricted(),m=!r;l&&(m=!1);var C=!1;if(s){var p=!0;e.isFocusedModeEnabled()&&(p=e.isInFocusedUsers());var h=!a||u;n.find('[smartconferencebutton][purpose="muteAudioFromRhs"]').removeClass("smartconf-requesting").toggleClass("hide",h);var g=!a||!u||!p||f&&!i;n.find('[smartconferencebutton][purpose="unmuteAudioFromRhs"]').removeClass("smartconf-requesting").toggleClass("hide",g),(v=n.find("[rhsAudioMutedStatus]")).toggleClass("hide",!a),v.toggleClass("zcf-mic-mute",u),v.toggleClass("zcf-mic",!u),v.toggleClass("smartconf-mute-restrict-btn",u&&(!p||f&&!i)),C=!h||!g}else{var v;(v=n.find("[userAudioMutedStatus]")).toggleClass("hide",!a),v.toggleClass("zcf-mic-mute",u),v.toggleClass("zcf-mic",!u),v.toggleClass("smartconf-mute-restrict-btn",u&&f&&!l);var S=!a||!i||u||m;n.find('[smartconferencebutton][purpose="muteUserAudio"]').removeClass("smartconf-requesting").toggleClass("hide",S);var I=!a||!i||u||!m;n.find('[smartconferencebutton][purpose="forceMuteUserAudio"]').removeClass("smartconf-requesting").toggleClass("hide",I);var _=!(a&&i&&u&&f);n.find('[smartconferencebutton][purpose="allowUserToUnmuteAudio"]').removeClass("smartconf-requesting").toggleClass("hide",_);var w=!a||!i||!u||f;n.find('[smartconferencebutton][purpose="askUserToUnmuteAudio"]').removeClass("smartconf-requesting").toggleClass("hide",w),C=!(S&&I&&_&&w)}var b=n.find('[smartconferencebutton][purpose="showActionsOnMember"]');if(b.length){var U=e.isVideoConference(),R=U&&e.isUserInSpotLight(t.getId()),T=Conference.isKickoutEnabled()&&!s||a&&o&&!s||Conference.isSpotLightEnabled()&&U&&i&&(a||R)||!l&&!s&&a&&u&&!f;b.toggleClass("hide",!T),C=C||T}n.find("[option_cnt]").toggleClass("smartconf-action-allowed",C)},setParticipantMuteAllOption:function(e){var t=ZCSmartConferenceUI.getConferenceWindow();t.find("[rhsHeaderOptions]").toggleClass("dN",!e.hasHostPermission()),t.find("#rhsmuteallopt").toggleClass("disabled",!e.canShowMuteAllParticipantsOpt()),t.find("#rhsunmuteallopt").toggleClass("dN",!e.canShowUnmuteAllParticipantsOpt()),this.setUnmuteRestrictionOption(t,e)},setUnmuteRestrictionOption:function(e,t){var n=e.find("[participantsunmuterestrictionopt]");n.toggleClass("dN",!t.canShowParticipantsUnmuteRestrictOpt()),n.find('[purpose="toggleParticipantsUnmuteRestriction"]').prop("checked",t.isAllowAudioUnmuteCheckboxEnabled())},setMuteRestrictionInfo:function(e){var t=(e?ConferenceUI:ZCSmartConferenceUI).getConferenceWindow(),n=e?"conferencebutton":"smartconferencebutton",i=t.find("["+n+'][purpose="unmuteAudio"]');i.length&&0===i.find("#speech_detected_info").length&&t.find("[rhsAudioMutedStatus]").html(i[0].innerHTML)},updateSpeechDetectionInfo:function(){var e,t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&t.hasUnmutePermission()&&t.isAudioMuted()?((e=t instanceof ConferenceSession?ConferenceUI:ZCSmartConferenceUI).showSpeechDetectedInfo(),clearTimeout(ZCSmartConferenceUI.speechIndicatorTimeout),ZCSmartConferenceUI.speechIndicatorTimeout=setTimeout((function(){e.closeSpeechDetectedInfo()}),5e3)):(e=t instanceof ConferenceSession?ConferenceUI:ZCSmartConferenceUI).closeSpeechDetectedInfo()},getFocusedUsersNames:function(e){var t="",n=e.getFocusedUserIds();if(0===n.length)return t;var i=e.getMember(n[0]);if(i&&(t+=Users.getName(i.getId(),i.getName()),2===n.length)){var r=e.getMember(n[1]);return r&&(t+=" "+Resource.getRealValue("common.and")+" ",t+=Users.getName(r.getId(),r.getName())),t}for(var o=1,s=1;s<n.length;s++){var a=e.getMember(n[s]);if(a){if(!(o<=2)){t=Resource.getRealValue("conference.focused.mode.names",t,n.length-2);break}t+=Users.getName(a.getId(),a.getName()),o++}}return t},showReaction:function(e,t,n){var i=t.customData.smileyCode,r=!1;if(Smiley.regexp.test(i)||(r="undefined"!=typeof CustomSmiley&&CustomSmiley.CUSTOM_STICKER_REGEX.test(i))){var o=$("#confreactionsviewcnt"),s=e.isInMinimizedView()?ZCSmartConferenceUI.maxReactionSlotsInMinView:ZCSmartConferenceUI.maxReactionSlots,a=o.attr("currentOrder");void 0===a?a=0:(a=parseInt(a),a++,a%=s);var c=$(ZCSmartConferenceTemplates.getReactionItemHtml(a,i,r));o.append(c);var d=this.getReactionPosition(o,c,a,n);c.css({left:d.left}),c.handleAnimationEnd(),d.isAtRightEdge&&(a=-1),o.attr("currentOrder",a)}},getReactionPosition:function(e,t,n,i){var r=$("#conferenceoptionset"),o=r.outerWidth(),s=r.position(),a=t.outerWidth(),c=n%2==0,d=90*(Math.floor(n/2)+1);void 0!==i&&i%2==0&&(d-=45);var l=!1,u=!1,f=10;if(c)(f=s.left-a-d)<10&&(l=!0,f=10);else{var m=e.outerWidth()-a-10;(f=s.left+o+d)>m&&(u=!0,f=m)}return{left:f,isAtLeftEdge:l,isAtRightEdge:u}},openInviteUserPanel:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t.hasHostPermission()&&(t.isQuickStartPreview()||Conference.isNomenclatureEnabled()?ZCSmartConferenceUI.showV2InviteUserPanel(t,e):($("body").append(ZCSmartConferenceTemplates.getInviteUserPanelHtml(t)),SearchField.init(ZCSmartConferenceHandler.inviteUserSuggestion.id)))},removeOptionsDropDown:function(){var e=ZCSmartConferenceImpl.getCurrentSession().getId(),t=e+"dropdowncnt",n=e+"shrdropdowncnt";$("#"+t).remove(),$("#"+n).remove(),Clickoutside.clear(t),Clickoutside.clear(n),$("#"+e+"dropdownopt").removeClass("active").attr("tooltip-title",Resource.getRealValue("common.more")),$("#"+e+"shrdropdownopt").removeClass("active").attr("tooltip-title",Resource.getRealValue("common.share"))},showRhsChatOption:function(){if(!Conference.isCurrentUserGuest()||!ZCSmartConferenceImpl.getCurrentActiveSession()||ZCSmartConferenceImpl.getCurrentActiveSession().getConfigurations().isChatAccessibleToExternalUser()){var e=ZCSmartConferenceUI.getConferenceWindow(),t=$("#conferencev2header").find('[purpose="openChatInRHS"]');t.length&&t.hasClass("dN")?(t.removeClass("dN"),this.isRhsOpen()&&this.isChatInView()&&t.attr({purpose:"closeRHS","tooltip-title":Resource.getRealValue("common.hide")}).addClass("active")):0===t.length&&t.find("[smartconferencerhsheader]").prepend(ZCSmartConferenceTemplates.getRhsChatHeaderHtml()),e&&e.find("#smartconferencechattab").removeClass("dN")}},showUserOptions:function(e,t,n,i){var r=i.getId();WmsImpl.isGuestUserId(r)||WmsImpl.isGuestUser()||ZCSmartConferenceImpl.getAndSetPeopleInfo([r]);var o=n.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow(),s=o.find("#conf_user_options");if(s.remove(),Clickoutside.clear("conf_user_options"),r!==s.attr("user_id")){var a=Conference.isSpotLightEnabled(),c=n.hasHostPermission(),d=i.isCurrentUser(),l=n.isCurrentUserHost(),u=i.isActiveMember(),f=n.isHost(r),m=i.isCohost(),C="";if(l&&u&&!d){var p=m?["removeFromCohostFromOpt","zcf-owner","conference.cohost.remove",""]:["setAsCohostFromOpt","zcf-owner","conference.cohost.set",""];if(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(p),Conference.isSetAsHostEnabled()){C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["setAsHostFromOpt","zcf-owner","conference.host.set",""])}}if(n.isVideoConference()&&a&&c){var h=n.isUserInSpotLight(r);if(u||h){var g=h?["removeFromSpotLightFromOpt","zcf-spotlight","conference.remove.from.spotlight","active zcl-neg-menu-item"]:["setInSpotLightFromOpt","zcf-spotlight","conference.spotlight.users",""];C+=ZCSmartConferenceTemplates.getDropDownMenuItem(g)}}var v=n.isAllowAudioUnmuteCheckboxEnabled(),S=f||m,I=i.isAudioMuted(),_=i.isAudioUnmuteRestricted(),w=!v;if(S&&(w=!1),d){var b=!0;if(n.isFocusedModeEnabled()&&(b=n.isInFocusedUsers()),!u||I||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["muteAudioFromOpt","zcf-mic","chat.mute",""])),!u||!I||!b||_&&!c||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["unmuteAudioFromOpt","zcf-mic-mute","chat.unmute",""])),!u){var U=i.hasRequestedToSpeak()?["dropSpeakerRequestFromOpt","zcf-close clr-R","channel.cancelapprovalrequest",""]:["raiseSpeakerRequestFromOpt","zcf-raisehand bcast-gold-I","videobroadcast.raisehand",""];C+=ZCSmartConferenceTemplates.getDropDownMenuItem(U)}}else if(u){if(c&&!f){I||w||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["muteUserAudioFromOpt","zcf-mic","chat.mute",""])),I||!w||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["forceMuteUserAudioFromOpt","zcf-mic","chat.mute",""])),!I||!_||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["allowUserToUnmuteAudioFromOpt","zcf-mic-mute","conference.user.unmute.allow",""])),!I||_||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["askUserToUnmuteAudioFromOpt","zcf-mic-mute","conference.user.unmute.ask",""])),!I||!w||_||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["restrictAudioUnmuteForUserFromOpt","zcf-mic-mute","conference.unmute.restrict",""])),Conference.isLowerHandEnabled()&&!S&&(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["removeFromSpeakerFromOpt","zcf-unsub","conference.speaker.remove",""]))}}else c&&i.hasRequestedToSpeak()&&(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["approveSpeakerRequestFromOpt","zcf-raisehand bcast-gold-I","common.approve",""]),C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["denySpeakerRequestFromOpt","zcf-close clr-R","common.decline",""]));d||WmsImpl.isGuestUser()||WmsImpl.isGuestUserId(r)||(C+=ZCSmartConferenceTemplates.getDropDownMenuItem(["openChatFromOpt","zcf-chat mT2","mediacall.chat.open",""])),this.openUserOptions(e,t,o,C,r,i.getName(),i.getDesignation(),i.getDepartmentName())}},openUserOptions:function(e,t,n,i,r,o,s,a){var c=$WC.template.replace('<div id="conf_user_options" class="zcl-menu-wrap no-pointer smartconf-user-opts-cnt font14" user_id="{{user_id}}" userId="{{user_id}}"><div class="smartconf-user-opts-info"><div class="ellips">{{user_name}}</div><div class="ellips clr-lp1 mT4 {{designation_class}}" user_designation>{{user_designation}}</div><div class="ellips clr-lp1 mT4 {{department_class}}" user_department>{{user_department}}</div></div><div class="smartconf-user-opts-list p4">{{options}}</div></div>',{options:i},"InSecureHTML");c=$WC.template.replace(c,{user_id:r,user_name:Users.getName(r,o),user_designation:s||"",user_department:a||"",designation_class:$WC.Util.isEmpty(s)?"dN":"",department_class:$WC.Util.isEmpty(a)?"dN":""}),n.append(c),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:"conf_user_options",doNotClose:function(e,t,n){return n&&e.srcid&&n.target.id===e.srcid},customHide:function(e){$("#"+e.destid).remove()}}),$Util.positionTargetElement(t,n.find("#conf_user_options"))},showNonMemberOptions:function(e,t,n,i){WmsImpl.isGuestUserId(i)||WmsImpl.isGuestUser()||ZCSmartConferenceImpl.getAndSetPeopleInfo([i]);var r=n.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow(),o=r.find("#conf_user_options");if(o.remove(),Clickoutside.clear("conf_user_options"),i!==o.attr("user_id")){var s=Conference.isSpotLightEnabled(),a=n.hasHostPermission(),c="";if(n.isVideoConference()&&s&&a&&n.isUserInSpotLight(i)){c+=ZCSmartConferenceTemplates.getDropDownMenuItem(["removeFromSpotLightFromOpt","zcf-spotlight","conference.remove.from.spotlight","active zcl-neg-menu-item"])}WmsImpl.isGuestUser()||WmsImpl.isGuestUserId(i)||(c+=ZCSmartConferenceTemplates.getDropDownMenuItem(["openChatFromOpt","zcf-chat mT2","mediacall.chat.open",""])),this.openUserOptions(e,t,r,c,i,void 0,void 0,void 0)}},showScreenShareLayoutOptions:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i="ss_layout_dropdowncnt";if(n&&0===t.children().length){var r=ZCSmartConferenceTemplates.getScreenLayoutsHtml(n);t.addClass("active").html(r),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:i,doNotClose:function(e,t,n){return n&&"conf_screen_layout_opts"===n.target.id},customHide:function(e){t.removeClass("active"),$("#"+e.destid).remove()}})}else t.removeClass("active"),$("#"+i).remove(),Clickoutside.clear(i)},setScreenShareView:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getCurrentScreenLayout()!==e){t.setCurrentScreenLayout(e);var n=t.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow();n.removeClass("smartconf-ss-top-view smartconf-ss-rhs-view smartconf-ss-active-speaker-view");var i=$("#conf_screen_layout_opts");i.removeClass("zcf-ss-top-view zcf-ss-rhs-view zcf-ss-active-speaker-view"),i.addClass(ZCSmartConferenceConstants.screenLayouts.getLayoutIcon(e)),t.isScreenInTopView()?n.addClass("smartconf-ss-top-view"):t.isScreenInRhsView()?n.addClass("smartconf-ss-rhs-view"):t.isScreenInActiveSpeakerView()&&n.addClass("smartconf-ss-active-speaker-view"),t.isOldImpl()?ConferenceUI.setActiveSpeakersInAudioStrip(t):ZCSmartConferenceUI.arrangeMediaContainers()}},addAndGetMediaContainer:function(e,t,n){n=n||"";var i=ZCSmartConferenceTemplates.getMediaContainerHtml(e,t,n,"mediaContainer",void 0,!1),r=$(i);return this.getConferenceWindow().find("[mainSpeakerSection]").append(r),this.handleContainerVisibility(),r},addAndGetScreenContainer:function(e,t,n){var i=ZCSmartConferenceTemplates.getScreenContainerHtml(e,t,n.getCurrentScreenLayout()),r=$(i),o=this.getConferenceWindow();return o.find("[screenSection]").append(r),o.addClass("smartconf-screen-shr"),ZCSmartConferenceImpl.getCurrentSession().isInGridLayout()?(o.attr("wasInGridLayout","true"),this.switchToStageLayout(!0)):this.arrangeMediaContainers(),this.handleResize(),r},addAndSetPresentationContainer:function(e,t){if(!e.find("#presentation_contatiner").length){var n=ZCSmartConferenceTemplates.getPresentationContainerHtml(t);if(ZCSmartConferenceImpl.isSmartConferenceSession(t)){var i=this.getConferenceWindow();i.find("[presentationSection]").append(n),i.addClass("smartconf-presentation"),t.isInGridLayout()?(i.attr("wasInGridLayout","true"),this.switchToStageLayout(!0)):this.arrangeMediaContainers(),this.handleResize()}else $("#conferencevideowrapper").hide(),e.addClass("huddle-screen-view huddle-presentation-screen-view").removeClass("hide"),e.prepend(n)}},handlePresentationStartOpenOrClose:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();e&&e.getType()==Conference.types.AUDIO&&ConferenceUI.updateAudioConferenceUI()},addAndGetWhiteBoardContainer:function(e,t){var n=e.find("[whiteBoardContainer]");if(0===n.length){var i=ZCSmartConferenceTemplates.getWhiteBoardContainerHtml(t),r=$(i),o=this.getConferenceWindow();o.find("[wbSection]").append(r),o.addClass("smartconf-white-board"),t.isInGridLayout()?(o.attr("wasInGridLayout","true"),this.switchToStageLayout(!0)):this.arrangeMediaContainers(),this.handleResize(),n=r}var s=t&&t.hasWhiteBoard()?t.getCurrentWhiteBoardId():"",a=t&&t.hasWhiteBoard()?WhiteBoard.getBoardURL(s,t.getId()):"";if(a){var c=n.find("iframe")[0];c.setAttribute("data-uid",s),c.onload=function(){n.find("#whiteboardloader").remove(),$(c).removeClass("vsbH"),WhiteBoard.setUpWhiteBoardBridge(c,(function(){WhiteBoard.updateActiveEditors(e.find("#wb_participants"),t),ZCSmartConferenceUI.addRequestEditWhiteboardOption()}))},c.src=a}return n},updateUserInfoInWhiteBoardContainer:function(e){if(e&&e.hasWhiteBoard()){var t=ZCSmartConferenceUI.getConferenceWindow().find("[whiteBoardContainer]");t&&WhiteBoard.updateActiveEditors(t.find("#wb_participants"),e)}},handleWhiteboardFullScreenOpen:function(e){e.setPreviousSSLayout(e.getCurrentScreenLayout()),ZCSmartConferenceUI.setScreenShareView(ZCSmartConferenceConstants.screenLayouts.ACTIVE_SPEAKER_VIEW);var t=ZCSmartConferenceUI.getConferenceWindow();t&&ZCSmartConferenceUI.adjustContainerView(t.find("[activeSpeakerSection]"),t.find("[mainsection]"),ZCMediaConstants.minimizedWindowRange.visibleArea)},handleWhiteboardFullScreenExit:function(e){e instanceof ZCSmartConferenceSession?ZCSmartConferenceUI.setCurrentPresenterViewPosition(e):ConferenceUI.getConferenceWindow().find("#presenter_view").css({top:"",left:""});var t=ZCSmartConferenceUI.getConferenceWindow();t&&ZCSmartConferenceUI.adjustContainerView(t.find("[activeSpeakerSection]"),t.find("[mainsection]"),ZCMediaConstants.minimizedWindowRange.visibleArea)},handlePreviousSSLayout:function(e){var t=e.getPreviousSSLayout();ZCSmartConferenceUI.setScreenShareView(t),e.setPreviousSSLayout(void 0)},addRequestEditWhiteboardOption:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e.getConfigurations().isAllowedToEditWhiteboard()&&e.hasWhiteBoard()&&!WhiteBoard.hasEditPermissionForCurrentBoard(ZCSmartConferenceImpl.getCurrentUserId(),e)){var t='<span smartconferencebutton purpose="raiseWbEditRequest" class="zcl-btn-xs zcl-btn--primary" '+(WhiteBoard.isMaxActiveEditorsReached(e)?"disabled":"")+`>${I18N("media.request.edit.wb.raise")}</span>`,n=ZCSmartConferenceUI.getConferenceWindow().find("[whiteBoardContainer]");n.find('[purpose="raiseWbEditRequest"],[purpose="dropWbEditRequest"]').length||n.find("#wb_participants").before(t)}},checkAndRemoveEditRequestButton:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e.getConfigurations().isAllowedToEditWhiteboard()&&e.hasWhiteBoard())if(WhiteBoard.hasEditPermissionForCurrentBoard(ZCSmartConferenceImpl.getCurrentUserId(),e))this.removeRequestEditWhiteboardOption();else{var t=ZCSmartConferenceUI.getConferenceWindow().find("[whiteBoardContainer]").find('[purpose="raiseWbEditRequest"]');WhiteBoard.isMaxActiveEditorsReached(e)?t.attr("disabled",""):t.removeAttr("disabled")}},removeRequestEditWhiteboardOption:function(){ZCSmartConferenceUI.getConferenceWindow().find("[whiteBoardContainer]").find('[purpose="raiseWbEditRequest"],[purpose="dropWbEditRequest"]').remove()},toggleRequestEditWhiteboardButton:function(e,t){var n,i=e instanceof ZCSmartConferenceSession?"smartconferencebutton":"conferencebutton";t?((n=$("["+i+'][purpose="raiseWbEditRequest"]')).text(Resource.getRealValue("common.cancel")),n.attr("purpose","dropWbEditRequest")):((n=$("["+i+'][purpose="dropWbEditRequest"]')).text(Resource.getRealValue("media.request.edit.wb.raise")),n.attr("purpose","raiseWbEditRequest"))},removeScreenContainer:function(e,t){var n=this.getConferenceWindow(),i=n.find('[screenContainer][userId="'+e+'"]');i.length&&(i.hide(),MediaUtil.removeVideoElemsStreamInContainer(i),i.remove(),n.removeClass("smartconf-screen-shr")),"true"!==n.attr("wasInGridLayout")||this.isInMinimizedView()||t.isFocusedModeEnabled()||t.isSpotLightEnabled()?this.arrangeMediaContainers():(n.attr("wasInGridLayout","false"),this.switchToVideoGridLayout()),this.handleResize()},removeWhiteBoardContainer:function(e){var t=this.getConferenceWindow(),n=t.find("[whiteBoardContainer]");n.length&&(n.remove(),t.removeClass("smartconf-white-board")),"true"!==t.attr("wasInGridLayout")||this.isInMinimizedView()||e.isFocusedModeEnabled()||e.isSpotLightEnabled()?this.arrangeMediaContainers():(t.attr("wasInGridLayout","false"),this.switchToVideoGridLayout()),this.handleResize()},removePresentationContainer:function(e){var t=this.getConferenceWindow(),n=t.find("#presentation_contatiner");n.length&&(n.remove(),t.removeClass("smartconf-presentation")),"true"!==t.attr("wasInGridLayout")||this.isInMinimizedView()||e.isFocusedModeEnabled()||e.isSpotLightEnabled()?this.arrangeMediaContainers():(t.attr("wasInGridLayout","false"),this.switchToVideoGridLayout()),this.handleResize()},setStreamInDeviceWidget:function(e){if($WC.$Win.isExist("conference_settings_win")){var t=$WC.$Win.get("conference_settings_win");t.find("#media_device_widget").length&&MediaUtil.setAndPlayStreamInMediaContainer(t.find("#smartconference_settings_preview"),e,!0)}},updateUserInfo:function(e,t,n){if(e&&t){var i=e.attr("info_set_user_id")===t.getId();e.attr("info_set_user_id",t.getId());var r=WmsImpl.isGuestUserId(t.getId());e.toggleClass("smartconf-guest-video-cnt",r);var o=Users.getName(t.getId(),t.getName());e.find("[userName]").text(o).attr("tooltip-title",o),i||ZCSmartConferenceImpl.updateUserImageContainer(t.getId(),e),e.find("[hostIndicator]").toggleClass("dN",!t.isHost()),this.updateMutedInfo(e,t),this.updateNvfInfoInMediaContainer(e,t,n),this.showGifInMediaContainer(e,t,n)}},updateUserStatus:function(e,t){var n=$.escapeSelector(e),i=$("#smartconferenceusersection").find('[smartconferenceparticipant][userId="'+n+'"], [pendingparticipant][userId="'+n+'"]');i.length&&i.find("[userStatus]").attr("class",t)},updatePeopleInfo:function(e,t){var n=t.getDesignation()||"",i=t.getDepartmentName()||"",r=(e instanceof ConferenceSession?ConferenceUI:ZCSmartConferenceUI).getConferenceWindow().find("#conf_user_options");if(t.getId()===r.attr("user_id")){var o=r.find("[user_designation]");o.text(n).attr("tooltip-title",n),o.toggleClass("dN",$WC.Util.isEmpty(n));var s=r.find("[user_department]");s.text(i).attr("tooltip-title",i),s.toggleClass("dN",$WC.Util.isEmpty(i))}},handleNvfStatus:function(e){var t=e instanceof ConferenceSession?ConferenceUI:ZCSmartConferenceUI,n=e.getReactionsDB();t.getConferenceWindow().toggleClass("smartconf-nvf-disabled",!n.isNonVerbalFeedbackEnabled())},setNvfCountInUI:function(e){if(e.hasHostPermission()){var t=e.getReactionsDB().getVoteCount();for(var n in t)$("#nvf-"+n+"-count").text(t[n]);var i=$("#non_verbal_feedback");i.find("#vote").toggleClass("dN",!t.yes&&!t.no),i.find("#speed").toggleClass("dN",!t.fast&&!t.slow),i.find("#timeout").toggleClass("dN",!t.timeout)}},updateNvfInfo:function(e,t,n){if(void 0!==t){if(n||ZCSmartConferenceUI.applyRhsGestureFilterForUser(e,t),e.isVideoConference()&&e.isCurrentUser(t.getId())&&this.updateNvfInfoInMediaContainer(ZCSmartConferenceUI.getLocalBottomBandMediaContainer(),t,e),this.updateNvfInfoInRhs(e,t),this.updateNvfInfoInBottomPane(e,t),t.isActiveMember()){var i=t.getId();if(e instanceof ZCSmartConferenceSession){var r=void 0;e.isCurrentUser(i)?(r=e.getLocalMediaContainer(),e.isInGridLayout()&&this.updateNvfInfoInMediaContainer(ZCSmartConferenceUI.getLocalGridMediaContainer(),t,e)):r=this.isScreenInView()||e.isInStageLayout()?e.getUserMediaContainer(i):e.getUserGridMediaContainer(i)}else{var o=$.escapeSelector(i);if(e.isAudioStripVisible()){var s=$("#audio_strip").find('[audio_strip_item][previewUserId="'+o+'"]');s.length&&this.updateNvfInfoInMediaContainer(s,t,e)}else if(e.isInGridLayout()){var a=$("#audio_grid_dom_holder").find("[audio_grid_box][user_id="+o+"]");a.length&&this.updateNvfInfoInMediaContainer(a,t,e)}r=$("#usercard"+o)}}this.updateNvfInfoInMediaContainer(r,t,e)}},updateNvfInfoInMediaContainer:function(e,t,n){if(e&&0!==e.length){var i=n.getReactionsDB(),r=i.isNonVerbalFeedbackEnabled(),o=i.getUserVote(t.getId()),s="";r&&void 0!==o&&(s=ZCSmartConferenceTemplates.getGestureHTML(o)),e.find("[nvf_preview]").html(s)}},updateNvfInfoInRhs:function(e,t){var n=ZCSmartConferenceUI.getListViewInstance();if(void 0!==n&&void 0!==t){var i=n.getItemInCurrentView(t.getId());if(0!==i.length){var r=e.getReactionsDB(),o=r.isNonVerbalFeedbackEnabled(),s=r.getUserVote(t.getId()),a="";o&&void 0!==s&&(a=ZCSmartConferenceTemplates.getGestureHTML(s)),i.find("[nvfRhsPreview]").html(a)}}},updateNvfInfoInBottomPane:function(e,t){var n=e.getReactionsDB(),i=n.isNonVerbalFeedbackEnabled(),r=n.getUserVote(t.getId()),o="";i&&void 0!==r&&(o=ZCSmartConferenceTemplates.getGestureHTML(r));var s=$("#bottomparticipantspane").find('[conferenceparticipant][userid="'+t.getId()+'"]');s.length&&s.find("[nvf_preview]").html(o)},resetNvfVotes:function(e,t){for(var n in t)this.updateNvfInfo(e,e.getMember(n),!0)},showGifInUI:function(e,t){if(void 0!==t){if(e.isCurrentUser(t.getId())){var n="";n=e.isVideoConference()?ZCSmartConferenceUI.getLocalBottomBandMediaContainer():ConferenceUI.getLocalBottomBandMediaContainer(),this.showGifInMediaContainer(n,t,e)}if(this.showGifInBottomPane(e,t),t.isActiveMember()){var i=t.getId();if(e instanceof ZCSmartConferenceSession){var r=void 0;e.isCurrentUser(i)?(r=e.getLocalMediaContainer(),e.isInGridLayout()&&this.showGifInMediaContainer(ZCSmartConferenceUI.getLocalGridMediaContainer(),t,e)):r=this.isScreenInView()||e.isInStageLayout()?e.getUserMediaContainer(i):e.getUserGridMediaContainer(i)}else{var o=$.escapeSelector(i);if(e.isAudioStripVisible()){var s=$("#audio_strip").find('[audio_strip_item][previewUserId="'+o+'"]');s.length&&this.showGifInMediaContainer(s,t,e)}else if(e.isInGridLayout()){var a=$("#audio_grid_dom_holder").find("[audio_grid_box][user_id="+o+"]");a.length&&this.showGifInMediaContainer(a,t,e)}r=$("#usercard"+o)}}this.showGifInMediaContainer(r,t,e)}},showGifInMediaContainer:function(e,t,n){e&&0!==e.length&&this.setGifInElem(e.find("[gif_preview]"),t,n)},showGifInBottomPane:function(e,t){var n=$("#bottomparticipantspane").find('[conferenceparticipant][userid="'+t.getId()+'"]');n.length&&this.setGifInElem(n.find("[gif_preview]"),t,e)},setGifInElem:function(e,t,n){var i=n.getReactionsDB().getUserGifObj(t.getId());if(void 0!==i){var r=e.find("[gif_elem]");if(0===r.length||r[0].src!==i.url||i.time-parseInt(r.attr("time"))>=ZCSmartConferenceConstants.gifExpiry){if($Util.getSyncedCurrentTime()-i.time>ZCSmartConferenceConstants.gifExpiry)return;e.html(ZCSmartConferenceTemplates.getGifHTML(t,i.time,i.url));var o=e.find("[gif_cnt]");setTimeout((function(){o.remove()}),ZCSmartConferenceConstants.gifDuration)}}else e.empty()},removeDeviceSettingsPopup:function(){var e=$("#bottom_band_device_settings");e.find("#media_device_widget");return!e.length||(e.remove(),ZCJQuery("#bottom_band_video_preview").find('[purpose="openDeviceSettings"]').removeClass("active"),Clickoutside.clear("bottom_band_device_settings"),MediaDeviceWidget.handleCustomUIClose(),!1)},createDeviceSettings:function(e,t,n){e&&Clickoutside.handleClickOnChild(e);let i=ZCSmartConferenceImpl.getCurrentActiveSession(),r=i.getConfigurations().configurations;var o="modalwindow zcalgncntr zcbg_mask avcliq-setting nite-mode",s=i.getCurrentMember();!s.isCohost()&&s.isAudioUnmuteRestricted()&&s.isAudioMuted()&&(o+=" smartconf-unmute-restricted-user"),i.isOldImpl()||!i.isFocusedModeEnabled()||i.isInFocusedUsers()||(o+=" smartconf-nonfocused-user"),n&&(o+=" dN"),$WC.$Win.create({id:"conference_settings_win",class:o,html:ConferenceTemplates.getSettingsLayoutHtml(r,n),closefn:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();e&&(MediaUtil.clearAudioPreview(e),e.clearVideoEffectsPreview())},openfn:function(){n&&(i.isVideoConference()?ZCSmartConferenceHandler.UIEvents.setMediaDevices(e):ConferenceHandler.UIEvents.setMediaDevices(e),$("#conference_settings_win").removeClass("dN"))}}),i.hasHostPermission()||n||(i instanceof ConferenceSession?ConferenceHandler.UIEvents.setMediaDevices(e):i instanceof ZCSmartConferenceSession&&ZCSmartConferenceHandler.UIEvents.setMediaDevices(e))},updateMutedInfo:function(e,t){e&&(e.toggleClass("smartconf-audio-muted",t.isAudioMuted()),e.toggleClass("smartconf-video-muted",t.isVideoMuted()))},updateMutedInfoInList:function(e,t){var n=this.getConferenceWindow().find('[smartconferenceparticipant][userId="'+$.escapeSelector(t.getId())+'"]');this.setParticipantMuteOption(e,t,n)},updateUserNames:function(){if(ZCSmartConferenceImpl.hasCurrentSession()){var e=ZCSmartConferenceImpl.getCurrentSession().getDataChannelData(!1);if(e){var t=JSON.parse(e.syncData.video);WmsImpl.isGuestUser();this.getConferenceWindow().find("[mediaContainer]").each((function(){var e=$(this),n=e.attr("videoStreamId");if(n){var i=t[n];if(i){var r=WmsImpl.isGuestUserId(i);e.toggleClass("smartconf-guest-video-cnt",r);var o=Users.getName(i);e.find("[userName]").text(o).attr("tooltip-title",o)}}}))}}},handleContainerVisibility:function(){if(ZCSmartConferenceImpl.hasCurrentSession()||ZCSmartConferenceImpl.hasOutgoingSession()){var e=ZCSmartConferenceImpl.getCurrentSession();e||(e=ZCSmartConferenceImpl.getOutgoingSession());var t=e.getLocalMediaContainer();ZCSmartConferenceUI.updateUserInfo(t,e.getCurrentMember(),e);var n=e.getDataChannelData(!0);if(n){var i=Conference.isSpotLightEnabled(),r=i?JSON.parse(n.syncData.spotlightusers):{},o=JSON.parse(n.syncData.video),s=(e.getVideoStreamIds(),e.getCurrentUserId());e.getMainSpeakerCount(),WmsImpl.isGuestUser();this.getConferenceWindow().find("[mediaContainer]").each((function(){var n=$(this),a=n.attr("videoStreamId"),c=$WC.Util.isEmpty(a);if(a){i&&n.toggleClass("smartconf-spotlight-user",!$WC.Util.isEmpty(r[a]));var d=o[a];if(d){var l=e.getMember(d);if(l)ZCSmartConferenceUI.updateUserInfo(n,l,e),i&&n.removeClass("smartconf-non-member");else{var u=n.attr("info_set_user_id")===d;n.attr("info_set_user_id",d);var f=WmsImpl.isGuestUserId(d);n.toggleClass("smartconf-guest-video-cnt",f),i&&n.addClass("smartconf-non-member");var m=Users.getName(d);n.find("[userName]").text(m).attr("tooltip-title",m),u||ZCSmartConferenceImpl.updateUserImageContainer(d,n)}d===s?(n.insertBefore(t),t.removeClass("dN"),c=!1):c=!0}}else{"local"===n.attr("streamSource")&&(containerStreamId=e.getCurrentUserVideoStreamId(),c="undefined"!=typeof containerStreamId,i&&(n.toggleClass("smartconf-spotlight-user",!$WC.Util.isEmpty(r[containerStreamId])),n.removeClass("smartconf-non-member")))}n.toggleClass("dN",!c)})),this.arrangeMediaContainers(),this.handleResize()}else this.handleResize()}},arrangeMediaContainers:function(){var e=ZCSmartConferenceImpl.getCurrentSession(),t=this.getConferenceWindow(),n=e.getVideoStreamIds(),i=e.getMainSpeakerCount(),r={},o=[],s=void 0,a=t.find("[mediaContainer]");e.isScreenInRhsView()||(a.removeClass("smartconf-hide-video-screenshare-rhs"),e.resetHiddenUserIdsFromStrip()),a.each((function(){var t=$(this),i=t.attr("videoStreamId");if("local"===t.attr("streamSource")&&(s=t,void 0===(i=e.getCurrentUserVideoStreamId())&&!1),n&&i&&!t.hasClass("dN")){var a=n.indexOf(i);void 0!==a&&(r[a]=t,o.push(a))}})),o.sort((function(e,t){return e-t})),this.updateVideoRestrictionInMediaContainers(e,r,o);for(var c=t.find("[mainSpeakerSection]"),d=t.find("[lhsSpeakerSection]"),l=t.find("[rhsSpeakerSection]"),u=t.find("[filmStripSection]"),f=(t.find("[mainSubSpeakerSection]"),t.find("[mainSubTopSpeakerSection]")),m=t.find("[videoStripSection]"),C=t.find("[activeSpeakerSection]"),p=0,h=!0,g=!1,v=!1,S=!1,I=!1,_=!1,w=this.isScreenInView()||this.isWhiteBoardInView()||this.isPresentationInView(),b=e.isSpotLightEnabled(),U=0;U<o.length;U++){var R=o[U],T=r[R];p<i?(w&&!e.isInMinimizedView()?(m.append(T),_=!0,e.isScreenInActiveSpeakerView()?this.setActiveSpeakerInPresenterView(m,T,C,e):this.setActiveSpeakerInVideoStrip(m,T,C)):e.isInGridLayout()?this.setActiveSpeakerInGridView(T,e):(c.append(T),g=!0),p++):(e.isInMinimizedView()?(u.append(T),I=!0):w?(e.isScreenInActiveSpeakerView()?f.append(T):m.append(T),_=!0):b?c.append(T):h?(v=!0,d.append(T)):(S=!0,l.append(T)),h=!h)}p<i&&(w&&!e.isInMinimizedView()?(m.append(s),_=!0,e.isScreenInActiveSpeakerView()?this.setActiveSpeakerInPresenterView(m,s,C,e):this.setActiveSpeakerInVideoStrip(m,s,C)):e.isInGridLayout()?this.setActiveSpeakerInGridView(s,e):(c.append(s),g=!0),s.removeClass("dN")),t.toggleClass("smartconf-no-partition",!v&&!S),t.toggleClass("smartconf-single-partition",v&&!S),t.toggleClass("smartconf-double-partition",v&&S),c.toggleClass("dN",!g),d.toggleClass("dN",!v),l.toggleClass("dN",!S),m.toggleClass("dN",!_),t.toggleClass("smartconf-videostripview",_),t.toggleClass("smartconf-showftr",I),e.isScreenInRhsView()&&this.adjustSpeakersAtRhsStrip(o,r,m);var y=$("#bottomparticipantspane");this.handleBottomPaneVisibility(y),ZCSmartConferenceUI.handleBottomPaneParticipantsVisibility(y)},setActiveSpeakerInVideoStrip:function(e,t,n){e.find(".smartconf-strip-activespeaker").removeClass("smartconf-strip-activespeaker"),t.addClass("smartconf-strip-activespeaker"),this.resetActiveSpeakerViewFromPresenterView(n)},setActiveSpeakerInPresenterView:function(e,t,n,i){t.addClass("smartconf-strip-activespeaker"),n.append(t),n.removeClass("dN"),ZCSmartConferenceUI.setDefaultPresenterViewStyles(n,i),e.addClass("dN"),n.setAsDraggable(this.getDraggableCriteria("smartconf_main_container"));var r=MediaUtil.getCriteriaForResize("smartconf_main_container");r.widthRange.min=180,r.heightRange.min=140,r.resizeBoundaryElem=$("#smartconf_main_container"),n.setAsResizable(r)},getDraggableCriteria:function(e){return{areaToBeVisible:{width:70,height:70},dragboundary:$("#"+e),isPositionBasedOnElem:!0,isClickoutside:!0}},resetActiveSpeakerViewFromPresenterView:function(e){e.addClass("dN"),e.setAsNonDraggable(),e.removeResizable();var t=ZCSmartConferenceImpl.getCurrentSession();ZCSmartConferenceUI.setCurrentPresenterViewPosition(t)},setDefaultPresenterViewStyles:function(e,t){var n=t.getPresenterViewWindowPosition();ZCSmartConferenceUI.isPresentationInView()&&(n.top="calc(100% - 215px)"),e.css(n)},setCurrentPresenterViewPosition:function(e){var t=ZCSmartConferenceUI.getConferenceWindow().find("[activeSpeakerSection]");if(!$(t).is(":hidden")){var n={width:t.width(),height:t.height(),left:t.offset().left,top:t.offset().top};e.setPresenterViewWindowPosition(n)}},adjustContainerView:function(e,t,n){var i=0,r=0;void 0!==t?(i=t.innerHeight(),r=t.innerWidth()):(i=window.innerHeight,r=window.innerWidth);var o=e.offset();if(o){var s=o.top,a=o.left,c=e.height(),d=e.width(),l=this.getContainerPositionOffset(s,i,c,n.height),u=this.getContainerPositionOffset(a,r,d,n.width);l>0&&e.css("top",i-l),u>0&&e.css("left",r-u)}},getContainerPositionOffset:function(e,t,n,i){var r=0;return e>t?r=i:t-e<i?r=i:e<0&&((e=Math.abs(e))>=n?r=t-i:n-e<i&&(r=i)),r},adjustPositionWithMainWindow:function(e,t){var n=t.innerHeight();t.offset().top-e.offset().top+n>e.innerHeight()&&t.css("bottom",0)},adjustSpeakersAtRhsStrip:function(e,t,n){var i=ZCSmartConferenceImpl.getCurrentSession(),r=n.innerHeight(),o=[],s=1;if(void 0!==r){var a=Math.floor(r/192);for(var c in e){var d=t[e[c]];if(s>a){d.addClass("smartconf-hide-video-screenshare-rhs");var l="";if("local"===d.attr("streamSource"))l=ZCSmartConferenceImpl.getCurrentUserId();else{var u=d.attr("videostreamid");l=i.getUserIdWithVideoStreamId(u)}o.push(l)}else d.removeClass("smartconf-hide-video-screenshare-rhs");s++}}i.setHiddenUserIdsFromStrip(o)},updateVideoRestrictionInMediaContainers:function(e,t,n){var i=e.isDownStreamRestrictedToMainSpeakers(),r=i||e.isLowBandwidthModeEnabled()&&void 0!==e.getBandwidthAllowedSpeakerCount();for(var o in t){t[o].toggleClass("smartconf-video-hide",r)}if(r){var s=e.getBandwidthAllowedSpeakerCount();i&&(s=e.getMainSpeakerCount());for(o=0;o<s&&!(o>=n.length);o++){t[n[o]].removeClass("smartconf-video-hide")}}},constructBottomPane:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e&&!(this.maxAvailableSlotsInBottomPane<=0)){var t=e.getDataChannelData(!0);if(t){var n=$("#bottomparticipantspane");if(!(n.find("[conferenceparticipant]").length>0)){var i=JSON.parse(t.syncData.video),r=Object.values(i),o=0,s="",a=e.getMembers();for(var c in a){if(o===this.maxAvailableSlotsInBottomPane)break;var d=a[c];r.includes(c)||(s+=ZCSmartConferenceTemplates.getBottomPaneSectionListHtml(e,d),o++)}if(o>0){n.find("[list]").prepend(s);var l=e.getMembersCount()-o-r.length;n.find("[participantshiddencount]").text("+"+l).toggleClass("dN",l<=0)}}}}},updateBottomPaneAvailableSlots:function(e,t){if(ZCSmartConferenceImpl.getCurrentSession()){var n=e.find("[list]").width(),i=Math.floor(2.2),r=Math.floor(n/50);this.maxAvailableSlotsInBottomPane=i*r-1,t&&this.handleBottomPaneParticipantsVisibility(e)}},handleBottomPaneParticipantsVisibility:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){var n=t.getDataChannelData(!0);if(n){for(var i=JSON.parse(n.syncData.video),r=Object.values(i),o=t.getHiddenUserIdsFromStrip(),s=0;s<r.length;s++)o.includes(r[s])&&r.splice(s);var a=ZCSmartConferenceUI.getBottomPaneSearchValue(),c=void 0!==a&&a.length>0;for(var d in r){var l=r[d];e.find('[conferenceparticipant][userId="'+l+'"]').remove()}var u=t.getMembersCount();if(t.canShowBottomPane()){var f=e.find("[conferenceparticipant]");c&&f.each((function(){var e=$(this),n=e.attr("userId"),i=t.getMember(n);if(i){var r=Users.getName(n,i.getName());r&&-1===r.toLowerCase().indexOf(a)&&e.remove()}else e.remove()}));var m=f.length,C=e.find("[list]");if(this.maxAvailableSlotsInBottomPane>m){var p=t.getMembers();for(var l in p){if(m===this.maxAvailableSlotsInBottomPane)break;var h=p[l],g=Users.getName(l,h.getName());c&&-1===g.toLowerCase().indexOf(a)?C.find('[conferenceparticipant][userId="'+l+'"]').remove():r.includes(l)||e.find('[conferenceparticipant][userId="'+l+'"]').length||(C.prepend(ZCSmartConferenceTemplates.getBottomPaneSectionListHtml(t,h)),m++,ZCSmartConferenceUI.showGifInBottomPane(t,h))}}else if(m>0&&this.maxAvailableSlotsInBottomPane<m)for(d=m-1;d>=this.maxAvailableSlotsInBottomPane&&!(d<0);d--){f[d].remove(),m--}if(ZCSmartConferenceUI.handleSearchResultsInBottomPane(C),c)e.find("[participantshiddencount]").addClass("dN");else if(e.find("[conferenceparticipant]").length>0){var v=u-m-r.length;e.find("[participantshiddencount]").text("+"+v).toggleClass("dN",v<=0)}}else this.handleBottomBandHeadShots(this.getConferenceWindow(),t,u,r)}}},handleBottomBandHeadShots:function(e,t,n,i){for(var r=e.find("#showBottomPaneOpt"),o=n-i.length,s=[],a=[r.find("[previewImageFirst]"),r.find("[previewImageSecond]"),r.find("[previewImageThird]")],c=0;c<a.length;c++){var d=a[c];if(o>0){var l=d.attr("previewUserId");if(s.includes(l)||void 0===l||void 0===t.getMember(l)||i.includes(l)){var u=t.getMembers();for(var f in u)if(!i.includes(f)&&!s.includes(f)){d.attr("previewUserId",f),d.find("[previewImage]").attr("src",Users.getImgUrlById(f)),s.push(f);break}}else s.push(l);d.removeClass("dN"),o--}else d.addClass("dN")}r.find("[count]").text("+"+o),a[0].toggleClass("smartconf-pane-img-empty",o<=0)},handleBottomPaneVisibility:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){var n=e.is(":visible"),i=t.getMembersCount(),r=i>t.getSpeakerCount()||t.getSilentMembersCount()>0||t.isFocusedModeEnabled()&&i>t.getFocusedUsersCount();e.toggleClass("dN",!r),this.getConferenceWindow().find("#showBottomPaneOpt").toggleClass("hide",!r),r!==n&&this.handleResize()}},populateYetToJoinList:function(e,t){var n=this.getListViewInstance();if(void 0!==n){var i=ZCSmartConferenceUI.getRhsSearchValue(),r=void 0!==i&&i.length>0,o=void 0!==ZCSmartConferenceUI.getRhsGestureFilterMap();for(var s in t){var a=t[s],c=!0;if(r){var d=e.getInvitedMember(a),l=d?d.name:void 0;void 0===l&&(l=e.getLeftMemberName(a));var u=Users.getName(a,l);void 0!==u&&-1!==u.toLowerCase().indexOf(i)||(c=!1)}o&&(c=!1),!c||e.isHost(a)||WmsImpl.isLocalUser(a)||WmsImpl.isGuestUserId(a)||void 0!==e.getMember(a)||n.switchCategory(a,void 0,ZCSmartConferenceConstants.rhsListCategories.YET_TO_JOIN)}this.updateHeadersStatus()}},updateBottomPaneList:function(){var e=$("#bottomparticipantspane");this.handleBottomPaneVisibility(e),this.handleBottomPaneParticipantsVisibility(e)},removeUserFromBottomPaneList:function(e,t){var n=$("#bottomparticipantspane");n.find('[conferenceparticipant][userId="'+t+'"]').remove(),this.handleBottomPaneVisibility(n),this.handleBottomPaneParticipantsVisibility(n)},addUserInList:function(e,t){var n=e.getMember(t),i=$("#smartconferenceusersection"),r=this.getListViewInstance();if(void 0!==r){var o=!0,s=ZCSmartConferenceUI.getRhsSearchValue();if(void 0!==s&&s.length>0){var a=Users.getName(t,n.getName());void 0!==a&&-1!==a.toLowerCase().indexOf(s)||(o=!1)}var c=ZCSmartConferenceUI.getRhsGestureFilterMap();if(void 0!==c)c[e.getReactionsDB().getUserVote(t)]||(o=!1);o&&r.switchCategory(t,void 0,this.getUserCurrentCategory(e,n)),this.setParticipantMuteOption(e,n,i.find('[smartconferenceparticipant][userId="'+n.getId()+'"]')),e.isCurrentUser(t)&&this.setMuteRestrictionInfo(!1)}ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE),this.updateHeadersStatus(),this.updateMembersCount(),ZCSmartConferenceUI.handleSearchResultsInRhsUserList(i)},modifyUserInList:function(e,t){this.addUserInList(e,t)},removeUserFromList:function(e,t){this.removeUserFromBottomPaneList(e,t);var n=this.getListViewInstance();void 0!==n&&n.removeItem(t),ZCSmartConferenceUI.populateYetToJoinList(e,[t]),ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE),this.updateHeadersStatus(),this.updateMembersCount(),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection"))},getUserCurrentCategory:function(e,t){var n=e.hasHostPermission();return e.isHost(t.getId())?ZCSmartConferenceConstants.rhsListCategories.HOST:t.isCohost()?ZCSmartConferenceConstants.rhsListCategories.COHOSTS:n&&t.hasRequestedToSpeak()?ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS:!e.isOldImpl()&&e.isUserInSpotLight(t.getId())?ZCSmartConferenceConstants.rhsListCategories.SPOTLIGHT_PARTICIPANTS:t.isSilentMember()?ZCSmartConferenceConstants.rhsListCategories.SILENT_PARTICIPANTS:ZCSmartConferenceConstants.rhsListCategories.ACTIVE_PARTICIPANTS},updateMembersCount:function(){_rAF((function(){var e=ZCSmartConferenceImpl.getCurrentSession();ZCSmartConferenceUI.getParticipantCountDom().text(e.getMembersCount())}))},updateViewersCount:function(){_rAF((function(){let e=ZCSmartConferenceImpl.getCurrentActiveSession();e.getConferenceWindow().find("[viewers_count]").text(e.getViewersCount())}))},updateWaitingLobbyRequestsList:function(e){if(e.hasHostPermission()){var t=e.getWaitingLobbyRequestsCount();$("#waitinglobbyrequestscnt").toggleClass("dN",t<=0),$("#waitinglobbyrequestscount").text(t);var n=$("#waitingroom_reqs_list");if(n.length>0){var i=e.getWaitingLobbyRequests();n.html(ZCSmartConferenceTemplates.getRequestedWaitingLobbyUsersHtml(i))}}else e.resetAllWaitingLobbyRequest(),$("#waitinglobbyrequestscnt").addClass("dN")},updatePresentationRequestsList:function(e){var t=this.getConferenceWindow();if(e.hasHostPermission()){var n=e.getRequestedPresentationsCount(),i=t.find("[presentrequestscnt]").toggleClass("dN",n<=0);n||i.find("#"+e.getId()+"presentrequestscnt").remove(),i.find("[count]").text(n)}else t.find("[presentrequestscnt]").toggleClass("dN",!0)},updateHeadersStatus:function(){_rAF((function(){var e=ZCSmartConferenceImpl.getCurrentSession(),t=ZCSmartConferenceUI.getListViewInstance(),n=e.hasHostPermission(),i=ZCSmartConferenceUI.getConferenceWindow().find("[raisedhandscountcnt]"),r=n?void 0!==t?t.getItemsCountByCategory(ZCSmartConferenceConstants.rhsListCategories.SPEAKER_REQUESTS):e.getRequestedSpeakersCount():0;i.toggleClass("dN",r<=0),r>0&&i.find("[count]").text(r),ZCSmartConferenceUI.updatePresentationRequestsList(e),ZCSmartConferenceUI.setParticipantMuteAllOption(e)}))},updateNetworkHealth:function(e){var t=this.getConferenceWindow().find("[network_health_indicator]");MediaUtil.updateNetworkHealth(e,t)},handleSearchResultsInRhsUserList:function(e){if(void 0!==ZCSmartConferenceUI.getListViewInstance()){var t=ZCSmartConferenceUI.getRhsSearchValue(),n=void 0!==t&&t.length>0;if(!n)n=void 0!==ZCSmartConferenceUI.getRhsGestureFilterMap();var i=e.find("#smartconferenceuserslist");if(n&&0===i.find("[conferenceparticipant], [smartconferenceparticipant], [pendingparticipant], [knockedparticipant]").length){if(0===i.find(".smartconf-list-empty").length){var r=$Util.emptyStateHtml({parentclass:"smartconf-list-empty",imageclass:"no_such_user",title:Resource.getRealValue("conference.search.noresult")});i.html(r)}}else i.find(".smartconf-list-empty").remove()}},isCurrentChat:function(e){return $("#smartconferencechatsection").find("#"+e).length>0},isRhsOpen:function(){return this.getConferenceWindow().hasClass("show-rhs")},isChatInView:function(){return this.isRhsOpen()&&!$("#smartconferencechatsection").hasClass("rhs-dN")&&!this.isInMinimizedView()},isScreenInView:function(){return this.getConferenceWindow().hasClass("smartconf-screen-shr")},isWhiteBoardInView:function(){return this.getConferenceWindow().hasClass("smartconf-white-board")},isPresentationInView:function(){return this.getConferenceWindow().hasClass("smartconf-presentation")},isInMinimizedView:function(){return ZCSmartConferenceImpl.hasCurrentSession()&&ZCSmartConferenceImpl.getCurrentSession().isInMinimizedView()},isInMaximizedView:function(){return!this.isInMinimizedView()},isInGridLayout:function(){return ZCSmartConferenceImpl.hasCurrentSession()&&ZCSmartConferenceImpl.getCurrentSession().isInGridLayout()},setUnreadMessageCount:function(e,t){if(ZCSmartConferenceImpl.isValidChatForCurrentSession(e)){var n=$("[conferenceunreadmsgcount]");t?n.text(t).show():n.hide().empty()}},handleGetMeFront:function(e){var t=ChatUI.exist[e];t&&this.handleChatWindowCreated(t)},openChatInRHS:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){var n=ZCSmartConferenceUI.getConferenceWindow();WmsImpl.isGuestConferenceUser()&&$zcg.guestChatDetails&&!Conference.isGuestChatLoaded()?GuestChatView.loadChat($zcg.guestChatDetails):ZCSmartConferenceImpl.attachChat(t.getId(),e),n.find("#smartconferenceusertab").removeClass("active"),n.find("#smartconferenceassociatedresourcetab").removeClass("active"),n.find("#smartconferencechattab").addClass("active"),n.find("#smartconferencechatsection").removeClass("rhs-dN"),n.find("#smartconferenceusersection").addClass("rhs-dN"),Conference.hideAssociatedResourceIFrame(t.getId()),Conference.hideRhsNotesIFrame(t.getId()),ZCSmartConferenceUI.closeChatNotification(),n.addClass("show-rhs"),ZCSmartConferenceUI.resetHeaderOptions(n,ZCSmartConferenceUI.headerOptions.CHAT),ZCSmartConferenceUI.handleResize()}},showChatInRHS:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&(t.getDummyThreadChatId()!==e&&t.getThreadChatId()!==e&&t.setSwitchedChatId(e),t.setActiveChatId(e),ConferenceImpl.openChatInConf(e))},setChatInRHS:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=n instanceof ZCSmartConferenceSession;if(ZCSmartConferenceHandler.switchChatSuggestion.getContainer().remove(),t!==e){var r=ChatUI.exist[e];n.setActiveChatId(e),n.getDummyThreadChatId()!==e&&n.getThreadChatId()!==e&&n.setSwitchedChatId(e),ZCSmartConferenceImpl.removeChat(t,n),r?i?ZCSmartConferenceUI.handleChatWindowCreated(r):ConferenceUI.handleChatWindowCreated(r):n&&"undefined"!=typeof DummyCwinUtils&&e.startsWith(DummyCwinUtils.CONSTANTS.DUMMY_CHATID_PREFIX)?i?ZCSmartConferenceImpl.attachChat(n.getId()):ConferenceImpl.attachChat():ConversationsList.attachContinueActiveChat(e,!1)}},handleChatWindowCreated:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(ZCSmartConferenceImpl.hasCurrentSession()&&!n.isMigratedForRecording()&&!Config.isConferenceChatSwitcherEnabled()){var i=e.chid,r=n.getActiveChatId();if(!r||r===i){var o=e.isDummyChat();if(o)if(n.isThreadChatAllowed()){var s=n.getMembersCount();n.getConfigurations().isChatAccessibleToExternalUser()||(s-=n.getGuestMembersCount()),(e=ChatUI.exist[i])&&e.updateChatParticipants(Resource.getRealValue(s<2?"channel.tip.joinedparticip":"chat.participants.count",s+"")),n.setDummyThreadChatId(i)}else n.setDummyChatId(i),e.handleEmptyState();if(n&&!n.isInMinimizedView()){var a=$("#smartconferencechatsection");if(a.find("#"+i).length)return o||e.focus(),"function"==typeof t&&t(),void ZCSmartConferenceUI.addToggleForRHSChatHeader(n,a);MainUI.handleIframes(i),ChannelTabsUI.switchToMessagesTab(i),e.isThreadChat()&&NestedChatUI.isExist(e.getChid())&&e.popOut();var c=e.win();a.html(c),ZCSmartConferenceUI.addToggleForRHSChatHeader(n,a),c.show(),CodeSnippet.handleThemeForAVChat(!0),ZCScroll.customScroll(c.find("#chatbody"),!0),e.getScrollDown(),e.focus(),"function"==typeof t&&t()}}}},handleChatWindowClosed:function(e){ZCSmartConferenceImpl.isValidChatForCurrentSession(e)&&($("#smartconferencechatsection").empty(),this.isChatInView()&&ZCSmartConferenceHandler.UIEvents.closeRHS())},handleChatWindowBeforeClose:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){var n=e.chid;if(!ZCSmartConferenceImpl.isValidChatForCurrentSession(n)&&t.getSwitchedChatId()!=n)return;n===t.getActiveChatId()&&ZCSmartConferenceImpl.removeChat(n,t),this.isChatInView()&&ZCSmartConferenceHandler.UIEvents.closeRHS()}},setChatWindowFocus:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e.hasChatId()&&this.isChatInView()){var t=ChatUI.exist[e.getActiveChatId()];t&&(t.getScrollDown(),t.focus())}},initiateResizeInterval:function(){clearInterval(this.resizeInterval),this.resizeInterval=setInterval((function(){ZCSmartConferenceUI.handleResize()}),100)},destroyResizeInterval:function(){clearInterval(this.resizeInterval),this.resizeInterval=void 0},getRhsGestureFilterMap:function(){return this._rhsGestureFilterMap},setRhsGestureFilterMap:function(e){var t=void 0;if(void 0!==e&&e.length>0){t={};var n=e.split(",");for(var i in n)t[n[i]]=!0}if(JSON.stringify(this._rhsGestureFilterMap)!==JSON.stringify(t)){this._rhsGestureFilterMap=t;var r=ZCSmartConferenceImpl.getCurrentActiveSession();ZCSmartConferenceUI.reinitListView(r),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection")),ZCSmartConferenceUI.setMuteRestrictionInfo(r.isOldImpl())}},clearRhsGestureFilterMap:function(){this._rhsGestureFilterMap=void 0},applyRhsGestureFilterForUser:function(e,t){var n=ZCSmartConferenceUI.getListViewInstance();if(void 0!==n){var i=this.getRhsGestureFilterMap();if(void 0!==i){var r=t.getId();if(i[e.getReactionsDB().getUserVote(r)]){var o=!0,s=ZCSmartConferenceUI.getRhsSearchValue();if(void 0!==s&&s.length>0){var a=Users.getName(r,t.getName());void 0!==a&&-1!==a.toLowerCase().indexOf(s)||(o=!1)}o&&(n.switchCategory(r,void 0,ZCSmartConferenceUI.getUserCurrentCategory(e,t)),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection")),e.isCurrentUser(r)&&this.setMuteRestrictionInfo(e.isOldImpl()))}else n.removeItem(r),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection"))}}},clearRhsSearchTimeout:function(){clearTimeout(ZCSmartConferenceUI.rhsSearchTimeout),ZCSmartConferenceUI.rhsSearchTimeout=void 0},getRhsSearchValue:function(){return ZCSmartConferenceUI.rhsSearchValue},setRhsSearchValue:function(e){ZCSmartConferenceUI.rhsSearchValue=e},clearRhsSearchValue:function(){ZCSmartConferenceUI.rhsSearchValue=void 0},clearRhsSearch:function(){$("#smartconferenceusersection").find('[smartconferenceinput][keyup-purpose="searchParticipants"]').val("").focus(),ZCSmartConferenceUI.clearRhsSearchTimeout(),ZCSmartConferenceUI.clearRhsSearchValue(),ZCSmartConferenceImpl.handleSearchParticipantInRHS()},clearBottomPaneSearchTimeout:function(){clearTimeout(ZCSmartConferenceUI.bottomPaneSearchTimeout),ZCSmartConferenceUI.bottomPaneSearchTimeout=void 0},getBottomPaneSearchValue:function(){return ZCSmartConferenceUI.bottomPaneSearchValue},setBottomPaneSearchValue:function(e){ZCSmartConferenceUI.bottomPaneSearchValue=e},clearBottomPaneSearchValue:function(){ZCSmartConferenceUI.bottomPaneSearchValue=void 0},handleSearchResultsInBottomPane:function(e){var t=ZCSmartConferenceUI.getBottomPaneSearchValue();void 0!==t&&t.length>0&&0===e.find("[conferenceparticipant]").length?0===e.find("#noresults-container").length&&e.append(ZCSmartConferenceTemplates.getNoSearchResultsInBottomPaneHtml()):e.find("#noresults-container").remove()},handleSearchParticipantInBottomPane:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();e&&(e.isOldImpl()?ConferenceUI.handleBottomPaneParticipantsVisibility(e):ZCSmartConferenceUI.handleBottomPaneParticipantsVisibility($("#bottomparticipantspane")))},checkAndShowRhsSearch:function(e){var t=0;if(e.isPersonalScope())t=e.getInvitedMemberIds().length;else{var n=e.getChatId();if(void 0!==n){var i=Participants.get(n);if(void 0!==i){var r=i.recipants;r&&(t=r.length)}}}(t>=ZCSmartConferenceConstants.searchHideLimit||e.getMembersCount()>=ZCSmartConferenceConstants.searchHideLimit)&&(e.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow()).find("#rhs_search_cnt").removeClass("dN")},handleResize:function(){var e=this.getConferenceWindow();if(void 0!==e){this.handleScreenSectionResize();var t=this.isPresentationInView();if(t&&PresentationUI.handleResize(),this.isInMinimizedView())this.handleSectionResize(e.find("[filmStripSection]"),!1),this.adjustContainerView(ZCSmartConferenceUI.getConferenceParentDOM(),void 0,ZCMediaConstants.minimizedWindowRange.visibleArea);else if(this.isInGridLayout())this.handleGridResize(e);else{var n=e.find("[lhsSpeakerSection]"),i=e.find("[rhsSpeakerSection]"),r=e.find("[mainSpeakerSection]");e.find("[videoStripSection],[activespeakersection]").find("[mediaContainer]").css({width:"",height:"",margin:""});var o=i.is(":visible");r.width(""),i.width(""),n.width("");var s=ZCSmartConferenceImpl.getCurrentSession(),a=this.isScreenInView()||this.isWhiteBoardInView()||t;if(a&&s.isScreenInActiveSpeakerView()){var c=$("#smartconf_main_container");this.adjustContainerView(c.find("[activespeakersection]"),c,ZCMediaConstants.minimizedWindowRange.visibleArea)}if(s&&s.isSpotLightEnabled()&&!a){var d=r.find("[mediaContainer]"),l=0;if(d.each((function(){$(this).is(":visible")&&l++})),l>0){var u=ZCSmartConferenceUI.getCalculatedVideoSizeForGridLayout(1,l,r,0,0);d.css(u.size)}}else{var f=this.handleSectionResize(r,a),m=this.handleSectionResize(n,!0);if(f&&m){var C=f.cssObj,p=m.cssObj;if(void 0!==C&&void 0!==p){var h=C.width;a||(h/=f.visibleContainersCount);var g=h/p.width;if(o&&g<7/4){var v=r.width(),S=n.width(),I=o?2:1,_=e.find("[mainSection]").width();(v*=7/4)+I*(S*=g)>_&&(S=(_-v)/I);var w=15*_/100;if(S<w){var b=w-S;v-=b*=I,S=w}r.width(v),n.width(S),i.width(S),f=this.handleSectionResize(r,this.isScreenInView()),(m=this.handleSectionResize(n,!0))&&(p=m.cssObj)}}}void 0!==p&&i.find("[mediaContainer]").css(p)}this.updateBottomPaneAvailableSlots($("#bottomparticipantspane"),!0)}}},handleRingingStatusCTA:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=function(e,t){e.isChatScope()?t.find("[main]").text(Resource.getRealValue("conference.ring.members")):t.find("[main]").text(Resource.getRealValue("conference.ring.select"))};if(t){var i=t.getInvitedMemberIds(),r=i.length,o=ZCSmartConferenceImpl.getCurrentUserId();for(var s of i){var a=t.getRingingStateForUser(s);(o===s||a&&a===MediaCallConstants.ringingStates.ringing)&&r--}var c=t.isQuickStartPreview();if(t.isCurrentUserHost()){var d=$("#conf-ringing-status");switch(e){case ZCSmartConferenceConstants.ringBannerCases.RING_ALL:if(c&&0===r)return;d.removeClass("hide"),d.find("[ringall]").addClass("hide"),d.find("[main]").text(Resource.getRealValue("conference.ringing.all",Resource.getRealValue("common.all").toLowerCase())),this.ringingTimer=setTimeout(function(){d.find("[ringall]").removeClass("hide"),t.getMembersCount()>1?d.addClass("hide"):n(t,d),ZCSmartConferenceUI.ringingTimer=void 0}.bind(this),MediaCallConstants.callRingingTimeLimit);break;case ZCSmartConferenceConstants.ringBannerCases.STOP_RING_ALL:ZCSmartConferenceUI.clearRingingTimeout()}e!==ZCSmartConferenceConstants.ringBannerCases.STOP_RING_ALL&&e!==ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE||void 0!==this.ringingTimer||(t.getMembersCount()<2&&(!c||r>0)?(d.removeClass("hide"),d.find("[ringall]").removeClass("hide"),n(t,d)):d.addClass("hide"))}}},clearRingingTimeout:function(){clearTimeout(ZCSmartConferenceUI.ringingTimer),ZCSmartConferenceUI.ringingTimer=void 0},handleSectionResize:function(e,t){if(e.is(":visible")){var n=e.width(),i=e.height(),r=e.find("[mediaContainer]"),o=0;if(r.each((function(){$(this).is(":visible")&&o++})),0!==o){var s=ZCMediaConstants.ASPECT_RATIO,a=0,c=0,d=this.isInMinimizedView()||!this.isScreenInView()?2:3;t?(c=(a=(i-=2*d*o)/o)*s)>(n-=2*d)&&(a=(c=n)/s):(a=(c=(n-=2*d*o)/o)/s)>(i-=2*d)&&(c=(a=i)*s);var l={width:c,height:a,margin:d};return r.css(l),{cssObj:l,visibleContainersCount:o}}}},handleGridResizeInStageLayout:function(e){if(e.is(":visible")){var t=e.width()-1,n=e.height()-1,i=e.find("[mediaContainer]"),r=0;if(i.each((function(){$(this).is(":visible")&&r++})),0!==r){var o=ZCMediaConstants.ASPECT_RATIO,s=this.isInMinimizedView()||!this.isScreenInView()?2:3,a=2;r<a&&(a=r);var c=Math.ceil(r/a),d=t-2*a*s,l=n-2*c*s,u=Math.floor(d/a),f=Math.floor(l/c),m=u,C=u/o;C>f&&(C=f),i.css({width:m,height:C,margin:s})}}},handleScreenSectionResize:function(){var e=this.getConferenceWindow();if(void 0!==e){var t=e.find("[screenSection]");this.isInMinimizedView()&&t.width("")}},setConferenceWindowInDetachedWrapper:function(){MediaUtil.resetDarkMode();var e=this.getConferenceWindow(),t=ZCSmartConferenceUI.getConferenceParentDOM();e.addClass("smartconf-detached"),t.addClass("smartconf-miniplayer"),t.setAsDraggable(MediaUtil.getCriteriaForDrag()),ZCSmartConferenceUI.setResizableForMiniPlayer(t)},setConferenceWindowInBody:function(){MediaUtil.setDarkMode();var e=this.getConferenceWindow(),t=ZCSmartConferenceUI.getConferenceParentDOM();t.setAsNonDraggable(),t.removeClass("smartconf-miniplayer"),e.removeClass("smartconf-detached")},setResizableForMiniPlayer:function(e){var t=MediaUtil.getCriteriaForResize((function(e,t){clearTimeout(ZCSmartConferenceUI.resizeTimeout),ZCSmartConferenceUI.resizeTimeout=setTimeout((function(){ZCSmartConferenceUI.handleResize()}),100)}));t.widthRange.min=360,t.heightRange.min=270,e.setAsResizable(t),ZCSmartConferenceUI.handleResize()},resetResizableForMiniPlayer:function(e){e.removeResizable()},showMinimizedWindow:function(){if(ZCSmartConferenceImpl.hasCurrentSession()){var e=ZCSmartConferenceImpl.getCurrentSession();ZCSmartConferenceHandler.UIEvents.exitFromFullScreen(),this.setConferenceWindowInDetachedWrapper(e);var t=this.isChatInView(),n=e.isInGridLayout();e.setCurrentView(ZCSmartConferenceUI.views.MINIMIZED);var i=this.getConferenceWindow();n&&(i.attr("wasInGridLayout","true"),ZCSmartConferenceUI.switchToStageLayout(!0)),ZCSmartConferenceUI.arrangeMediaContainers(),Config.isConferenceChatSwitcherEnabled()&&(ConferenceChatWindow.updateAllChatHeaderImage(),ConferenceImpl.hasChatWindowDOMInViewWhenStartedOrMaximized()&&ConferenceChatWindow.moveChatsToMainChatwindowViewportIfIsInVisibleChats(!0));var r=e.getActiveChatId();void 0!==r&&ZCSmartConferenceImpl.removeChat(r,e),t&&ZCSmartConferenceHandler.UIEvents.closeRHS(),i.attr("autoopenchat",t),ZCSmartConferenceUI.handleResize(),ZCSmartConferenceUI.setMinimizedOption(i),Conference.hideAssociatedResourceIFrame(e.getId()),Conference.hideRhsNotesIFrame(e.getId())}else this.showMinimizedWindowWithoutCurrentSession()},showMaximizedWindow:function(){if(ZCSmartConferenceImpl.hasCurrentSession()){var e=ZCSmartConferenceImpl.getCurrentSession();if(!e.isInPIP()){this.setConferenceWindowInBody(),e.setCurrentView(ZCSmartConferenceUI.views.MAXIMIZED);var t=this.getConferenceWindow();"true"!==t.attr("wasInGridLayout")||ZCSmartConferenceUI.isScreenInView()||e.isFocusedModeEnabled()||e.isSpotLightEnabled()?ZCSmartConferenceUI.arrangeMediaContainers():(t.attr("wasInGridLayout","false"),ZCSmartConferenceUI.switchToVideoGridLayout()),ConferenceChatWindow.keepVisibleChats(),ConferenceImpl.storeMainChatwindowDisplayProp(),t.find("#smartconferencerhscont").find("#smartconferenceassociatedresourcetab").hasClass("active")&&t.hasClass("show-rhs")?ZCSmartConferenceHandler.UIEvents.openAssociatedResource():$("#conferencev2header").find("#rhsnotesoption").hasClass("active")&&t.hasClass("show-rhs")&&ZCSmartConferenceHandler.UIEvents.openNotesInRHS(),ZCSmartConferenceUI.setMaximizedOption(t),"true"==t.attr("autoopenchat")&&ZCSmartConferenceHandler.UIEvents.openChatInRHS(),ZCSmartConferenceUI.handleResize(),t.attr("autoopenchat",!1)}}else this.showMaximizedWindowWithoutCurrentSession()},showMinimizedWindowWithoutCurrentSession:function(){var e=ZCSmartConferenceImpl.hasOutgoingSession()?ZCSmartConferenceImpl.getOutgoingSession():ZCSmartConferenceImpl.getJoiningSession();void 0!==e&&(ZCSmartConferenceUI.setConferenceWindowInDetachedWrapper(),e.setCurrentView(ZCSmartConferenceUI.views.MINIMIZED),ZCSmartConferenceUI.setMinimizedOption(ZCSmartConferenceUI.getConferenceWindow()),ZCSmartConferenceUI.handleResize())},showMaximizedWindowWithoutCurrentSession:function(){var e=ZCSmartConferenceImpl.hasOutgoingSession()?ZCSmartConferenceImpl.getOutgoingSession():ZCSmartConferenceImpl.getJoiningSession();void 0!==e&&(ZCSmartConferenceUI.setConferenceWindowInBody(),e.setCurrentView(ZCSmartConferenceUI.views.MAXIMIZED),ZCSmartConferenceUI.setMaximizedOption(ZCSmartConferenceUI.getConferenceWindow()),ZCSmartConferenceUI.handleResize())},setMinimizedOption:function(e){e.find("[smartconferenceheader]").find('[smartconferencebutton][purpose="minimizeWindow"]').addClass("zcf-maximize").removeClass("zcf-leftArrow").attr({purpose:"maximizeWindow","tooltip-title":Resource.getRealValue("videochat.fullscreen")})},setMaximizedOption:function(e){e.find("[smartconferenceheader]").find('[smartconferencebutton][purpose="maximizeWindow"]').addClass("zcf-leftArrow").removeClass("zcf-maximize").attr({purpose:"minimizeWindow","tooltip-title":Resource.getRealValue("media.back.minimize.view")})},showFilmStrip:function(){if(ZCSmartConferenceImpl.hasCurrentSession()){ZCSmartConferenceImpl.getCurrentSession().setFilmStripStatus(!0);var e=this.getConferenceWindow();e.removeClass("smartconf-forcehide-ftr"),e.find('[smartconferencebutton][purpose="showFilmStrip"]').attr("purpose","hideFilmStrip").removeClass("zcf-upArrow").addClass("zcf-downArrow"),ZCSmartConferenceUI.handleResize()}},hideFilmStrip:function(){if(ZCSmartConferenceImpl.hasCurrentSession()){ZCSmartConferenceImpl.getCurrentSession().setFilmStripStatus(!1);var e=this.getConferenceWindow();e.addClass("smartconf-forcehide-ftr"),e.find('[smartconferencebutton][purpose="hideFilmStrip"]').attr("purpose","showFilmStrip").removeClass("zcf-downArrow").addClass("zcf-upArrow"),ZCSmartConferenceUI.handleResize()}},showBottomPane:function(e){if(ZCSmartConferenceImpl.hasCurrentSession()){ZCSmartConferenceImpl.getCurrentSession().setBottomPaneStatus(!0);var t=this.getConferenceWindow();t.removeClass("smartconf-bottom-pane-hide"),this.handleResize();var n=t.find("#bottomparticipantspane");this.handleBottomPaneVisibility(n),this.updateBottomPaneAvailableSlots(n,e)}},hideBottomPane:function(){ZCSmartConferenceImpl.hasCurrentSession()&&(ZCSmartConferenceImpl.getCurrentSession().setBottomPaneStatus(!1),this.getConferenceWindow().addClass("smartconf-bottom-pane-hide"),ZCSmartConferenceUI.handleResize())},switchToVideoGridLayout:function(){if(ZCSmartConferenceImpl.hasCurrentSession()){var e=this.getConferenceWindow();e.find('[smartconferencebutton][purpose="switchToStageLayout"]').removeClass("active"),e.find('[smartconferencebutton][purpose="switchToVideoGridLayout"]').addClass("active");var t=ZCSmartConferenceImpl.getCurrentSession();if(!t.isInGridLayout()){var n=ZCSmartConferenceUI.isScreenInView()||ZCSmartConferenceUI.isWhiteBoardInView()||ZCSmartConferenceUI.isPresentationInView();this.isInMinimizedView()||n||t.isFocusedModeEnabled()||t.isSpotLightEnabled()?e.attr("wasInGridLayout","true"):(t.switchToVideoGridLayout(),ZCSmartConferenceUI.updateLowBandwidthModeInfo(t),e.addClass("smartconf-grid-layout"),e.attr("wasInGridLayout","false"),ZCSmartConferenceUI.arrangeVideosInVideoGridLayout(e.find("#videogridcontainer"),t,!1),ZCSmartConferenceUI.arrangeMediaContainers())}}},switchToStageLayout:function(e){if(ZCSmartConferenceImpl.hasCurrentSession()){var t=this.getConferenceWindow();e||(t.find('[smartconferencebutton][purpose="switchToVideoGridLayout"]').removeClass("active"),t.find('[smartconferencebutton][purpose="switchToStageLayout"]').addClass("active"),t.attr("wasInGridLayout","false"));var n=ZCSmartConferenceImpl.getCurrentSession();n.isInStageLayout()||(n.switchToStageLayout(),ZCSmartConferenceUI.updateLowBandwidthModeInfo(n),t.removeClass("smartconf-grid-layout"),ZCSmartConferenceUI.deleteGridVideosInContainer(t.find("#videogridcontainer")),ZCSmartConferenceUI.arrangeMediaContainers(),ZCSmartConferenceUI.handleResize())}},showVideoGridPage:function(e){if(ZCSmartConferenceImpl.hasCurrentSession()){var t=ZCSmartConferenceImpl.getCurrentSession(),n=t.getCurrentVideoGridPageInView(),i=t.getVideoGridLayoutDetails().count;if(!(e===n||e<1||e>i)){t.setCurrentVideoGridPageInView(e),t.switchGridPageThroughDC(e,n);var r=this.getConferenceWindow();ZCSmartConferenceUI.arrangeVideosInVideoGridLayout(r.find("#videogridcontainer"),t,!1)}}},updateVideoGridPages:function(e){if(e.isInGridLayout()){var t=e.getCurrentVideoGridPageInView(),n=e.getVideoGridLayoutDetails().count,i=this.getConferenceWindow().find("#videogridcontainer");ZCSmartConferenceUI.arrangeVideosInVideoGridLayout(i,e,t<=n)}},handleVideoGridNavigationButton:function(e,t){var n=t.getCurrentVideoGridPageInView(),i=t.getVideoGridLayoutDetails().count,r=e.find("[gridPrevNavigationBtn]"),o=e.find("[gridNextNavigationBtn]"),s=n-1,a=n+1;r.attr("prevPageNo",s).find("[pageNo]").text(s),o.attr("nextPageNo",a).find("[pageNo]").text(a),r.toggleClass("dN",n<2),o.toggleClass("dN",n>=i)},setActiveSpeakerInGridView:function(e,t){var n=this.getConferenceWindow().find("#videogridcontainer");if(n.find("[gridMainSpeakerSection]").find("[videoHolder]").append(e),n.find(".smartconf-activespeaker").removeClass("smartconf-activespeaker"),"local"===e.attr("streamSource")){var i=n.find("[gridDefaultPageContainer]").find('[streamSource="local"]');if(0===i.length)i=n.find("[gridLhsSection]").find('[streamSource="local"]');i.addClass("smartconf-activespeaker")}else{var r=e.attr("videoStreamId"),o=t.getUserIdWithVideoStreamId(r);if(o){var s=t.getUserGridMediaContainer(o);s&&s.length&&s.addClass("smartconf-activespeaker")}}},deleteVideosInVideoGridLayout:function(e,t,n,i){ZCSmartConferenceUI.deleteGridVideosInContainer(e),ZCSmartConferenceUI.deleteGridVideosInContainer(t),ZCSmartConferenceUI.deleteGridVideosInContainer(n),ZCSmartConferenceUI.deleteGridVideosInContainer(i)},deleteRemovedVideosInVideoGridLayout:function(e,t,n,i,r,o){var s=Object.keys(t);ZCSmartConferenceUI.deleteRemovedGridVideosInContainer(e,n,s,t),ZCSmartConferenceUI.deleteRemovedGridVideosInContainer(e,i,s,t),ZCSmartConferenceUI.deleteRemovedGridVideosInContainer(e,r,s,t),ZCSmartConferenceUI.deleteRemovedGridVideosInContainer(e,o,s,t)},handleGridResize:function(e){if(ZCSmartConferenceImpl.hasCurrentSession()){var t=ZCSmartConferenceImpl.getCurrentSession();if(t.isInGridLayout()){var n=e.find("#videogridcontainer"),i=n.find("[gridLhsSection]"),r=n.find("[gridRhsSection]"),o=n.find("[gridMainSpeakerSection]"),s=n.find("[gridBottomSection]"),a=n.find("[gridDefaultPage]"),c=t.getVideoGridLayoutDetails(),d=c.count,l=t.getCurrentVideoGridPageInView(),u=c.pages[l],f=Object.keys(u).length,m=ZCSmartConferenceUI.getCalculatedVideoSizeForGridLayout(d,f,n,0,0);this.setGridContainerSizes(m,i,r,o,a);var C=m.size;i.find("[gridMediaContainer]").css(C),r.find("[gridMediaContainer]").css(C),s.find("[gridMediaContainer]").css(C),a.find("[gridMediaContainer]").css(C),this.setGridSizeClass(n,f,m)}}},setGridSizeClass:function(e,t,n){e.toggleClass("smartconf-grid-large-box",t<2),e.toggleClass("smartconf-grid-medium-box",t<5&&t>=2),e.toggleClass("smartconf-grid-small-box",t>=5)},getNumberOfRowsInGrid:function(){return(ZCSmartConferenceConstants.maxNoOfVideosInGrid+ZCSmartConferenceConstants.noOfBoxesForGridMainSpeaker)/ZCSmartConferenceConstants.noOfColumnsInGrid},setGridContainerSizes:function(e,t,n,i,r){var o=e.size,s=ZCSmartConferenceConstants.noOfBoxesForGridMainSpeaker/2,a=(ZCSmartConferenceConstants.noOfColumnsInGrid-s)/2,c=this.getNumberOfRowsInGrid()/2,d={height:o.height*c+2*o.margin*c,width:o.width*a+2*o.margin*a};t.css(d),n.css(d);i.css({height:d.height+12-4,width:d.width-4,"margin-top":-12,"margin-bottom":2,"margin-left":2,"margin-right":2});var l=e.meta;r.css({height:o.height*l.rowsCount+2*o.margin*l.rowsCount,width:o.width*l.columnsCount+2*o.margin*l.columnsCount})},arrangeVideosInVideoGridLayout:function(e,t,n){var i=e.find("[gridPages]"),r=e.find("[gridLhsSection]"),o=e.find("[gridRhsSection]"),s=e.find("[gridMainSpeakerSection]"),a=e.find("[gridBottomSection]"),c=e.find("[gridDefaultPage]"),d=e.find("[gridDefaultPageContainer]"),l=t.getVideoGridLayoutDetails(),u=l.count,f=Math.min(t.getCurrentVideoGridPageInView(),u);t.setCurrentVideoGridPageInView(f),this.handleVideoGridNavigationButton(e,t);var m=l.pages[f],C=Object.keys(m).length;n?this.deleteRemovedVideosInVideoGridLayout(t,m,r,o,a,c):this.deleteVideosInVideoGridLayout(r,o,a,c);var p=ZCSmartConferenceUI.getCalculatedVideoSizeForGridLayout(u,C,e,0,0),h=p.size;this.setGridContainerSizes(p,r,o,s,c),this.setGridSizeClass(e,C,p);var g=!1,v=!1,S=0,I=t.getVideoGridStreamIds(),_=[];for(var w of I)if(void 0!==m[w]){var b=m[w];(T=WmsImpl.isLocalUser(b))?_.unshift(w):_.push(w)}for(var U of _){var R=m[U],T=WmsImpl.isLocalUser(R),y=ZCSmartConferenceUI.handleAndGetVideoElemForVideoGridLayout(R,T,U,t.getVideoStreamWithVideoStreamId(U),e,t);if(y.css(h),T&&(c.append(y),y.addClass("dN"),(y=ZCSmartConferenceUI.handleAndGetVideoElemForVideoGridLayout(R,!0,"",t.getVideoUpStream(),e,t)).attr("streamSource","local"),y.css(h)),y.removeClass("dN"),1===u)g=!0,c.append(y);else{v=!0;var M=ZCSmartConferenceConstants.noOfColumnsInGrid-ZCSmartConferenceConstants.noOfBoxesForGridMainSpeaker/2,A=2*M;S<M?r.append(y):S<A?o.append(y):a.append(y)}S++}d.toggleClass("dN",!g),i.toggleClass("dN",!v);var P=s.find("[videoHolder]").find("[mediaContainer]");P.length&&P.each((function(){var e=$(this);e.is(":visible")&&ZCSmartConferenceUI.setActiveSpeakerInGridView(e,t)}))},getLocalGridMediaContainer:function(){return this.getConferenceWindow().find('[gridMediaContainer][streamSource="local"]')},getLocalBottomBandMediaContainer:function(){return this.getConferenceWindow().find("#bottom_band_video_preview")},getGridMediaContainerWithVideoStreamId:function(e){return this.getConferenceWindow().find('[gridMediaContainer][videoStreamId="'+e+'"]')},handleAndGetVideoElemForVideoGridLayout:function(e,t,n,i,r,o){n=n||"";var s=o.getMember(e),a=r.find('[gridMediaContainer][videoStreamId="'+n+'"]');if(0===a.length){var c=void 0;$WC.Util.isEmpty(n)||(c="smartconf-img-show");var d="";s&&(d=s.getName());var l=ZCSmartConferenceTemplates.getMediaContainerHtml(e,Users.getName(e,d),n,"gridMediaContainer",c,!0);a=$(l),MediaUtil.setAndPlayStreamInMediaContainer(a,i,t)}return ZCSmartConferenceUI.updateUserInfo(a,s,o),a},deleteRemovedGridVideosInContainer:function(e,t,n,i){var r=e.getUserGridVideoStreamIdFromPageDetail(ZCSmartConferenceImpl.getCurrentUserId(),i);t.find("[gridMediaContainer]").each((function(){var e=$(this),t=e.attr("videoStreamId");"local"===e.attr("streamSource")?void 0===r&&(e.hide(),MediaUtil.removeVideoElemsStreamInContainer(e),e.remove()):-1===n.indexOf(t)&&(e.hide(),MediaUtil.removeVideoElemsStreamInContainer(e),e.remove())}))},deleteGridVideosInContainer:function(e){e.find("[gridMediaContainer]").each((function(){var e=$(this);e.hide(),MediaUtil.removeVideoElemsStreamInContainer(e),e.remove()}))},getCalculatedVideoSizeForGridLayout:function(e,t,n,i,r){var o=ZCMediaConstants.ASPECT_RATIO,s=n.width()-1,a=n.height()-1;if(void 0!==r&&(a+=r),void 0!==i&&(s+=i),1===e){for(var c=2,d=0,l=0,u=0,f=t,m=1;m<=t;m++){var C=Math.ceil(t/m),p=m*C;if(p>=t){var h=g();(h===d&&p<=f||h>d)&&(f=p,d=h,l=C,u=m)}}function g(){var e=s-2*m*c,t=a-2*C*c,n=Math.floor(e/m),i=Math.floor(t/C);return MediaUtil.getBestFitWidth(n,i,o)}return{size:{width:d,height:d/o,margin:c},meta:{rowsCount:l,columnsCount:u}}}c=2;var v=2*ZCSmartConferenceConstants.noOfColumnsInGrid*c,S=(d=(s-v)/ZCSmartConferenceConstants.noOfColumnsInGrid,this.getNumberOfRowsInGrid());return{size:{width:d,height:(a-2*S*c)/S,margin:c},meta:{rowsCount:S,columnsCount:ZCSmartConferenceConstants.noOfColumnsInGrid}}},startScreenShare:function(){if(ZCSmartConferenceImpl.hasCurrentSession())if(!$Util.Browser.isChrome()||WebRTCUserMedia.isScreenShareSupportedInNative()||ScreenShare.Extension.isInstalled()){var e=ZCSmartConferenceImpl.getCurrentSession();if(!e.isSpotLightEnabled()||e.isInSpotLight()){var t=e.getCurrentMember().isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.SCREENSHARE);if(e.getConfigurations().isScreenShareAllowed()||t)if(e.hasOngoingPresentation()){if(e.hasWhiteBoard()){if(e.isWhiteBoardCreator())return void UI.updateBanner(Resource.getRealValue("whiteboard.stop.to.share.screen"),2e3,!0);var n=e.getWhiteBoardCreatorId(),i=e.getMember(n);if(e.hasHostPermission()){var r=function(){ZCSmartConferenceUI.startScreenShare()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(n),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,r)}return void UI.updateBanner(Resource.getRealValue("whiteboard.in.conference.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(Users.getName(i.getId(),i.getName()))),2e3,!0)}var o=e.getPresentation();if(e.hasPresentation()){if(e.isPresenter())return void UI.updateBanner(Resource.getRealValue("presentation.stop.to.share.screen"),2e3,!0);var s=o.getPresenterId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){r=function(){ZCSmartConferenceUI.startScreenShare()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(s),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,r)}return void UI.updateBanner(Resource.getRealValue("conference.presentation.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(e.getPresentationOwnerName())),2e3,!0)}if(e.hasScreenShare()&&!e.isScreenSharer()){var a=e.getScreenSharerId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){r=function(){e.disconnectScreenDownStream(a),ZCSmartConferenceUI.startScreenShare()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(a),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,r)}return void ZCSmartConferenceUI.showScreenAlreadySharedInfo(e)}}else{var c=e.isInPIP();ZCSmartConferenceImpl.switchToPIPMode(e),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.SCREEN,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestScreenStream((function(e){MediaManager.resetStreamRequested(),ZCSmartConferenceImpl.addScreenInSession(e)}),(function(e,t){MediaManager.resetStreamRequested(),c||ZCSmartConferenceImpl.exitFromPIPMode(ZCSmartConferenceImpl.getCurrentSession()),void 0!==e&&MediaManager.handleMediaError(e,t)}),(function(){ZCSmartConferenceHandler.UIEvents.stopScreenShare()}),MediaManager.getComputerAudioConstraints(),void 0,void 0,!0)}else UI.updateBanner(Resource.getRealValue("media.presentation.ss.not.allowed"),2e3,!0)}else e.hasHostPermission()?ZCSmartConferenceUI.showSetSpotlightAndScreenShareDialog():ZCSmartConferenceUI.showInvalidUserInitScreenShareDialog()}else MediaManager.showExtensionInstallPreview("smartconferencebutton")},showSetSpotlightAndScreenShareDialog:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e.getSpotLightUsersCount()>=Conference.MAX_ACTIVE_SPEAKER)UI.updateBanner(Resource.getRealValue("conference.spotlight.limit.reached",[Conference.MAX_ACTIVE_SPEAKER]),2e3,!0);else{var t=e.getCurrentUserId();ZCSmartConferenceUI.showScreenShareEndAlertDialog(ZCMediaConstants.screenShareEndReasons.RESTRICTED_BY_SPOTLIGHT,e,e.getMember(t),(function(){var n=e.getId();ConferenceAPI.setInSpotLight(n,t,e.isSpeakersAudioRestrictedInSpotLight(),e.isSpeakersVideoRestrictedInSpotLight(),(function(){var i=e.getScreenSharerId();e.addUserInSpotLight(t,e.getLastSpotLightActivityTime()+1,t);e.hasScreenShare()?ConferenceAPI.endScreenShare(n,i,(function(){e.disconnectScreenDownStream(i),ZCSmartConferenceUI.startScreenShare()})):ZCSmartConferenceUI.startScreenShare()}))}))}},showScreenAlreadySharedInfo:function(e){var t=e.getScreenSharerId(),n=e.getMember(t),i=n?n.getName():void 0;UI.updateBanner(Resource.getRealValue("conference.screenshare.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(Users.getName(t,i))),2e3,!0)},showScreenShareSwitchDialog:function(){var e=ZCSmartConferenceImpl.getCurrentSession(),t=e.getScreenSharerId(),n=Users.getName(t),i="conference.cohost.end.screenshare";e.isCurrentUserHost()&&(i="conference.host.end.screenshare"),$WC.$Dlg.confirm({id:"screenshare_end_alert",version:2,class:"alert_dialog media-confirm-dialog",headerhtml:$WC.$Dlg.frameHeaderHTML({header:Resource.getRealValue("media.stop.ongoing.ss")}),bodyhtml:$WC.$Dlg.frameBodyInfoHTML({info:[Resource.getRealValue(i,[n])]}),buttons:[{text:Resource.getRealValue("conference.share.screen"),action:function(){ConferenceAPI.endScreenShare(e.getId(),t,(function(){e.disconnectScreenDownStream(t),ZCSmartConferenceUI.startScreenShare()})),$WC.$Win.destroy("screenshare_end_alert")}}]})},showInvalidUserInitScreenShareDialog:function(){MediaUtil.createConfirmDialog({id:"screenshare_end_alert",version:2,class:"zcdalogbx zcbg_mask alert_dialog",headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="mheader_icn msi-alrt clr-green"></div>'}),bodyhtml:$WC.$Dlg.frameBodyInfoHTML({info:[MediaUtil.getResource("avcliq.conf.invalidss.user")]}),buttons:[{text:MediaUtil.getResource("common.okay"),colour:$WC.$Dlg.GREEN_BUTTON}]},!0)},showScreenShareEndAlertDialog:function(e,t,n,i,r){var o='<div class="zcl-img xl flexM mAuto zcf-warning zcl-img--warning"></div>',s=Resource.getRealValue("media.stop.ongoing.ss"),a="",c="",d=[],l="",u=n.isCurrentUser()?Resource.getRealValue("avcliq.media.yourself.small"):Users.getName(n.getId(),n.getName());if(t.hasScreenShare()){var f=t.getScreenSharer();l=f.isCurrentUser()?Resource.getRealValue("common.you.small"):Users.getName(f.getId(),f.getName())}e===ZCMediaConstants.screenShareEndReasons.RESTRICTED_BY_SPOTLIGHT?(o='<div class="zcl-img lg2 flexM mAuto fshrink posrel contct-img bdrR100">\n\t\t\t\t\t\t\t<img class="w100 h100 bdrR100" src="'+Users.getImgUrlById(n.getId())+'">\n\t\t\t\t\t\t\t<div class="usrstatus usrstatus-filled font15 zcf-spotlight"></div>\n\t\t\t\t\t\t</div>',s=Resource.getRealValue("avcliq.conf.set.spotlight"),a=Resource.getRealValue("avcliq.conf.invalidss.host"),t.hasScreenShare()&&(c='<div class="zcl-hint-box">'+Resource.getRealValue("avcliq.conf.invalidss.note",[l])+"</div>"),d.push($WC.$Dlg.getButtonObj(Resource.getRealValue("common.cancel"),$zcg._cssClasses.SECONDARY_BTN,(function(){$WC.$Dlg.destroy("screenshare_end_alert")}))),d.push($WC.$Dlg.getButtonObj(Resource.getRealValue("common.proceed"),$zcg._cssClasses.PRIMARY_BTN,(function(){i(),$WC.$Dlg.destroy("screenshare_end_alert")})))):e===ZCMediaConstants.screenShareEndReasons.USER_NOT_IN_SPOTLIGHT?(a=Resource.getRealValue("avcliq.conf.endss.setinspotlight",[u,l]),d.push($WC.$Dlg.getButtonObj(Resource.getRealValue("avcliq.conf.set.bothinspotlight"),$zcg._cssClasses.SECONDARY_BTN,(function(){r(),$WC.$Dlg.destroy("screenshare_end_alert")}))),d.push($WC.$Dlg.getButtonObj(Resource.getRealValue("common.proceed"),$zcg._cssClasses.PRIMARY_BTN,(function(){i(),$WC.$Dlg.destroy("screenshare_end_alert")})))):e===ZCMediaConstants.screenShareEndReasons.USER_REMOVED_FROM_SPOTLIGHT&&(a=Resource.getRealValue("avcliq.conf.endss.removefromspotlight",[u]),d.push($WC.$Dlg.getButtonObj(Resource.getRealValue("common.cancel"),$zcg._cssClasses.SECONDARY_BTN,(function(){$WC.$Dlg.destroy("screenshare_end_alert")}))),d.push($WC.$Dlg.getButtonObj(Resource.getRealValue("common.proceed"),$zcg._cssClasses.PRIMARY_BTN,(function(){i(),$WC.$Dlg.destroy("screenshare_end_alert")})))),$WC.$Dlg.create({id:"screenshare_end_alert",version:3,class:"zcl-alert-dialog-2 zcldel-dialog-box media-alert-override",headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:o,header:s,subheader:a}),bodyhtml:c,buttons:d})},showPresentationSwitchDialog:function(e,t,n,i,r){var o=e.hasScreenShare(),s=e.hasWhiteBoard(),a=i===ZCSmartConferenceConstants.presentationType.SCREENSHARE,c=i===ZCSmartConferenceConstants.presentationType.WHITEBOARD,d=Users.getName(t.getId(),t.getName()),l=Users.getName(n.getId(),n.getName()),u=o?"ss":s?"wb":"pres",f=a?"ss":c?"wb":"pres",m="";if(t.isCurrentUser())m=Resource.getRealValue("media.present.end.current."+u+".and.allow",[l]);else if(d=ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(d),m=Resource.getRealValue("media.present.already.sharing."+u,[d]),n.isCurrentUser()){var C="";C=o?"media.present.host.end.ss.and.share."+f:s?"media.present.host.end.wb.and.share."+f:"media.present.host.end.pres.and.share."+f,m+=Resource.getRealValue(C,['<span class="text-transL">'+Resource.getRealValue(e.isCurrentUserCohost()?"cc.cohost":"media.host")+"</span>"])}else{C="media.present.host.end.currentpresentation.and.allow";var p=['<span class="text-transL">'+Resource.getRealValue(e.isCurrentUserCohost()?"cc.cohost":"media.host")+"</span>",l];m+=Resource.getRealValue(C,p)}var h="",g="",v="media.present.end.and.allow";n.isCurrentUser()?(h=Resource.getRealValue("media.stop.ongoing."+u),g=o?"zcf-sharescrn":s?"zcf-whiteboard":"zcf-presentation",v="media.present.end.and.share"):(h=Resource.getRealValue("media.present.host.accept."+f+".header"),g=a?"zcf-sharescrn":c?"zcf-whiteboard":"zcf-presentation"),$WC.$Dlg.create({id:"presentation_end_alert",version:3,class:"zcl-alert-dialog-2 zcldel-dialog-box media-alert-override",headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="zcl-img lg2 flexM mAuto fshrink posrel contct-img bdrR100">\n\t\t\t\t\t\t\t\t<img class="w100 h100 bdrR100" src="'+Users.getImgUrlById(n.getId())+'">\n\t\t\t\t\t\t\t\t<div class="usrstatus usrstatus-filled font12 '+g+'"></div>\n\t\t\t\t\t\t\t</div>',header:h,subheader:[m]}),bodyhtml:"",buttons:[$WC.$Dlg.getButtonObj("common.cancel",$zcg._cssClasses.SECONDARY_BTN,(function(){$WC.$Dlg.destroy("presentation_end_alert")})),$WC.$Dlg.getButtonObj(v,$zcg._cssClasses.NEG_PRIMARY_BTN,(function(){o?ConferenceAPI.endScreenShare(e.getId(),e.getScreenSharer().getId(),r):s?WhiteBoard.closeWhiteBoard(e.getId(),WhiteBoardConstants.GROUP_CALL,e.getCurrentWhiteBoardId(),r):PresentationAPI.stopPresentation(e.getPresentation().getPresentationId(),r),$WC.$Dlg.destroy("presentation_end_alert")}))]})},resetScreenShareOption:function(){var e=this.getConferenceWindow();e.find("[screen_share_indicator_v2]").addClass("zc-av-hide"),e.removeClass("smartconf-screen-share-ind"),ZCSmartConferenceUI.getConferenceParentDOM().removeClass("smartconf-bottom-banner");var t=e.find('[smartconferencebutton][purpose="stopScreenShare"]');t.length&&(t.attr("purpose","startScreenShare").removeClass("active"),t.find("[icon]").removeClass("zcf-scrn-shr-stop").addClass("zcf-sharescrn"),t.find("[content]").text(Resource.getRealValue("avcliq.media.screenshare.start")))},setMicMutedOption:function(){$('[smartconferencebutton][purpose="muteAudio"]').addClass("zcf-mic-mute").removeClass("zcf-mic").attr({purpose:"unmuteAudio","tooltip-title":MediaUtil.getMicOnToolTip()})},setVideoMutedOption:function(){$('[smartconferencebutton][purpose="muteVideo"]').addClass("zcf-video-mute").removeClass("zcf-video").attr({purpose:"unmuteVideo","tooltip-title":Resource.getRealValue("videochat.cameraon")})},setVideoUnmutedOption:function(){$('[smartconferencebutton][purpose="unmuteVideo"]').addClass("zcf-video").removeClass("zcf-video-mute").attr({purpose:"muteVideo","tooltip-title":Resource.getRealValue("videochat.cameraoff")})},handleEscape:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e&&!e.isSilentConference()){if(ZCSmartConferenceUI.closeInviteUsers(e.getId()))return!0;if(this.isInMaximizedView()&&!WmsImpl.isGuestConferenceUser())return this.showMinimizedWindow(),!0}return!1},handleOpenFullScreen:function(e){ZCSmartConferenceImpl.getCurrentSession().setWindowInFullScreen(!0),e.removeClass("zcf-fullscrn").addClass("zcf-exit-fullscrn"),e.attr({purpose:"exitFromFullScreen","tooltip-title":Resource.getRealValue("media.exit.fullscreen")}),this.handleResize()},handleExitFullScreen:function(e){ZCSmartConferenceImpl.getCurrentSession().setWindowInFullScreen(!1),e.removeClass("zcf-exit-fullscrn").addClass("zcf-fullscrn"),e.attr({purpose:"openInFullScreen","tooltip-title":Resource.getRealValue("media.open.fullscreen")}),this.handleResize()},handleOpenPresenterViewInFullScreen:function(e){e.removeClass("zcf-fullscrn").addClass("zcf-exit-fullscrn"),e.attr({purpose:"exitPresenterViewFromFullScreen","tooltip-title":Resource.getRealValue("media.exit.fullscreen")}),ZCSmartConferenceUI.getConferenceWindow().addClass("smartconf-active-speaker-full-screen-view"),this.handleResize()},handleExitPresenterViewFromFullScreen:function(e){e.removeClass("zcf-exit-fullscrn").addClass("zcf-fullscrn"),e.attr({purpose:"openPresenterViewInFullScreen","tooltip-title":Resource.getRealValue("media.open.fullscreen")}),ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-active-speaker-full-screen-view"),this.handleResize()},showEndOptions:function(e,t,n,i){var r=e.getId()+"end_dropdowncnt";if(0===i.children().length){var o=ZCSmartConferenceTemplates.getEndOptionsHtml(e,t);i.attr("id",e.getId()+"end_dropdownopt"),i.removeAttr("tooltip-title").html(o),Clickoutside.bind({event:n,srcid:i.attr("id"),destid:r,doNotClose:function(t,n,i){return i&&i.target.id===e.getId()+"end_dropdownopt"},customHide:function(e){i.attr("tooltip-title",Resource.getRealValue("conference.end")),$("#"+e.destid).remove()}})}else i.attr("tooltip-title",Resource.getRealValue("conference.end")),$("#"+r).remove(),Clickoutside.clear(r)},showHostLeaveConfirmation:function(e,t){var n=$("#host_leave_confirm_cnt");if(n.length){if(n.attr("conference_id")===e.getId())return;n.remove()}if($("body").append(ZCSmartConferenceTemplates.getHostLeaveConfirmCntHtml(e,t)),SearchField.init("conference-assign-host-selection"),ZCSmartConferenceImpl.hasOnlyTwoActiveMembers(e)){var i=ZCSmartConferenceImpl.getNonCurrentActiveMember(e);SearchField.insertSelection("conference-assign-host-selection","contact",i.getId(),Users.getName(i.getId(),i.getName())),ZCSmartConferenceHandler.assignHostSuggestion.replacSelectedValueAsNode(i.getId())}},closeHostLeaveConfirmation:function(e){var t=$("#host_leave_confirm_cnt");t.attr("conference_id")===e&&t.remove()},closeInviteUsers:function(e){var t=$("#conference_invite_users");return t.attr("conference_id")===e&&(t.remove(),!0)},showSessionEndedStateFromPreviewWindow:function(e,t){$("#preview_room_window").length>0&&!WmsImpl.isGuestUser()&&(ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.sessionEnded),$("body").append('<div id="conference_exit_info" class="bcast-bg huddle-wrp">'+ZCSmartConferenceTemplates.getEndStateHtml(!1,e,t)+"</div>"),clearTimeout(ZCSmartConferenceUI.roomCloseTimeout),ZCSmartConferenceUI.roomCloseTimeout=setTimeout((function(){ZCSmartConferenceUI.roomCloseTimeout=void 0,$("#conference_exit_info").remove()}),2e3))},showEndState:function(e,t,n,i,r){var o=$("#smartconferencewindow");o.html(ZCSmartConferenceTemplates.getEndStateHtml(t,n,i,r)),Conference.isRetryEnabled()&&ZCSmartConferenceImpl.stopInitialRetry(e.getSessionKey()),WmsImpl.isGuestUser()?ZCSmartConferenceUI.showFeedback(e,!0,!1,o):(clearTimeout(ZCSmartConferenceUI.roomCloseTimeout),ZCSmartConferenceUI.roomCloseTimeout=setTimeout((function(){ZCSmartConferenceUI.closeConferenceWindow(e.getId()),ZCSmartConferenceUI.roomCloseTimeout=void 0,ZCSmartConferenceUI.showFeedback(e,!1,!1)}),2e3))},showFeedback:function(e,t,n,i){if(n||!e.wasFeedbackShown()){var r=ZCMediaConstants.callRecordingTypes.AUDIO_CONFERENCE,o={audio:!0,miniView:!1,customData:{conferenceId:e.getId(),conferenceType:e.getType(),logString:ConferenceLog.getLogString()}};e.isVideoConference()&&(r=ZCMediaConstants.callRecordingTypes.VIDEO_CONFERENCE,o.video=!0),e.hadScreenShare()&&(o.screen=!0),t?(o.miniView=!0,o.container=i.find("#guest_exit_info"),o.submitCallBack=function(e){ZCSmartConferenceImpl.updateClientLog(e.customData.conferenceId,e.customData.conferenceType,e.customData.logString)}):o.drag=!0,(n?ZCMediaFeedback.show:ZCMediaFeedback.checkAndshow)(e.getSessionKey(),r,e.getCreatorId(),o)}},closeChatNotification:function(){Conference.domCache.get("#conference-chat-notification").hide(),clearTimeout(Conference.chatNotificationDisplayTimeout),delete Conference.chatNotificationDisplayTimeout},sendConferenceEndtoNotebook:function(e){"undefined"!=typeof NotebookIntegration&&NotebookIntegration.sendConferenceEnd(e)},destroyChatNotificationDom:function(){Conference.domCache.get("#conference-chat-notification").remove(),clearTimeout(Conference.chatNotificationDisplayTimeout),delete Conference.chatNotificationDisplayTimeout;let e=["#conferencemainsection","#conference-chat-notification","#chat-notification-message-list","#conferencerhscnt","#smartconferencechattab"];for(let t in e)delete Conference.domCache.storage[e[t]]},showV2InviteUserPanel:function(e,t){if(!$("#invite_users_panel").length){var n=ZCSmartConferenceTemplates.getV2InviteUserPanelHtml(e,t),i=e.isOldImpl()?ConferenceUI:ZCSmartConferenceUI;if(i.getConferenceWindow().append(n),t){var r=i.getConferenceWindow().find("[invite_user_rhs]"),o=i.getConferenceWindow().find("#invite_users_panel"),s=r.offset().top,a=o.innerHeight();s>a?o.css("top",s-a):o.css("top",s+30),ZCSmartConferenceUI.adjustInviteUsersInPanelInRhs(o)}ZCSmartConferenceHandler.invitePanelMailSuggestion=new UserSuggestions("conference-send-mail-selection",50,void 0,!0,void 0),ZCSmartConferenceHandler.invitePanelMailSuggestion.onChange=function(){$("#invite_users_panel").find('[smartconferencebutton][purpose="sendMailFromPanel"]').toggleClass("zcdisabled",0===this.getSelectedListValues().length)},ZCSmartConferenceHandler.invitePanelUsersSuggestion=new UserSuggestions("conference-send-invite-selection",50,void 0,!0,void 0),ZCSmartConferenceHandler.invitePanelUsersSuggestion.onChange=function(){$("#invite_users_panel").find('[smartconferencebutton][purpose="inviteUsersFromPanel"]').toggleClass("zcdisabled",0===this.getSelectedListValues().length)},Clickoutside.bind({srcid:"conference_inviteuser",destid:"invite_users_panel",customShow:function(){},customHide:function(e){ZCSmartConferenceUI.closeV2InviteUserPanel()}}),$("#conference_inviteuser").addClass("active").removeAttr("tooltip-title")}},adjustInviteUsersInPanelInRhs:function(e){if(e.hasClass("smartconf-inviteuserpanel-rhs")){var t=e.offset().top,n=e.innerHeight(),i=window.innerHeight,r=t+n;if(r>i){var o=r-i;e.css("top",t-o-30)}}},closeV2InviteUserPanel:function(){Clickoutside.clear("invite_users_panel"),$("#invite_users_panel").remove(),$("#conference_inviteuser").removeClass("active").attr("tooltip-title",Resource.getRealValue("contact.invite"))},showStreamingPopup:function(){0===$("#conference_streamingpopup").length&&$("body").append(ZCSmartConferenceTemplates.getStreamingLinkPopup())},indicateIfCurrUserNetworkIsPoor:function(e,t){(t?$("#preview_room_window"):$("#conference-detachedwrapper")).find("[before_join_network_strength]").toggleClass("zc-av-dN",!ZCMediaNetworkPredictorImpl.isPoorNetwork(e))},pipUtil:{getMediaContainersForPIP:function(){var e=ZCSmartConferenceImpl.getCurrentSession(),t=ZCSmartConferenceUI.getConferenceWindow(),n=e.getVideoStreamIds(),i={},r=[],o=void 0;t.find("[mediaContainer]").each((function(){var t=$(this),s=t.attr("videoStreamId");if("local"===t.attr("streamSource")&&(o=t,s=e.getCurrentUserVideoStreamId()),n&&s&&!t.hasClass("dN")){var a=n.indexOf(s);void 0!==a&&(i[a]=t,r.push(a))}})),r.sort((function(e,t){return e-t}));var s=void 0,a=[];if(r.length>0){s=i[r[0]];for(var c=1;c<r.length;c++){var d=r[c],l=i[d];a.push(l)}}else s=o;var u=void 0;if(ZCSmartConferenceUI.isScreenInView()){var f=e.getScreenSharerId();u=t.find('[screenContainer][userId="'+f+'"]')}return{mainSpeakerContainer:s,filmStripContainers:a,screenOrWBContainer:u}},paintMainSpeakerView:function(e,t,n){var i=e.getContext("2d"),r=new AVCliqDimensions(0,0,e.width,e.height),o=void 0!==n;if(ZCPIPUtil.applyCanvasDimension(i,o?ZCMediaConstants.pip.videoWinDimension:ZCMediaConstants.pip.audioWinDimension),ZCPIPUtil.paintMainBackground(i,r),void 0!==n){var s=e.width/3,a=e.width-s;r.alterMeasurements(a,e.height),ZCPIPUtil.paintEachVideoInPIP(i,n,{muted:!1,mirror:!1},r.clone()),r.alterMeasurements(s,e.height),r.moveAxis(a,0)}var c=t.attr("info_set_user_id"),d=ZCSmartConferenceImpl.getCurrentUserId()===c,l=Users.getName(c,ZCSmartConferenceImpl.getSessionUserName(ZCSmartConferenceImpl.getCurrentSession(),c)),u={muted:t.hasClass("smartconf-video-muted"),mirror:d&&ZCMediaPreferences.isRotateVideoEnabledByUser(),name:l};ZCPIPUtil.paintEachVideoInPIP(i,t,u,r.clone())},paintVideosForPIP:function(){var e=ZCSmartConferenceImpl.getCurrentSession().getCanvasForPIP(),{mainSpeakerContainer:t,filmStripContainers:n,screenOrWBContainer:i}=this.getMediaContainersForPIP();this.paintMainSpeakerView(e,t,i)}}},(ZCSmartConferenceConstants={memberTypes:{SILENT:"silent",ACTIVE:"active"},memberConnectionMode:{ON_DEMAND:"on_demand",SILENT:"silent"},roles:{COHOST:"cohost",HOST:"host"},ackTypes:{SWITCHED_TO_SILENT:"switched_to_silent",CONNECTIONS_CLOSED:"connections_closed"},dcMtypes:{VIEW_CHANGE:5001,CURRENT_SPEAKER:5007,ACTIVE_SPEAKER:5008,FOCUSED_MODE:5014,BANDWIDTH_SCORE:5017,MEDIA_SERVER_DATA_RECEIVE:5025,MEDIA_SERVER_DATA_SHOW_GRID:5026,SET_SPEAKER_COUNT:5500,CUSTOM:5501,MEDIA_SERVER_DATA_SEND:5503},layouts:{STAGE:"stage",GRID:"grid"},screenLayouts:{TOP_VIEW:"top_view",RHS_VIEW:"rhs_view",ACTIVE_SPEAKER_VIEW:"active_speaker_view",TOP_VIEW_INT:0,ACTIVE_SPEAKER_VIEW_INT:1,RHS_VIEW_INT:2,getLayoutIcon:function(e){var t="zcf-ss-top-view";return this.isInRhsView(e)?t="zcf-ss-rhs-view":this.isInActiveSpeakerView(e)&&(t="zcf-ss-active-speaker-view"),t},getSSLayoutClass:function(){var e="smartconf-ss-active-speaker-view",t=Settings.getFromObj("huddle_screenshare_layout");return t===this.TOP_VIEW_INT?e="smartconf-ss-top-view":t===this.RHS_VIEW_INT&&(e="smartconf-ss-rhs-view "),e},getSSLayout:function(){var e=Settings.getFromObj("huddle_screenshare_layout"),t=this.ACTIVE_SPEAKER_VIEW;return e===this.TOP_VIEW_INT?t=this.TOP_VIEW:e===this.RHS_VIEW_INT&&(t=this.RHS_VIEW),t},isInTopView:function(e){return e===this.TOP_VIEW},isInRhsView:function(e){return e===this.RHS_VIEW},isInActiveSpeakerView:function(e){return e===this.ACTIVE_SPEAKER_VIEW}},configurationUserTypes:{COHOST:"cohost",SAME_ORG:"same_org",EXTERNAL_USER:"external_user"},KNOCK:"knock",presentationType:{SCREENSHARE:"screenshare",WHITEBOARD:"whiteboard",EDIT_WHITEBOARD:"edit_whiteboard",PRESENTATION:"presentation"},requestStates:{PENDING:"pending",CANCELLED:"cancelled",ACCEPTED:"accepted",REJECTED:"rejected"},rhsListCategories:{HOST:"host",COHOSTS:"cohosts",SPEAKER_REQUESTS:"speaker_requests",KNOCK_REQUESTS:"knock_requests",SPOTLIGHT_PARTICIPANTS:"spotlight_participants",ACTIVE_PARTICIPANTS:"active_participants",SILENT_PARTICIPANTS:"silent_participants",YET_TO_JOIN:"yet_to_join"},previewCloseSource:{closedFromUI:"closedFromUI",closedFromRecordingConsent:"closedFromRecordingConsent",meetingStartClicked:"meetingStartClicked",rhsStartUIClosed:"rhsStartUIClosed",clearExistingSession:"clearExistingSession",sessionEnded:"sessionEnded"},startPreviewSessionId:"start_preview_session",quickStartPreviewSessionId:"quick_start_preview_session",maxNoOfVideosInGrid:20,noOfColumnsInGrid:6,noOfBoxesForGridMainSpeaker:4,requests:{muteAllParticipantsStatus:0,muteUserStatus:1,unmuteParticipantsRestriction:2,spotLightAllowSpeakersVideo:3,applyVideoBackgroundEffect:5,requestVideoForUnmute:6,startStopRecording:7,requestAudioForUnmute:8,requestAudioStreamForUnmute:9,requestVideoStreamForUnmute:10,requestAudioStreamForSpeechDetection:11,startStopStreaming:12,retryStart:13},nvfValues:{YES:"yes",NO:"no",FAST:"fast",SLOW:"slow",TIMEOUT:"timeout",NO_VOTE:"no_vote"},nvfTypes:{VOTE:"vote",SPEED:"speed",TIMEOUT:"timeout"},ringBannerCases:{RING_ALL:"ringall",STOP_RING_ALL:"stopringall",PARTICIPANT_UPDATE:"participantupdate"},nvfValueVsType:{},gifExpiry:5e3,gifDuration:5e3,searchHideLimit:20,shortcutReactionCodes:[":thumbsup!:",":clap!:",":love!:",":cool!:",":raising-hand!:",":fireworks!:"]}).nvfValueVsType[ZCSmartConferenceConstants.nvfValues.YES]=ZCSmartConferenceConstants.nvfTypes.VOTE,ZCSmartConferenceConstants.nvfValueVsType[ZCSmartConferenceConstants.nvfValues.NO]=ZCSmartConferenceConstants.nvfTypes.VOTE,ZCSmartConferenceConstants.nvfValueVsType[ZCSmartConferenceConstants.nvfValues.FAST]=ZCSmartConferenceConstants.nvfTypes.SPEED,ZCSmartConferenceConstants.nvfValueVsType[ZCSmartConferenceConstants.nvfValues.SLOW]=ZCSmartConferenceConstants.nvfTypes.SPEED,ZCSmartConferenceConstants.nvfValueVsType[ZCSmartConferenceConstants.nvfValues.TIMEOUT]=ZCSmartConferenceConstants.nvfTypes.TIMEOUT,ZCSmartConferenceImpl={_outgoingSession:void 0,_joiningSession:void 0,_currentSession:void 0,_idVsApiResponse:{},_networkPredictor:{},_initialRetryInterval:void 0,_initialRetryingData:{},isRingingForCurrentUser:!1,init:function(){ZCSmartConferenceUI.bindEvents()},getCurrentUserId:function(){return $zcg._ZUID},getCurrentUserName:function(){return Users.getName(this.getCurrentUserId())},hasOutgoingSession:function(){return void 0!==ZCSmartConferenceSession&&this.getOutgoingSession()instanceof ZCSmartConferenceSession},getOutgoingSession:function(){return this._outgoingSession},setOutgoingSession:function(e){this.hasOutgoingSession()&&this.getOutgoingSession().terminate();this._outgoingSession=e},clearOutgoingSession:function(){this._outgoingSession=void 0},hasJoiningSession:function(){return void 0!==ZCSmartConferenceSession&&this.getJoiningSession()instanceof ZCSmartConferenceSession},getJoiningSession:function(){return this._joiningSession},setJoiningSession:function(e){this._joiningSession=e},clearJoiningSession:function(){this._joiningSession&&(MediaUtil.clearAudioPreview(this._joiningSession),this._joiningSession.clearVideoEffectsPreview()),this._joiningSession=void 0},addIncomingCallNetwokPredictor:function(e){Conference.isNetworkStrengthIndicationEnabled()&&(this._networkPredictor[e]=new ZCMediaNetworkPredictor(e,(function(e){ZCSmartConferenceUI.indicateIfCurrUserNetworkIsPoor(e,!1)})))},removeIncomingCallNetwokPredictor:function(e){void 0!==this._networkPredictor[e]&&(this._networkPredictor[e].stop(),delete this._networkPredictor[e])},setAPIResponse:function(e,t){this._idVsApiResponse[e]=t},resetAPIResponse:function(e){delete this._idVsApiResponse[e]},getAPIResponse:function(e){return this._idVsApiResponse[e]},hasCurrentSession:function(){return void 0!==ZCSmartConferenceSession&&this.getCurrentSession()instanceof ZCSmartConferenceSession},hasCurrentActiveSession:function(){return this.hasCurrentSession()||ConferenceImpl.hasCurrentSession()},getCurrentSession:function(){return this._currentSession},isCurrentSession:function(e){return!!this.hasCurrentSession()&&this.getCurrentSession().getId()===e},setCurrentSession:function(e){this.hasCurrentSession()&&this.getCurrentSession().terminate();this._currentSession=e,this.setSessionActive()},clearCurrentSession:function(){this._currentSession=void 0},setSessionActive:function(){var e=this.getCurrentSession();e&&(e.hasChatId()?ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE):e.isQuickStartPreview()&&ZCSmartConferenceUI.showV2InviteUserPanel(e))},getCurrentActiveSession:function(){return this.hasCurrentSession()?this.getCurrentSession():ConferenceImpl.hasCurrentSession()?ConferenceImpl.getCurrentSession():void 0},isSmartConferenceSession:function(e){return e instanceof ZCSmartConferenceSession},getDefaultSharerNameIfEmpty:function(e){return e||Resource.getRealValue("common.anotheruser")},getSessionForAdhocCall:function(e){var t=this.getCurrentSession();return void 0===t&&(t=this.hasOutgoingSession()?this.getOutgoingSession():this.getJoiningSession()),t&&t.getAdhocCallId()===e?t:void 0},triggerSessionTimer:function(e){SessionTimers.setTimer("smartconferencesessiontimer",{startTime:e}),SessionTimers.setTimer("smartconferencesessionsubtimer",{startTime:e})},triggerStartInitialRetry:function(e,t){var n={action:"start",sessionKey:t,audio:!0};e&&(n.video=!0),this._triggerInitialRetryInterval(n)},triggerJoinInitialRetry:function(e,t,n){var i={action:"join",sessionKey:t,nrsSessionId:n,audio:!0};e&&(i.video=!0),this._triggerInitialRetryInterval(i)},_triggerInitialRetryInterval:function(e){clearInterval(this._initialRetryInterval),this._initialRetryingData=e,this._initialRetryInterval=setInterval(function(){var e={};this._initialRetryingData&&("start"===this._initialRetryingData.action?(this._initialRetryingData.audio&&(e.audio=!0),this._initialRetryingData.video&&(e.video=!0),ConferenceAPI.retryStart(this._initialRetryingData.sessionKey,e)):"join"===this._initialRetryingData.action&&(this._initialRetryingData.audio&&ConferenceAPI.reconnect(this._initialRetryingData.nrsSessionId,WebRTCPeerConnectionConstants.connectionTypes.AUDIO),this._initialRetryingData.video&&ConferenceAPI.reconnect(this._initialRetryingData.nrsSessionId,WebRTCPeerConnectionConstants.connectionTypes.VIDEO)))}.bind(this),5e3)},stopInitialRetry:function(e){this._initialRetryingData.sessionKey&&!$WC.Util.isEmpty(e)&&e===this._initialRetryingData.sessionKey&&(clearInterval(this._initialRetryInterval),this._initialRetryInterval=void 0,this._initialRetryingData={})},stopInitialRetryBasedOnOffer:function(e,t,n){if(this._initialRetryingData.sessionKey&&e===this._initialRetryingData.sessionKey){if(WebRTCPeerConnectionConstants.isScreenConnection(t))this._initialRetryingData.screen=!1;else{var i=ConferenceImpl.dataModeVsConnectionType[n];WebRTCPeerConnectionConstants.isVideoConnection(i)?this._initialRetryingData.video=!1:this._initialRetryingData.audio=!1}this._initialRetryingData.audio||this._initialRetryingData.video||this._initialRetryingData.screen||this.stopInitialRetry(e)}},getSessionUserName:function(e,t){var n=void 0,i=e.getMember(t);return i&&(n=i.getName()),n||(n=e.getLeftMemberName(t)),$WC.$CUtil.processXSS(n)},isValidChatForCurrentSession:function(e){if(!this.hasCurrentSession())return!1;if(e.startsWith("dummy"))return!0;var t=this.getCurrentSession(),n=t.getChatId(),i=t.getThreadChatId();return!(!i||i!==e)||(!(!n||n!==e)||!(!n||!n.includes(e)))},isActiveMember:function(e){return e===ZCSmartConferenceConstants.memberTypes.ACTIVE},hasMoreThanOneActiveMember:function(e){var t=e.getMembers(),n=0;for(var i in t){if(t[i].isActiveMember()&&n++,n>1)return!0}return!1},hasOnlyTwoActiveMembers:function(e){var t=e.getMembers(),n=0;for(var i in t){if(t[i].isActiveMember()&&n++,n>2)return!1}return 2===n},getNonCurrentActiveMember:function(e){var t=e.getMembers();for(var n in t){var i=t[n];if(i.isActiveMember()&&!e.isCurrentUser(n))return i}},getAndSetPeopleInfo:function(e){var t={uid:e,successcallback:function(t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n)for(var i=0;i<e.length;i++){var r=e[i],o=t[r];if(void 0!==o){var s=n.getMember(r);void 0!==s&&(s.setPeopleDetails(o),ZCSmartConferenceUI.updatePeopleInfo(n,s))}}}};void 0!==Users.getPeopleInfoFromClientAndServer&&Users.getPeopleInfoFromClientAndServer(t)},getAndPopulateYetToJoinList:function(e){if(!e.hasPopulatedPendingUsersList()){if(e.isPersonalScope())ZCSmartConferenceUI.populateYetToJoinList(e,e.getInvitedMemberIds()),ZCSmartConferenceUI.checkAndShowRhsSearch(e);else{var t=e.getChatId();void 0!==t&&Participants.getIDsAfterPopulated(t,(function(){ZCSmartConferenceUI.reinitListView(e),ZCSmartConferenceUI.checkAndShowRhsSearch(e),ZCSmartConferenceUI.setMuteRestrictionInfo(e.isOldImpl())}))}e.setPendingUsersListAsPopulated()}},attachChat:function(e,t){if(Config.isConferenceChatSwitcherEnabled())ConferenceUI.fetchChat();else{var n=ZCSmartConferenceImpl.getCurrentSession();if(!n.isThreadChatAllowed()||void 0!==n.isChatPermitted()||WmsImpl.isGuestConferenceUser()){if(n.getId()===e){var i=function(e){var n=ChatUI.exist[e];n?ZCSmartConferenceUI.handleChatWindowCreated(n,t):"undefined"!=typeof DummyCwinUtils&&e.startsWith(DummyCwinUtils.CONSTANTS.DUMMY_CHATID_PREFIX)?ZCSmartConferenceImpl.createDummyChatForSession(ZCSmartConferenceImpl.getCurrentSession(),t):ConversationsList.attachContinueActiveChat(e,!1,t)};n.isChatToggleAllowed()&&n.getActiveChatId()?i(n.getActiveChatId()):void 0!==n.getThreadChatId()?i(n.getThreadChatId()):void 0!==n.getDummyThreadChatId()&&i(n.getDummyThreadChatId()),n.isThreadChatAllowed()?void 0!==n.getThreadChatId()?i(n.getThreadChatId()):void 0!==n.getDummyThreadChatId()?i(n.getDummyThreadChatId()):ZCSmartConferenceImpl.createDummyChatForSession(n,t):n.isPersonalScope()&&void 0===n.getChatId()?void 0!==n.getDummyChatId()?i(n.getDummyChatId()):ZCSmartConferenceImpl.createDummyChatForSession(n,t):i(n.getSwitchedChatId())}}else ConferenceAPI.fetchChatPermission(n.getId(),(function(){ZCSmartConferenceImpl.attachChat(e,t)}))}},createDummyChatForSession:function(e,t,n){let i,r;if(e.isPersonalScope())i=e.getId().replaceAll("_","-").replace("%20","-"),r={isDummyThreadChat:!1,title:e.getTitle()};else{let t=e.getNativeWidgetMessageId();i=t.replace("%20","-"),r={isDummyThreadChat:!0,parentChatId:e.getChatId(),parentMsgUid:t,parentMsgSenderId:e.getHostId(),title:e.getTitle()}}n&&(r.canCreateAsDetachedCwin=!0),DummyCwinUtils.createDummyCwinInUI(i,r);let o=e.getMembersCount();e.getConfigurations().isChatAccessibleToExternalUser()||(o-=e.getGuestMembersCount());let s=ChatUI.exist[e.isPersonalScope()?e.getDummyChatId():e.getDummyThreadChatId()];s&&s.updateChatParticipants(Resource.getRealValue(o<2?"channel.tip.joinedparticip":"chat.participants.count",o+"")),"function"==typeof t&&t(void 0,i)},handleChatRemoved:function(e){var t=this.getCurrentSession();null!=t&&t.hasChatId()&&t.getChatId()===e&&this.endConference(t.getId(),!0)},removeChat:function(e,t){if(!Config.isConferenceChatSwitcherEnabled()&&t.getChatContainer().find("#"+e).length){if(t.isChatToggleAllowed()){var n=ChatUI.exist[e];n&&(n.isThreadChat()?n.renderChatImage():n.updateChatImage())}MainUI.revertToViewPort(e)}},convertOutgoingToCurrentSession:function(e){var t=this.getOutgoingSession();this.clearOutgoingSession(),t.isQuickStartPreview()&&e.setAsQuickStartPreview(),e.setMembers(t.getMembers());var n=t.getAVUpStream();n&&e.setAVUpStream(n),e.setCurrentView(t.getCurrentView()),e.setAudioUpStream(t.getAudioUpStream()),e.setVideoUpStream(t.getVideoUpStream()),e.setRecordingReferenceIndex(t.getRecordingReferenceIndex()),e.setLocalMediaContainer(t.getLocalMediaContainer()),e.setVideoEffects(t.getVideoEffects()),e.setRememberVideoEffectsStatus(t.canRememberVideoEffects()),e.setEventsLogString(t.getEventsLogString()),e.setEventsLogObject(t.getEventsLogObject()),this.setCurrentSession(e),ZCSmartConferenceUI.setConferenceWindowId(e.getId()),ZCSmartConferenceUI.updateSessionOptions(e),ZCSmartConferenceImpl.triggerSessionTimer(e.getStartTime())},handleNewSessionStart:function(e,t,n,i,r,o,s,a){var c={conferenceId:"outgoingsession",conferenceType:t,conferenceHostId:ZCSmartConferenceImpl.getCurrentUserId(),conferenceHostName:ZCSmartConferenceImpl.getCurrentUserName(),conferenceMode:Conference.modes.SMART,title:e,adhocCallDetails:s,scope:{type:n,ids:i},sessionId:WmsImpl.getSid(),associated_resource:a};MediaManager.isChatScope(n)&&(c.scope.chat_id=i[0]);var d=new ZCSmartConferenceSession(c);d.addMember(this.getCurrentUserId(),this.getCurrentUserName(),ZCSmartConferenceConstants.memberTypes.ACTIVE,void 0);var l=d.getCurrentMember();r instanceof MediaStream?(d.setAudioUpStream(r),r._isAudioTrackEnabled()&&!r._isAudioRestrictedForConnection()||l.handleAVStreamStatus("audio",!0,$Util.getSyncedCurrentTime(),l.getId())):l.handleAVStreamStatus("audio",!0,$Util.getSyncedCurrentTime(),l.getId()),o instanceof MediaStream?(Conference.applyVideoConstraints(o,d),d.setVideoUpStream(o),o._isVideoTrackEnabled()||l.handleAVStreamStatus("video",!0,$Util.getSyncedCurrentTime(),l.getId())):l.handleAVStreamStatus("video",!0,$Util.getSyncedCurrentTime(),l.getId()),this.setOutgoingSession(d),ZCSmartConferenceUI.openConferenceWindow(d),(l=d.getCurrentMember()).isAudioMuted()&&ZCSmartConferenceUI.setMicMutedOption(),l.isVideoMuted()&&ZCSmartConferenceUI.setVideoMutedOption();var u=ZCSmartConferenceUI.addAndGetMediaContainer(this.getCurrentUserId(),this.getCurrentUserName());u.attr("streamSource","local"),u.removeClass("dN"),u.find("[hostIndicator]").toggleClass("dN",!d.isCurrentUserHost()),ZCSmartConferenceUI.handleResize(),d.setLocalMediaContainer(u),ZCSmartConferenceUI.updateMutedInfo(u,d.getCurrentMember()),ZCSmartConferenceUI.updateMutedInfoInList(d,d.getCurrentMember()),ZCSmartConferenceUI.updateAudioMutedInfo(d),MediaUtil.setAndPlayStreamInMediaContainer(u,o,!0);var f=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();f&&f.length&&(MediaUtil.setAndPlayStreamInMediaContainer(f,o,!0),ZCSmartConferenceUI.updateMutedInfo(f,d.getCurrentMember()))},handleDeviceChange:function(e,t,n){var i=e.getAudioUpStream(),r=e.getVideoUpStream(),o=void 0!==t[ZCMediaDevices.kinds.AUDIO_OUTPUT];if(o){var s=Object.values(e.getAudioMediaContainers());Conference.isNomenclatureEnabled()&&s.push(MediaUtil.setAndGetAudioPreviewContainer(e)),MediaManager.setPreferredAudioOutput(s)}if(t[ZCMediaDevices.kinds.AUDIO_INPUT]||t[ZCMediaDevices.kinds.VIDEO_INPUT]){var a=function(t){ZCSmartConferenceImpl.hasCurrentSession()?e.renegotiateVideoUpStream(t):WebRTCUserMedia.closeStream(t._getType())};t[ZCMediaDevices.kinds.AUDIO_INPUT]&&void 0!==i?WebRTCUserMedia.requestAndReplaceTracksInStream(i,WebRTCUserMedia.streamTypes.AUDIO_ONLY,(function(o){ZCSmartConferenceImpl.hasCurrentSession()?(e.renegotiateAudioUpStream(o),t[ZCMediaDevices.kinds.VIDEO_INPUT]&&WebRTCUserMedia.requestAndReplaceTracksInStream(r,WebRTCUserMedia.streamTypes.VIDEO_ONLY,a,void 0,void 0,Conference.getVideoEffects(e)),n&&(MediaManager.checkAndShowMicSwitchedInfo(o,i,!0),ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(e))):WebRTCUserMedia.closeStream(o._getType())}),void 0,void 0,void 0):t[ZCMediaDevices.kinds.VIDEO_INPUT]&&void 0!==r&&WebRTCUserMedia.requestAndReplaceTracksInStream(r,WebRTCUserMedia.streamTypes.VIDEO_ONLY,a,void 0,void 0,Conference.getVideoEffects(e))}else n&&o&&(MediaManager.checkAndShowAddedSpeakerSwitchedInfo(t[ZCMediaDevices.kinds.AUDIO_OUTPUT]),ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(e))},handleSpeechDetectionConfigUpdate:function(e){if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=t instanceof ZCSmartConferenceSession,i=t.getCurrentMember(),r=i.isAudioMuted();if(!e)(n?ZCSmartConferenceUI:ConferenceUI).closeSpeechDetectedInfo();if(r){var o=n?ZCSmartConferenceImpl:ConferenceImpl;if(e){if(i.getAudioUpStream())return;if(!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute)&&!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioStreamForSpeechDetection)){MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestAudioStreamForSpeechDetection),WebRTCUserMedia.requestAudioStream((function(e){MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioStreamForSpeechDetection),ZCSmartConferenceImpl.hasCurrentActiveSession()?(t instanceof ConferenceSession?(i.setLocalAudioUpStream(e),i.updateAudioUpStreamInContainer()):t.setAudioUpStream(e),o.changeAVStatus("audio",i.isAudioMuted(),!0)):WebRTCUserMedia.closeStream(e._getType())}),(function(e,t){MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioStreamForSpeechDetection)}))}}else o.changeAVStatus("audio",!0,!0)}}},handleHDVideoConfigUpdate:function(e){ZCSmartConferenceImpl.hasCurrentSession()&&ZCSmartConferenceImpl.getCurrentSession().handleHDVideoConfigUpdate(e)},handleIncomingVideoState:function(e){ZCSmartConferenceImpl.hasCurrentSession()&&ZCSmartConferenceImpl.getCurrentSession().handleIncomingVideoState(e)},handleNewSessionJoin:function(e,t,n){var i={conferenceId:e,conferenceType:t.type,conferenceHostId:t.host.id,conferenceHostName:t.host.name,conferenceHostScopeId:t.conferenceHostScopeId,conferenceMode:Conference.modes.SMART,title:t.title,scope:t.scope,startTime:t.start_time,sessionId:WmsImpl.getSid(),adhocCallDetails:t.adhocCallDetails,associated_resource:t.associated_resource,configurations:t.configurations,waiting_lobby_requests:t.waiting_lobby_requests,session_key:t.session_key,presentation_requests:t.presentation_requests};t.creatorId&&(i.creatorId=t.creatorId,i.creatorName=t.creatorName);var r=new ZCSmartConferenceSession(i);r.addMember(this.getCurrentUserId(),this.getCurrentUserName(),t.memberType,void 0),t.memberConnectionMode&&r.setMemberConnectionMode(t.memberConnectionMode),r.addMember(t.host.id,t.host.name,ZCSmartConferenceConstants.memberTypes.ACTIVE,void 0),r.isCurrentUserHost()&&r.setAsNotified(),n&&(r.setAVUpStream(n),Conference.applyVideoConstraints(n,r)),this.setCurrentSession(r),ZCSmartConferenceUI.openConferenceWindow(r),t.focused_mode&&(t.focused_mode.enabled?r.setFocusedModeAsEnabled(t.focused_mode.user_ids,t.focused_mode.time,t.focused_mode.set_by):r.setFocusedModeAsDisabled(t.focused_mode.time,t.focused_mode.set_by));var o=ZCSmartConferenceUI.addAndGetMediaContainer(this.getCurrentUserId(),this.getCurrentUserName());o.attr("streamSource","local"),o.find("[hostIndicator]").toggleClass("dN",!r.isCurrentUserHost()),ZCSmartConferenceUI.handleResize(),r.setLocalMediaContainer(o),MediaUtil.setAndPlayStreamInMediaContainer(o,n,!0);var s=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();s&&s.length&&MediaUtil.setAndPlayStreamInMediaContainer(s,n,!0),ZCSmartConferenceImpl.triggerSessionTimer(r.getStartTime())},openJoinSettings:function(e,t,n){var i=function(i,r){"function"==typeof n&&n(),t.recording&&(ConferenceImpl.recordingIndex=t.recording_index);var o={conferenceId:e,conferenceType:t.type,conferenceHostId:t.host.id,conferenceHostName:t.host.name,conferenceHostScopeId:t.conferenceHostScopeId,conferenceMode:Conference.modes.SMART,title:t.title,scope:t.scope,startTime:t.start_time,sessionId:WmsImpl.getSid(),adhocCallDetails:t.adhocCallDetails,associated_resource:t.associated_resource,configurations:t.configurations,waiting_lobby_requests:t.waiting_lobby_requests,session_key:t.session_key,presentation_requests:t.presentation_requests};t.creatorId&&(o.creatorId=t.creatorId,o.creatorName=t.creatorName);var s=new ZCSmartConferenceSession(o);s.setEncryptedResourceId(t.encryptedResourceId),s.addMember(ZCSmartConferenceImpl.getCurrentUserId(),ZCSmartConferenceImpl.getCurrentUserName(),t.memberType,void 0),s.addMember(t.host.id,t.host.name,ZCSmartConferenceConstants.memberTypes.ACTIVE,void 0),s.isCurrentUserHost()&&s.setAsNotified(),i instanceof MediaStream?s.setAudioUpStream(i):s.setAudioUpStreamBlockedStatus(!0),r instanceof MediaStream&&(Conference.applyVideoConstraints(r,s),s.setVideoUpStream(r));var a=WebRTCUserMedia.getStream(WebRTCUserMedia.streamTypes.SCREEN);if(a&&smartconfSession.setScreenUpStream(a),t.focused_mode&&s.storeFocusedModeDetails(t.focused_mode.enabled,t.focused_mode.time,t.focused_mode.user_ids,t.focused_mode.set_by),s.addPreviewRoomNetworkPredictor(),this.setJoiningSession(s),s.writeToEventsLog(ConferenceLog.constants.eventsLog.previewShown),ConferenceUI.closeWaitingRoom(),ZCSmartConferenceUI.openPreviewRoom(s),s.hasAudioUpStream()||ZCSmartConferenceImpl.changeAVStatusInPreview("audio",!0),s.isVideoConference()){var c=function(){var e=$("#preview_room_window");e.find('[smartconferencebutton][purpose="joinFromPreviewRoom"]').removeAttr("disabled"),s.hasVideoUpStream()?e.find('[purpose="toggleVideoInPreview"]').prop("checked",!0):ZCSmartConferenceImpl.changeAVStatusInPreview("video",!0)};Conference.isVideoDisabledInJoinByUser()?c():ZCSmartConferenceImpl.handleVideoPreviewUnmute(s,c,c)}}.bind(this);Conference.getAudioOrVideoStreams(!1,i),ConferenceUI.setStreamAccess(e)},openTransferPanel:function(e,t,n){this.setAPIResponse(e,t);var i=Conference.isVideoConference(t.type);$WC.$Dlg.create({id:e+"_transfer_group_call",version:3,class:"zcl-alert-dialog-2 smartconf-transfercall-modal",headerhtml:ZCSmartConferenceTemplates.getTransferPanelHeaderHtml(i,t.title),bodyhtml:ZCSmartConferenceTemplates.getTransferPanelBodyHtml(e),closefn:function(){ZCSmartConferenceImpl.resetAPIResponse(e),SessionTimers.clearTimer("transfercall_panel_timer")}});SessionTimers.setTimer("transfercall_panel_timer",{startTime:t.start_time})},convertJoiningSessionToCurrentSession:function(){if(this.hasJoiningSession()){var e=this.getJoiningSession();this.setCurrentSession(e),this.clearJoiningSession()}},joinFromPreviewRoom:function(){this.convertJoiningSessionToCurrentSession();var e=this.getCurrentSession();ZCSmartConferenceUI.openConferenceWindow(e),ZCSmartConferenceUI.closePreviewRoom(e);var t=e.getCurrentMember();t.isAudioMuted()&&ZCSmartConferenceUI.setMicMutedOption(),t.isVideoMuted()&&ZCSmartConferenceUI.setVideoMutedOption();var n=e.getLastFocusActivityTime();n>0&&(e.isFocusedModeEnabled()?e.setFocusedModeAsEnabled(e.getFocusedUserIds(),n,e.getFocusedSetById()):e.setFocusedModeAsDisabled(n,e.getFocusedSetById()));var i=ZCSmartConferenceUI.addAndGetMediaContainer(this.getCurrentUserId(),this.getCurrentUserName());i.attr("streamSource","local"),i.find("[hostIndicator]").toggleClass("dN",!e.isCurrentUserHost()),ZCSmartConferenceUI.handleResize(),e.setLocalMediaContainer(i),e.setUpdatedAVStatus(),MediaUtil.setAndPlayStreamInMediaContainer(i,e.getVideoUpStream(),!0);var r=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();r&&r.length&&MediaUtil.setAndPlayStreamInMediaContainer(r,e.getVideoUpStream(),!0),ZCSmartConferenceImpl.triggerSessionTimer(e.getStartTime()),MediaManager.setRequestPending({module:ZCMediaConstants.sessionTypes.CONFERENCE,request_type:ZCMediaConstants.requestTypes.JOIN,id:e.getId()});var o=t.isVideoMuted(),s=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_VIDEO);(e.isAudioConference()||e.isSmartMode()&&o)&&(s=WebRTCUserMedia.getStreamTypeInString(WebRTCUserMedia.streamTypes.AUDIO_ONLY)),ConferenceAPI.join(e.getId(),e.getType(),{audio:{muted:t.isAudioMuted()},video:{muted:o},dataMode:s,sessionKey:e.getSessionKey(),encryptedResourceId:e.getEncryptedPublicResorceId()},(function(){MediaManager.setRequestCompleted(),"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleJoined(e.getId()),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(e)}),(function(t){MediaManager.setRequestCompleted(),ZCSmartConferenceImpl.endConference(e.getId(),!1),t&&t.message&&UI.updateBanner(t.message,2e3,!0)}))},joinFromCustomPreview:function(e,t,n){var i=t.adhocCallDetails,r="undefined"!=typeof MediaCallImpl?MediaCallImpl.getCurrentSession():void 0,o=function(i,r,o){var a={conferenceId:e,conferenceType:t.type,conferenceHostId:t.host.id,conferenceHostName:t.host.name,conferenceHostScopeId:t.conferenceHostScopeId,conferenceMode:Conference.modes.SMART,title:t.title,scope:t.scope,startTime:t.start_time,sessionId:WmsImpl.getSid(),adhocCallDetails:t.adhocCallDetails,associated_resource:t.associated_resource,recordingIndex:t.recording_index,configurations:t.configurations,waiting_lobby_requests:t.waiting_lobby_requests,session_key:t.session_key,presentation_requests:t.presentation_requests};t.creatorId&&(a.creatorId=t.creatorId,a.creatorName=t.creatorName);var c=new ZCSmartConferenceSession(a);c.addMember(ZCSmartConferenceImpl.getCurrentUserId(),ZCSmartConferenceImpl.getCurrentUserName(),t.memberType,void 0),c.addMember(t.host.id,t.host.name,ZCSmartConferenceConstants.memberTypes.ACTIVE,void 0);var d=c.getCurrentMember();let l=t.encryptedResourceId||Conference.getEncryptedResourceId();void 0!==l&&c.setEncryptedResourceId(l);var u=i instanceof MediaStream,f=r instanceof MediaStream;u&&(i._setTrackStatus("audio",!s),c.setAudioUpStream(i)),f&&(Conference.applyVideoConstraints(r,c),c.setVideoUpStream(r)),d.handleAVStreamStatus("audio",!u||!s,$Util.getSyncedCurrentTime(),d.getId()),Conference.isVideoConference(t.type)&&d.handleAVStreamStatus("video",!f,$Util.getSyncedCurrentTime(),d.getId()),t.focused_mode&&c.storeFocusedModeDetails(t.focused_mode.enabled,t.focused_mode.time,t.focused_mode.user_ids,t.focused_mode.set_by),c.isCurrentUserHost()&&c.setAsNotified(),o&&(c.setVideoEffects(o.getVideoEffects()),c.setRememberVideoEffectsStatus(o.canRememberVideoEffects())),"function"==typeof n&&n(),this.setJoiningSession(c),c.writeToEventsLog(ConferenceLog.constants.eventsLog.joinClickedFromCustomPreview),this.joinFromPreviewRoom()}.bind(this),s=!0,a=Conference.isVideoConference(t.type)&&!Conference.isVideoDisabledInJoinByUser();if(void 0!==i&&void 0!==r&&r.getId()===i.call_id){var c=r.getCurrentMember();s=!c.isAudioMuted(),a=(r.isVideoCall()||c.hasSwitchedToVideo())&&!c.isVideoMuted(),Conference.getAudioOrVideoStreams(a,o)}else if("undefined"==typeof WaitingRoom)Conference.getAudioOrVideoStreams(a,o);else{var d=WaitingRoom.getPreviewSession();o(d.getAudioUpStream(),d.getVideoUpStream(),d)}},handleResize:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();ZCSmartConferenceImpl.isSmartConferenceSession(e)?ZCSmartConferenceUI.handleResize():ConferenceUI.handleResize()},updateUserCohostState:function(e,t){var n=e.getMember(t);if(n){var i=e.getCohostDetails(),r=-1!==i.userIds.indexOf(t);n.setCohostStatus(r),r&&(n.setAudioUnmuteRestrictedStatus(!1,i.actionTime,e.getHostId()),e.isCurrentUser(t)&&this.resetAudioUnmuteRestrictedStatusForUser(t))}},updateScreenLayoutSettings:function(e){var t={huddle_screenshare_layout:e};WmsImpl.isGuestConferenceUser()?Settings.updateInObj(t):Settings.update(t)},addScreenInSession:function(e){if(this.hasCurrentSession()){var t=this.getCurrentSession();if(!t.isPresentationStream()){if(t.hasScreenShare()&&!t.isScreenSharer())return void WebRTCUserMedia.closeStream(e._getType());ZCSmartConferenceUI.handleScreenShareStart()}t.isPresentationStream()&&PresentationUI.showPresentationIndicator(t),e._getPrimaryVideoTrack().applyConstraints({frameRate:{min:Conference.SS_FRAMERATE,max:Conference.SS_FRAMERATE}}).catch(),t.initScreenUpStream(e)}else WebRTCUserMedia.closeStream(e._getType())},startWhiteBoard:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession(),t=e.getCurrentMember().isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.WHITEBOARD);if(WhiteBoard.hasHostPermission(e)||t)if(e.hasOngoingPresentation()){if(e.hasWhiteBoard()&&!e.isWhiteBoardCreator()){var n=e.getWhiteBoardCreatorId(),i=e.getMember(n);if(e.hasHostPermission()){var r=function(){ZCSmartConferenceImpl.startWhiteBoard()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,i,e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,r)}return void UI.updateBanner(Resource.getRealValue("whiteboard.in.conference.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(Users.getName(i.getId(),i.getName()))),2e3,!0)}var o=e.getPresentation();if(e.hasPresentation()){if(e.isPresenter())return void UI.updateBanner(Resource.getRealValue("presentation.stop.to.share.whiteboard"),2e3,!0);var s=o.getPresenterId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){r=function(){ZCSmartConferenceImpl.startWhiteBoard()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(s),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,r)}return void UI.updateBanner(Resource.getRealValue("conference.presentation.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(e.getPresentationOwnerName())),2e3,!0)}if(e.hasScreenShare()){if(e.isScreenSharer())return void UI.updateBanner(Resource.getRealValue("whiteboard.local.screen.share.end"),2e3,!0);var a=e.getScreenSharerId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){r=function(){e.disconnectScreenDownStream(a),ZCSmartConferenceImpl.startWhiteBoard()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(a),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,r)}return void ZCSmartConferenceUI.showScreenAlreadySharedInfo(e)}}else{e instanceof ZCSmartConferenceSession?ZCSmartConferenceUI.addAndGetWhiteBoardContainer(ZCSmartConferenceUI.getConferenceWindow(),e):ConferenceUI.addAndGetWhiteBoardContainer($("#conferencewbwrapper"),e);var c={title:e.getTitle(),associate_id:e.getId(),associate_type:"group_call"};WhiteBoard.createAndShowWhiteBoard(c)}else UI.updateBanner(Resource.getRealValue("media.presentation.wb.not.allowed"),2e3,!0)},startPresentation:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession(),t=e.getCurrentMember().isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.PRESENTATION);if(e.getConfigurations().isPresentationAllowed()||t)if(e.hasOngoingPresentation()){if(e.hasWhiteBoard()){if(e.isWhiteBoardCreator())return void UI.updateBanner(Resource.getRealValue("whiteboard.stop.to.share.presentation"),2e3,!0);var n=e.getWhiteBoardCreatorId();if(e.hasHostPermission()){var i=function(){ZCSmartConferenceImpl.startPresentation()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(n),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.PRESENTATION,i)}return void UI.updateBanner(Resource.getRealValue("whiteboard.in.conference.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(Users.getName(n))),2e3,!0)}if(e.hasScreenShare()){if(e.isScreenSharer())return void UI.updateBanner(Resource.getRealValue("screenshare.stop.to.share.presentation"),2e3,!0);var r=e.getScreenSharerId();if(e.hasHostPermission()&&e.getConfigurations().isScreenShareAllowed()){i=function(){e.disconnectScreenDownStream(r),ZCSmartConferenceImpl.startPresentation()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(r),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.PRESENTATION,i)}return void UI.updateBanner(Resource.getRealValue("conference.screenshare.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(Users.getName(r))),2e3,!0)}var o=e.getPresentation();if(e.hasPresentation()&&!e.isPresenter()){var s=o.getPresenterId();if(e.hasHostPermission()){i=function(){e.getPresentation().close(),ZCSmartConferenceImpl.startPresentation()};return void ZCSmartConferenceUI.showPresentationSwitchDialog(e,e.getMember(s),e.getCurrentMember(),ZCSmartConferenceConstants.presentationType.PRESENTATION,i)}return void UI.updateBanner(Resource.getRealValue("conference.presentation.limit",ZCSmartConferenceImpl.getDefaultSharerNameIfEmpty(e.getPresentationOwnerName())),2e3,!0)}}else LazyLoader.loadWDFiles().then((function(){WorkDriveFilePicker.showMeetingPresentationFilePicker(e.getSessionKey(),e.getTitle())}));else UI.updateBanner(Resource.getRealValue("media.presentation.ss.not.allowed"),2e3,!0)},startScreenShareSession:function(e,t,n){t._getPrimaryVideoTrack().applyConstraints({frameRate:{min:Conference.SS_FRAMERATE,max:Conference.SS_FRAMERATE}}).catch();var i={conferenceId:e,conferenceType:n.type,conferenceHostId:n.host.id,conferenceHostName:n.host.name,conferenceMode:n.mode,title:n.title,scope:n.scope,startTime:n.start_time,sessionId:WmsImpl.getSid(),adhocCallDetails:n.adhocCallDetails,session_key:n.session_key,associated_resource:n.associated_resource,is_primary:!1};n.creatorId&&(i.creatorId=n.creatorId,i.creatorName=n.creatorName);var r=new ZCSmartConferenceSession(i);r.setScreenUpStream(t),this.setCurrentSession(r),ZCSmartConferenceUI.openSecondarySessionWindow(r),r.setSecondarySessionId(WmsImpl.getSid());ConferenceAPI.startSecondarySession(e,r.getSecondarySessionId(),{up_stream:{screen:!0}},void 0,(function(){ZCSmartConferenceImpl.endSecondarySession(r,!0,!1)}))},handleVideoPreviewUnmute:function(e,t,n){if(MediaManager.isStreamRequested())ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.streamAlreadyRequested);else{ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.videoStreamRequested),MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream((function(n){if(ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.videoStreamObtained),MediaManager.resetStreamRequested(),ZCSmartConferenceImpl.hasJoiningSession()){e.setVideoUpStream(n),Conference.applyVideoConstraints(n,e);var i=$("#smartconferencepreview");MediaUtil.setAndPlayStreamInMediaContainer(i,n,!0),i.find("[video_disabled_info]").remove(),ZCSmartConferenceImpl.changeAVStatusInPreview("video",!1);var r=function(){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.deviceListUpdated);var i=ZCSmartConferenceTemplates.getPreviewVideoInputDevicePickerHtml(e,void 0,!1),r=$("#preview_room_window").find("[video_toggle_in_preview]");r.find("#videoinputdropdowncnt").remove(),r.append(i),void 0!==t&&t(n)};ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.updateDeviceListCalled),WebRTCUserMedia.getMediaDevices(r,r)}else WebRTCUserMedia.closeStream(n._getType())}),(function(e,t){ConferenceLog.writeToLog(ConferenceLog.constants.aysncEvents.videoStreamError),MediaManager.resetStreamRequested(),void 0!==n&&n(e,t),$("#smartconferencepreview").find("video").after(MediaTemplates.getCameraDisabledInfo()),ZCSmartConferenceImpl.changeVideoMirrorCheckBoxDisabledState(!0)}),void 0,Conference.getVideoEffects(e))}},changeAVStatusInPreview:function(e,t){if(this.hasJoiningSession()){var n=this.getJoiningSession(),i=n.getCurrentMember();i.handleAVStreamStatus(e,t,$Util.getSyncedCurrentTime(),i.getId()),ZCSmartConferenceUI.updateMutedInfo($("#smartconferencepreview"),i),"audio"===e?$("#preview_room_window").find("[audio_toggle_in_preview]").find("[icon]").toggleClass("zcf-mic-mute",t).toggleClass("zcf-mic",!t):$("#preview_room_window").find("[video_toggle_in_preview]").find("[icon]").toggleClass("zcf-video-mute",t).toggleClass("zcf-video",!t),$("#joindevicesettings").toggleClass("dN",!Conference.isNomenclatureEnabled()&&!n.hasAudioUpStream()&&!n.hasVideoUpStream())}},changeAVStatusInSettingsPreview:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){if(!$WC.$Win.isExist("conference_settings_win"))return;var i=$WC.$Win.get("conference_settings_win");if(0===i.find("#media_device_widget").length)return;var r=n.getCurrentMember();ZCSmartConferenceUI.updateMutedInfo(i.find("#smartconference_settings_preview"),r),"audio"===e?(i.find('[smartconferencemediacheckbox][purpose="toggleAudioInSessionPreview"]').prop("checked",!t),i.find("[audio_toggle_in_preview]").find("[icon]").toggleClass("zcf-mic-mute",t).toggleClass("zcf-mic",!t)):(i.find('[smartconferencemediacheckbox][purpose="toggleVideoInSessionPreview"]').prop("checked",!t),i.find("[video_toggle_in_preview]").find("[icon]").toggleClass("zcf-video-mute",t).toggleClass("zcf-video",!t))}},changeVideoMirrorCheckBoxDisabledState:function(e){var t=ZCJQuery("#conference_settings_win");0===t.length&&(t=ZCJQuery("#settingsright")),0===t.length&&(t=ZCJQuery("#preview_room_window")),t.find("[video_mirror]").toggleClass("zcdisabled",e)},changeAVStatus:function(e,t,n){if(this.hasCurrentSession()){var i=this.getCurrentSession(),r=$Util.getSyncedCurrentTime();if(i.getCurrentMember().handleAVStreamStatus(e,t,r,i.getCurrentUserId()),"audio"===e&&t&&ZCSmartConferenceUI.addUnmuteRestrictedHelpTip(i),!n){var o={time:r};o[e]={muted:t},ConferenceAPI.updateConnectionStatus(i.getId(),o)}i.isInPIP()&&("audio"===e?ZCPIPManager.toggleMicInPIP(t):ZCPIPManager.toggleCamInPIP(t))}},updateMuteAllParticipantsStatus:function(e,t,n){var i=ZCSmartConferenceImpl.getCurrentActiveSession();if(i&&i.hasHostPermission()&&!i.isRequestPending(ZCSmartConferenceConstants.requests.muteAllParticipantsStatus)){var r=i.getCohostUserIds();r.push(i.getHostId()),Conference.isSpotLightEnabled()&&!i.isOldImpl()&&(r=r.concat(i.getSpotLightUserIds())),r=$Util.removeDuplicateEntries(r);var o=!i.isAllowAudioUnmuteCheckboxEnabled(),s=$Util.getSyncedCurrentTime(),a={time:s};a[e]={muted:t},a.excluded_ids=r,a.unmute_restricted=o;n&&n.addClass("smartconf-mutingall"),i.setRequestAsPending(ZCSmartConferenceConstants.requests.muteAllParticipantsStatus),ConferenceAPI.updateMuteAllStatus(i.getId(),a,(function(){i.setRequestAsCompleted(ZCSmartConferenceConstants.requests.muteAllParticipantsStatus),n&&n.removeClass("smartconf-mutingall");var a="conference.all.muted.info";t||(a=i.isAudioUnmuteRestrictedForAllParticipants()?"conference.all.unmute.allowed":"conference.all.unmute.requested"),UI.updateBanner(Resource.getRealValue(a),2e3,!1),i.setMuteAllStatusForParticipants(e,t,s,i.getCurrentUserId(),r,o,!1,!0)}),(function(){i.setRequestAsCompleted(ZCSmartConferenceConstants.requests.muteAllParticipantsStatus),n&&n.removeClass("smartconf-mutingall")}))}},resetAudioUnmuteRestrictedStatusForUser:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=t.getMember(e);if(t&&t.hasHostPermission()&&n&&!n.isRequestPending(ZCSmartConferenceConstants.requests.muteUserStatus)){var i=$Util.getSyncedCurrentTime(),r=n.isAudioMuted(),o={time:i,unmute_restricted:!1,audio:{muted:r}};n.setRequestAsPending(ZCSmartConferenceConstants.requests.muteUserStatus),ConferenceAPI.updateMuteStatusForUser(t.getId(),e,o,(function(){t.setMuteStatusForUser(e,"audio",r,!1,i,t.getCurrentUserId()),n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.muteUserStatus)}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.muteUserStatus)}))}},getDataAndUpdateMuteStatusForUser:function(e,t,n,i){var r=e.parents("[user_id]").attr("user_id"),o=$.escapeSelector(r),s=$("#smartconferenceusersection").find('[smartconferenceparticipant][userId="'+o+'"], [conferenceParticipant][userId="'+o+'"]');ZCSmartConferenceImpl.updateMuteStatusForUser(e,s,r,"audio",t,n,(function(e,t){UI.updateBanner(Resource.getRealValue(i,Users.getName(t.getId(),t.getName())),2e3,!1)}))},updateMuteStatusForUser:function(e,t,n,i,r,o,s){var a,c=(a=ZCSmartConferenceImpl.getCurrentActiveSession()).getMember(n),d=function(){e.removeClass("smartconf-requesting")};if(e.addClass("smartconf-requesting"),(a=ZCSmartConferenceImpl.getCurrentActiveSession())&&a.hasHostPermission())if(c&&!c.isRequestPending(ZCSmartConferenceConstants.requests.muteUserStatus)){var l=$Util.getSyncedCurrentTime(),u={time:l,unmute_restricted:o};u[i]={muted:r},c.setRequestAsPending(ZCSmartConferenceConstants.requests.muteUserStatus),ConferenceAPI.updateMuteStatusForUser(a.getId(),n,u,(function(){a.setMuteStatusForUser(n,i,r,o,l,a.getCurrentUserId()),c.setRequestAsCompleted(ZCSmartConferenceConstants.requests.muteUserStatus),t&&ZCSmartConferenceUI.setParticipantMuteOption(a,c,t),void 0!==s&&s(a,c)}),(function(){c.setRequestAsCompleted(ZCSmartConferenceConstants.requests.muteUserStatus),d()}))}else d();else d()},setAsCohost:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.isCurrentUserHost()){var n=t.getCohostUserIds();n.push(e),ConferenceAPI.setAsCohost(t.getId(),e,(function(){t.updateCohostDetails($Util.removeDuplicateEntries(n),$Util.getSyncedCurrentTime(),!0),UI.updateBanner(Resource.getRealValue("conference.cohost.assigned"),2e3,!1)}))}},removeFromCohost:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.isCurrentUserHost()){var n=$Util.removeDuplicateEntries(t.getCohostUserIds()),i=n.indexOf(e);-1!==i&&n.splice(i,1),ConferenceAPI.removeFromCohost(t.getId(),e,(function(){t.updateCohostDetails(n,$Util.getSyncedCurrentTime(),!0),UI.updateBanner(Resource.getRealValue("conference.cohost.removed"),2e3,!1)}))}},setAsHost:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&t.isCurrentUserHost()&&ConferenceAPI.setAsHost(t.getId(),e,(function(){t.replaceHost(e,t.getHostId(),t.getHostSetTime()+1)}))},resetHostPermissions:function(e){ZCSmartConferenceUI.getConferenceWindow().find("[inviteUsersButton]").remove(),e.resetGuestConfigurations(),ZCSmartConferenceUI.closeV2InviteUserPanel()},setInSpotLight:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.hasHostPermission())if(t.getSpotLightUsersCount()>=Conference.MAX_ACTIVE_SPEAKER)UI.updateBanner(Resource.getRealValue("conference.spotlight.limit.reached",[Conference.MAX_ACTIVE_SPEAKER]),2e3,!0);else{var n=function(){ConferenceAPI.setInSpotLight(t.getId(),e,t.isSpeakersAudioRestrictedInSpotLight(),t.isSpeakersVideoRestrictedInSpotLight(),(function(){t.addUserInSpotLight(e,t.getLastSpotLightActivityTime()+1,t.getCurrentUserId())}))};!t.hasScreenShare()||t.isUserScreenSharer(e)||t.isSpotLightEnabled()?n():ZCSmartConferenceUI.showScreenShareEndAlertDialog(ZCMediaConstants.screenShareEndReasons.USER_NOT_IN_SPOTLIGHT,t,t.getMember(e),n,(function(){var n=[e];t.hasScreenShare()&&n.push(t.getScreenSharerId()),ConferenceAPI.setUsersInSpotLight(t.getId(),n,t.isSpeakersAudioRestrictedInSpotLight(),t.isSpeakersVideoRestrictedInSpotLight(),(function(){t.setSpotLightAsEnabled(n,t.getLastSpotLightActivityTime()+1,t.getCurrentUserId())}))}))}},removeFromSpotLight:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.hasHostPermission()){var n=function(){ConferenceAPI.removeFromSpotLight(t.getId(),e,(function(){t.removeUserFromSpotLight(e,t.getLastSpotLightActivityTime()+1,t.getCurrentUserId())}))};t.hasScreenShare()&&t.isUserScreenSharer(e)&&t.getSpotLightUserIds().length>1?ZCSmartConferenceUI.showScreenShareEndAlertDialog(ZCMediaConstants.screenShareEndReasons.USER_REMOVED_FROM_SPOTLIGHT,t,t.getMember(e),n):n()}},removeFromSpeaker:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&t.hasHostPermission()&&ConferenceAPI.removeFromSpeaker(t.getId(),e,(function(){ConferenceHandler.wmsEvents.handleSwitchedMemberType({opr:"handleSwitchedMemberType",conferenceId:t.getId(),userId:e,memberType:ZCSmartConferenceConstants.memberTypes.SILENT}),UI.updateBanner(Resource.getRealValue("conference.speaker.removed",Users.getName(e,ZCSmartConferenceImpl.getSessionUserName(t,e))),2e3,!1)}))},kickoutUser:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&t.hasHostPermission()&&ConferenceAPI.kickOut(t.getId(),e)},startPushToTalk:function(){var e=!1,t=ZCSmartConferenceImpl.getCurrentSession();return t.getCurrentMember().isAudioMuted()&&!t.isInMinimizedView()&&(e=ZCSmartConferenceHandler.UIEvents.unmuteAudio(),t.setPushToTalkState(e)),e},stopPushToTalk:function(){var e=!1,t=ZCSmartConferenceImpl.getCurrentSession();return!t.isPushToTalkEnabled()||t.getCurrentMember().isAudioMuted()&&!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)||t.isInMinimizedView()||(e=ZCSmartConferenceHandler.UIEvents.muteAudio())&&t.setPushToTalkState(!1),e},getSmileyConfig:function(){return{getHtml:function(e,t,n,i){return'<div class="dIB posrel">'+Smiley.getAnimatedSmileyHTML(e,"",!0,{customClass:"tooltip-up tooltip-left0",titleAttribute:"tooltip-title"})+"</div>"}}},handleSpecialReactionData:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getId()==e.conferenceId&&t.isPrimarySession()){var n=t.getReactionsDB(),i=t.getCurrentMember(),r=i.getId(),o=t.hasHostPermission();if(void 0!==e.status){var s="enabled"===e.status,a=n.getUserVotes();n.setNonVerbalFeedbackStatus(s),n.isNonVerbalFeedbackEnabled()||(ZCSmartConferenceUI.resetNvfVotes(t,a),$('[smartconferencebutton][purpose="handleSpecialReaction"].active').removeClass("active")),ZCSmartConferenceUI.handleNvfStatus(t),o&&!s&&$("#non_verbal_feedback").children().addClass("dN"),$("#smartconf-special-reactions").toggleClass("dN",!s);var c=$("#gestures-filter").toggleClass("dN",!s),d=s?c.attr("filter"):void 0;if(ZCSmartConferenceUI.setRhsGestureFilterMap(d),!s){var l=$("#gestures-filter-dropdown").hide();Clickoutside.clear("gestures-filter-dropdown"),l.find('input[type="checkbox"]').prop("checked",!1),c.attr("filter","").removeClass("zc-funnel-filter")}}if(e.votes&&(n.setVoteCount(e.votes),ZCSmartConferenceUI.setNvfCountInUI(t)),e.user_votes){var u=e.user_votes;for(var f in u){var m=u[f];if(f===r)void 0!==n.getUserVote(r)&&m!==ZCSmartConferenceConstants.nvfValues.NO_VOTE||(m===ZCSmartConferenceConstants.nvfValues.NO_VOTE?$('[smartconferencebutton][purpose="handleSpecialReaction"].active').removeClass("active"):($('[smartconferencebutton][purpose="handleSpecialReaction"].active').removeClass("active"),$('[smartconferencebutton][purpose="handleSpecialReaction"][type="'+m+'"]').addClass("active")),n.setUserVote(r,m),ZCSmartConferenceUI.updateNvfInfo(t,i,!0));else n.setUserVote(f,m),ZCSmartConferenceUI.updateNvfInfo(t,t.getMember(f),!0)}}void 0!==e.clear_type&&(ZCSmartConferenceUI.reinitListView(t),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection")),ZCSmartConferenceUI.setMuteRestrictionInfo(t.isOldImpl()))}},handleGifs:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t&&t.getId()===e.conferenceId){var n=t.getReactionsDB();if(e.user_gifs){n.setUserGifs(e.user_gifs);var i=e.user_gifs;for(var r in i){i[r];ZCSmartConferenceUI.showGifInUI(t,t.getMember(r))}}}},closePreviewRoom:function(e){var t=void 0;this.hasJoiningSession()&&((t=this.getJoiningSession()).removePreviewRoomNetworkPredictor(),t.terminate(),ConferenceUI.resetJoiningLoader(t.getId(),t.getChatId(),!0),this.clearJoiningSession(),t.isStartPreview()&&ConferenceImpl.closeStreamsInPreview()),ConferenceLog.writeToLog(ConferenceLog.constants.UIEvents.previewPageClose,{closeSource:e}),ZCSmartConferenceUI.closePreviewRoom(t),ConferenceImpl.isHuddleTab()&&window.history.pushState({},null,$Util.getUrlPrefix()+"/index.do")},pushConnectionNetworkDetailsInDataChannel:function(e,t,n,i,r){var o=ZCSmartConferenceImpl.getCurrentActiveSession();if(o&&o.getId()===e){var s={data:n,moduleType:"conference",moduleId:e,isUpStream:r.isUpStream,dataMode:r.connectionType};o.sendNetworkDetails(s)}},pushConnectionStatsInDataChannel:function(e,t,n,i,r){var o=ZCSmartConferenceImpl.getCurrentActiveSession();if(o&&o.getId()===e){var s={data:n,moduleType:"conference",moduleId:e,isUpStream:r.isUpStream,dataMode:r.connectionType};o.sendConnectionStats(s)}},calculateAndPushInitialConnectionTime:function(e,t,n,i){var r=!1,o={category:"handshake_time",type:t,add_info:{description:i},up_stream:{},down_stream:{}},s=n[ConferenceLog.constants.eventsLog.joinClickedFromPreview]||n[ConferenceLog.constants.eventsLog.joinClickedFromRecordingConsent]||n[ConferenceLog.constants.eventsLog.joinClickedFromCustomPreview]||n[ConferenceLog.constants.eventsLog.startMeetingFromPreview]||n[ConferenceLog.constants.eventsLog.startApiCalledForQuickMeeting]||n[ConferenceLog.constants.eventsLog.startAPICalledForCallConversion]||n[ConferenceLog.constants.eventsLog.joinAPICalledForCallConversion],a=-1;if(s&&(n[ConferenceLog.constants.eventsLog.audioUpStreamConnected]&&(o.up_stream.audio={time:n[ConferenceLog.constants.eventsLog.audioUpStreamConnected]-s},r=!0,a=o.up_stream.audio.time),n[ConferenceLog.constants.eventsLog.videoUpStreamConnected]&&(o.up_stream.video={time:n[ConferenceLog.constants.eventsLog.videoUpStreamConnected]-s},r=!0,a<o.up_stream.video.time&&(a=o.up_stream.video.time)),n[ConferenceLog.constants.eventsLog.dcConnected]&&(o.up_stream.data_channel={time:n[ConferenceLog.constants.eventsLog.dcConnected]-s},r=!0,a<o.up_stream.data_channel.time&&(a=o.up_stream.data_channel.time)),n[ConferenceLog.constants.eventsLog.audioDownStreamConnected]&&(o.down_stream.audio={time:n[ConferenceLog.constants.eventsLog.audioDownStreamConnected]-s},r=!0,a<o.down_stream.audio.time&&(a=o.down_stream.audio.time)),n[ConferenceLog.constants.eventsLog.videoDownStreamConnected]&&(o.down_stream.video={time:n[ConferenceLog.constants.eventsLog.videoDownStreamConnected]-s},r=!0,a<o.down_stream.video.time&&(a=o.down_stream.video.time)),n[ConferenceLog.constants.eventsLog.screenDownStreamConnected]&&(o.down_stream.screen={time:n[ConferenceLog.constants.eventsLog.screenDownStreamConnected]-s},r=!0,a<o.down_stream.screen.time&&(a=o.down_stream.screen.time)),o.all={time:a}),r){var c=ConferenceLog.getAndFlushWmsDiff();c&&(o.wms_data=c),ConferenceAPI.updateLog(e,o)}else"function"==typeof _printLogMsg&&_printLogMsg(i,"groupcall")},pushSendAnswerInEventLog:function(e,t){e&&(WebRTCPeerConnectionConstants.isAudioConnection(t)?e.writeToEventsLog(ConferenceLog.constants.eventsLog.sendAudioAnswer):WebRTCPeerConnectionConstants.isVideoConnection(t)?e.writeToEventsLog(ConferenceLog.constants.eventsLog.sendVideoAnswer):WebRTCPeerConnectionConstants.isScreenConnection(t)&&e.writeToEventsLog(ConferenceLog.constants.eventsLog.sendScreenAnswer))},pushUpdateIceCandidatesInEventLog:function(e,t,n){e&&(WebRTCPeerConnectionConstants.isAudioConnection(t)?e.writeToEventsLog(n?ConferenceLog.constants.eventsLog.sendAudioUpStreamIceCandidates:ConferenceLog.constants.eventsLog.sendAudioDownStreamIceCandidates):WebRTCPeerConnectionConstants.isVideoConnection(t)?e.writeToEventsLog(n?ConferenceLog.constants.eventsLog.sendVideoUpStreamIceCandidates:ConferenceLog.constants.eventsLog.sendVideoDownStreamIceCandidates):WebRTCPeerConnectionConstants.isScreenConnection(t)&&e.writeToEventsLog(n?ConferenceLog.constants.eventsLog.sendScreenUpStreamIceCandidates:ConferenceLog.constants.eventsLog.sendScreenDownStreamIceCandidates))},updateEventsLog:function(e){var t=e.getEventsLogString();e.hasSentEventsLog()||""===t||(t=t+"[conference_id]:["+e.getId()+"]",ZCSmartConferenceImpl.calculateAndPushInitialConnectionTime(e.getId(),e.getType(),e.getEventsLogObject(),t),e.setEventsLogAsSent())},updateClientLog:function(e,t,n){$WC.Util.isEmpty(n)||ConferenceAPI.uploadClientLog(e,n,"["+t+" conference]",t)},showEndOptionsOrEnd:function(e,t,n){var i=this.getOutgoingSession();if(i&&i.getId()===e)this.endConference(e,!0);else if((i=this.getCurrentSession())&&i.getId()===e){if(!t||!i.isCurrentUserHost()||!ZCSmartConferenceImpl.hasMoreThanOneActiveMember(i))return void this.endConference(e,!0);ZCSmartConferenceUI.showEndOptions(i,"smartconferencebutton",t,n)}else this.endConference(e,!0)},endSecondarySession:function(e,t,n){ZCSmartConferenceUI.closeSecondarySessionWindow(e.getId()),e.terminateSecondarySession(n),this.clearCurrentSession(),t&&ConferenceAPI.stopSecondarySession(e.getId(),e.getSecondarySessionId())},endConference:function(e,t,n){var i=this.getCurrentSession();if(i&&i.isWindowInFullScreen()&&(ZCSmartConferenceImpl.getCurrentSession().setWindowInFullScreen(!1),ZCMediaDomUtil.exitFullScreen()),i&&i.isInPIP()&&ZCSmartConferenceImpl.exitFromPIPMode(i),i&&!i.isPrimarySession()&&i.getId()===e)return this.endSecondarySession(i,t,!1),void ConferenceLog.clearLogString();SessionTimers.clearTimer("smartconferencesessiontimer"),SessionTimers.clearTimer("smartconferencesessionsubtimer"),ZCSmartConferenceUI.closeHostLeaveConfirmation(e),ZCSmartConferenceUI.closeFocusedModePanel(),WmsImpl.isGuestUser()||void 0!==n||ZCSmartConferenceUI.hideConferenceWindow(e);var r=!1;if((i=this.getOutgoingSession())&&i.getId()===e?(i.terminate(),this.clearOutgoingSession()):(i=this.getCurrentSession())&&i.getId()===e&&(i.terminate(),this.clearCurrentSession(),r=!0),Config.isConferenceChatSwitcherEnabled()){ConferenceChatWindow.setSmartConference(!0),ConferenceChatWindow.updateAllChatHeaderImage(),ConferenceChatWindow.closeOpenedConferenceChatsIfIsNotInMainChatWindowViewport();let e=ConferenceImpl.hasChatWindowDOMInViewWhenStartedOrMaximized();ConferenceChatWindow.moveChatsToMainChatwindowViewportIfIsInVisibleChats(e)}i&&i.getActiveChatId()&&(this.removeChat(i.getActiveChatId(),i),MediaManager.updateGroupCallOptionsInChatHeader(i.getChatId())),t&&(i.isCurrentUserHost()?ConferenceAPI.stop(e):ConferenceAPI.leave(e,(function(){"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleLeft(e)}))),(WmsImpl.isGuestUser()||void 0!==n)&&i?(t&&i.isCurrentUserHost()&&!n&&(n=ZCMediaConstants.endCases.sessionEnd),ZCSmartConferenceUI.showEndState(i,t,i.getTitle(),i.getHost().getName(),n)):(ZCSmartConferenceUI.closeConferenceWindow(e),i&&ZCSmartConferenceUI.showFeedback(i,!1,!1)),i&&(i.isSilentConference()&&MediaCallImpl.hasCurrentSession()&&MediaCallImpl.getCurrentSession().isMigratedCall()&&MediaCallImpl.handleEnd(i.getAdhocCallId(),t),MessageOperations.chatClose.close(i.getDummyChatId()),MessageOperations.chatClose.close(i.getDummyThreadChatId())),r&&(i.updateEventsLog(),ConferenceLog.pushWmsDiffToServer(i.getId())),WhiteBoard.handleWhiteBoardEnd(),PresentationImpl.handleEnd(i),$WC.$Win.destroy("recording_alert"),$WC.$Win.destroy("conference_settings_win"),$WC.$Win.destroy("track_ended_info"),$WC.$Win.destroy("device_switched_info"),$WC.$Win.destroy("screenshare_end_alert"),$WC.$Win.destroy("presentation_end_alert"),ZCSmartConferenceUI.destroyChatNotificationDom(),ZCSmartConferenceUI.sendConferenceEndtoNotebook(e),clearTimeout(ZCSmartConferenceUI.recordingConsentTimer),delete ZCSmartConferenceUI.recordingConsentTimer,ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!1),"undefined"!=typeof RemoteWork&&RemoteWork.isInRemoteWorkView()&&RemoteWork.syncDetailsUI(),ConferenceLog.clearLogString(),ConferenceChatWindow.clear()},getSearchValue:function(e){return e.val().trim().toLowerCase()},updateUserImageContainer:function(e,t){var n=t.find("[userImage]");n.attr("src",ZCSmartConferenceTemplates.getUserImgUrl(e)),n.removeClass("dN");var i=t.find("[originalUserImage]");i.attr("src",ZCSmartConferenceTemplates.getUserImgUrl(e,"original")),i.addClass("dN")},handleSearchParticipantInRHS:function(){if(void 0!==ZCSmartConferenceUI.getListViewInstance()){var e=ZCSmartConferenceImpl.getCurrentActiveSession();ZCSmartConferenceUI.reinitListView(e),ZCSmartConferenceUI.handleSearchResultsInRhsUserList($("#smartconferenceusersection")),ZCSmartConferenceUI.setMuteRestrictionInfo(e.isOldImpl())}},handleEditWhiteboardConfigurationUpdate:function(e){Conference.isWhiteBoardAllowed()&&(e.isAllowedToEditWhiteboard()?ZCSmartConferenceUI.addRequestEditWhiteboardOption():ZCSmartConferenceUI.removeRequestEditWhiteboardOption())},handleRingingSoundForCurrentUser:function(e,t){let n=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==n?e&&!this.isRingingForCurrentUser&&n.hasHostPermission()&&n.hasRingingStateForAnyUser()&&1===n.getMembersCount()?(this.isRingingForCurrentUser=!0,Sound.custom.play("RINGING_TONE",$zcg._MEDIADEFAULTSTATICURL+MediaCallConstants.MEDIA_PATH+MediaCallConstants.fileNames.RINGING_TONE,{loop:!0,mildTone:!1})):!this.isRingingForCurrentUser||!t&&n.hasRingingStateForAnyUser()||(this.isRingingForCurrentUser=!1,Sound.custom.stop("RINGING_TONE")):this.isRingingForCurrentUser&&(this.isRingingForCurrentUser=!1,Sound.custom.stop("RINGING_TONE"))},getUserIdWithVideoGridStreamId:function(e,t,n){if(n&&0!==Object.keys(n).length){var i=n.pages[e];for(var r in i)if(t===r)return i[r]}},handleStartStreaming:function(e,t){e.setStreamingStatus(!0),e.setViewersCount(0),ZCSmartConferenceUI.updateViewersCount(),e.getConferenceWindow().addClass("smartconf-streaming"),void 0!==t&&e.setStreamingId(t)},handleStopStreaming:function(e){e.setStreamingStatus(!1),e.setViewersCount(0),ZCSmartConferenceUI.updateViewersCount(),e.getConferenceWindow().removeClass("smartconf-streaming"),e.setStreamingId(void 0),ZCSmartConferenceHandler.UIEvents.closeStreamingPopup()},switchToPIPMode:function(e){if(!e.isInPIP()&&Conference.isPIPEnabled()){var t=e instanceof ZCSmartConferenceSession,n=ConferenceImpl,i=ConferenceUI,r=ConferenceHandler,o=e.hasScreenShare()&&!e.isUserScreenSharer(ZCSmartConferenceImpl.getCurrentUserId())?ZCMediaConstants.pip.videoWinDimension:ZCMediaConstants.pip.audioWinDimension;t&&(n=ZCSmartConferenceImpl,i=ZCSmartConferenceUI,r=ZCSmartConferenceHandler);ZCPIPManager.paintCanvasAndOpenPip(e.getCanvasForPIP(),o,(function(){ZCSmartConferenceImpl.hasCurrentActiveSession()&&i.pipUtil.paintVideosForPIP()}),(function(){if(n.hasCurrentSession()){var r=i.getConferenceWindow(),o=ConferenceUI.getConferenceMinimizedWindow(),s=r.find('[smartconferencebutton][purpose="openInPIP"]');if(s.addClass("active"),s.attr({purpose:"exitPIP","tooltip-title":Resource.getRealValue("avcliq.media.exit.pip")}),ZCPIPUtil.showPIPOverlay(r.find(t?"#smartconf_main_container":"#conferencevideowrapper"),"smartconferencebutton"),t||ZCPIPUtil.showPIPOverlay(r.find("#conferencepresentationwrapper"),"smartconferencebutton"),!WmsImpl.isGuestConferenceUser())if(t){var a=ZCSmartConferenceUI.getConferenceParentDOM();a.addClass("smartconf-pip-mode"),ZCSmartConferenceUI.showMinimizedWindow(),ZCSmartConferenceUI.resetResizableForMiniPlayer(a)}else ConferenceUI.showMinimizedWindow(),o.addClass("conference-pip-mode"),e.hasScreenShareContainer()&&o.addClass("no-screen-share")}else ZCPIPManager.exitPictureInPicture()}),r.PIPEvents)}},exitFromPIPMode:function(e){if(Conference.isPIPEnabled()){var t=e instanceof ZCSmartConferenceSession,n=ConferenceUI;t&&(ZCSmartConferenceImpl,n=ZCSmartConferenceUI),ZCPIPManager.exitPictureInPicture(void 0,()=>{if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var i=n.getConferenceWindow(),r=ConferenceUI.getConferenceMinimizedWindow(),o=i.find('[smartconferencebutton][purpose="exitPIP"]');if(o.removeClass("active"),o.attr({purpose:"openInPIP","tooltip-title":Resource.getRealValue("avcliq.media.open.pip")}),ZCPIPUtil.removePIPOverlay(i),t?ZCSmartConferenceUI.arrangeMediaContainers():ZCPIPUtil.removePIPOverlay(i.find("#conferencepresentationwrapper")),!WmsImpl.isGuestConferenceUser())if(t){var s=ZCSmartConferenceUI.getConferenceParentDOM();s.removeClass("smartconf-pip-mode"),ZCSmartConferenceUI.setResizableForMiniPlayer(s)}else r.removeClass("conference-pip-mode"),e.hasScreenShareContainer()&&r.removeClass("no-screen-share")}})}},checkAndShowUDPBlockedInfo:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=n instanceof ZCSmartConferenceSession;n&&n.getId()===e&&t.code===WebRTCPeerConnectionConstants.connectionErrors.UDP_BLOCKING&&n.isUDPBlockedForAllConnections()&&MediaUtil.showUDPBlockedWarning(i?ZCSmartConferenceUI.getConferenceWindow():ConferenceUI.getConferenceWindow())}};var ZCSmartConferenceTemplates={};ZCSmartConferenceTemplates=function(){var e={previewRoomUI:'<div id="preview_room_window" class="smartconf-wrap smartconf-preview-wrap flex nite-mode {{parent_class}} {{mode_class}}"><section class="wh100 flexG flexM ovrflwH posrel">{{header_section}}{{close_room}}<div class="smartconf-preview-main flex-col"><div class="font16 fontB fshrink pLR25 mT14 mTB10">{{settings_header}}</div><div class="flex flexG pLR24"><div class="posrel flex-col smartconf-preview-video-container"><div id="smartconferencepreview" class="smartconf-preview-video flexM alignselfS">{{audio_card}}<div class="zcl-rloader posabs sm" loader></div><div class="smartconf-userimg posabs {{img_class}}"><div audiowaves class="touranim" style="width: 0%; height: 0%;"></div><img userImage src="{{img_src}}"></div><video class="wh100"></video>{{disable_video}}{{video_effects_opt}}</div>{{video_mirror_option}}</div><div class="smartconf-preview-cnt mL10 flexG"><div class="zc-av-device-segment-cnt">{{video_control}}{{audio_control}}{{audio_output_control}}</div>{{system_requirement_link}}</div></div>{{recording_info_content}}<div class="smartconf-preview-bottom fshrink flexC justifyE"><div class="mL20"><div class="zcl-btn-large zcl-btn--secondary" smartconferencebutton purpose="closePreviewRoom">{{cancel_preview_cta}}</div><div class="zcl-btn-large zcl-btn--primary mL20" smartconferencebutton purpose="{{preview_purpose}}" {{preview_cta_disabled}}>{{preview_cta}}</div></div></div></div></section></div>',stickerConferenceHtml:'<div class="customSticker-preview-img">\n\t\t\t\t<img src="{{IMG_SRC}}" title="{{NAME}}">\n\t\t\t</div>',startUIHeader:'<div class="flexG">\n\t\t\t\t<div class="font18">\n\t\t\t\t\t{{chat_title}}\n\t\t\t\t\t<span class="bold">{{header}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="font14 line26 clr6 mT28">{{hint}}</div>\n\t\t\t</div>',startUISelectedField:'<div class="zcl-field-info-outline">\n\t\t\t\t<div class="zcl-field-info">\n\t\t\t\t\t<span class="font13 {{icon_class}} mR8"></span>\n\t\t\t\t\t<span class="flexM zcl-img xs mR4">\n\t\t\t\t\t\t<img src="{{img_src}}"/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="font13">{{content}}</span>\n\t\t\t\t</div>\n\t\t\t</div>',startUIDisabledField:'<div id="{{id}}" class="zcl-field-info">\n\t\t\t\t<span class="font13 {{icon_class}} mR8"></span>\n\t\t\t\t<span class="font13">{{content}}</span>\n\t\t\t</div>',startUIAddRolesOpt:`<div class="flexC">\n\t\t\t\t<div class="flexC mR20" conferencebutton purpose="showAddCohostsInput">\n\t\t\t\t\t<span class="flexC">\n\t\t\t\t\t\t<span class="zcl-point lg mR6"></span>\n\t\t\t\t\t\t<span class="zcl-btn-theme--link font14 bold">+${I18N("conference.add.cohosts.label")}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="flexC" smartConfPanelOpt conferencebutton purpose="showAddSpeakersInput">\n\t\t\t\t\t<span class="flexC">\n\t\t\t\t\t\t<span class="zcl-point lg mR6"></span>\n\t\t\t\t\t\t<span class="zcl-btn-theme--link font14 bold">+${I18N("conference.add.panelist.label")}</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t{{spotlight_opt}}\n\t\t\t</div>`,startUIToggleModeOpt:'<div class="flexC">\n\t\t\t\t<div class="zcl-typeswitch smartconf-typeswitch">\n\t\t\t\t\t<input id="call_start_video_mode" class="typeswitch-input dN" type="checkbox" {{ischecked}} name="typeswitch" conferencecheckbox purpose="toggleConfModeInStart"><label class="typeswitch-main flexC posrel" for="call_start_video_mode">'+`<span class="typeswitch-item ellips"><em class="zcf-call mR6 typeswitch-icon"></em>${I18N("media.audio")}</span>\n\t\t\t\t\t\t<span class="typeswitch-item ellips"><em class="zcf-video mR6 typeswitch-icon"></em>${I18N("media.video")}</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<span id="conference_hint_footer" class="mL16 font12 clr-lp1">{{footer_content}}</span>\n\t\t\t</div>`,transferPanelHeader:'<div class="mT14 flexM">\n\t\t\t\t<span class="{{icon_class}} mR4 font16 mT2"></span>\n\t\t\t\t<span class="font18 fontB">{{title}}</span>\n\t\t\t\t<div class="media-timer mL5">\n\t\t\t\t\t<span id="transfercall_panel_timer" class="media-onair zc-av-flexC"></span>\n\t\t\t\t</div>\n\t\t\t</div>',transferPanelBody:`<div class="smartconf-transfercall-modal-opt zcl-box flexC" smartconferencebutton purpose="transferGroupCall" conference_id="{{conference_id}}">\n\t\t\t\t<div class="smartconf-monitor flexM fdirC mR20">\n\t\t\t\t\t<span class="smartconf-monitor-screen">\n\t\t\t\t\t\t<span class="usrstatus zcstatus-1"></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="smartconf-monitor-stand mT8"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="flexG">\n\t\t\t\t\t<div class="fontB font16">${I18N("conference.transfercall.device.opt")}</div>\n\t\t\t\t\t<div class="font14 line20 mT8">${I18N("conference.transfercall.desc",[I18N("module.meeting").toLowerCase()])}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="flexM">\n\t\t\t\t\t<span class="zcf-rarrow fontB clr-theme font18 smartconf-transfercall-modal-rArrow"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="smartconf-transfercall-modal-opt zcl-box flexC mT14" smartconferencebutton purpose="addScreenInGroupCall" conference_id="{{conference_id}}">\n\t\t\t\t<div class="smartconf-monitor flexM fdirC mR20">\n\t\t\t\t\t<span class="smartconf-monitor-screen flexM">\n\t\t\t\t\t\t<span class="zcf-sharemedia fontB font13 clr-icon2"></span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="smartconf-monitor-stand mT8"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="flexG">\n\t\t\t\t\t<div class="fontB font16">${I18N("conference.add.screen.opt")}</div>\n\t\t\t\t\t<div class="font14 line20 mT8">${I18N("conference.add.screen.desc")}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="flexM mL10">\n\t\t\t\t\t<span class="zcf-rarrow fontB clr-theme font18 smartconf-transfercall-modal-rArrow"></span>\n\t\t\t\t</div>\n\t\t\t</div>`,secondarySessionCnt:`<div id="conferencesecondarywindow" class="smartconf-sec-session-cnt" conference_id="{{conference_id}}">\n\t\t\t\t<div class="flex-col smartconf-sec-session-main wh100 nite-mode">\n\t\t\t\t\t<div class="fshrink">\n\t\t\t\t\t\t<div class="media-hdr-cont flexC ellips">\n\t\t\t\t\t\t\t<span class="{{icon_class}} font16 mR8"></span>\n\t\t\t\t\t\t\t<div class="media-hdr-label ellips" data-title="{{title}}">{{title}}</div>\n\t\t\t\t\t\t\t<div class="media-timer h100">\n\t\t\t\t\t\t\t\t<span id="conferencesecondarysessiontimer" class="media-onair flexC"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="flexG flexM fdirC">\n\t\t\t\t\t\t<div class="smartconf-sec-session-icon flexM">\n\t\t\t\t\t\t\t<div class="smartconf-monitor flexM fdirC">\n\t\t\t\t\t\t\t\t<span class="smartconf-monitor-screen flexM">\n\t\t\t\t\t\t\t\t\t<span class="zcf-sharemedia fontB font8 clr-icon2"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="smartconf-monitor-stand mT8"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="font14 mT10" session_content>{{content}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fshrink flexM pTB10">\n\t\t\t\t\t\t<div class="zcl-btn zcl-btn-neg--primary" smartconferencebutton purpose="closeAddedScreenShare">\n\t\t\t\t\t\t\t<span class="zcf-scrn-shr-stop mR6 font14"></span><span>${I18N("avcliq.media.sharing.stop")}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="zcl-btn zcl-btn--primary mL12 dN" smartconferencebutton purpose="transferGroupCallToAddedScreen">\n\t\t\t\t\t\t\t<span class="zcf-rarrow fontB font10 mR6 mT2"></span><span>${I18N("conference.transfercall.opt")}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`,mainUI:'<div id="smartconference_container"><div id="smartconferencewindow" class="smartconf-wrap smartconf-connecting zc-av-conference-connecting flex smartconf-no-partition {{layout_class}} smartconf-hide-options nite-mode {{focused_class}} {{spotlight_class}} {{permission_class}} {{guest_user_class}} {{bottom_pane_class}} {{info_config_class}} {{new_rhs_class}}" smartconferencewindow conferenceId="{{conference_id}}" session_key="{{session_key}}"><section id="conferencemainsection" class="smartconf-section wh100 flexG flex-col ovrflwH posrel" smartConferenceSection>{{header_section}}{{main_section}}{{bottom_pane_section}}{{session_options}}{{film_strip}}{{screenshare_indicator}}<div class="smartconf-mask"></div><div id="confreactionsviewcnt" class="smartconf-reaction-wrap animEmoji"></div></section>{{rhs_section}}</div></div>',mainSection:'<div id="smartconf_main_container" class="smartconf-main {{safari_fix_class}}" mainSection>{{grid_container}}<div class="smartconf-screen-video-view flexM dN" videoStripSection></div><div class="smartconf-screen-presenter-view flexM dN" activeSpeakerSection></div><div class="smartconf-screenview flexM dN" screenSection></div><div class="smartconf-screenview smartconf-wb-view flexM dN" wbSection></div><div class="smartconf-screenview smartconf-presentation-view flexM dN" presentationSection></div><div class="smartconf-sideview flexM dN" lhsSpeakerSection></div><div class="smartconf-centerview flexM flexG ovrflwH" mainSpeakerSection></div><div class="smartconf-sideview flexM dN" rhsSpeakerSection></div><div class="smartconf-subview flex-col flexG ovrflwH dN" mainSubSpeakerSection><div class="smartconf-subview_top flexM flx1 ovrflwH dN" mainSubTopSpeakerSection></div></div>{{footer_pin}}{{loader}}</div>',gridContainer:'<div id="videogridcontainer" class="smartconf-grid-cnt wh100 dN"><div class="flexM wh100 dN" gridDefaultPageContainer><div class="flexM flexW smartconf-grid-default-page wh100" gridDefaultPage></div></div>{{pages}}<div class="smartconf-grid-nav-btn smartconf-grid-nav-prev flexM dN" gridPrevNavigationBtn prevPageNo=1 smartconferencebutton purpose="showPreviousVideoGridPage"><span class="zcf-leftArrow mR6"></span><span pageNo>1</span></div><div class="smartconf-grid-nav-btn smartconf-grid-nav-next flexM dN" gridNextNavigationBtn nextPageNo=1 smartconferencebutton purpose="showNextVideoGridPage"><span pageNo>1</span><span class="zcf-rightArrow mL6"></span></div></div>',gridContainerPages:'<div class="flex-col flexG smartconf-grid-pages dN" gridPages><div class="smartconf-grid-topview flexC" gridTopSection><div class="smartconf-grid-sideview flexC flexW" gridLhsSection></div><div class="smartconf-grid-centerview" gridMainSpeakerSection><div class="smartconf-grid-centerview-video-cnt wh100" videoHolder></div></div><div class="smartconf-grid-sideview flexC flexW" gridRhsSection></div></div><div class="flexG flex flexW alignContentC smartconf-grid-bottomview" gridBottomSection></div></div>',loader:'<div id="{{id}}" class="vhcenter textC {{custom_class}}"><div class="zcl-rloader-bg"><div class="zcl-rloader-sm"></div></div><div class="mT10 {{custom_class}}-text" content>{{content}}</div></div>',rhsSection:'<aside id="smartconferencerhscont" class="smartconf-aside fshrink">{{header}}<div class="smartconf-aside_main {{safari_fix_class}}"><div class="smartconf-aside_main-wrap wh100"><div id="smartconferenceusersection" class="smartconf-participant-cont flex-col wh100 rhs-dN"><div class="smartconf-aside-v2-header dN flexC line19 mLR14 pTB10"><div class="font16 fontB flexG">{{participants_title}}</div><div class="zcf-closeB clr-icon font11 cur posrel tooltip-left" smartconferencebutton purpose="closeRHS" tooltip-title="{{close_title}}"></div></div>{{search_cnt}}<div id="smartconferenceuserslist" class="ovrflwA smartconf-user-list"></div></div><div id="smartconferencechatsection" class="smartconf-chatwindow-cont wh100 rhs-dN zcmcembd chtwndws zcsmallchat {{custom_class}}"></div><div id="smartconferencechatsectionhideport" class="dN"></div></div></div></aside>',rhsSectionHeader:'<div class="smartconf-aside_header flexC" smartconferencerhsheader>{{chat_tab}}<div id="smartconferenceusertab" class="smartconf-tab-item flexC" smartconferencebutton purpose="openParticipantsInRHS"><em class="zcf-users mR6"></em><span>{{participants_title}}</span><span class="mL3">(<span participants_count>{{participants_count}}</span>)</span></div>{{associated_resource}}<span class="zcl-close fontB tooltip-left" smartconferencebutton purpose="closeRHS" tooltip-title="{{close_title}}"></span></div>',rhsChatHeader:'<div id="smartconferencechattab" class="smartconf-tab-item flexC {{chat_display_class}}" smartconferencebutton purpose="openChatInRHS"><em class="zcf-chat mR6 posrel"><span class="msgnotify" conferenceunreadmsgcount></span></em><span>{{chat_title}}</span></div>',rhsAssociatedResourceHeader:'<div id="smartconferenceassociatedresourcetab" class="smartconf-tab-item flexC {{associatedresource_display_class}}" smartconferencebutton purpose="openAssociatedResource"><em class="zcf-townhall mR6"></em><span>{{resource_title}}</span><span id="showAssociatedResourceTabOption" smartconferencebutton purpose="showAssociatedResourceTabOptions" class="zcf-more clr-icon pLR10"></span></div>',associatedResourceIframeHtml:'<div id="conference-associatedresource-iframe" conference-id="{{conference_id}}" class="conference-associate-resource {{pt_class}} {{new_rhs_class}} {{band_classes}}"><div class="smartconf-aside-v2-header dN flexC line19 mLR14 pTB10"><div class="font16 fontB flexG">{{townhall_title}}</div><span class="zcf-refresh clr-icon font15 cur posrel tooltip-left" {{custom_attribute}} purpose="reloadAssociatedResource" tooltip-title="{{sync_title}}"></span><div class="zcf-closeB clr-icon font11 cur mL15 posrel tooltip-left" {{custom_attribute}} purpose="closeRHS" tooltip-title="{{close_title}}"></div></div><iframe src="{{associated_url}}{{query_string_separator}}frameorigin={{server_url}}" class="conference-associate-resource-iframe"></iframe></div>',rhsNotesSection:'<div id="conference-notes-iframe" conference-id="{{conference_id}}" class="conference-associate-resource conference-notes smartconf-aside-v2-resource {{band_classes}}"><div id="conference-notes-iframe-loader" class="zcl-rloader alignM"></div><div class="smartconf-aside-v2-header dN flexC line19 mLR14 pTB10"><div class="font16 fontB flexG clrW">{{notes_title}}</div><span  class="zcf-popout2 clr-icon font12 cur posrel tooltip-left" smartconferencebutton purpose="popoutRhsNotes" tooltip-title="{{popout_title}}"></span><span class="zcf-refresh clr-icon font15 mL15 cur posrel tooltip-left" smartconferencebutton purpose="reloadRhsNotes" tooltip-title="{{sync_title}}"></span><div id="rhsnotesoption_close" class="zcf-closeB clr-icon font11 cur mL15 posrel tooltip-left" smartconferencebutton purpose="closeRHS" tooltip-title="{{close_title}}"></div></div><iframe src="{{associated_url}}" service="notebook" class="conference-associate-resource-iframe"></iframe></div>',rhsSectionSearchCnt:'<div id="rhs_search_cnt" class="p10 fshrink flexC dN">\n\t\t\t\t<div class="zcl-search2 active">\n\t\t\t\t\t<div class="zcl-seach-icon zcf-search2"></div>\n\t\t\t\t\t<div class="zcl-search-input flexC">\n\t\t\t\t\t\t<input type="text" smartconferenceinput keyup-purpose="searchParticipants" placeholder="{{place_holder}}">\n\t\t\t\t\t\t<span class="zcl-search-clear" smartconferencebutton purpose="clearRHSSearch">{{clear}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{{gesture_filter}}\n\t\t\t</div>',rhsGestureFilter:`<div id="gestures-filter" conferencebutton purpose="showGesturesFilter" filter="" class="zcfunnel-icon zcl-icon-lg zcl-icon--filled mL10 dN">\n\t\t\t\t<span class="zcf-funnel posrel font18">\n\t    \t\t\t<span class="zcfunnel-unread-icon"></span>\n\t\t\t\t</span>\n\t\t\t\t<span conferencebutton purpose="clearGesturesFilter" class="zcfunnel-close-icon zcf-close fontB flexM"></span>\n\t\t\t\t<div id="gestures-filter-dropdown" class="zcl-menu-wrap no-pointer funnel-dropdown-menu dN">\n\t         \t\t<div class="pLR4">\n\t           \t\t\t{{drop_down}}\n\t         \t\t</div>\n\t         \t\t<div conferencebutton purpose="applyGesturesFilter" class="media-pats-popup_btm fontB font13 flexM clr-theme mT4">${I18N("sticky.calender.apply")}</div>\n\t\t\t\t</div>\n\t\t\t</div>`,rhsGestureFilterItem:'<label class="zcl-menu-item"><span class="nvf-img nvf-gesture-{{type}}-img"></span>\n\t\t\t\t<div class="flexG ellips flexC">\n\t\t\t\t\t<span class="ellips">{{content}}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="fshrink">\n\t\t\t\t\t<span class="flexIC curP mL3">\n\t\t\t\t\t\t<div class="zcl-checkbox">\n\t\t\t\t\t\t\t<input gesture="{{type}}" type="checkbox">\n\t\t\t\t\t\t\t<span class="zcf-tick flexM"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</label>',rhsListCnt:'<div id="{{id}}" class="{{class_name}}"><div class="smartconf-aside-title flexC" listHeader><span class="flexG"><span>{{header_content}}</span>{{header_count}}</span>{{header_option_cnt}}</div>{{sub_option}}<div class="smartconf-aside-list" list>{{list}}</div></div>',rhsListUserHtml:'<div class="smartconf-aside-list-item flexC {{custom_class}} {{spotlight_class}}" smartconferenceparticipant userId="{{user_id}}"><div class="smartconf-sqr-spotlight-ind zcf-spotlight dN flexC"></div><div {{hover_attributes}} class="zcl-img mR12 {{hover_info_class}}"><img src="{{user_img_src}}">{{raise_hand_indicator}}<span class="{{user_status}}" userStatus></span></div><div class="flexG ellips"><div class="flexC ellips"><span class="ellips {{hover_info_class}}" {{hover_attributes}} username>{{user_name}}</span><em class="bcast-info-icon zcf-info-filled {{referral_display_class}}" userid="{{user_id}}" title="{{referrer_info}}" smartconferencereferraltitle></em>{{host_indicator}}</div></div>{{request_approve_cnt}}{{action_cnt}}</div>',rhsListUserActionCnt:'<div class="smartconf-aside-actions flexC {{action_class}}" option_cnt><div class="flexC"><div class="smartconf-aside-nvf-preview flexM dN" nvfRhsPreview>{{gesture}}</div>{{audio_mute_status}}</div><div class="flexC">{{mute_audio_opt}}{{unmute_audio_opt}}{{mute_participant_opt}}{{force_mute_participant_opt}}{{allow_unmute_participant_opt}}{{ask_to_unmute_participant_opt}}{{more_opt}}</div></div>',rhsChatToggle:'<div id="conference-rhs-chat-toggle" toggle_chat smartconferencebutton purpose="toggleRHSChat" class="zcl-img-group smartconf-chatnav-group flexC cur">{{INACTIVE_CHAT}}{{ACTIVE_CHAT}}</div>',rhsThreadChatToggle:'<div id="conference-rhs-thread" confchattoggle chat_id="{{THREAD_ID}}" class="zcl-img flexM zcl-img-thread zc-conf-chat-img {{THREAD_ACTIVE_CLASS}}"><span class="{{MEDIA_CLASS}}"></span><em class="type-icon thread-type-icon flexM zcf-fillthread "></em><div conferenceunreadmsgcount id="conferencethreadchatunreadcount" class="msgnotify dN"></div></div>',rhsParentChatToggle:'<div id="conference-rhs-parent" confchattoggle chat_id="{{PARENT_ID}}" class="zcl-img flexM zcl-img-chat zc-conf-chat-img {{PARENT_ACTIVE_CLASS}}">{{PARENT_PROFILE}}<div conferenceunreadmsgcount id="conferenceparentchatunreadcount"  class="msgnotify dN"></div></div>',rhsListUserOpt:'<div class="smartconf-aside-action zcl-btn-xs zcl-btn--primary dN {{custom_class}} {{display_class}}" {{custom_attribute}} purpose="{{purpose}}"><span class="zcl-rloader xs posabs dN"></span><span class="smartconf-aside-content ellips">{{title}}</span></div>',rhsListUserOptState:'<div class="smartconf-aside-list-status posrel curD flexM mL20 {{custom_class}} {{display_class}} {{icon}} tooltip-up tooltip-right0" {{tooltip_title}} {{custom_attribute}}></div>',rhsHeaderOptCnt:'<span class="flexC font13 {{display_class}}" rhsHeaderOptions>{{non_verbal_feedback}}{{mute_all_opt}}{{invite_user_opt}}</span>',rhsHeaderMuteAllOpt:'<span id="{{mute_all_id}}" class="smartconf-aside-opt ellips {{mute_all_class}}" {{custom_button_attribute}} purpose="{{mute_all_purpose}}">{{mute_all}}</span><span id="{{unmute_all_id}}" class="{{unmute_all_class}}"><span class="zcl-point mB2 mLR5"></span><span class="smartconf-aside-opt ellips" {{custom_button_attribute}} purpose="{{unmute_all_purpose}}">{{unmute_all}}</span></span>',rhsInviteUserOpt:'<span class="{{display_class}}"><span class="zcl-point mB2 mLR5"></span><span class="smartconf-aside-opt ellips" {{custom_button_attribute}} invite_user_rhs=true purpose="{{purpose}}">{{content}}</span></span>',rhsListUserSpeakerRequestCnt:'<div class="fshrink flexC mL10 smartconf-req-option dN"><div class="zcl-icon zcl-icon--default zcl-round zcl-icon--neg zcf-close smartconf-reject-btn" {{custom_attribute}} purpose="denySpeakerRequest"></div><div class="zcl-btn-xs zcl-btn--primary mL10" {{custom_attribute}} purpose="approveSpeakerRequest">{{approve}}</div></div>',rhsRingAllOption:'<div class="zcl-ring-all mL10 {{cancel_class}}" ringAllButton purpose="{{purpose}}" {{custom_attribute}}><span class="font15 zcf-call mR8"></span><span class="ellips" title="{{ring_all}}">{{ring_all}}</span></div>',cancelRingOption:'<div class="huddle-list-ring mR12 flexM huddle-cancel-ring huddle-cancel-user-ring" {{custom_attribute}} purpose="cancelRinging"><em class="zcf-call mT2"></em></div>',startRingingOption:'<div class="huddle-list-ring mR12 flexM" {{custom_attribute}} purpose="startRinging"><em class="zcf-call mT2"></em></div>',rhsPendingUserListHtml:'<div class="smartconf-aside-list-item flexC {{spotlight_class}}" pendingparticipant userId="{{user_id}}"><div {{hover_attributes}} class="zcl-img mR12 {{hover_info_class}}"><img src="{{user_img_src}}">{{invite_revoke_optn}}<span class="{{user_status}}" userStatus></span></div><div class="flexG ellips"><div class="flexC ellips"><span class="ellips {{hover_info_class}}" {{hover_attributes}} username>{{user_name}}</span></div></div>{{action_cnt}}</div>',screenContainer:'<div id="screenMediaContainer" class="smartconf-video-box flexM smartconf-screen-box" screenContainer userId="{{user_id}}"><div class="smartconf-container-opts flexC">{{layout_opt}}<div class="smartconf-container-opt smartconf-fullscrn-btn zcf-fullscrn flexM dN tooltip-right0" tooltip-title="{{open_full_screen}}" smartconferencebutton purpose="openPresenterViewInFullScreen"></div></div><video class="wh100 smartconf-video-elem"></video><div class="smartconf-video-loader flexM dN" loader><em class="zcl-rloader sm"></em></div><div class="smartconf-info flexC dN"><span class="mLR10 ellips tooltip-up" userName tooltip-title="{{user_name}}">{{user_name}}</span></div></div>',whiteBoardContainer:'<div id="whiteBoardContainer" class="smartconf-video-box flexM smartconf-screen-box smartconf-wb-box" whiteBoardContainer><div class="flex-col wh100"><div class="huddle-wb-options w100 fshrink"><span id="wb_title" class="wb-tpbr-itm p5 flexG pL15 font14">{{title}}</span><span id="wb_participants" class="flexC wb-tpbr-itm"></span><span class="wb-tpbr-sep"></span><span class="zcf-more wb-tpbr-itm curP" data-uid="{{data_uid}}" associate-id="{{associate_id}}" associate-type="{{associate_type}}" whiteboardbutton purpose="showOptions"></span>{{layout_opt}}<span class="wb-tpbr-sep"></span><span class="zcf-fullscrn wb-tpbr-itm curP" targetElemSelector="#whiteBoardContainer" tooltip-title="{{open_full_screen}}" smartconferencebutton purpose="openPresenterViewInFullScreen"></span></div><div id="wb_iframe" class="wb-if-br flexG posrel">{{buffer_loader}}<iframe class="wb-if-br posA wh100 vsbH" {{src_url}} data-uid="{{data_uid}}" enablejsapi="1" frameBorder="0"></iframe></div></div></div>',presentationContainer:'<div id="presentation_contatiner" class="huddle-presentation-screen"><div class="smartconf-container-opts flexC">{{layout_opt}}<div class="smartconf-container-opt smartconf-fullscrn-btn zcf-fullscrn flexM tooltip-right0 dN" tooltip-title="{{open_full_screen}}" smartconferencebutton purpose="openPresenterViewInFullScreen"></div></div>{{buffer_loader}}<div id="slidecontainer_wrp" class="flex wh100"><div id="slidecontainer_leftnav_cnt" class="fshrink huddle-presentation-leftnav zcl-img-list list-counter"></div><div id="slidecontainer_leftnav_hidebar" class="flexM cur huddle-presentation-leftnav-hidebtn huddle-presentation-hide-left-nav tooltip-right" value="hide" tooltip-title="{{hide_left_navigation}}" smartconferencebutton purpose="togglePresentationSlidesList"><span  class="zcf-leftArrow"></span></div><div class="flexG posrel"><div id="slidecontainer" class="flexG"></div></div></div><div class="hudl-usr-info ellips flexC dN">{{host_identifier}}<span class="flexG ellips">{{user_name}}</span></div>{{presentation_options}}</div>',presentationNavSlide:'<div id="{{presentation_nav_slide_id}}" style="width: {{slide_width}}; height: {{slide_height}};" presentation_thumbnail purpose="jumpToPresentationSlide" smartconferencebutton slide_no="{{slide_no}}" class="zcl-img-item"></div>',presentationOptions:'<div id="presentation_options_cnt" class="huddle-presentation-options flexC dN">\n\t\t\t\t\t\t\t\t   {{host_or_viewer_options_html}}\n\t\t\t\t\t\t\t\t   <div class="huddle-presentation-option flexC font14">\n\t\t\t\t\t\t\t\t      <div class="zcf-leftArrow opacity-hover tooltip-left" tooltip-title="{{tooltip_back}}" purpose="navigateToPreviousSlide" smartconferencebutton></div>\n\t\t\t\t\t\t\t\t      <input type="number" id="presentation_current_slide" smartconferenceinput keyup-purpose="jumpToPresentationSlide" focus-purpose="selectInput" value="1" class="zcl-number zcl-input-xs fontB clr-theme hide-spin-btn textC">\n\t\t\t\t\t\t\t\t      <div id="presentation_slide_count">/</div>\n\t\t\t\t\t\t\t\t      <div class="zcf-rightArrow opacity-hover tooltip-up" tooltip-title="{{tooltip_forward}}" purpose="navigateToNextSlide" smartconferencebutton></div>\n\t\t\t\t\t\t\t\t   </div>\n\t\t\t\t\t\t\t\t</div>',presentationHostOptions:'<div class="huddle-presentation-option flexC font14">\n\t\t\t\t\t\t\t\t      <div class="zcf-zoomin"></div>\n\t\t\t\t\t\t\t\t      <div class="zcl-separator"></div>\n\t\t\t\t\t\t\t\t      <div class="flexC">\n\t\t\t\t\t\t\t\t         <span class="zcf-cursor"></span>\n\t\t\t\t\t\t\t\t         <span class="zcf-pointer font6 opacity-hover mL6"></span>\n\t\t\t\t\t\t\t\t      </div>\n\t\t\t\t\t\t\t\t   </div>',presentationViewerOptions:'<div purpose="jumpToHostView" smartconferencebutton class="huddle-presentation-option flexC font14 cur">\n\t\t\t\t\t\t\t\t\t\t      <div class="zcf-presenter cur font18"></div>\n\t\t\t\t\t\t\t\t\t\t      <div>{{goto_hostview}}</div>\n\t\t\t\t\t\t\t\t\t </div>',presentationRequestsContainer:'<div id="{{id}}presentrequestscnt" class="conf-present-reqs_list zcl-menu-wrap no-pointer curD flex-col" align="top"><div id="present-reqs-header" class="pLR20 flexC mTB5 fshrink"><span class="zcf-sharescrn mR10 font22"></span><span class="font16 fontB">{{present_reqs_list_header}}</span></div><div id="present_reqs_list" class="flexG ovrflwA">{{pending_requests}}</div></div>',presentationRequestListItem:'<div class="zcl-list-item lineN curD" presentrequestitem><div class="zcl-img flexM mR12"><img src="{{user_img}}"></div><div class="flexG ellips textL"><div class="font14 ellips">{{user_name}}</div><div class="font13 mT4 clr-lp1 ellips">{{presentation_info}} <span class="fontB text-transL">{{presentation_type}}</span></div></div><div class="zcl-onhover-item mL12"><div class="zcl-icon zcl-icon--default zcf-close mR8 zcl-round zcl-icon--neg tooltip-left" userId="{{user_id}}" presentationType="{{present_type}}" {{custom_attribute}} tooltip-title="{{cancel_request}}" purpose="denyPresentationRequest"></div><div class="zcl-btn-xs zcl-btn--primary" userId="{{user_id}}" presentationType="{{present_type}}" {{custom_attribute}} purpose="approvePresentationRequest">{{allow_text}}</div></div></div>',inviteUsersContainer:'<div id="conference_invite_users" class="smartconf-focused-wrap flexM nite-mode" conference_id="{{conference_id}}"><div class="smartconf-focused-cont"><div class="smartconf-focused_hdr flexC"><div class="flexG"><div class="zcl-hor-tab"><div id="conf_inviteheader" smartconferencebutton purpose="toggleInvitePanelTab" class="zcl-hor-tab-item sel font18">{{invite_users_header}}</div><div id="conf_sharelinkheader" smartconferencebutton purpose="toggleInvitePanelTab" class="zcl-hor-tab-item font18">{{share_link_header}}</div></div></div><em class="zchat-close zcl-icon-lg zcl-icon--plain zcl-round" smartconferencebutton purpose="closeInviteUsers" conference_id="{{conference_id}}"></em></div><div id="conf_inviteusers" class="smartconf-focused_main"><div class="line22 clr-lp1">{{invite_users_info}}</div><div class="mT24"><div class="fontB mB10">{{invite_input_label}}</div>{{invite_input}}</div></div><div id="conf_sharelink" class="smartconf-focused_main dN"><div class="line22 clr-lp1">{{share_link_info}}</div><div><div class="posrel "><div class="mB25 flexC"><div class="huddle-share-txt">{{guestaccess_info}}</div><label id="conf_enable_publicaccess" class="huddle-public-enable-toggle zcl-switch zcl-switch-sm no-icon mL15"><input id="conf_enable_publicaccess_btn" type="checkbox" smartconferencebutton purpose="{{publiclink_purpose}}" {{publicaccess_checked}}><span class="slider"><em class="switch"></em><div class="zcl-dot--loader"></div></span></label></div><div publiclink"><div class="huddle-share-link flexC"><div class="ellips flexG">{{join_link}}</div><div class="fshrink"><span smartconferencebutton purpose="copyPublicLink" class="zc-link font15 diB fontB mL10">{{copy_button}}</span></div></div></div></div></div></div><div id="conf_invitebutton" class="smartconf-focused_ftr flexC"><div class="zcl-btn zcl-btn--primary mL20" smartconferencebutton purpose="inviteUsers">{{invite}}</div></div></div></div>',mediaContainer:'<div class="smartconf-video-box flexM dN {{custom_class}} {{guest_class}}" {{custom_attribute}} videoStreamId="{{video_stream_id}}" info_set_user_id="{{info_set_user_id}}"><div class="smartconf-spotlight-ind zcf-spotlight dN flexC"></div><div class="smartconf-container-opts flexC">{{more_opt}}<div class="smartconf-container-opt smartconf-fullscrn-btn zcf-fullscrn flexM dN tooltip-right0" targetElemSelector="[videoStreamId={{video_stream_id}}]" tooltip-title="{{open_full_screen}}" smartconferencebutton purpose="openInFullScreen"></div></div><video class="wh100 smartconf-video-elem"></video><div class="smartconf-video-loader flexM dN" loader><em class="zcl-rloader sm"></em></div><div class="smartconf-userimg flexM dN" defaultUserName><img class="smartconf-userimg-tag" {{user_img_onload}} userImage src="{{img_src}}" {{user_img_onerror}}><img class="smartconf-userimg-tag dN" {{user_img_onload}} originalUserImage=true {{user_img_onerror}}><span class="tooltip-up smartconf-username ellips" username default-username tooltip-title="{{user_name}}">{{user_name}}</span></div><span class="smartconf-spotlight-name posabs ellips tooltip-up dN mT6" userName tooltip-title="{{user_name}}">{{user_name}}</span><span class="smartconf-spotlight-waiting zcl-theme-color posabs ellips dN mT10">{{waiting_content}}</span><div class="smartconf-gif-preview flexM dN" gif_preview></div><div class="smartconf-info flexC dN" conferenceInfo><span class="smartconf-user-name ellips tooltip-up tooltip-left0 mLR5" userName tooltip-title="{{user_name}}">{{user_name}}</span><span class="zcf-owner smartconf-host-icon mLR5 bcast-gold font15 dN" hostIndicator></span><span class="zcf-mic-mute mLR5 dN"></span><span class="zcf-video-mute mLR5 dN"></span></div>{{on_stage_indicator}}<div class="smartconf-nvf-preview flexM dN" nvf_preview></div></div>',mediaContainerOnStageIndicator:'<div class="smartconf-onstage wh100 dN flexM"><em class="zcf-onstage smartconf-onstage-icon"></em><span class="smartconf-onstage-content">{{content}}</span></div>',footerPin:'<div class="PT-footer-pin zcf-downArrow dN" smartconferencebutton purpose="hideFilmStrip"></div>',noSearchResultsInBottomPane:'<div id="noresults-container" class="smartconf-noresults flexM wh100 clrW-lite">{{noresults}}</div>',bottomPaneSection:'<div id="bottomparticipantspane" class="smartconf-userlist-cont flexC posrel dN">{{close_opt}}<div class="flexG">{{search_cnt}}<div class="smartconf-userlist flexM flexW" list><div class="smartconf-users smartconf-users_more flexM cur dN" participantshiddencount {{custom_attribute}} purpose="openParticipantsInRHS"></div></div></div></div>',bottomPaneSectionListElem:'<div class="smartconf-users {{guest_class}}" conferenceparticipant userId="{{user_id}}"><img id="pane_user_img_{{user_id}}" class="smartconf-users-img smartconf-users-img-opt wh100" user_id="{{user_id}}" src="{{user_img_src}}" smartconferencebutton purpose="showUserOptionsFromPane"><div class="smartconf-pane-nvf-preview flexM dN" nvf_preview>{{gesture}}</div><div class="smartconf-pane-gif-preview flexM dN" gif_preview></div>{{user_info}}</div>',sessionOptions:'<div class="smartconf-ftr fshrink flexM" sessionOptions smartconferencetransition transition-purpose="footerTransition"><div id="sessionOptionsLHS" class="flexC flx1">{{layout_options}}{{invite_user}}{{video_preview}}</div>{{ring_toaster}}<div id="waitinglobbyrequestscnt" class="smartconf-btns flexM smartconf-btns_presentrequest dN"><div id="waitinglobbyrequestsbtn" class="smartconf-btn zcf-waitingparticipants font22 tooltip-up" tooltip-title="{{waitingroom_title}}" smartconferencebutton purpose="handleWaitingLobbyRequestBtn"><span id="waitinglobbyrequestscount" class="msgnotify" count>0</span></div></div><div class="smartconf-btns flexM smartconf-btns_presentrequest {{present_request_class}}" presentrequestscnt><div class="smartconf-btn zcf-sharescrn font22 tooltip-up" smartconferencebutton purpose="openPresentationRequestsWin"><span class="msgnotify" count>{{present_request_count}}</span></div></div><div class="smartconf-btns flexM smartconf-btns_raisehand {{raise_hand_class}}" raisedhandscountcnt><div class="smartconf-btn zcf-raisehand font22" smartconferencebutton purpose="openParticipantsInRHS"><span class="msgnotify" count>{{raised_hand_count}}</span></div></div><div id="conferenceoptionset" class="smartconf-btns smartconf-option-set flexM">{{audio_mute_opt}}{{video_mute_opt}}{{request_to_speak}}<div class="smartconf-btn zcf-audio smartconf-btn_end tooltip-up" tooltip-title="{{end_title}}" smartconferencebutton purpose="endConference"></div>{{reaction_option}}{{share_options}}<div id="smartconfmoreopt" class="smartconf-btn zcf-moreS tooltip-up" tooltip-title="{{more_title}}" smartconferencebutton purpose="showMoreOptions"></div><div class="smartconf-btn-separator dN"></div>{{minimize_pip_option}}</div><div class="flx1 flexC justifySB">{{screen_share_indicator}}{{presentation_indicator}}<div class="flexC mLA">{{bottom_pane_option}}<div class="smartconf-btns flexM smartconf-btns-screen-view {{screen_opt_class}} mL12">{{pip_option}}{{minimize_option}}{{fullscreen_option}}</div></div></div></div>',ringToaster:'<div id="conf-ringing-status" member_count="{{member_count}}" {{custom_attribute}} purpose="openParticipantsFromRingingStatus" class="zc-cnf-ringing flexC font15 clr-M cur hide"><span main>{{toast_text}}</span><span ringall class="{{ring_all_class}}"><span purpose="startRingingForAll" {{custom_attribute}} class="mR10 fontB zcl-btn-xs zcl-btn--primary">{{ring_all}}</span>{{notify}}</span><span class="zcf-closeB clr-icon flexM" smartconferencebutton purpose="hideRingingStatus"></span></div>',layoutOptions:'<div id="layout_options" class="smartconf-btns flexM smartconf-btns-view mR12"><div class="smartconf-btn zcf-stage-view active tooltip-up" smartconferencebutton purpose="switchToStageLayout" tooltip-title="{{stage_view_title}}"></div><div class="smartconf-btn zcf-grid-view tooltip-up" smartconferencebutton purpose="switchToVideoGridLayout" tooltip-title="{{grid_view_title}}"></div></div>',minimizeWindowOption:'<div class="smartconf-btn zcf-mini-player tooltip-up" tooltip-title="{{title}}" smartconferencebutton purpose="minimizeWindow"></div>',fullScreenOption:'<div class="smartconf-btn zcf-fullscrn tooltip-up tooltip-right0 font16" tooltip-title="{{title}}" targetElemSelector="body" smartconferencebutton purpose="openInFullScreen"></div>',pipOption:'<div class="smartconf-btn smartconf-pip-switcher zcf-pip tooltip-up {{custom_class}}" tooltip-title="{{title}}" smartconferencebutton purpose="openInPIP"></div>',inviteUsersOption:'<div class="smartconf-btns flexM smartconf-btns-copylink mR12" inviteUsersButton><div id="conference_inviteuser" class="smartconf-btn zcf-memberAdd tooltip-up" tooltip-title="{{title}}" smartconferencebutton purpose="openInviteUserPanel"></div></div>',bottomBandVideoPreview:'<div id="bottom_band_video_preview" class="smartconf-bb-video-preview {{custom_class}}"><div id="bottom_band_local_user" class="flexM posrel wh100" ><div id="media_device_settings" class="smartconf-bb-video-control flexM curP" smartconferencebutton purpose="openDeviceSettings"><span class="zcf-upArrow smartconf-arrow-icon"></span></div><div id="smartconf_local_user_video" conferencedbclick purpose="openSettingsWindow"><video class="wh100"></video><img class="bdr50 alignM smartconf-bb-img {{hide_img}}" src="{{img_src}}"/></div><div class="smartconf-bb-video-nvf-preview flexM dN" nvf_preview></div><div class="smartconf-bb-video-gif-preview flexM dN" gif_preview></div></div></div>',optionsDropDownItem:'<div class="zcl-menu-item ellips {{custom_class}}" smartconferencebutton purpose="{{purpose}}"><em class="{{icon}} zcl-menu-item-icn mR10"></em><span class="ellips">{{content}}</span></div>',splitOptionsDropDownItem:'<div class="zcl-menu-item ellips zcl-menu-item_split">{{parent_option}}<div class="zcl-dropdown-divider fshrink"></div><div class="fshrink zcl-menu-item pLR12 {{custom_class}}" smartconferencebutton purpose="{{purpose}}">{{content}}</div></div>',filmStripCnt:'<div class="huddle-minimize-ftr dN"><div class="huddle-film-strip" filmStripSection></div></div>',enablePublicLinkButton:'<span smartconferencebutton purpose="enablePublicLink" class="invite-btn mT20">{{enable}}</span>',focusedModePanel:'<div id="focusedmodepanelcnt" class="smartconf-focused-wrap flexM nite-mode"><div id="focusedmodepanel" class="smartconf-focused-cont"><div class="smartconf-focused_hdr flexC"><div class="font18 fontB flexG">{{header}}</div><em class="zchat-close zcl-icon-lg zcl-icon--plain zcl-round" smartconferencebutton purpose="closeFocusedModePanel"></em></div><div class="smartconf-focused_main"><div class="line22 clr-lp1">{{info}}</div><div class="mT24">{{drop_down}}</div></div><div class="smartconf-focused_ftr flexC"><div class="zcl-btn zcl-btn--secondary" smartconferencebutton purpose="closeFocusedModePanel">{{cancel}}</div>{{focused_mode_option}}{{save_changes_option}}</div></div></div>',hostLeaveConfirmCnt:'<div id="host_leave_confirm_cnt" class="smartconf-focused-wrap flexM nite-mode" conference_id="{{conference_id}}"><div class="smartconf-focused-cont"><div class="smartconf-focused_hdr flexC"><div class="font18 fontB flexG">{{header}}</div><em class="zchat-close zcl-icon-lg zcl-icon--plain zcl-round" smartconferencebutton purpose="closeHostLeaveConfirmation" conference_id="{{conference_id}}"></em></div><div class="smartconf-focused_main"><div class="line22 clr-lp1">{{info}}</div><div class="mT24">{{drop_down}}</div></div><div class="smartconf-focused_ftr flexC"><div class="zcl-btn zcl-btn--secondary" smartconferencebutton purpose="closeHostLeaveConfirmation" conference_id="{{conference_id}}">{{cancel}}</div><div class="zcl-btn zcl-btn-neg--primary mL20" {{button_attribute}} purpose="assignAsHostAndLeave" conference_id="{{conference_id}}">{{assign_and_leave}}</div></div></div></div>',helpTipCnt:'<div id="{{id}}" class="smartconf-helptip dN">{{help_tip}}</div>',helpTipConfirmCnt:'<div id="{{id}}" class="smartconf-helptip smartconf-helptip_confirm nite-mode"><div class="fontB" content>{{help_tip}}</div>{{decline_btn}}{{accept_btn}}</div>',joinRecordingConsentBodyHtml:'<div class="zcl-img lg2 mAuto flexM"><span class="AV-call-record-icon AV-call-record-icon-lg AV-call-record-icon-circle flexM"></span></div><div class="flexM textC font18 mT12 fontB">{{recording_hint}}</div><div class="flexM textC font15 mT12 clr-S">{{recording_confirmation}}</div>',joinRecordingConsentFooterHtml:'<div class="modalwindow2-footer flexC justifyE"><div class="zcl-btn zcl-btn--secondary" smartconferencebutton purpose="closePreviewRoomFromRecordingConsent">{{leave}}</div><div class="zcl-btn zcl-btn--primary mL20" smartconferencebutton purpose="acceptRecordingConsentInJoinPreview">{{continue}}</div></div>',reactionItem:'<div class="smartconf-reaction-item smartconf-reaction-item-{{order}}">{{reaction}}</div>',reactionsAndNVF:`<div>\n\t\t\t<div id="smartconfreactionopt" class="smartconf-btn zcf-huddle-reaction smartconf-btns_reaction tooltip-up" tooltip-title="${I18N("message.option.addreactions")}" smartconferencebutton purpose="openReactions"></div>\n\t\t\t<div id="smartconf-reactions" callback="ZCSmartConferenceHandler.UIEvents.handleReactionClick" class="smartconf-poll-popup dN">\n\t\t\t\t<div class="smartconf-main-reactions">\n\t\t\t\t\t<div id="smartconf-special-reactions" class="dN mB10">\n\t\t\t\t\t   <div class="font13 clrW-lite">${I18N("smiley.signs")}</div>\n\t\t\t\t\t   <div class="flexC mT8">\n\t\t\t\t\t      <div smartconferencebutton purpose="handleSpecialReaction" type="yes" title="${I18N("emoji.yes")}" class="smartconf-splaction-item flexM">\n\t\t\t\t\t         <span class="nvf-img nvf-gesture-yes-img"></span>\n\t\t\t\t\t      </div>\n\t\t\t\t\t      <div smartconferencebutton purpose="handleSpecialReaction" type="no" title="${I18N("emoji.no")}" class="smartconf-splaction-item flexM">\n\t\t\t\t\t         <span class="nvf-img nvf-gesture-no-img"></span>\n\t\t\t\t\t      </div>\n\t\t\t\t\t      <div smartconferencebutton purpose="handleSpecialReaction" type="slow" title="${I18N("conference.nvf.slow")}" class="smartconf-splaction-item flexM">\n\t\t\t\t\t         <span class="nvf-img nvf-gesture-slow-img"></span>\n\t\t\t\t\t      </div>\n\t\t\t\t\t\t  <div smartconferencebutton purpose="handleSpecialReaction" type="fast" title="${I18N("conference.nvf.fast")}" class="smartconf-splaction-item flexM">\n\t\t\t\t\t         <span class="nvf-img nvf-gesture-fast-img"></span>\n\t\t\t\t\t      </div>\n\t\t\t\t\t      <div smartconferencebutton purpose="handleSpecialReaction" type="timeout" title="${I18N("status.default.option2")}" class="smartconf-splaction-item flexM">\n\t\t\t\t\t         <div class="nvf-img nvf-gesture-timeout-img"></div>\n\t\t\t\t\t      </div>\n\t\t\t\t\t   </div>\n\t\t\t\t   </div>\n\t\t\t\t   <div id="smartconf-normal-reactions">\n\t\t\t\t\t   <div class="font13 clrW-lite">${I18N("message.option.reaction")}</div>\n\t\t\t\t\t   <div class="flexC mT8">\n\t\t\t\t\t      <div class="flexG flexM">\n\t\t\t\t\t      \t{{reactions_html}}\n\t\t\t\t\t      </div>\n\t\t\t\t\t      <div id="smartconf-all-reactions-btn" class="fshrink zcf-addemoji font24 clr-icon cur p5" smartconferencebutton purpose="showAllReactions"></div>\n\t\t\t\t\t   </div>\n\t\t\t\t   </div>\n\t\t\t   </div>\n\t\t\t   <div id="smartconf-all-reactions" populatetypes="{{populate_type}}" custom_config="true" config_namespace="ZCSmartConferenceImpl"></div>\n\t\t\t</div>\n\t\t</div>`,topBarSpotLightIndicator:'<div class="smartconf-spotlight-hdr dN">\n\t\t\t\t<div class="flexC cur" smartconferencebutton purpose="showSpotLightOptions">\n\t\t\t\t\t<span class="smartconf-spotlight-icon flexM zcf-spotlight"></span>\n\t\t\t\t\t<span class="smartconf-spotlight-arrow flexM zcf-downArrow"></span>\n\t\t\t\t</div>\n\t\t\t\t<div id="spotlightdropdowncnt" class="zcl-menu-wrap dN"></div>\n\t\t\t</div>',spotLightOptions:'<div class="p10">\n\t\t\t\t<div class="flexC">\n\t\t\t\t\t<span class="zcf-spotlight mR6 mT2"></span>\n\t\t\t\t\t<span class="fontB mR25 flexG">\n\t\t\t\t\t\t<span class="mR2" id="spotlight_count">{{count}}</span>\n\t\t\t\t\t\t<span class="ellips">{{content}}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="zcl-btn-xs zcl-btn--secondary zcl-btn-neg--secondary" smartconferencebutton purpose="disableSpotLight">{{disable}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="flexC mT25">\n\t\t\t\t\t<span>{{allow_speakers}}</span>\n\t\t\t\t\t<span checkboxContainer>{{allow_speakers_toggle}}</span>\n\t\t\t\t</div>\n\t\t\t</div>',nonVerbalFeedbackTopBar:'<div id="non_verbal_feedback" class="flexC">\n\t\t\t<div id="vote" class="zc-nvf-cont flexC dN">\n\t\t\t   <div class="flexC">\n\t\t\t      <span class="nvf-img nvf-gesture-yes-img"></span>\n\t\t\t      <span id="nvf-yes-count" class="font11 fontB mL4">0</span>\n\t\t\t   </div>\n\t\t\t   <div class="zcl-divider-vert lite-brdrW mLR4"></div>\n\t\t\t   <div class="flexC">\n\t\t\t      <span class="nvf-img nvf-gesture-no-img"></span>\n\t\t\t      <span id="nvf-no-count" class="font11 fontB mL4">0</span>\n\t\t\t   </div>\n\t\t\t   <span smartconferencebutton purpose="clearNonVerbalFeedback" type="vote" class="zc-nvf-close zcf-closeB flexM dN"></span>\n\t\t\t</div>\n\n\t\t\t<div id="speed" class="zc-nvf-cont flexC dN">\n\t\t\t\t<div class="flexC">\n\t\t\t      <span class="nvf-img nvf-gesture-slow-img"></span>\n\t\t\t      <span id="nvf-slow-count" class="font11 fontB mL4">0</span>\n\t\t\t   </div>\n\t\t\t   <div class="zcl-divider-vert lite-brdrW mLR4"></div>\n\t\t\t   <div class="flexC">\n\t\t\t      <span class="nvf-img nvf-gesture-fast-img"></span>\n\t\t\t      <span id="nvf-fast-count" class="font11 fontB mL4">0</span>\n\t\t\t   </div>\n\t\t\t   <span smartconferencebutton purpose="clearNonVerbalFeedback" type="speed" class="zc-nvf-close zcf-closeB flexM dN"></span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div id="timeout" class="zc-nvf-cont flexC dN">\n\t\t\t   <div class="flexC">\n\t\t\t      <span class="nvf-img nvf-gesture-timeout-img"></span>\n\t\t\t      <span id="nvf-timeout-count" class="font11 fontB mL4">0</span>\n\t\t\t   </div>\n\t\t\t   <span smartconferencebutton purpose="clearNonVerbalFeedback" type="timeout" class="zc-nvf-close zcf-closeB flexM dN"></span>\n\t\t\t</div>\n\t\t</div>',waitingRoomRequestsContainer:'<div id="waitingroomrequestscnt" class="conf-present-reqs_list zcl-menu-wrap no-pointer curD flex-col" align="top"><div class="pLR20 flexC mTB5 fshrink"><span class="zcf-waitingparticipants mR10 font22"></span><span class="font16 fontB">{{waitingRoomTitle}}</span></div><div id="waitingroom_reqs_list" class="flexG ovrflwA">{{waitingRoomUsersList}}</div></div>',waitingRoomRequestListItem:'<div id="waitinglobbyrequest{{id}}" class="zcl-list-item lineN curD"><div class="zcl-img flexM mR12"><img src="{{img_url}}"></div><div class="flexG ellips textL"><div class="font14 ellips">{{name}}</div><div class="font13 mT4 clr-lp1 ellips" title="{{bio_tooltip}}">{{bio}}</div></div><div class="zcl-onhover-item mL12"><div class="zcl-icon zcl-icon--default zcf-close mR8 zcl-round zcl-icon--neg tooltip-left" user_id="{{user_id}}" tooltip-title="{{cancel_request}}" smartconferencebutton purpose="denyWaitingLobbyRequest"></div><div class="zcl-btn-xs zcl-btn--primary" user_id="{{user_id}}" smartconferencebutton purpose="approveWaitingLobbyRequest">{{allow_text}}</div></div></div>',callEndPageHtml:'<div id="huddle_call_end_page" class="meeting-end-page wh100">'+($zcg.isGuestUser?"":'<span class="waiting-room-close zcf-close flexM" onclick="$(\'#huddle_call_end_page\').remove();" title="{{close}}"></span>')+'<div class="flex-col wh100">\n\t\t\t      <div class="flexG flexM fdirC">\n\t\t\t         <img class="zcl-waiting-logo" src="{{image_url}}">\n\t\t\t         <div class="mT24 fontB font22">{{title}}</div>\n\t\t\t         <div class="mT60">\n\t\t\t            <div class="">{{product_hint}}</div>\n\t\t\t            <a target="_blank" href="https://www.zoho.com/cliq"><div class="mT10 textC"><span class="zcl-btn--link fontB font18">www.zoho.com/cliq</span></div></a>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t      <div class="fhsrink flexC page-ftr">\n\t\t\t         <div class="flexG">\n\t\t\t            <span>{{powered_by}}</span>\n\t\t\t            <img class="zcl-waiting-logo" src="{{product_img}}" class="mLR5">\n\t\t\t            <span class="font12">{{from_zoho}}</span>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t   </div>\n\t\t\t</div>',switchChatHeaderHtml:`<div id="conference-switch-chat-parent" class="zcuserlist-popup_hdr switch-chat-hdr flexC fshrink cur" chat_id="{{chid}}" smartconferencebutton purpose="toggleRHSChat">\n\t\t\t\t\t<span class="clr-theme zc-switch-chat-back-icon {{show_back_btn}}"><span class="zcf-leftArrow mR5"></span>${I18N("common.back")}</span><div class="flexM fshrink huddle-list-img-cnt {{show_back_btn}}">{{chat_img_html}}</div><span class="ellips flexG">{{switch_chat_title}}</span><div class="LHS-count {{show_confchat_unread_count}}">{{confchat_unread_count}}</div>\n\t\t\t </div>`,switchChatDropdownHtml:`<div id="conference-switch-chat-selection" class="zcl-popup zcuserlist-popup zc-switch-chat-cont show-switch-chat dN">\n\t\t\t   <div class="flex-col wh100 ovrflwH">\n\t\t\t\t  {{switch_chat_header}}\n\t\t\t      <div id="conference-switch-chat-selection-results" class="flexG ovrflwH">\n\t\t\t         <div class="fshrink p10">\n\t\t\t            <div class="zcl-search2 active">\n\t\t\t               <div class="zcl-seach-icon zcf-search2"></div>\n\t\t\t               <div class="zcl-search-input flexC">\n\t\t\t               \t\t<input id="conference-switch-chat-selection-search-field" type="text" selected-input placeholder="${I18N("common.searchconversation")}" autocomplete="off">\n\t\t\t               \t\t<span class="zcl-search-clear" purpose="clearSelectedValue">${I18N("common.clear")}</span>\n\t\t\t               \t</div>\n\t\t\t            </div>\n\t\t\t         </div>\n\t\t\t         <div class="flexG">\n\t\t\t            <div id="conference-switch-chat-selection-list" class="zcl-multiselect-list zc-conf-rhs-multiselect-list">{{chats_list}}</div>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t   </div>\n\t\t\t</div>`,invitePanelV2:'<div id="invite_users_panel" class="zcl-popup smartconf-invite-panel {{invite_rhs_class}}"><div class="flex-col"><header class="flexC smartconf-invite-panel-hdr"><div class="flexG flexC"><span class="{{icon_class}} font16"></span><div class="font18 fontB mL10">{{header_content}}</div></div><div class="fshrink"><span class="zcf-close zcl-close flexM fontB" smartconferencebutton purpose="close_v2_invite_panel"></span></div></header><section class="pLR20"><div class="mT20 smartconf-invite-panel-copy"><div class="zcl-hint-box flexM"><span class="posrel zindex1" tooltip-title="{{click_copy_link}}"><span class="fontI wrd-brk-all curP ellips-L2" smartconferencebutton purpose="copyPublicLink">{{link}}</span></span><span class="smartconf-invite-panel-copy-btn flexM fshrink clr-icon mL10 curP" tooltip-title="{{copy_link}}" smartconferencebutton purpose="copyPublicLink"><span class="zcf-copy mR6 font12"></span><span>{{copy_link}}</span></div><div title="{{external_policy_title}}" class="flexC mT14 {{hide_external_member_join}}"><span>{{ext_access_desc}}</span>{{ext_access_toggle}}</div></div><div class="flexC mT30 mB30 pLR16 flexW gap15"><div class="zcl-btn-sm zcl-btn--secondary" smartconferencebutton purpose="copyInvitationFromPanel"><span class="zcf-copy mR8"></span>{{copy_invitation}}</div><div class="zcl-btn-sm zcl-btn--secondary" smartconferencebutton purpose="showSendMailInPanel"><span class="zcf-event-mail mT2 mR8"></span>{{send_email}}</div><div class="zcl-btn-sm zcl-btn--secondary zcdisabled" smartconferencebutton purpose="showInviteUsersInPanel"><span class="zcf-plusB mR8 font12 mT2"></span>{{invite_users}}</div></div></section><div class="smartconf-invite-panel-ftr pLR30"><div id="conf_send_mail_panel_cnt" class="mT15 mB30 dN"><div class="fontB mB15">{{send_email}}</div>{{send_email_input}}<div class="flexC justifyE mT20"><div class="zcl-btn zcl-btn--primary zcdisabled" smartconferencebutton purpose="sendMailFromPanel">{{send}}</div></div></div><div id="conf_send_invite_panel_cnt" class="mT15 mB30"><div class="fontB mB15">{{invite_users}}</div>{{invite_users_input}}<div class="flexC justifyE mT20"><div class="zcl-btn zcl-btn--primary zcdisabled" smartconferencebutton purpose="inviteUsersFromPanel">{{invite}}</div></div></div></div></div></div>',streamingLinkPopup:`<div id="conference_streamingpopup" class="smartconf-focused-wrap flexM nite-mode" session_id="{{session_id}}">\n\t\t\t   <div class="smartconf-focused-cont">\n\t\t\t      <div class="smartconf-focused_hdr flexC">\n\t\t\t         <div class="flexG">\n\t\t\t            <div class="zcl-hor-tab">\n\t\t\t               <div id="conf_sharelinkheader" class="font18 sel">${I18N("cs.popuptitle")}</div>\n\t\t\t            </div>\n\t\t\t         </div>\n\t\t\t         <em class="zchat-close zcl-icon-lg zcl-icon--plain zcl-round" smartconferencebutton purpose="closeStreamingPopup"></em>\n\t\t\t      </div>\n\t\t\t      <div class="smartconf-focused_main">\n\t\t\t         <div>\n\t\t\t            <div class="posrel">\n\t\t\t               <div>\n\t\t\t                  <div class="huddle-share-link flexC">\n\t\t\t                     <div class="ellips flexG zc-no-select curP" smartconferencebutton purpose="copyStreamingLink">{{streaming_url}}</div>\n\t\t\t                     <div class="fshrink"><span smartconferencebutton purpose="copyStreamingLink" class="zc-link font15 diB fontB mL10">${I18N("common.copy")}</span></div>\n\t\t\t                  </div>\n\t\t\t               </div>\n\t\t\t\t\t\t   <div title="{{external_policy_title}}" class="mB25 flexC {{hide_external_member_join}}">\n\t\t\t                  <div >${I18N("cs.enableexternal")}</div>`+'<label class="zcl-switch zcl-switch-sm no-icon mL15 {{external_policy_cls}}" checkboxcontainer><input id="streaming_external_access" type="checkbox" session_id="{{session_id}}" smartconferencemediacheckbox purpose="toggleStreamingExternalAccess" {{checked}}>\n\t\t\t                     <span class="slider"><em class="switch"></em><div class="zcl-dot--loader"><span></span><span></span><span></span></div></span>\n\t\t\t                  </label>\n\t\t\t               </div>\n\t\t\t            </div>\n\t\t\t         </div>\n\t\t\t      </div>\n\t\t\t   </div>\n\t\t\t</div>',singelSelectResultsCntHtml:'<div id="{{id}}-results" class="zc-native-sel-cntr"><div class="ellips drsrchholder"><div class="srchin"><span class="msi-srchicon mR6"></span><input id="{{id}}-search-field" class="bornone w100" placeholder="{{search_place_holder}}"/></div></div><div id="{{id}}-list" class="zc-native-sel-list macscroll"></div></div>',singleSelectDropDownHtml:'<div class="posrel {{display_class}}" scope_input="{{scope_value}}"><div id="{{id}}" class="cur"><input class="zc-form-input textL cur" selected-input placeholder="{{place_holder}}" input_buttons purpose="showResultsDom"><span class="zc-form-icons"><span class="msi-darrw zcclr" purpose="showResultsDom"></span><span class="msi-close zcclr cur" purpose="clearSelectedValue"></span></span>{{results_cnt}}</div></div>',singleNodeSelectDropDownHtml:'<div id="{{id}}_cnt" class="zcl-form {{display_class}}" scope_input="{{scope_value}}"><div id="{{id}}" class="cur posrel"><div id="{{id}}-result-cnt" class="zc-form-input zc-form-single"><input readonly selected-input placeholder="{{place_holder}}" input_buttons purpose="showResultsDom"><span class="zc-form-icons zcl-dropdown-divider flexM"><span class="zcf-downArrow clr-icon" purpose="showResultsDom"></span></span><span id="{{id}}-error" class="error-txt"></span></div>{{results_cnt}}</div></div>',singleSelectedUserHtml:'<span id="{{id}}-selected-input" class="zcl-input-token ellips" elemtype="contact"><span class="token-name ellips">{{name}}</span><span class="token-delete zcf-close" purpose="clearSelectedValue"></span></span>'},t=function(e,t,n){var i;return i=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.AUDIO_INPUT,e.getAudioUpStream(),{dropDownContainerHtml:MediaTemplates.getDeviceDropdownCntHtml(t)}),r(t,i,n)},n=function(e,t,n){var i;return i=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.VIDEO_INPUT,e.getVideoUpStream(),{dropDownContainerHtml:MediaTemplates.getDeviceDropdownCntHtml(t)}),r(t,i,n)},i=function(e,t,n){var i="";return Conference.isNomenclatureEnabled()&&(i=MediaUtil.getAudioOutputDropDownHtml({dropDownContainerHtml:MediaTemplates.getDeviceDropdownCntHtml(t),includeDeviceDropDown:e.isAudioUpStreamBlocked()})),r(t,i,n)},r=function(e,t,n){var i='mediamodulebuttons purpose="openDevicesDropDown"';e&&e.openCallbackAttrs&&(i=e.openCallbackAttrs);var r='smartconferencebutton purpose="setDeviceInJoinRoom"';return n&&(r='mediadevicewidgetbutton purpose="selectDevice"'),e&&e.selectCallbackAttrs&&(r=e.selectCallbackAttrs),$WC.template.replace(t,{open_callback:i,select_callback:r},"InSecureHTML")},o=function(e,t,n,i,r){var o=Conference.isLowBandwidthModeEnabled()&&WebRTCPeerConnectionStats.isStatsSupported(),s=MediaTemplates.getHeaderComponentHtml({customClass:"",customAttribute:"smartconferenceheader",module:"smartconferencebutton",backBtnClass:"zcf-leftArrow",backBtnPurpose:"minimizeWindow",componentIconClass:e.isVideoConference()?"zcf-video":"zcf-call",timerId:"smartconferencesessiontimer",title:e.getTitle(),header:e.getTitle(),backBtnTitle:"media.back.minimize.view",showParticipantsCount:t,showViewersCount:e.isCurrentUserHost(),participantsCount:1,viewersCount:0,ignoreBackOption:n,recordingIndex:e.getRecordingReferenceIndex(),isPreviewRoom:r,isNetworkStrengthTooltipNeeded:r&&Conference.isNetworkStrengthIndicationEnabled(),showNetworkHealthIndicator:o,networkHealthParams:{customClass:"mL6"}});if(i){var a={id:"conferencev2header",customClass:"",customAttribute:"smartconferenceheader",titleParams:{id:"conf_title",iconClass:e.isVideoConference()?"zcf-video font16":"zcf-call font15",content:e.getTitle(),allowEdit:Conference.isNomenclatureEnabled(),titleAttribute:"smartconferencebutton",titlePurpose:"showEditTitle",inputId:"conf_title_edit",inputAttribute:"smartconferenceinput",inputPurpose:"editConferenceTitle",inputLimit:ZCMediaConstants.MAX_TITLE_LENGTH},timerParams:{id:"smartconferencesessionsubtimer"},recorderParams:{recordingIndex:e.getRecordingReferenceIndex(),allowAction:e.isCurrentUserHost(),customAttribute:"smartconferencebutton"},options:{customOptions:[{html:ZCSmartConferenceTemplates.getNonVerbalFeedbackTopBarHTML()+E()}]}},c=!0;Conference.isCurrentUserGuest()&&(c=e.getConfigurations().isChatAccessibleToExternalUser()),c&&(a.options.chatParams={displayClass:"",iconClass:"zcf-chat",customAttribute:"smartconferencebutton openchatrhsbutton",purpose:"openChatInRHS",unreadCountAttribute:"conferenceunreadmsgcount"}),e.hasAssociatedResourceData()&&(a.options.townHallParams={iconClass:"zcf-townhall",customAttribute:"smartconferencebutton openthrhsbutton",purpose:"openAssociatedResource"}),Conference.isNotebookLHSEnabled()&&(a.options.notesParams={iconClass:"zcf-notes",customAttribute:"smartconferencebutton opennotesrhsbutton",purpose:"openNotesInRHS"}),n||(a.backButtonParams={iconClass:"zcf-leftArrow",titleResourceParams:"media.back.minimize.view",customAttribute:"smartconferencebutton",purpose:"minimizeWindow"}),o&&(a.networkHealthParams={customClass:"mR5"}),e.isCurrentUserHost()&&(a.viewerCountParams={count:0}),t&&(a.options.participantsParams={iconClass:"zcf-users",customAttribute:"smartconferencebutton openuserrhsbutton",purpose:"openParticipantsInRHS",content:1}),s=MediaTemplates.getV2HeaderComponentHtml(a)+s}return s},s=function(t){return $WC.template.replace(e.mainSection,{safari_fix_class:$Util.Browser.isSafari()?"h100":"",grid_container:a(t),footer_pin:e.footerPin,loader:Z("connectionstateloader","common.connecting","smartconf-loader")},"InSecureHTML")},a=function(t){var n="";return t.getConfigurations().isGridViewAccessible(t)&&(n=$WC.template.replace(e.gridContainer,{pages:c(t)},"InSecureHTML")),n},c=function(t){return e.gridContainerPages},d=function(t,n){var i=$WC.template.replace('<span class="zcf-closeB smartconf-userlist-close flexM clrW-lite tooltip-left" tooltip-title="{{title}}" {{custom_attribute}} purpose="hideBottomPane"></span>',{$title:"conference.bottompane.hide",custom_attribute:t}),r="";n&&(r=`<div class="smartconf-searchbox flexM">\n\t\t\t\t\t\t\t\t<em class="zcf-search2 mR10 fshrink"></em>\n\t\t\t\t\t\t\t\t<input class="smartconf-searchbox-input" type="text" smartconferenceinput keyup-purpose="searchParticipantsInBottomPane" placeholder="${I18N("conference.search.participant")}">\n\t\t\t\t\t\t\t</div>`);var o=$WC.template.replace(e.bottomPaneSection,{custom_attribute:t});return $WC.template.replace(o,{close_opt:i,search_cnt:r},"InSecureHTML")},l=function(e){var t="",n="";switch(e){case ZCSmartConferenceConstants.nvfValues.YES:t="nvf-gesture-yes-img",n="emoji.yes";break;case ZCSmartConferenceConstants.nvfValues.NO:t="nvf-gesture-no-img",n="emoji.no";break;case ZCSmartConferenceConstants.nvfValues.FAST:t="nvf-gesture-fast-img",n="conference.nvf.fast";break;case ZCSmartConferenceConstants.nvfValues.SLOW:t="nvf-gesture-slow-img",n="conference.nvf.slow";break;case ZCSmartConferenceConstants.nvfValues.TIMEOUT:t="nvf-gesture-timeout-img",n="status.default.option2"}return t.length>0?'<span class="'+t+' nvf-img" title="'+Resource.getRealValue(n)+'"></span>':""},u=function(t,n){return $WC.template.replace(e.rhsHeaderMuteAllOpt,{mute_all_id:t.muteAllId,unmute_all_id:t.unmuteAllId,mute_all_class:t.muteAllClassName,unmute_all_class:t.unmuteAllClassName,mute_all_purpose:t.muteAllPurpose,unmute_all_purpose:t.unmuteAllPurpose,custom_button_attribute:t.customButtonAttribute,$mute_all:"conference.mute.all",$unmute_all:"conference.unmute.all"})},f=function(t){return $WC.template.replace(e.rhsInviteUserOpt,{display_class:t.className,purpose:t.purpose,custom_button_attribute:t.customButtonAttribute,$content:"contact.invite"})},m=function(e,t,n){return $WC.template.replace('<div class="zcl-btn-sm zcl-btn--secondary mLR5 {{display_class}} smartconf-raise-hand-opt {{requested_class}}" {{custom_attribute}} purpose="{{purpose}}"><span class="smartconf-spk-req-btn ellips"><em class="zcf-raisehand mR5 bcast-gold"></em>{{request}}</span><span class="smartconf-spk-waiting-btn dN ellips"><em class="zcf-event-clock mR5 bcast-gold"></em>{{waiting}}</span><span class="smartconf-spk-cancel-btn dN ellips"><em class="zcf-close mR5 clr-R"></em>{{cancel}}</span></div>',{$request:"videobroadcast.raisehand",$waiting:"primetime.approval.waiting",$cancel:"channel.cancelapprovalrequest",requested_class:n?"smartconf-requested":"",purpose:n?"dropSpeakerRequest":"raiseSpeakerRequest",custom_attribute:t,display_class:e?"dN":""})},C=function(t){var n=$WC.template.replace('<div class="smartconf-btn zcf-mic tooltip-up {{display_class}} smartconf-btns_mic" tooltip-title="{{title}}" smartconferencebutton purpose="muteAudio"></div>',{display_class:t.isActiveMember()?"":"dN",title:MediaUtil.getMicOffToolTip()}),i=$WC.template.replace('<div class="smartconf-btn zcf-video tooltip-up {{display_class}} smartconf-btns_cam" tooltip-title="{{title}}" smartconferencebutton purpose="muteVideo"></div>',{display_class:t.isActiveMember()&&t.isVideoConference()?"":"dN",$title:"videochat.cameraoff"}),r=m(t.isActiveMember(),"smartconferencebutton",t.hasRequestedToSpeak()),o="",s="",a="",c="smartconf-single-opt";WmsImpl.isGuestUser()||(o=$WC.template.replace(e.minimizeWindowOption,{$title:"videochat.minimize"}),c="");var d=$WC.template.replace(e.fullScreenOption,{$title:"media.open.fullscreen"});Conference.isPIPEnabled()&&(s=$WC.template.replace(e.pipOption,{$title:"avcliq.media.open.pip",custom_class:""}),a=$WC.template.replace(e.pipOption,{$title:"avcliq.media.open.pip",custom_class:"dN"}),c="");var l=h("smartconferencebutton"),u="";t.isCurrentUserHost()&&(u=$WC.template.replace(e.inviteUsersOption,{$title:"contact.invite"}));var f="";t.isVideoConference()&&(f=ZCSmartConferenceTemplates.getBottomBandVideoPreview(!0,t.getCurrentUserId()));var C="";(Conference.isWhiteBoardAllowed()||Conference.isPresentationsAllowed())&&(C=$WC.template.replace('<div id="smartconfshropt" class="smartconf-btn smartconf-share-opt zcf-sharemedia tooltip-up '+(t.isActiveMember()?"":"dN")+'" tooltip-title="{{title}}" smartconferencebutton purpose="showShareOptions"></div>',{$title:"common.share"}));var S=MediaTemplates.getScreenShareIndicator("smartconferencebutton",!1,"mL12"),I=t.getScopeIds(),_=t.hasHostPermission()?t.getRequestedSpeakersCount():0,w=t.getRequestedPresentationsCount(),b=$WC.template.replace(e.sessionOptions,{audio_mute_opt:n,ring_toaster:g("smartconferencebutton",t.getScopeType(),I),video_mute_opt:i,request_to_speak:r,reaction_option:v(),share_options:C,screen_share_indicator:S,presentation_indicator:MediaTemplates.getPresentationIndicator("smartconferencebutton",!1,"mL12"),bottom_pane_option:l,screen_opt_class:c,minimize_option:o,fullscreen_option:d,pip_option:s,minimize_pip_option:a,layout_options:p(t),invite_user:u,video_preview:f},"InSecureHTML");return $WC.template.replace(b,{raised_hand_count:_,raise_hand_class:_>0?"":"dN",present_request_count:w,present_request_class:w>0?"":"dN",$end_title:t.isCurrentUserHost()?"conference.end":"conference.leave",$more_title:"common.more",$waitingroom_title:"media.waitingroom"})},p=function(t){var n="";return t.getConfigurations().isGridViewAccessible(t)&&(n=$WC.template.replace(e.layoutOptions,{$stage_view_title:"conference.stageview",$grid_view_title:"media.grid"})),n},h=function(e){return $WC.template.replace('<div id="showBottomPaneOpt" class="zcl-img-group smartconf-userlist-box flexM dN hide curP tooltip-up tooltip-right0" tooltip-title="{{title}}" {{custom_attribute}} purpose="showBottomPane"><div class="zcl-img dN" previewUserId previewImageThird><img previewImage /></div><div class="zcl-img dN" previewUserId previewImageSecond><img previewImage /></div><div class="zcl-img smartconf-pane-img flexM" previewUserId previewImageFirst><img previewImage /><span class="fontB font15 posabs zindex1 smartconf-content" count></span></div></div>',{$title:"conference.bottompane.show",custom_attribute:e})},g=function(t,n,i){var r=n===ZCMediaConstants.scopeTypes.CHAT;return $WC.template.replace(e.ringToaster,{$ring_all:"conference.ring.all",$notify:"conference.ring.nofity",$toast_text:r?"conference.ring.members":i?["conference.ringing.all",i.length]:"",ring_all_class:r?"":"hide",member_count:""+(i?i.length+1:0),custom_attribute:t})},v=function(){var t="";if(Smiley.isAnimatedSmileyEnabled()){var n="",i=ZCSmartConferenceConstants.shortcutReactionCodes;for(var r in i){var o=i[r];n+='<div class="zcanimemoji-35 posrel">'+Smiley.getAnimatedSmileyHTML(o,"",!0,{customClass:"tooltip-up",titleAttribute:"tooltip-title"})+"</div>"}t=$WC.template.replace(e.reactionsAndNVF,{populate_type:Smiley.SMILEY_ANIM+","+Smiley.GIPHY+","+Smiley.CUSTOM_STICKER}),t=$WC.template.replace(t,{reactions_html:n},"InSecureHTML")}return t},S=function(e,t){return $WC.template.replace(e,{purpose:t[0],icon:t[1],$content:t[2],custom_class:t[3]})},I=function(t){return e.filmStripCnt},_=function(t){var n=$WC.template.replace(e.rhsSection,{header:w(t),safari_fix_class:$Util.Browser.isSafari()?"h100":"",search_cnt:U(),custom_class:WmsImpl.isGuestUser()?"conference-guest-chat":"conference-chat"},"InSecureHTML");return $WC.template.replace(n,{$participants_title:"common.participants",$close_title:"common.hide"})},w=function(t){var n=!0;Conference.isCurrentUserGuest()&&(n=t.getConfigurations().isChatAccessibleToExternalUser());var i=$WC.template.replace(e.rhsSectionHeader,{chat_tab:n?e.rhsChatHeader:"",associated_resource:e.rhsAssociatedResourceHeader},"InSecureHTML");return $WC.template.replace(i,{$chat_title:"common.chat",$participants_title:"common.participants",$close_title:"common.hide",participants_count:1,chat_display_class:t.isPersonalScope()||t.hasChatId()?"":"dN",associatedresource_display_class:t.hasAssociatedResourceData()?"":"dN",$resource_title:"conference.associatedresource.townhall.title"})},b=function(){var t="",n={yes:"emoji.yes",no:"emoji.no",slow:"conference.nvf.slow",fast:"conference.nvf.fast",timeout:"status.default.option2"};for(var i in n)t+=$WC.template.replace(e.rhsGestureFilterItem,{type:i,$content:n[i]});return $WC.template.replace(e.rhsGestureFilter,{drop_down:t},"InSecureHTML")},U=function(){var t=$WC.template.replace(e.rhsSectionSearchCnt,{gesture_filter:b()},"InSecureHTML");return $WC.template.replace(t,{$place_holder:"conference.search.participant",$clear:"common.clear"})},R=function(e){var t="";return e&&e.length&&(e.hasClass("smartconf-show-bandwidth-band")&&(t+="smartconf-show-bandwidth-band"),e.hasClass("smartconf-show-silent-band")&&(t+=" smartconf-show-silent-band"),e.hasClass("smartconf-show-mute-band")&&(t+=" smartconf-show-mute-band"),e.hasClass("smartconf-show-focus-band")&&(t+=" smartconf-show-focus-band")),t},T=function(e,t,n){var i="";if(!e.isHost(t)&&void 0===e.getMember(t)){var r=e.getRingingStateForUser(t);if(void 0!==r&&r!==MediaCallConstants.ringingStates.cancel_ringing){var o="",s="";r===MediaCallConstants.ringingStates.ringing?(s=M(n),o="videochat.message.ringing"):r===MediaCallConstants.ringingStates.declined?o="common.busy":r===MediaCallConstants.ringingStates.no_response&&(o="videochat.noresponse"),i=$WC.template.replace('<div class="mR12 flexM huddle-ring-status font14 fshrink" ringingContent>{{ringing_content}}</div>{{cancel_opt}}',{$ringing_content:o}),i=$WC.template.replace(i,{cancel_opt:s},"InSecureHTML")}else i=y(n)}return i},y=function(t){return $WC.template.replace(e.startRingingOption,{custom_attribute:t})},M=function(t){return $WC.template.replace(e.cancelRingOption,{custom_attribute:t})},A=function(t,n){var i=t.hasHostPermission(),r=t.isAllowAudioUnmuteCheckboxEnabled(),o=t.isCurrentUserHost(),s=n.isCurrentUser(),a=n.isActiveMember(),c=t.isHost(n.getId()),d=n.isCohost(),l=c||d,u=n.isAudioMuted(),f=n.isAudioUnmuteRestricted(),m=!r;l&&(m=!1);var C=t.getReactionsDB(),p=(C.isNonVerbalFeedbackEnabled(),C.getUserVote(n.getId())),h="",g="",v="",S="",I="",_="",w="",b="",U=!1;if(t.isMixingEnabled()&&t.isInUnifiedPlan()){var R=t.isVideoConference(),T=R&&t.isUserInSpotLight(n.getId()),y=Conference.isKickoutEnabled()&&!s||a&&o&&!s||Conference.isSpotLightEnabled()&&R&&i&&(a||T)||!l&&!s&&a&&u&&!f;if(h=$WC.template.replace('<div id="{{id}}{{user_id}}useractiondropdownopt" class="smartconf-aside-action smartconf-more-opt dN zcl-icon--theme zcl-icon zcl-round flexM zcf-more-h {{display_class}}" smartconferencebutton purpose="showActionsOnMember"></div>',{id:t.getId(),user_id:n.getId(),display_class:y?"":"hide"}),U=!y,s){var M=!0;t.isFocusedModeEnabled()&&(M=t.isInFocusedUsers());var A=!a||u;g=P({titleParams:"chat.mute",purpose:"muteAudioFromRhs",displayClass:A?"hide":"",customClass:"smartconf-own-mute-btn"});var L=!a||!u||!M||f&&!i;v=P({titleParams:"chat.unmute",purpose:"unmuteAudioFromRhs",displayClass:L?"hide":"",customClass:"smartconf-own-mute-btn"}),S=D({icon:u?"zcf-mic-mute":"zcf-mic",titleParams:"",displayClass:a?"":"hide",customClass:"smartconf-mute-indication"+(u&&(!M||f&&!i)?" smartconf-mute-restrict-btn":""),customAttribute:"rhsAudioMutedStatus"}),U=U||!A||!L}else if(S=D({icon:u?"zcf-mic-mute":"zcf-mic",titleParams:"",displayClass:a?"":"hide",customClass:"smartconf-mute-indication"+(u&&f&&!l?" smartconf-mute-restrict-btn":""),customAttribute:"userAudioMutedStatus"}),!c){var Z=!a||!i||u||m;I=P({titleParams:"chat.mute",purpose:"muteUserAudio",displayClass:Z?"hide":"",customClass:"smartconf-mute-btn"});var E=!a||!i||u||!m;_=P({titleParams:"chat.mute",purpose:"forceMuteUserAudio",displayClass:E?"hide":"",customClass:"smartconf-mute-btn"});var V=!(a&&i&&u&&f);w=P({titleParams:"conference.user.unmute.allow",purpose:"allowUserToUnmuteAudio",displayClass:V?"hide":"",customClass:"smartconf-mute-btn"});var W=!a||!i||!u||f;b=P({titleParams:"conference.user.unmute.ask",purpose:"askUserToUnmuteAudio",displayClass:W?"hide":"",customClass:"smartconf-mute-btn"}),U=U||!Z||!E||!V||!W}}var k=ZCSmartConferenceTemplates.getGestureHTML(p);return $WC.template.replace(e.rhsListUserActionCnt,{action_class:U?"smartconf-action-allowed":"",audio_mute_status:S,gesture:k,mute_audio_opt:g,unmute_audio_opt:v,mute_participant_opt:I,force_mute_participant_opt:_,allow_unmute_participant_opt:w,ask_to_unmute_participant_opt:b,more_opt:h},"InSecureHTML")},P=function(t){return $WC.template.replace(e.rhsListUserOpt,{$title:t.titleParams,purpose:t.purpose,custom_class:t.customClass||"",display_class:t.displayClass,custom_attribute:t.customAttribute||"smartconferencebutton"})},D=function(t){var n=t.titleParams?'tooltip-title="{{title}}"':"",i=$WC.template.replace(e.rhsListUserOptState,{tooltip_title:n},"InSecureHTML");return $WC.template.replace(i,{icon:t.icon,$title:t.titleParams,custom_class:t.customClass||"",display_class:t.displayClass,custom_attribute:t.customAttribute||""})},L=function(t){return $WC.template.replace(e.rhsListUserSpeakerRequestCnt,{$approve:"common.approve",custom_attribute:t})},Z=function(t,n,i){return $WC.template.replace(e.loader,{id:t,$content:n,custom_class:i})},E=function(){return e.topBarSpotLightIndicator},V=function(e,t){var n=t?'<span id="conf_screen_layout_opts" class="{{icon_class}} wb-tpbr-itm posrel curP" smartconferencebutton purpose="showScreenLayoutOptions"></span>':'<div id="conf_screen_layout_opts" class="{{icon_class}} smartconf-container-opt smartconf-ss-layout-opt posrel flexM dN" smartconferencebutton purpose="showScreenLayoutOptions"></div>';return $WC.template.replace(n,{icon_class:ZCSmartConferenceConstants.screenLayouts.getLayoutIcon(e)})},W=function(t){var n=t.isPresenter();return $WC.template.replace(e.presentationOptions,{host_or_viewer_options_html:n?"":e.presentationViewerOptions},"InSecureHTML")},k=function(e,t){return Users.getImgUrlById(e,t,void 0,!1,{nps:!0})},O=t=>{var n="";for(var i in t){var r=t[i],o=r.bio;n+=$WC.template.replace(e.waitingRoomRequestListItem,{user_id:i,id:$.escapeSelector(i),name:r.name,bio:o||Users.getEmailId(i)||r.email,bio_tooltip:o&&o.length>50?o:"",img_url:Users.getImgUrlById(i),$cancel_request:"channel.cancelapprovalrequest",$allow_text:"common.allow"})}return n},x=(t,n)=>{let i=ConversationsList.get(t),r=ConversationsList.getTitle(t,i.title),o=i.unreadmsgs,s=$WC.template.replace(e.switchChatHeaderHtml,{chid:t,show_back_btn:n?"dN":"",confchat_unread_count:o,show_confchat_unread_count:o>0?"":"dN",switch_chat_title:n?I18N("common.recentchats"):r});return $WC.template.replace(s,{chat_img_html:n?"":HistoryUI.getRecipantsPhoto($WC.Util.isEmpty(i.participants)?i.recipants:JSON.parse(i.participants),i.participantscount||i.pcount,Chat.parseAddinfo(i.addinfo),r,i.ctype,t,i.customgroup)},"InSecureHTML")},N=function(){return e.singelSelectResultsCntHtml},H=function(){return $WC.template.replace(e.singleSelectDropDownHtml,{results_cnt:N()},"InSecureHTML")},z=function(){return $WC.template.replace(e.singleNodeSelectDropDownHtml,{results_cnt:N()},"InSecureHTML")};return{getPreviewRoomHtml:function(r){var s=r.isVideoConference(),a=r.isStartPreview(),c=r.isQuickStartPreview(),d=r.hasAudioUpStream(),l=!d||!r.getAudioUpStream()._isAudioTrackEnabled()||r.getAudioUpStream()._isAudioRestrictedForConnection(),u=!1,f=!1,m="",C="",p=`<span class="zcl-btn-secondary--link font14" smartconferencebutton purpose="showJoinDeviceSettings">${I18N("media.device.settings")}</span>`;Conference.isNomenclatureEnabled()&&(!c&&s||(m=MediaTemplates.getAudioCardHtml(r.getCurrentUserId()),C=s?"":"smartconf-audio-preview"));var h=t(r,void 0,!1),g=i(r,void 0,!1),v=MediaTemplates.getMediaControlOption({headerKey:"media.setdevices.audioinput",iconClass:l?"zcf-mic-mute":"zcf-mic",needsSeparator:!1,checkboxAttribute:"smartconferencemediacheckbox",checkboxPurpose:"toggleAudioInPreview",isSelected:!l,customClass:"smartconf-mic-toggle",customAttribute:"audio_toggle_in_preview",deviceDropDown:h}),S="";""!==g&&(S=MediaTemplates.getOutputAudioControlOption({headerKey:"media.setdevices.audiooutput",customClass:"",customAttribute:"audio_output_toggle_in_preview",needsSeparator:!1,audioOutputAttribute:"smartconferencebutton",audioOutputPurpose:"playDummySoundInPreviewPage",disablePlayBtn:r.isAudioUpStreamBlocked()?"zcf-disable-play-btn":"",deviceDropDown:g}));var I="",_="flexM",w="",b="",U="";if(s){var R=!(u=r.hasVideoUpStream())||!r.getVideoUpStream()._isVideoTrackEnabled(),T=n(r,void 0,!1);I=MediaTemplates.getMediaControlOption({headerKey:"media.setdevices.videoinput",iconClass:R?"zcf-video-mute":"zcf-video",needsSeparator:!1,checkboxAttribute:"smartconferencemediacheckbox",checkboxPurpose:"toggleVideoInPreview",isSelected:!R,customClass:"smartconf-cam-toggle",customAttribute:"video_toggle_in_preview",deviceDropDown:T}),_="flexC",c?w='<div class="clr-M smartconf-preview-mode-switch fshrink">'+MediaTemplates.getCheckboxHtml("start_mode_toggle","conference.meeting.audio.only",r.isAudioConference(),"smartconferencemediacheckbox","toggleModeInPreview",!1)+"</div>":f=!0,b=`<div class="smartconf-video-effects-opt smartconf-btns flexM tooltip-up tooltip-right0" tooltip-title="${I18N("cc.video.effects")}"><div id="conf_preview_effects_popup_opt" class="smartconf-btn zcf-video-blur" smartconferencebutton purpose="showVideoEffectsInPreview"></div></div>`;var y="";(Conference.isVideoDisabledInJoinByUser()||r.isVideoUpStreamBlocked())&&(y="zcdisabled"),U=$WC.template.replace('<div class="mT10 line1 pL4 {{check_box_disabled}}" video_mirror>\n\t\t\t\t\t{{video_mirror_checkbox}}\n\t\t\t\t</div>',{video_mirror_checkbox:MediaTemplates.getCheckboxHtml("conf_video_mirror_toggle","cc.video.mirror",ZCMediaPreferences.isRotateVideoEnabledByUser(),"smartconferencebutton","toggleVideoRotateConfigForPreviewPage",!0),check_box_disabled:y},"InSecureHTML")}var M=$WC.template.replace(e.previewRoomUI,{header_section:o(r,!1,!0,!1,!0),close_room:Conference.isCurrentUserGuest()?"":`<div class="smartconf-btn_close flexM zcf-close" smartconferencebutton purpose="closePreviewRoom" tooltip-title="${I18N("common.close")}"></div>`,audio_card:m,mode_switch_opt:w,video_effects_opt:b,audio_control:v,video_control:I,audio_output_control:S,system_requirement_link:MediaTemplates.getSystemRequirementLinkHtml(),recording_info_content:!r.isRecording()||a||c?"":`<div class= "font14 clr-lp1 pLR24 textL mTB15">${I18N("conference.recording.hint")}</div>`,disable_video:r.isVideoUpStreamBlocked()?MediaTemplates.getCameraDisabledInfo():"",device_dropdown:p,video_mirror_option:U},"InSecureHTML");if(Conference.isCurrentUserGuest()){M='<div id="maskbg" class="zcmask"></div><div id="zcwindows" class="zcoverlay"></div>'+M}var A="",P="joinFromPreviewRoom";a?P="startFromPreviewRoom":c&&(P="quickStartFromPreviewRoom",A="smartconf-quick-start");var D="";return Conference.isNomenclatureEnabled()?D+=" smartconf-device-preview-cnt":d||u||(D="dN"),$WC.template.replace(M,{img_class:"dN",img_src:Users.getImgUrlById(r.getCurrentUserId()),parent_class:A,mode_class:C,preview_purpose:P,$preview_cta:a||c?"common.start.meeting":"conference.join.call",$cancel_preview_cta:"common.cancel",$settings_header:s?"media.audiovideo.settings":"media.audio.settings",control_opt_class:_,settings_display_class:D,preview_cta_disabled:f?"disabled":""})},getPreviewDevicePickerHtml:function(e,t){var n=e.hasAudioUpStream(),i=e.hasVideoUpStream(),r="";n&&(r=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.AUDIO_INPUT,e.getAudioUpStream(),{dropDownContainerHtml:MediaTemplates.getDeviceDropdownCntHtml(t)})),Conference.isNomenclatureEnabled()&&(r+=MediaUtil.getAudioOutputDropDownHtml({dropDownContainerHtml:MediaTemplates.getDeviceDropdownCntHtml(t)})),i&&(r+=MediaUtil.getDeviceDropDownHtml(ZCMediaDevices.kinds.VIDEO_INPUT,e.getVideoUpStream(),{dropDownContainerHtml:MediaTemplates.getDeviceDropdownCntHtml(t)}));var o='mediamodulebuttons purpose="openDevicesDropDown"';t&&t.openCallbackAttrs&&(o=t.openCallbackAttrs);var s='smartconferencebutton purpose="setDeviceInJoinRoom"';return t&&t.selectCallbackAttrs&&(s=t.selectCallbackAttrs),$WC.template.replace(r,{open_callback:o,select_callback:s},"InSecureHTML")},getPreviewAudioInputDevicePickerHtml:t,getPreviewAudioOutputDevicePickerHtml:i,getPreviewVideoInputDevicePickerHtml:n,getBottomBandVideoPreview:function(t,n){return $WC.template.replace(e.bottomBandVideoPreview,{img_src:Users.getImgUrlById(n),custom_class:t?"":"smartconf-bb-localuser-preview",hide_img:t?"dN":""})},getStartUIHeaderHtml:function(t,n,i){var r="";void 0!==i&&(r=$WC.template.replace('<span class="clr8 mR2">{{chat_title}}</span><span class="bold mR2">></span>',{chat_title:i}));var o=$WC.template.replace(e.startUIHeader,{chat_title:r},"InSecureHTML");return $WC.template.replace(o,{$header:t,$hint:n})},getStartUISelectedField:function(t,n,i){return $WC.template.replace(e.startUISelectedField,{icon_class:t,img_src:n,content:i})},getStartUIDisabledField:function(t,n,i){return $WC.template.replace(e.startUIDisabledField,{id:t,icon_class:n,content:i})},getStartUIAddRolesOpt:function(t,n,i){var r="";return Conference.isSpotLightEnabled()&&void 0!==t&&(r=$WC.template.replace(`<div class="flexC mL20 {{display_class}}" spotConfSpotlightOpt conferencebutton purpose="showAddSpotLightInput">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="flexC">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zcl-point lg mR6"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="zcl-btn-theme--link font14 bold">+${I18N("conference.spotlight.users")}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>`,{display_class:t===Conference.types.VIDEO&&i?"":"dN"})),$WC.template.replace(e.startUIAddRolesOpt,{spotlight_opt:r},"InSecureHTML")},getStartUIToggleModeOpt:function(t,n){return $WC.template.replace(e.startUIToggleModeOpt,{ischecked:t?"checked=true":"",$footer_content:n})},getMainWindowHtml:function(t){var n=$WC.template.replace(e.mainUI,{header_section:o(t,!0,Conference.isCurrentUserGuest(),!0,!1),main_section:s(t),bottom_pane_section:d("smartconferencebutton",Conference.isNomenclatureEnabled()),session_options:C(t),film_strip:I(t),rhs_section:_(t),layout_class:ZCSmartConferenceConstants.screenLayouts.getSSLayoutClass(t),screenshare_indicator:MediaTemplates.getScreenShareIndicatorForMiniPlayer("smartconferencebutton",!0)},"InSecureHTML");return $WC.template.replace(n,{conference_id:t.getId(),session_key:t.getSessionKey(),focused_class:t.isFocusedModeEnabled()?"smartconf-focused-mode":"",spotlight_class:t.isSpotLightEnabled()?"smartconf-spotlight-mode":"",bottom_pane_class:t.canShowBottomPane()?"":"smartconf-bottom-pane-hide",permission_class:t.hasHostPermission()?"":"smartconf-no-perm",new_rhs_class:"smartconf-aside-v2",guest_user_class:WmsImpl.isGuestUser()?"smartconf-guest-user-win":"",info_config_class:Conference.isStickyInfoAllowedByUser()?"smartconf-show-info":""})},getNoSearchResultsInBottomPaneHtml:function(){return $WC.template.replace(e.noSearchResultsInBottomPane,{$noresults:"conference.search.noresult"})},getBottomPaneSectionHtml:d,getBottomPaneSectionListHtml:function(t,n){var i=n.getId(),r=Users.getName(i,n.getName()),o=t.getReactionsDB(),s=o.isNonVerbalFeedbackEnabled(),a=o.getUserVote(n.getId()),c="";s&&void 0!==a&&(c=l(a));var d=WmsImpl.isGuestUserId(i)?"smartconf-guest-pane-cnt":"",u=$WC.template.replace('<div class="smartconf-tooltip"><div class="fontB ellips">{{user_name}}</div></div>',{user_name:r}),f=$WC.template.replace(e.bottomPaneSectionListElem,{user_info:u,gesture:c},"InSecureHTML");return $WC.template.replace(f,{user_id:i,user_img_src:Users.getImgUrlById(i),guest_class:d})},getRhsSectionUserHtml:function(t,n,i,r){var o=n.getId(),s=n.getReferrerInfo(),a="",c="",d="",l=A(t,n);n.isHost()?c='<em class="zcf-owner bcast-gold mL4"></em>':(a='<span class="smartconf-raisehand zcf-raisehand flexM dN"></span>',d=L("smartconferencebutton"));var u=Users.getName(o,n.getName());void 0!==i&&i.length>0&&(u=_highlightSearchText(u,i));var f="",m="";WmsImpl.isGuestUser()||WmsImpl.isGuestUserId(o)||(f='elemtype="user" hover="true" uid="'+o+'"',m="curP");var C="";Conference.isSpotLightEnabled()&&t.isSpotLightEnabled()&&t.isUserInSpotLight(o)&&(C="smartconf-spotlight-user-list");var p=Users.getImgUrlById(o),h=$WC.template.replace(e.rhsListUserHtml,{user_id:o,user_img_src:p,custom_class:r||"",spotlight_class:C,user_status:Contacts.isExist(o)||WmsImpl.isLocalUser(o)?Contacts.getStatusStyle(o):"",hover_info_class:m,user_designation:n.getDesignation()||"",referral_display_class:s?"conference-referral-title":"",$referrer_info:s?["conference.referrer.info",s]:""});return $WC.template.replace(h,{user_name:u,user_tag:Users.getTag(o),raise_hand_indicator:a,host_indicator:c,request_approve_cnt:d,action_cnt:l,hover_attributes:f},"InSecureHTML")},getRhsSectionUserActionCntHtml:A,getRhsSectionPendingUserHtml:function(t,n,i,r,o){var s=T(t,n,"smartconferencebutton");i=Users.getName(n,i),void 0!==o&&o.length>0&&(i=_highlightSearchText(i,o));var a=t.getInvitedMember(n),c="",d="",l="";Conference.isInviteRevokeEnabled()&&a&&(l=`<span class="remove-usr-icn flexM" smartconferencebutton purpose="revokeInvite" title="${I18N("avcliq.conf.invite.revoke")}"></span>`),WmsImpl.isGuestUser()||WmsImpl.isGuestUserId(n)||(c='elemtype="user" hover="true" uid="'+n+'"',d="curP");var u="",f="";if(Conference.isSpotLightEnabled()){var m=t.isUserInSpotLight(n),C=m&&t.hasHostPermission();f=$WC.template.replace('<div id="{{id}}{{user_id}}useractiondropdownopt" class="smartconf-aside-action smartconf-more-opt dN zcl-icon--theme zcl-icon zcl-round flexM zcf-more-h {{display_class}} mR8" smartconferencebutton purpose="showActionsOnYetToJoinMember"></div>',{id:t.getId(),user_id:n,display_class:C?"":"hide"}),m&&(u="smartconf-spotlight-user-list")}var p=$WC.template.replace(e.rhsPendingUserListHtml,{user_id:n,user_img_src:Users.getImgUrlById(n),user_status:Contacts.isExist(n)||WmsImpl.isLocalUser(n)?Contacts.getStatusStyle(n):"",hover_info_class:d,spotlight_class:u,user_designation:r||""});return $WC.template.replace(p,{invite_revoke_optn:l,user_name:i,user_tag:Users.getTag(n),action_cnt:s,more_opt:f,hover_attributes:c},"InSecureHTML")},getRhsActiveParticipantsHeaderOpt:function(t,n){return function(t,n){var i="",r="";void 0!==t.muteAll&&(i=u(t.muteAll)),void 0!==t.inviteUser&&(r=f(t.inviteUser));var o="";return $WC.Util.isEmpty(i)&&$WC.Util.isEmpty(r)||(o=$WC.template.replace(e.rhsHeaderOptCnt,{display_class:n.hasHostPermission()?"":"dN"}),o=$WC.template.replace(o,{non_verbal_feedback:"",mute_all_opt:i,invite_user_opt:r},"InSecureHTML")),o}({muteAll:{muteAllId:"rhsmuteallopt",unmuteAllId:"rhsunmuteallopt",muteAllClassName:t.canShowMuteAllParticipantsOpt()?"":"disabled",unmuteAllClassName:t.canShowUnmuteAllParticipantsOpt()?"":"dN",muteAllPurpose:"muteAllParticipantsAudio",unmuteAllPurpose:"unmuteAllParticipantsAudio",customButtonAttribute:n},inviteUser:{className:t.hasHostPermission()?"":"dN",purpose:"openInviteUserPanel",customButtonAttribute:n}},t)},getRhsSectionUserRingActionHtml:T,getRhsSectionUserOptionsCntHtml:function(t,n){var i="",r=t.hasHostPermission(),o=n.getId(),s=n.isActiveMember(),a=t.isCurrentUser(o),c=t.isHost(o),d=n.isCohost(),l=c||d;if(t.isCurrentUserHost()&&s&&!a&&(i+=S(e.optionsDropDownItem,d?["removeFromCohost","zcf-owner","conference.cohost.remove","active"]:["setAsCohost","zcf-owner","conference.cohost.set",""]),Conference.isSetAsHostEnabled())){i+=S(e.optionsDropDownItem,["setAsHost","zcf-owner","conference.host.set",""])}if(t.isVideoConference()&&Conference.isSpotLightEnabled()&&r){var u=t.isUserInSpotLight(o);if(s||u)i+=S(e.optionsDropDownItem,u?["removeFromSpotLight","zcf-spotlight","conference.remove.from.spotlight","active zcl-neg-menu-item"]:["setInSpotLight","zcf-spotlight","conference.spotlight.users",""])}if(Conference.isKickoutEnabled()&&!a&&r){i+=S(e.optionsDropDownItem,["kickoutUser","zcf-unsub","guest.remove.user",""])}if(!a&&r&&s&&!l&&n.isAudioMuted()&&!n.isAudioUnmuteRestricted()){i+=S(e.optionsDropDownItem,["restrictAudioUnmuteForUser","zcf-mic-mute","conference.unmute.restrict",""])}if(Conference.isLowerHandEnabled()&&r&&s&&!l){i+=S(e.optionsDropDownItem,["removeFromSpeaker","zcf-unsub","conference.speaker.remove",""])}if(Conference.isWhiteBoardAllowed()&&t.hasWhiteBoard()&&t.hasHostPermission()&&!t.isCurrentUser(n.getId())&&!WhiteBoard.hasEditPermissionForCurrentBoard(n.getId(),t)){i+=S(e.optionsDropDownItem,["setAsWbEditor","zcf-whiteboard","conference.set.whiteboard.editor",""])}var f=$WC.template.replace('<div id="{{id}}{{user_id}}useractiondropdowncnt" class="zcl-menu-wrap" align="top">{{options}}</div>',{id:t.getId(),user_id:n.getId()});return $WC.template.replace(f,{options:i},"InSecureHTML")},getStartRingingOption:y,getCancelRingOption:M,getBottomPaneOption:h,getLowBandwidthModeInfoCntHtml:function(){return MediaTemplates.getTopBandHtml({id:"lowBandwithModeInfoCnt",customClass:"smartconf-bandwidth-banner",contentResourceParams:"conference.lowbandwidthmode.hint",shortContentResourceParams:"conference.lowbandwidthmode.hint.short",icons:[{className:"zcf-video"}],actionButtons:[{contentResourceParams:"common.disable",customAttribute:"smartconferencebutton",purpose:"disableLowBandwidthMode"}],closeOption:{customAttribute:"smartconferencebutton",purpose:"closeLowBandwidthModeInfo",titleResourceParams:"common.hide"}})},getSilentSpeakerInfoCntHtml:function(){return MediaTemplates.getTopBandHtml({id:"silentSpeakerInfoCnt",customClass:"smartconf-silent-spkr-banner",contentResourceParams:"conference.silent.speaker.hint",shortContentResourceParams:"conference.silent.speaker.hint.short",icons:[{className:"zcf-mic-mute"},{className:"zcf-video-mute"}],closeOption:{customAttribute:"smartconferencebutton",purpose:"closeSilentSpeakerInfo",titleResourceParams:"common.hide"}})},getFocusedModePanelHtml:function(t){var n=Conference.MAX_FOCUSED_USERS>1,i="",r="";t.isFocusedModeEnabled()?(i=$WC.template.replace('<div class="zcl-btn zcl-btn--secondary mL20" smartconferencebutton purpose="disableFocusedMode">{{content}}</div>',{$content:"conference.focused.mode.disable"}),r=$WC.template.replace('<div class="zcl-btn zcl-btn--primary mL20" smartconferencebutton purpose="switchFocusedUsers">{{content}}</div>',{$content:"conference.focused.users.save"})):i=$WC.template.replace('<div class="zcl-btn zcl-btn--primary mL20" smartconferencebutton purpose="enableFocusedMode">{{content}}</div>',{$content:"conference.focused.mode.enable"});var o="";o=n?$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-focusedusers-selection",$place_holder:"conference.add.speakers.placeholder",display_class:"",custom_attribute:"",custom_attribute_value:""}):$WC.template.replace(H(),{id:"conference-focusedusers-selection",$place_holder:"conference.focused.mode.single.placeholder",$search_place_holder:"smiley.search",display_class:"",scope_value:""});var s=$WC.template.replace(e.focusedModePanel,{focused_mode_option:i,save_changes_option:r,drop_down:o},"InSecureHTML");return $WC.template.replace(s,{$cancel:"common.cancel",$header:"conference.focused.mode",$info:n?"conference.focused.mode.multiple.info":"conference.focused.mode.single.info"})},getFocusedModeInfoCntHtml:function(e){var t=void 0;return e.hasHostPermission()&&(t=[{contentResourceParams:"conference.focused.mode.disable",customAttribute:"smartconferencebutton",purpose:"disableFocusedMode"}]),MediaTemplates.getTopBandHtml({id:"focusedModeInfoCnt",customClass:"smartconf-focused-banner",contentResourceParams:["conference.focused.mode.onstage",ZCSmartConferenceUI.getFocusedUsersNames(e)],shortContentResourceParams:"conference.focused.mode.enabled",icons:[{className:"zcf-groupcall-focus"}],actionButtons:t})},getEndOptionsHtml:function(e,t){return $WC.template.replace(`<div id="{{id}}end_dropdowncnt" class="zcl-menu-wrap nite-mode" align="top">\n\t\t\t\t\t\t<div class="smartconf-drpdwn-opts">\n\t\t\t\t\t\t\t<div class="zcl-menu-item zcl-neg-menu-item ellips" conference_id="{{id}}" {{button_attribute}} purpose="endConferenceAfterConfirmation">\n\t\t\t\t\t\t\t\t<span class="ellips">${I18N("conference.end")}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="zcl-menu-item ellips" {{button_attribute}} purpose="showHostLeaveConfirmation">\n\t\t\t\t\t\t\t\t<span class="ellips">${I18N("conference.leave")}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`,{id:e.getId(),button_attribute:t})},getHostLeaveConfirmCntHtml:function(t,n){var i=$WC.template.replace(z(),{id:"conference-assign-host-selection",$place_holder:"conference.assign.host.placeholder",$search_place_holder:"smiley.search",display_class:"",scope_value:""}),r=$WC.template.replace(e.hostLeaveConfirmCnt,{drop_down:i},"InSecureHTML");return $WC.template.replace(r,{conference_id:t.getId(),button_attribute:n,$header:"conference.leave",$info:"conference.assign.host.info",$assign_and_leave:"conference.assign.host.leave",$cancel:"common.cancel"})},getSpeechIndicatorHtml:function(){return'<span id="speech_detected_ind" class="smartconf-speech-anim"></span>'},getHelptipCntHtml:function(t,n){return $WC.template.replace(e.helpTipCnt,{id:t,$help_tip:n})},getHelptipConfirmCntHtml:function(t){var n="",i="";t.acceptButton&&(n=$WC.template.replace('<div class="zcl-btn-sm zcl-btn--primary mT20" {{custom_attribute}} purpose="{{purpose}}">{{content}}</div>',{purpose:t.acceptButton.purpose,$content:t.acceptButton.contentKey,custom_attribute:t.acceptButton.customAttribute})),t.declineButton&&(i=$WC.template.replace('<div class="zcl-btn-sm zcl-btn--secondary mT20 {{margin_class}}" {{custom_attribute}} purpose="{{purpose}}">{{content}}</div>',{purpose:t.declineButton.purpose,$content:t.declineButton.contentKey,custom_attribute:t.declineButton.customAttribute,margin_class:t.acceptButton?"mR10":""}));var r=$WC.template.replace(e.helpTipConfirmCnt,{accept_btn:n,decline_btn:i},"InSecureHTML");return $WC.template.replace(r,{id:t.id,$help_tip:t.contentParams})},getJoinRecordingConsentFooterHtml:function(){return $WC.template.replace(e.joinRecordingConsentFooterHtml,{$leave:"common.cancel",$continue:"common.continue"})},getJoinRecordingConsentBodyHtml:function(){return $WC.template.replace(e.joinRecordingConsentBodyHtml,{$recording_hint:"conference.recording.info",$recording_confirmation:"conference.recording.consent.proceed"})},getLoaderHtml:Z,getReactionItemHtml:function(t,n,i){var r=Smiley.replace(n);return i&&(r=n.split("_")[1]!==$zcg._APPACCOUNTID?`<em allowtoaddfav="false" type="sticker" class="customSticker-chat-preview-img other-org-sticker" nodetype=":" title="${I18N("settings.smileys.permission.denied")}"></em>`:$WC.template.replace(e.stickerConferenceHtml,{IMG_SRC:CustomSmiley._getSmileySrcFromKey(CustomSmiley._getSmileyKeyFromCode(n)),NAME:CustomSmiley.getSmileyNameFromCode(n)})),$WC.template.replace(e.reactionItem,{order:t,reaction:r},"InSecureHTML")},getNonVerbalFeedbackTopBarHTML:function(){return e.nonVerbalFeedbackTopBar},getAudioMutedInfoCntHtml:function(e){var t=e.getCurrentMember();if(!t.isAudioUnmuteRestricted()||t.isCohost()){var n=MediaUtil.getMuteShortCutFnKey();return MediaTemplates.getTopBandHtml({id:"audioMutedInfoCnt",customClass:"smartconf-audio-muted-banner",contentResourceParams:"media.muted.info",shortCutResourceParams:["media.muted.additional.shortcut",n],shortContentResourceParams:["media.muted.shortcut",n],icons:[{className:"zcf-mic-mute"}]})}var i=ZCSmartConferenceUI.getMuteBandContent(e);return MediaTemplates.getTopBandHtml({id:"audioMutedInfoCnt",customClass:"smartconf-audio-muted-banner",contentResourceParams:i,icons:[{className:"zcf-mic-mute"}]})},getScreenContainerHtml:function(t,n,i){var r=$WC.template.replace(e.screenContainer,{layout_opt:V(i,!1)},"InSecureHTML");return $WC.template.replace(r,{user_id:t,user_name:n,$open_full_screen:"media.open.fullscreen"})},getScreenLayoutOptionHtml:V,getWhiteBoardContainerHtml:function(t){var n=t&&t.hasWhiteBoard()?t.getCurrentWhiteBoardId():"",i=t&&t.hasWhiteBoard()?WhiteBoard.getBoardURL(n,t.getId()):"",r=t?t.getCurrentScreenLayout():void 0,o=ZCSmartConferenceTemplates.getScreenLayoutOptionHtml(r,!0);$WC.Util.isEmpty(o)||(o='<span class="wb-tpbr-sep"></span>'+o);var s=$WC.template.replace(e.whiteBoardContainer,{title:t.getTitle(),data_uid:n,associate_id:t.getId(),associate_type:"group_call",src_url:i?'src="'+i+'"':"",$open_full_screen:"media.open.fullscreen"});return $WC.template.replace(s,{layout_opt:o,buffer_loader:Z("whiteboardloader","whiteboard.load","")},"InSecureHTML")},getPresentationContainerHtml:function(t){var n=t?t.getCurrentScreenLayout():void 0,i=t.getCurrentUserId(),r=$WC.template.replace(e.presentationContainer,{buffer_loader:ZCSmartConferenceTemplates.getLoaderHtml("presentation_loader","media.presentation.load",""),layout_opt:ZCSmartConferenceTemplates.getScreenLayoutOptionHtml(n,!1),presentation_options:W(t),host_identifier:t.isHost(i)?'<span class="zcf-owner mR5 fshrink" hostIndicator></span>':""},"InSecureHTML");return r=$WC.template.replace(r,{uid:i,$goto_hostview:"common.goto.presenter.view",$hide_left_navigation:"media.presentation.hide.slides",$tooltip_back:"common.back",$tooltip_forward:"common.forward",user_name:Users.getName(i,void 0,-1),$open_full_screen:"media.open.fullscreen"})},getPresentationNavSlides:function(t){for(var n=PresentationImpl.getTotalSlideCount(),i="",r=0;r<n;r++)i+=$WC.template.replace(e.presentationNavSlide,{presentation_nav_slide_id:"presentation_nav_slide_item_"+r,slide_no:r});return i=$WC.template.replace(i,{slide_width:t.width+"px",slide_height:t.height+"px"})},getMediaContainerHtml:function(t,n,i,r,o,s){var a="";s&&(a=$WC.template.replace(e.mediaContainerOnStageIndicator,{$content:WmsImpl.isLocalUser(t)&&$WC.Util.isEmpty(i)?"conference.grid.onstage.you":"conference.grid.onstage.active"}));WmsImpl.isGuestUser();var c=WmsImpl.isGuestUserId(t)?"smartconf-guest-video-cnt":"",d=$WC.template.replace(e.mediaContainer,{on_stage_indicator:a,more_opt:'<div id="conf_user_more_opts" class="smartconf-container-opt smartconf-user-opts zcf-moreS flexM dN" smartconferencebutton purpose="showUserOptions" {{custom_attribute}}_opts></div>'},"InSecureHTML");return $WC.template.replace(d,{info_set_user_id:t,user_name:n,img_src:k(t),user_img_onload:" onload=ZCSmartConferenceHandler.onImageLoadEvents.videoCardUserImage(this) ",user_img_onerror:" onerror=ZCSmartConferenceHandler.onImageLoadErrorEvents.removeVideoCardUserImage(this) ",video_stream_id:i,$open_full_screen:"media.open.fullscreen",$waiting_content:"conference.user.wait",custom_attribute:r,custom_class:o||"",guest_class:c})},getUserImgUrl:k,getScreenLayoutsHtml:function(t){var n="",i="",r="";t.isScreenInActiveSpeakerView()?r="active":t.isScreenInRhsView()?i="active":n="active";var o={top:["setSSInTopView","zcf-ss-top-view","conference.ss.top.view",n,!1],rhs:["setSSInRhsView","zcf-ss-rhs-view","conference.ss.rhs.view",i,!1],activeSpeaker:["setSSInActiveSpeakerView","zcf-ss-active-speaker-view","conference.ss.active.speaker.view",r,!1]},s="";for(var a in o)s+=S(e.optionsDropDownItem,o[a]);return $WC.template.replace('<div id="ss_layout_dropdowncnt" class="zcl-menu-wrap"><div class="smartconf-drpdwn-opts">{{options}}</div></div>',{options:s},"InSecureHTML")},getMoreOptionsHtml:function(t){t.isCurrentUserHost();var n=t.hasHostPermission(),i=Conference.isLowBandwidthModeEnabled()&&WebRTCPeerConnectionStats.isStatsSupported(),r="",o=t.getConfigurations(),s=ConferenceImpl.getRecordingConfigValue(t.getChatId()),a=void 0!==MediaUtil.BRIDGE&&MediaUtil.BRIDGE.isMediaFeedbackEnabled(),c={notebookIntegration:Conference.isNotebookIntegrationEnabled()&&!Conference.isNotebookLHSEnabled(),screenShareOpt:!Conference.isWhiteBoardAllowed()&&!Conference.isPresentationsAllowed()&&Conference.isScreenShareAllowed()&&t.isActiveMember(),recording:Conference.isRecordingAllowed()&&n&&s==ZCMediaConstants.callRecordingConfig.user_choice,streaming:Conference.isStreamingEnabled()&&n,focusedMode:n&&Conference.isGroupCallFocusModeAllowed()&&!Conference.isSpotLightEnabled(),settings:!0,restrictToMainSpeakers:!1,lowBandwidthMode:(t.isLowBandwidthModeInfoHidden()||!t.isLowBandwidthModeAutoEnableAllowed())&&i,feedback:a,pip:Conference.isPIPEnabled()&&t.isInMinimizedView(),disableIncomingVideo:Conference.isHDVideoEnabled()};let d=t.isRequestPending(ZCSmartConferenceConstants.requests.startStopRecording),l=t.isRequestPending(ZCSmartConferenceConstants.requests.startStopStreaming);var u={notebookIntegration:["takeNotes","zcf-notebook","common.notes","",!1],screenShareOpt:t.isScreenSharer()?["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active",!1]:["startScreenShare","zcf-sharescrn","common.screenshare","",!1],recording:t.isRecording()?["stopRecording","AV-call-record-icon AV-call-record-icon-circle flexM zc-av-mR10","media.recording.stop",d?"zcdisabled":"active",!1]:["startRecording","AV-call-record-icon AV-call-record-icon-circle flexM zc-av-mR10","media.recording.start",d?"zcdisabled":"",!1],streaming:t.isStreaming()?["stopBroadcast","zcf-primetime","conference.streaming.stop","flexG "+(l?"zcdisabled":"active"),!0]:["startBroadcast","zcf-primetime","conference.streaming.start",l?"zcdisabled":"",!1],focusedMode:t.isFocusedModeEnabled()?["openFocusedModePanel","zcf-groupcall-focus","conference.focused.mode","active flexG",!0]:["openFocusedModePanel","zcf-groupcall-focus","conference.focused.mode","",!1],minimize:["minimizeWindow","zcf-mini-player","videochat.minimize","",!1],settings:["openSettings","zcf-setting","common.settings","",!1],restrictToMainSpeakers:t.isDownStreamRestrictedToMainSpeakers()?["showActiveSpeakers","zcf-users","conference.show.speakers","",!1]:["restrictToMainSpeakers","zcf-event-organiser","conference.show.main.speaker","",!1],lowBandwidthMode:t.isLowBandwidthModeEnabled()?["disableLowBandwidthMode","zcf-warning","conference.lowbandwidth.mode","active",!1]:["enableLowBandwidthMode","zcf-warning","conference.lowbandwidth.mode","",!1],pip:t.isInPIP()?["exitPIP","zcf-pip","avcliq.media.exit.pip","active",!1]:["openInPIP","zcf-pip","avcliq.media.open.pip","",!1],feedback:["showFeedbackPopup","msi-feedback","profileview.help.sendfeedback",!1],disableIncomingVideo:t.isIncomingVideoEnabled()?["turnOffIncomingVideo","zcf-video","avcliq.media.incoming.video.off","",!1]:["turnOnIncomingVideo","zcf-video-mute","avcliq.media.incoming.video.on","active",!1]},f=t.getMember(ZCSmartConferenceImpl.getCurrentUserId());t.isScreenSharer()?u.screenShareOpt=["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active zcl-neg-menu-item",!1]:o.isScreenShareAllowed()||f.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?u.screenShareOpt=["startScreenShare","zcf-sharescrn","common.screenshare","",!1]:f.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?u.screenShareOpt=["dropScreenShareRequest","zcf-scrn-shr-stop","media.present.request.ss.drop","active zcl-neg-menu-item",!1]:u.screenShareOpt=["raiseScreenShareRequest","zcf-sharescrn","media.present.request.ss","",!1];var m={focusedMode:["disableFocusedMode","","common.disable","clr-R"],streaming:["showStreamingPopup","","","zcf-setting"]};for(var C in c){if(c[C]){var p=u[C];if(p[4]){var h=$WC.template.replace(e.splitOptionsDropDownItem,{parent_option:S(e.optionsDropDownItem,p)},"InSecureHTML");r+=S(h,m[C])}else r+=S(e.optionsDropDownItem,p)}}var g=$WC.template.replace('<div id="{{id}}dropdowncnt" class="zcl-menu-wrap" align="top"><div class="smartconf-drpdwn-opts">{{options}}</div></div>',{id:t.getId()});return $WC.template.replace(g,{options:r},"InSecureHTML")},getSpotLightOptionsHtml:function(t){var n={checkboxAttribute:"smartconferencemediacheckbox",checkboxPurpose:"toggleAllowSpeakersVideoInSpotLight",isSelected:t.isSpeakersVideoAllowedInSpotLight()},i=$WC.template.replace(e.spotLightOptions,{allow_speakers_toggle:MediaTemplates.getToggleButtonHtml(n)},"InSecureHTML");return $WC.template.replace(i,{count:t.getSpotLightUsersCount(),$allow_speakers:"conference.spotlight.allow.speakers",$content:"conference.spotlight.info",$disable:"common.disable"})},getDropDownMenuItem:function(t){return S(e.optionsDropDownItem,t)},getShareOptionsHtml:function(t){var n=t.isCurrentUserHost(),i=t.hasHostPermission(),r="",o=t.getConfigurations(),s={screenShareOpt:Conference.isScreenShareAllowed()&&t.isActiveMember(),whiteBoardOpt:Conference.isWhiteBoardAllowed()&&t.getMembersCount()<=100,presentationOpt:Conference.isPresentationsAllowed()&&t.isActiveMember()},a={},c=t.getMember(ZCSmartConferenceImpl.getCurrentUserId());for(var d in n?a={screenShareOpt:t.isScreenSharer()?["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active zcl-neg-menu-item",!1]:["startScreenShare","zcf-sharescrn","common.screenshare","",!1],whiteBoardOpt:t.isWhiteBoardCreator()?["stopWhiteBoard","zcf-whiteboard-end","whiteboard.stop","active zcl-neg-menu-item",!1]:["startWhiteBoard","zcf-whiteboard","whiteboard.start","",!1],presentationOpt:t.isPresenter()?["stopPresentation","zcf-presentation-end","media.presentation.stop","active zcl-neg-menu-item",!1]:["startPresentation","zcf-presentation","media.presentation.start","",!1]}:(t.isScreenSharer()?a.screenShareOpt=["stopScreenShare","zcf-scrn-shr-stop","avcliq.media.screenshare.stop","active zcl-neg-menu-item",!1]:o.isScreenShareAllowed()||c.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?a.screenShareOpt=["startScreenShare","zcf-sharescrn","common.screenshare","",!1]:c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)?a.screenShareOpt=["dropScreenShareRequest","zcf-scrn-shr-stop","media.present.request.ss.drop","active zcl-neg-menu-item",!1]:a.screenShareOpt=["raiseScreenShareRequest","zcf-sharescrn","media.present.request.ss","",!1],t.isWhiteBoardCreator()?a.whiteBoardOpt=["stopWhiteBoard","zcf-whiteboard-end","whiteboard.stop","active zcl-neg-menu-item",!1]:i||c.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.WHITEBOARD)?a.whiteBoardOpt=["startWhiteBoard","zcf-whiteboard","whiteboard.start","",!1]:c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.WHITEBOARD)?a.whiteBoardOpt=["dropWhiteboardRequest","zcf-whiteboard-end","media.present.request.wb.drop","active zcl-neg-menu-item",!1]:a.whiteBoardOpt=["raiseWhiteboardRequest","zcf-whiteboard","media.present.request.wb","",!1],t.isPresenter()?a.presentationOpt=["stopPresentation","zcf-presentation-end","media.presentation.stop","active zcl-neg-menu-item",!1]:o.isPresentationAllowed()||c.isPresentationRequestApproved(ZCSmartConferenceConstants.presentationType.PRESENTATION)?a.presentationOpt=["startPresentation","zcf-presentation","media.presentation.start","",!1]:c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.PRESENTATION)?a.presentationOpt=["dropPresentationRequest","zcf-presentation-end","media.present.reqeuest.presentation.drop","active zcl-neg-menu-item",!1]:a.presentationOpt=["raisePresentationRequest","zcf-presentation","media.present.request.presentation","",!1]),s){s[d]&&(r+=S(e.optionsDropDownItem,a[d]))}if(!r)return"";var l=$WC.template.replace('<div id="{{id}}shrdropdowncnt" class="zcl-menu-wrap" align="top"><div class="smartconf-drpdwn-opts">{{options}}</div></div>',{id:t.getId()});return $WC.template.replace(l,{options:r},"InSecureHTML")},getPendingPresentationRequestsHtml:function(t,n){var i="",r=t.getRequestedPresentations(),o=t.getConfigurations(),s=[];for(var a in r){var c=r[a];if(c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)&&o.isScreenShareAllowed()){var d=c.getPresentationRequest(ZCSmartConferenceConstants.presentationType.SCREENSHARE);s.push([a,ZCSmartConferenceConstants.presentationType.SCREENSHARE,d.requestedTime])}if(c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.WHITEBOARD)&&WhiteBoard.hasHostPermission(t)){d=c.getPresentationRequest(ZCSmartConferenceConstants.presentationType.WHITEBOARD);s.push([a,ZCSmartConferenceConstants.presentationType.WHITEBOARD,d.requestedTime])}if(c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&WhiteBoard.hasHostPermission(t)){d=c.getPresentationRequest(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD);s.push([a,ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD,d.requestedTime])}if(c.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.PRESENTATION)&&o.isPresentationAllowed()){d=c.getPresentationRequest(ZCSmartConferenceConstants.presentationType.PRESENTATION);s.push([a,ZCSmartConferenceConstants.presentationType.PRESENTATION,d.requestedTime])}}return(s=$Util.sort(s,2,!1)).forEach((function(t){var r=t[0],o=t[1],s={user_img:Users.getImgUrlById(r),user_name:Users.getName(r,c.getName()),user_id:r,$presentation_info:"media.present.request.info",$allow_text:"common.allow",$cancel_request:"channel.cancelapprovalrequest",custom_attribute:n};o===ZCSmartConferenceConstants.presentationType.SCREENSHARE&&(s.present_type=ZCSmartConferenceConstants.presentationType.SCREENSHARE,s.$presentation_type="common.screen",i+=$WC.template.replace(e.presentationRequestListItem,s)),o===ZCSmartConferenceConstants.presentationType.WHITEBOARD&&(s.present_type=ZCSmartConferenceConstants.presentationType.WHITEBOARD,s.$presentation_type="board.attach",i+=$WC.template.replace(e.presentationRequestListItem,s)),o===ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD&&(s.present_type=ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD,s.$presentation_info="media.present.request.editwb.info",s.$presentation_type="board.attach",i+=$WC.template.replace(e.presentationRequestListItem,s)),o===ZCSmartConferenceConstants.presentationType.PRESENTATION&&(s.present_type=ZCSmartConferenceConstants.presentationType.PRESENTATION,s.$presentation_type="media.presentation",i+=$WC.template.replace(e.presentationRequestListItem,s))})),$WC.template.replace(e.presentationRequestsContainer,{id:t.getId(),pending_requests:i,$present_reqs_list_header:"media.present.request.header"},"InSecureHTML")},getStartRingAllOption:function(t){return $WC.template.replace(e.rhsRingAllOption,{$ring_all:"conference.ring.all",purpose:"startRingingForAll",cancel_class:"",custom_attribute:t})},getCancelRingAllOption:function(t){return $WC.template.replace(e.rhsRingAllOption,{$ring_all:"conference.cancel.all",purpose:"stopRingingForAll",cancel_class:"huddle-cancel-ring-all huddle-cancel-ring",custom_attribute:t})},getRhsSectionSearchCntHtml:U,getKnockingUserItemHtml:function(t,n,i,r){return $WC.template.replace(e.rhsKnockingUserListHtml,{user_id:t,user_name:n,user_img_src:Users.getImgUrlById(t),custom_button_attribute:i,custom_class:r||"",$cancel_title:"common.cancel",$allow_title:"common.accept"})},getEndStateHtml:function(e,t,n,i){var r="",o=!1,s="";e?WmsImpl.isGuestUser()&&(o=!0):void 0===i&&(r="conference.session.ended.header");var a=["conference.session.ended",[n,t]];void 0!==i?i===ZCMediaConstants.endCases.sessionExpired?a="conference.error.session_expired":i===ZCMediaConstants.endCases.kickedOut?a="conference.kickedout.info":i===ZCMediaConstants.endCases.assignHostAndLeave?(a=["conference.session.left",t],WmsImpl.isGuestUser()&&(o=!0)):i===ZCMediaConstants.endCases.sessionEnd&&(r="conference.session.ended.header",o=!1):e&&(a=["conference.session.left",t]);var c=$WC.template.replace(ConferenceTemplates.endState,{exit_icon:MediaManager.getImgUrl(ZCMediaConstants.defaultImageNames.HUDDLE_EXIT),$header:r,margin_class:e?"":"mT30",$info:a});return o&&(s=$WC.template.replace('<div conferencebutton purpose="rejoin" class="hp-btn hp-btn-plain">{{content}}</div>',{$content:"conference.session.rejoin"})),$WC.template.replace(c,{rejoin_btn:s},"InSecureHTML")},getEnablePublicLinkButton:function(){return $WC.template.replace(e.enablePublicLinkButton,{$enable:"common.enable"})},getRhsChatHeaderHtml:function(){return $WC.template.replace(e.rhsChatHeader,{$chat_title:"common.chat"})},getRhsSectionListCntHtml:function(t,n,i,r,o,s,a){var c="";o=o||"",s=s||"",void 0!==r&&(c=$WC.template.replace('<span class="clr-lp1 mL4 brackets" headerCount>{{count}}</span>',{count:r}));var d=$WC.template.replace(e.rhsListCnt,{id:t,class_name:i,$header_content:n});return $WC.template.replace(d,{header_count:c,header_option_cnt:o,sub_option:s,list:a},"InSecureHTML")},getRequestToSpeakOpt:m,getRhsSectionUserSpeakerRequestCntHtml:L,getInviteUsersButtonHtml:function(){return $WC.template.replace(e.inviteUsersOption,{$title:"contact.invite"})},getV2InviteUserPanelHtml:function(t,n){var i=!1;let r="undefined"==typeof OrgFeatures||OrgFeatures.isIntranetRequest();var o=t.getGuestConfigurations();$.isEmptyObject(o)||(i=o.public_access);var s="true"!=$zcg._ISNONORGMEMBERINVITEALLOWED,a={checkboxAttribute:"smartconferencemediacheckbox",checkboxPurpose:"toggleExternalAccess",isSelected:i,checkboxCustomClass:s?"zcdisabled":""},c=MediaTemplates.getToggleButtonHtml(a),d=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-send-mail-selection",$place_holder:"event.attendees.placeholder",display_class:"",custom_attribute:"",custom_attribute_value:""}),l=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"conference-send-invite-selection",$place_holder:"common.emma.zylker.mail",display_class:"",custom_attribute:"",custom_attribute_value:""}),u=$WC.template.replace(e.invitePanelV2,{ext_access_toggle:c,send_email_input:d,invite_users_input:l},"InSecureHTML");return $WC.template.replace(u,{invite_rhs_class:n?"smartconf-inviteuserpanel-rhs":"",icon_class:t.isVideoConference()?"zcf-video":"zcf-call",$header_content:"conference.invite.participants",$click_copy_link:"avcliq.common.click.copy",$copy_link:"common.copy",$copy_invitation:"conference.invitation.copy",$send_email:"common.sendmail",$invite_users:"createcompany.inviteusers",$send:"common.send",$invite:"contact.invite",$ext_access_desc:"conference.guestaccess.title",link:t.getPublicUrl(),$external_policy_title:s?"conference.externalorgcalls.disabled":"",hide_external_member_join:r?"":"dN"})},getGridContainerHtml:a,getRingToasterHtml:g,getLayoutOptions:p,getVideoEffectsPanel:function(e){var t=MediaTemplates.getVideoEffectsPalet({id:"conf_video_effects_panel",background:{selectedType:e.getSelectedVideoBackground(),customAttribute:"smartconferencebutton",purpose:"selectVideoBackground"},filter:{selectedType:e.getSelectedVideoFilter(),customAttribute:"smartconferencebutton",purpose:"selectVideoFilter"}}),n="";Conference.isVideoEffectsSettingsEnabled()&&(n=$WC.template.replace('<div class="flexG"><div remember_video_effects_choice class="flexC">{{check_box}}</div></div>',{check_box:MediaTemplates.getCheckboxHtml("remembervideoeffectstoggle","linkpreview.consent.checkbox",e.canRememberVideoEffects(),"smartconferencemediacheckbox","toggleRememberVideoEffects",!0)},"InSecureHTML"));var i=$WC.template.replace(`<div class="flexG flex-col ovrflwH">\n\t\t\t\t\t\t\t\t\t\t<div class="zcl-win-subcategory conf-config pT10 pB10" zc_running_title>${I18N("cc.video.effects")}</div>\n\t\t\t\t\t\t\t\t\t\t<div class="smartconf-video-effects-preview flexM fshrink">\n\t\t\t\t\t\t\t\t\t\t\t<div id="video_effect_preview_dom" class="smartconf-video-effects-videocnt posrel flexM"><video class="wh100 bdrI"></video>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zcl-rloader posabs sm" loader></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="smartconf-userimg dN" user_image>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img class= "video-effects-img" src="{{img_src}}">\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t{{palet}}\n\t\t\t\t\t\t\t\t\t\t<div class="smartconf-video-effects-ftr justifyE fshrink flexC pLR36 mTB20 dN">\n\t\t\t\t\t\t\t\t\t\t\t{{remember_choice}}\n\t\t\t\t\t\t\t\t\t\t\t<div class="fshrink">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zcl-btn-sm zcl-btn--secondary mR20" smartconferencebutton purpose="closeVideoEffectsPanel">${I18N("common.cancel")}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="zcl-btn-sm zcl-btn--primary" smartconferencebutton purpose="setVideoEffects">${I18N("sticky.calender.apply")}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>`,{palet:t,remember_choice:n},"InSecureHTML");return $WC.template.replace(i,{img_src:Users.getImgUrlById(e.getCurrentUserId())})},getReactionsHTML:v,getGestureHTML:l,getGifHTML:function(e,t,n){return $WC.template.replace('<div class="wh100 smartconf-gif-cnt" gif_cnt><img class="smartconf-gif-img wh100" gif_elem time="{{time}}" src="{{src}}"/><div class="smartconf-gif-info flexC"><span class="mLR10 ellips tooltip-up" userName tooltip-title="{{user_name}}">{{user_name}}</span></div></div>',{time:t,src:n,user_name:Users.getName(e.getId(),e.getName())})},getAssociatedResourceIframeHtml:function(t){var n=t.getAssociatedResourceData(),i=void 0,r="smartconferencebutton",o=t instanceof PrimeTimeSession;return o?r="primetimebuttons":t.isOldImpl()?(r="conferencebutton",i=ConferenceUI.getConferenceWindow()):i=ZCSmartConferenceUI.getConferenceWindow(),$WC.template.replace(e.associatedResourceIframeHtml,{associated_url:n.url,server_url:$Util.getFrameOrigin(),conference_id:t.getId(),query_string_separator:n.url.includes("?")?"&":"?",new_rhs_class:"smartconf-aside-v2-resource",$townhall_title:"conference.associatedresource.townhall.title",$sync_title:"common.reload",$close_title:"common.hide",pt_class:o?"pt-associated-resource":"",custom_attribute:r,band_classes:R(i)})},getRhsNotesIframeHtml:function(t){var n=void 0;return n=t.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow(),$WC.template.replace(e.rhsNotesSection,{associated_url:NoteBookUtil.getNotesUrl(NoteBookUtil.view.CONFERENCE_RHS),conference_id:t.getId(),$notes_title:"common.notes",$sync_title:"common.reload",$popout_title:"notebook.rhs.tooltip.popout",$close_title:"common.hide",band_classes:R(n)})},getInviteUserPanelHtml:function(t){var n=$WC.template.replace(ConferenceTemplates.multiSelectDropDownHtml,{id:"smartconf-inviteusers",$place_holder:"quickchat.node.placeholder",display_class:"",custom_attribute:"",custom_attribute_value:""}),i=$WC.template.replace(e.inviteUsersContainer,{invite_input:n},"InSecureHTML"),r=!1,o=!1,s=t.getGuestConfigurations();return $.isEmptyObject(s)||(r=s.public_access,o=s.knock_permission),$WC.template.replace(i,{$header:"conference.invite.header",$invite:"contact.invite",$guestaccess_info:"conference.guestaccess.title",$approval_info:"conference.guest.approval",$invite_users_header:"conference.invite.users.header",$share_link_header:"conference.share.link.header",$invite_users_info:"conference.invite.users.info",$share_link_info:"conference.share.link.info",$copy_button:"common.copy",$invite_input_label:"confernece.invite.users.label",join_link:t.getPublicUrl(),conference_id:t.getId(),publicaccess_checked:r?"checked":"",publiclink_purpose:r?"disablePublicLink":"enablePublicLink",knocking_checked:o?"checked":""})},getRHSChatToggleHtml:function(t){var n=t.getActiveChatId()!==t.getDummyThreadChatId()&&t.getActiveChatId()!==t.getThreadChatId(),i=e.rhsThreadChatToggle,r=e.rhsParentChatToggle;n&&(i=e.rhsParentChatToggle,r=e.rhsThreadChatToggle);var o=$WC.template.replace(e.rhsChatToggle,{INACTIVE_CHAT:r,ACTIVE_CHAT:i},"InSecureHTML");let s=t.getSwitchedChatId(),a=t.getChatId();s===a&&a===t.getThreadChatId()&&(s=ConversationsList.get(s).getParentChatId()),o=$WC.template.replace(o,{THREAD_ID:t.getThreadChatId()||t.getDummyThreadChatId(),PARENT_ID:s,MEDIA_CLASS:t.isAudioConference()?"zcf-call":"zcf-video",THREAD_ACTIVE_CLASS:n?"":"active",PARENT_ACTIVE_CLASS:n?"active":""});let c=ConversationsList.get(s),d=Config.isConferenceChatSwitcherEnabled()?{doNotHover:!0}:{};if(Config.isConferenceChatSwitcherEnabled()){var l={parentChatId:s,threadChatId:t.getThreadChatId()||t.getDummyThreadChatId()};ConferenceChatWindow.updateParentAndThreadChatId(l)}return $WC.template.replace(o,{PARENT_PROFILE:HistoryUI.getRecipantsPhoto($WC.Util.isEmpty(c.participants)?c.recipants:JSON.parse(c.participants),c.participantscount||c.pcount,Chat.parseAddinfo(c.addinfo),ConversationsList.getTitle(s,c.title),c.ctype,s,c.customgroup,void 0,d)},"InSecureHTML")},getTransferPanelHeaderHtml:function(t,n){return $WC.template.replace(e.transferPanelHeader,{icon_class:t?"zcf-video":"zcf-call",title:n})},getTransferPanelBodyHtml:function(t){return $WC.template.replace(e.transferPanelBody,{conference_id:t})},getSecondarySessionWindowHtml:function(t){return $WC.template.replace(e.secondarySessionCnt,{conference_id:t.getId(),icon_class:t.isVideoConference()?"zcf-video":"zcf-call",title:t.getTitle(),$content:"common.connecting"})},getWaitingRoomRequestsHtml:t=>{var n=$WC.template.replace(e.waitingRoomRequestsContainer,{$waitingRoomTitle:"media.waitingroom"});return $WC.template.replace(n,{waitingRoomUsersList:O(t)},"InSecureHTML")},getRequestedWaitingLobbyUsersHtml:O,getJoinRequestRejectedHtml:()=>$WC.template.replace(e.callEndPageHtml,{$title:"conference.banner.knock.reject",$product_hint:"common.productdesc",$powered_by:"common.poweredby",$from_zoho:"common.fromzoho",$close:"common.close",image_url:$zcg._IMGDEFAULTSTATICURL+"/media/no_entry.png",product_img:$zcg._IMGDEFAULTSTATICURL+"/cliq_white_text.svg"}),getSwitchChatDropdownHtml:(t,n)=>$WC.template.replace(e.switchChatDropdownHtml,{switch_chat_header:x(t,t===n),chats_list:$Util.emptyStateHtml({imageclass:"zcl-rloader",title:I18N("common.loading")})},"InSecureHTML"),getSwitchChatHeaderHtml:x,getStreamingLinkPopup:function(){let t=ZCSmartConferenceImpl.getCurrentActiveSession(),n="undefined"==typeof OrgFeatures||OrgFeatures.isIntranetRequest();var i="true"!=$zcg._ISNONORGMEMBERINVITEALLOWED;return $WC.template.replace(e.streamingLinkPopup,{session_id:t.getId(),streaming_url:t.getStreamingLink(),checked:t.getGuestConfigurations().public_streaming?"checked":"",$external_policy_title:i?"conference.externalorgcalls.disabled":"",external_policy_cls:i?"zcdisabled":"",hide_external_member_join:n?"":"dN"})},getSingleSelectResultsCntHtml:N,getSingleSelectDropDownHtml:H,getSingleNodeSelectDropDownHtml:z,getSingleSelectedUserHtml:function(t,n){return $WC.template.replace(e.singleSelectedUserHtml,{id:t,name:n})}}}();var ZCSmartConferenceSession={},ZCSmartConferenceMember={},ReactionsDB={};(ZCSmartConferenceSession=function(e){this._id=e.conferenceId,this._type=e.conferenceType,this._scope=e.scope,this._sessionKey=e.session_key,(MediaManager.isChatScope(e.scope.type)||void 0!==this._scope.chatId||void 0!==this._scope.chat_id)&&(this._chatId=e.scope.chatId||e.scope.chat_id,this._threadChatId=e.scope.threadChatId),this._hostId=e.conferenceHostId,this._hostName=e.conferenceHostName,this._hostSetTime=-1,e.creatorId?(this._creatorId=e.creatorId,this._creatorName=e.creatorName):(this._creatorId=e.conferenceHostId,this._creatorName=e.conferenceHostName),this._mode=e.conferenceMode,this._title=e.title,this._startTime=e.startTime,this._sessionId=e.sessionId,this._configurations=new ConferenceConfiguration(e.conferenceHostScopeId,e.configurations),this._guestConfigurations=e.guest_configurations||{},this._publicUrl=e.public_url,this._turnServers=e.turnServers,this._adhocCallDetails=e.adhocCallDetails,this._turnCredential={userName:e.turnUserName,passWord:e.turnCredential},this._currentSpeakerId=void 0,this._speakerCount=e.speakerCount||Conference.MAX_ACTIVE_SPEAKER,this._mainSpeakerCount=e.mainSpeakerCount||Conference.MAIN_SPEAKER_COUNT,this._viewersCount=0,this._members={},this._guestMembers={},this._presenterViewWindowPosition={width:192,height:150,top:"calc(100% - 170px)",left:"calc(100% - 212px)"},this._screenShareUserId=void 0,this._hasNotifiedStart=!1,this._currentView=ZCSmartConferenceUI.views.MAXIMIZED,this._currentLayout=ZCSmartConferenceConstants.layouts.STAGE,this._currentVideoGridPageInView=1,this._showFilmStrip=!0,this._showBottomPane=!1,this._currentScreenLayout=ZCSmartConferenceConstants.screenLayouts.getSSLayout(),this._previousSSLayout=void 0,this._avUpStream=void 0,this._audioUpStream=void 0,this._videoUpStream=void 0,this._videoUpStreamBlocked=!1,this._audioUpStreamBlocked=!1,this._screenUpStream=void 0,this._audioTrackEndedInfo={},this._isInFullScreen=!1,this._presentation=void 0,this._isPresentationStream=!1,this._hiddenUserIdsFromStrip=[],this._audioStreamIds=[],this._videoStreamIds=[],this._videoGridStreamIds=[],this._videoGridLayoutDetails={},this._localMediaContainer=void 0,this._audioMediaContainers={},this._mediaContainers=[],this._previewAudioContainer=void 0,this._videoEffectsPreviewStream=void 0,this._audioUpStreamConnection=void 0,this._videoUpStreamConnection=void 0,this._screenUpStreamConnection=void 0,this._audioUpStreamReconnecting=!1,this._videoUpStreamReconnecting=!1,this._screenUpStreamReconnecting=!1,this._dcReconnecting=!1,this._audioDownStreamConnection=void 0,this._videoDownStreamConnection=void 0,this._screenDownStreamConnection=void 0,this._audioDownStreamReconnecting=!1,this._videoDownStreamReconnecting=!1,this._screenDownStreamReconnecting=!1,this._audioUpStreamConnected=!1,this._videoUpStreamConnected=!1,this._screenUpStreamConnected=!1,this._isDataChannelConnected=!1,this._hadScreenShare=!1,this._wasFeedbackShown=!1,this._isHDVideoNeeded=!1,this._isIncomingVideoEnabled=!0,this._audioDownStreamConnected=!1,this._videoDownStreamConnected=!1,this._screenDownStreamConnected=!1,this._audioConnectionRemoteDetails={sdp:void 0,candidates:[]},this._videoConnectionRemoteDetails={sdp:void 0,candidates:[]},this._initialScreenOfferMsgObj=void 0,this._dcConnection=void 0,this._isDataChannelInitiated=!1,this._isUpStreamConnectionInitiated=!1,this._lastAudioOfferTime=-1,this._lastVideoOfferTime=-1,this._lastScreenOfferTime=-1,this._dataChannelData=void 0,this._mainSpeakerData=void 0,this._isLayoutDataReceived=!1,this._audioStreamIdVsStream={},this._videoStreamIdVsStream={},this._streamIdVsTransceiver={},this._streamIdVsLastRtpTimeStamp={},this._videoGridStreamIdVsTransceiver={},this._videoGridStreamIdVsLastRtpTimeStamp={},this._videoGridStreamIdsVsRTPData={},this._transceiverPollingTimer=void 0,this._fetchUserInfoTimeout=void 0,this._activeIndicationTimer=void 0,this._streamMainSpeakersOnly=!1,this._isSilentSpeakerInfoHidden=!1,this._isAudioMutedInfoHidden=!1,this._isLowBandwidthModeInfoHidden=!1,this._isStreaming=!1,this._streamingId=void 0,this._networkPredictor=void 0,this._reactionsDB=new ReactionsDB,this._configurations.isSpecialReactionsAllowed()&&this._reactionsDB.setNonVerbalFeedbackStatus(!0),this._currentReactionsGroup={},this._previousReactionsGroup={},this._recordingRefIndex=ConferenceImpl.recordingIndex||e.recordingIndex,ConferenceImpl.recordingIndex=void 0,this._isFocusedModeDetails={actionTime:-1,isEnabled:!1,userIds:[],setBy:void 0},this._spotLightDetails={actionTime:-1,isEnabled:!1,userIds:[],setBy:void 0,restrictSpeakersAudio:!1,restrictSpeakersVideo:!0},this._ringingStates={},this._invitedMembersObject={},this._leftMembersNames={},this._hasPopulatedPendingUsersList=!1,this._isChatCreationPending=!1,this._audioStatusForAllParticipants={time:-1,muted:!1,muteStatusSetBy:void 0,excludedIds:[],restrictionTriggeredTime:-1,unmuteRestricted:!1,restrictionStatusSetBy:void 0,restrictionExcludedIds:[]},this._isAllowAudioUnmuteCheckboxEnabled=!0,this._mediaServerIp=void 0,this._pendingRequests={},this._waitingLobbyRequests={},e.waiting_lobby_requests&&this.setWaitingLobbyRequests(e.waiting_lobby_requests),e.cohostsDetails?this._cohostsDetails={actionTime:e.cohostsDetails.time,previousUserIds:[],userIds:e.cohostsDetails.userIds}:this._cohostsDetails={actionTime:-1,previousUserIds:[],userIds:[]},this._isLowBandwidthModeEnabled=!1,this._isLowBandwidthModeAutoEnableAllowed=!0,this._bandwidthAnalyser=void 0,this._bandwidthAllowedSpeakerCount=void 0,this._isPushToTalkEnabled=!1,this._encryptedResourceId=e.encryptedResourceId,this._nativeWidgetMessageId=e.nativeWidgetMessageId,this._associatedResourceData=e.associated_resource,this._isThreadsAllowed=e.threads_allowed,this._eventsLogString="",this._hasSentEventsLog=!1,this._eventsLogObj={},this._whiteBoard={currentBoard:void 0,boards:{}},this._isPrimary=void 0===e.is_primary||e.is_primary,this._secondarySessionId=void 0,this._isQuickStartPreview=!1,this._hasSecondaryAudioUpStream=!1,this._hasSecondaryVideoUpStream=!1,this._hasSecondaryScreenUpStream=!1,this._canRememberVideoEffects=!1,this._callMergeEvents=void 0,this._pipCanvasElem=void 0,Conference.isVideoEffectsSettingsEnabled()?this._videoEffects={background:ZCMediaPreferences.getPreferredVideoBackground(),filter:ZCMediaPreferences.getPreferredVideoFilter()}:this._videoEffects={background:MLBackgroundProcessor.backgroundTypes.NONE,filter:MLBackgroundProcessor.filterTypes.NONE}}).prototype={getId:function(){return this._id},getSessionKey:function(){return this._sessionKey},setSessionKey:function(e){this._sessionKey=e},getType:function(){return this._type},setType:function(e){this._type=e},getScopeType:function(){return this._scope.type},getScopeIds:function(){return this._scope.ids},getChatId:function(){return this._chatId},getTitle:function(){return this._title},setTitle:function(e){this._title=e},getStartTime:function(){return this._startTime},getMainSpeakerCount:function(){return this._mainSpeakerCount},getSpeakerCount:function(){return this._speakerCount},getViewersCount:function(){return this._viewersCount},getBandwidthAllowedSpeakerCount:function(){return this._bandwidthAllowedSpeakerCount},isLowBandwidthModeEnabled:function(){return this._isLowBandwidthModeEnabled},isLowBandwidthModeAutoEnableAllowed:function(){return this._isLowBandwidthModeAutoEnableAllowed},getCurrentUserId:function(){return ZCSmartConferenceImpl.getCurrentUserId()},getHostId:function(){return this._hostId},getHostName:function(){return this._hostName},getCreatorId:function(){return this._creatorId},getCreatorName:function(){return this._creatorName},getHostSetTime:function(){return this._hostSetTime},replaceHost:function(e,t,n){if(!(this._hostSetTime>n)){this.setAsNotified();var i=this.getHost();i&&i.setHostStatus(i.getId()===e);var r=this.getMember(e);r&&r.setAsHost(),this._hostId=e,ZCSmartConferenceUI.handleReplacedHost(this,e,t)}},getMember:function(e){return this.getMembers()[e]},getMembers:function(){return this._members},getGuestMembers:function(){return this._guestMembers},getPresenterViewWindowPosition:function(){return this._presenterViewWindowPosition},getMembersIds:function(){return Object.keys(this.getMembers())},getGuestMembersIds:function(){return Object.keys(this.getGuestMembers())},getMembersCount:function(){return this.getMembersIds().length},getGuestMembersCount:function(){return this.getGuestMembersIds().length},getCurrentMember:function(){return this.getMember(this.getCurrentUserId())},getHost:function(){return this.getMember(this.getHostId())},getScreenSharerId:function(){return this._screenShareUserId},getScreenSharer:function(){return this.getMember(this.getScreenSharerId())},getWhiteBoardCreator:function(){return this.getMember(this._whiteBoard.boards[this._whiteBoard.currentBoard].creator)},getPublicUrl:function(){return this._publicUrl},setPublicUrl:function(e){this._publicUrl=e},subscribe:function(e){this._callMergeEvents=e},unSubscribe:function(){this._callMergeEvents=void 0},hasSubscribed:function(){return void 0!==this._callMergeEvents},getSubscribedHandler:function(){return this._callMergeEvents},getMembersForSearch:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];e[n]={ZUID:n,DNAME:Users.getName(n,i.getName()),EMAILID:""}}return delete e[this.getHostId()],e},getActiveMembersForSearch:function(){var e={},t=this.getActiveMembers();for(var n in t){var i=t[n];e[n]={ZUID:n,DNAME:Users.getName(n,i.getName()),EMAILID:""}}return e},getMembersByCategories:function(e,t){var n,i=this.hasHostPermission(),r={},o={},s={},a={},c={},d={};t&&(n=this.getReactionsDB());var l=this.getMembers();for(var u in l){var f=l[u];if(void 0!==e&&""!==e){var m=Users.getName(u,f.getName());if(void 0===m||-1===m.toLowerCase().indexOf(e))continue}if(t)if(!t[n.getUserVote(u)])continue;f.isHost()?r[u]=f:f.isCohost()?o[u]=f:f.isActiveMember()&&!this.isUserInSpotLight(u)?s[u]=f:i&&f.hasRequestedToSpeak()?a[u]=f:this.isUserInSpotLight(u)?d[u]=f:f.isSilentMember()&&(c[u]=f)}return{host:r,cohosts:o,activeMembers:s,requestedSpeakers:a,silentMembers:c,spotlightMembers:d}},getRequestedSpeakers:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.hasRequestedToSpeak()&&(e[n]=i)}return e},getRequestedSpeakersCount:function(){return Object.keys(this.getRequestedSpeakers()).length},getWaitingLobbyRequests:function(){return this._waitingLobbyRequests},getWaitingLobbyRequestsCount:function(){return Object.keys(this.getWaitingLobbyRequests()).length},setWaitingLobbyRequest:function(e,t){this._waitingLobbyRequests[e]={name:t.addInfo&&t.addInfo.name?t.addInfo.name:t.name||t.user.name,email:t.addInfo&&t.addInfo.email,bio:t.addInfo&&t.addInfo.bio,status:ZCSmartConferenceConstants.requestStates.PENDING,requestedTime:t.requestedTime||t.time}},setWaitingLobbyRequests:function(e){for(var t in e){var n=e[t];this.setWaitingLobbyRequest(n.user.id,n)}},resetWaitingLobbyRequest:function(e){delete this._waitingLobbyRequests[e]},resetAllWaitingLobbyRequest:function(){this._waitingLobbyRequests={}},setRequestedPresentationsData:function(e){var t=this;e.forEach((function(e){var n=e.user,i=t.getMember(n.id);i&&i.setPresentationRequest(e.type,e.time)}))},getRequestedPresentations:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.hasRequestedToPresent()&&(e[n]=i)}return e},getRequestedPresentationsCount:function(){var e=0,t=this.getRequestedPresentations(),n=this.getConfigurations();for(var i in t){var r=t[i];r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.WHITEBOARD)&&WhiteBoard.hasHostPermission(this)&&e++,r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.SCREENSHARE)&&n.isScreenShareAllowed()&&e++,r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&WhiteBoard.hasHostPermission(this)&&e++,r.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.PRESENTATION)&&n.isPresentationAllowed(this)&&e++}return e},getActiveMembers:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.isActiveMember()&&(e[n]=i)}return e},getActiveMembersCount:function(){return Object.keys(this.getActiveMembers()).length},getSilentMembers:function(){var e={},t=this.getMembers();for(var n in t){var i=t[n];i.isSilentMember()&&(e[n]=i)}return e},getSilentMembersCount:function(){return Object.keys(this.getSilentMembers()).length},getTurnServers:function(){return this._turnServers},getTurnUserName:function(){return this._turnCredential.userName},getTurnPassWord:function(){return this._turnCredential.passWord},getScreenUpStream:function(){return this._screenUpStream},isWindowInFullScreen:function(){return this._isInFullScreen},getPresentation:function(){return this._presentation},setPresentation:function(e){this._presentation=e,Conference.isPresentationStreamingEnabled()&&this.setAsPresentationStream()},isPresentationStream:function(){return this._isPresentationStreaming},setAsPresentationStream:function(){this._isPresentationStreaming=!0},resetPresentationStream:function(){this._isPresentationStreaming=!1},getPresenterId:function(){var e=this.getPresentation();if(void 0!==e)return e.getPresenterId()},isPresenter:function(){return this.getCurrentUserId()===this.getPresenterId()},isUserPresenter:function(e){return e===this.getPresenterId()},hasPresentation:function(){return void 0!==this.getPresenterId()},hasPresentationContainer:function(){return void 0!==this.getPresenterId()&&this.getCurrentUserId()!==this.getPresenterId()},getAudioUpStream:function(){return this._audioUpStream},getVideoUpStream:function(){return this._videoUpStream},getAVUpStream:function(){return this._avUpStream},getVideoUpStreamConnection:function(){return this._videoUpStreamConnection},getAudioUpStreamConnection:function(){return this._audioUpStreamConnection},getVideoEffectsPreviewStream:function(e){return this._videoEffectsPreviewStream},setVideoEffectsPreviewStream:function(e){this._videoEffectsPreviewStream=e},clearVideoEffectsPreview:function(){this._videoEffectsPreviewStream&&(WebRTCUserMedia.closeStreamInstance(WebRTCUserMedia.streamInstanceIds.video_effects_preview,this._videoEffectsPreviewStream._getType()),this._videoEffectsPreviewStream=void 0)},getLocalMediaContainer:function(){return this._localMediaContainer},getHiddenUserIdsFromStrip:function(){return this._hiddenUserIdsFromStrip},getAudioStreamIds:function(){return this._audioStreamIds},setThreadChatId:function(e){this._threadChatId=e},setNativeWigetId:function(e){e&&(this._nativeWidgetMessageId=e)},setEncryptedResourceId:function(e){this._encryptedResourceId=e},getThreadChatId:function(){return this._threadChatId},getAssociatedResourceData:function(){return this._associatedResourceData},hasAssociatedResourceData:function(){return void 0!==this._associatedResourceData},setIsThreadsAllowed:function(e){this._isThreadsAllowed=e},setDummyThreadChatId:function(e){this._dummyThreadChatId=e},getDummyThreadChatId:function(){return this._dummyThreadChatId},setDummyChatId:function(e){this._dummyChatId=e},getDummyChatId:function(){return this._dummyChatId},getActiveChatId:function(){return this._activeChatId?this._activeChatId:this.isThreadChatAllowed()?this._threadChatId||this._dummyThreadChatId:this._chatId||this._dummyChatId},isSessionChatAThread:function(){return void 0!==this._chatId&&-1!=this._chatId.indexOf("-T-")},getParentChatIdFromSessionThread:function(){var e;return this.isSessionChatAThread()&&(e=ConversationsList.getParentChatId(this._chatId)),e},setActiveChatId:function(e){this._activeChatId=e},getSwitchedChatId:function(e){return this._switchedChatId||this._chatId},setSwitchedChatId:function(e){this._switchedChatId=e},isChatPermitted:function(){return this._isChatPermitted},isChatToggleAllowed:function(){return this._isChatPermitted&&this._isThreadsAllowed},setChatPermission:function(e){this._isChatPermitted=e},getEncryptedPublicResorceId:function(){return this._encryptedResourceId},getNativeWidgetMessageId:function(){var e=this._nativeWidgetMessageId;if(void 0===e&&!this.isPersonalScope()){var t=NativeWidgetHandler.getMsgObj(this.getId(),"huddlewidget");void 0!==t&&(e=t.msguid)}return e},isThreadChatAllowed:function(){return this._isThreadsAllowed},isChatAllowedForCurrentUser:function(){return!(this.isChatScope()&&!this.isThreadChatAllowed())},addPreviewRoomNetworkPredictor:function(){Conference.isNetworkStrengthIndicationEnabled()&&(this._networkPredictor=new ZCMediaNetworkPredictor(this.getId(),function(e){ZCSmartConferenceUI.indicateIfCurrUserNetworkIsPoor(e,!0)}.bind(this)))},removePreviewRoomNetworkPredictor:function(){void 0!==this._networkPredictor&&(this._networkPredictor.stop(),this._networkPredictor=void 0)},getVideoStreamIds:function(){var e=$.extend([],this._videoStreamIds,!0),t=this.getMainSpeakerData();if(t){var n=t.syncData.solointeractive.split(",");for(var i in n){var r=n[i],o=e.indexOf(r);o>0&&(e.splice(o,1),e.splice(1,0,r))}}return e},getVideoGridStreamIds:function(){return this._videoGridStreamIds},getVideoGridLayoutDetails:function(){return this._videoGridLayoutDetails},getCurrentVideoGridPageInView:function(){return this._currentVideoGridPageInView},getAudioStreamWithAudioStreamId:function(e){return this._audioStreamIdVsStream[e]},getAudioMediaContainers:function(){return this._audioMediaContainers},getMediaContainerWithAudioStreamId:function(e){var t=this.getAudioMediaContainers();for(var n in t)if(n===e)return t[n]},getVideoStreamWithVideoStreamId:function(e){return this._videoStreamIdVsStream[e]},getVideoStreamWithUserId:function(e){if(this.isCurrentUser(e))return this.getVideoUpStream();var t=this.getDataChannelData(!0);if(t){var n=JSON.parse(t.syncData.video);for(var i in n)if(n[i]===e)return this._videoStreamIdVsStream[i]}},getMediaContainerWithVideoStreamId:function(e){for(var t=this._mediaContainers,n=0;n<t.length;n++){var i=t[n],r=i.attr("videoStreamId");if(!r)return i.attr("videoStreamId",e),i.find("[targetElemSelector]").attr("targetElemSelector","[videoStreamId="+e+"]"),i;if(e===r)return i}},getUserIdWithVideoStreamId:function(e){var t=this.getDataChannelData(!0);if(t)return JSON.parse(t.syncData.video)[e]},getCurrentUserVideoStreamId:function(){var e=this.getDataChannelData(!0);if(e){var t=this.getCurrentUserId(),n=JSON.parse(e.syncData.video);for(var i in n){if(n[i]===t)return i}}},getUserMediaContainer:function(e){if(this.isCurrentUser(e))return this.getLocalMediaContainer();var t=this.getDataChannelData(!0);if(t){var n=JSON.parse(t.syncData.video);for(var i in n)if(n[i]===e)return this.getMediaContainerWithVideoStreamId(i)}},getUserGridVideoStreamIdFromPageDetail:function(e,t){for(var n in t)if(e===t[n])return n},getUserGridMediaContainer:function(e){if(this.isInGridLayout()){var t=this.getVideoGridLayoutDetails();if(t){var n=t.count,i=this.getCurrentVideoGridPageInView();if(!(i>n)){var r=t.pages[i],o=this.getUserGridVideoStreamIdFromPageDetail(e,r);if(void 0!==o)return this.isCurrentUser(e)?ZCSmartConferenceUI.getLocalGridMediaContainer():ZCSmartConferenceUI.getGridMediaContainerWithVideoStreamId(o)}}}},getUserIdWithVideoGridStreamId:function(e){var t=this.getVideoGridLayoutDetails(),n=this.getCurrentVideoGridPageInView();return ZCSmartConferenceImpl.getUserIdWithVideoGridStreamId(n,e,t)},getAudioRemoteOfferDetails:function(){return this._audioConnectionRemoteDetails},getVideoRemoteOfferDetails:function(){return this._videoConnectionRemoteDetails},getLastAudioOfferTime:function(){return this._lastAudioOfferTime},getLastVideoOfferTime:function(){return this._lastVideoOfferTime},getLastScreenOfferTime:function(){return this._lastScreenOfferTime},getDataChannelData:function(e){var t=this._dataChannelData;if(t&&e){var n=this.getMainSpeakerCount(),i=this.getSpeakerCount();if(i%2!=n%2){var r=JSON.parse(t.syncData.video);if(Object.keys(r).length>=i){var o=this.getVideoStreamIds(),s=o[o.length-1],a=$.extend(!0,{},t),c=JSON.parse(a.syncData.video);delete c[s],a.syncData.video=JSON.stringify(c),t=a}}}return t},getMainSpeakerData:function(){return this._mainSpeakerData},setLeftMemberName:function(e,t){t&&(this._leftMembersNames[e]=t)},getLeftMemberName:function(e){return this._leftMembersNames[e]},getInvitedMember:function(e){return this._invitedMembersObject[e]},getInvitedMembers:function(){return Object.values(this._invitedMembersObject)},getInvitedMemberIds:function(){return Object.keys(this._invitedMembersObject)},getInvitedMemberIdsForSearch:function(e){var t=[];for(var n in this._invitedMembersObject){var i=this._invitedMembersObject[n];if(void 0!==e&&""!==e){var r=Users.getName(n,i.name);if(void 0===r||-1===r.toLowerCase().indexOf(e))continue}this.isHost(n)||WmsImpl.isLocalUser(n)||WmsImpl.isGuestUserId(n)||void 0!==this.getMember(n)||void 0!==this.getWaitingLobbyRequests()[n]||t.push(n)}return t},getFocusedUserIds:function(){return this._isFocusedModeDetails.userIds},getLastFocusActivityTime:function(){return this._isFocusedModeDetails.actionTime},getFocusedUsersCount:function(){return this._isFocusedModeDetails.userIds.length},getFocusedSetById:function(){return this._isFocusedModeDetails.setBy},isFocusSetByCurrentUser:function(){return this._isFocusedModeDetails.setBy===this.getCurrentUserId()},isUserIdInStageViewData:function(e){var t=this.getDataChannelData(!1);if(!t)return!1;var n=JSON.parse(t.syncData.video);return-1!==Object.values(n).indexOf(e)},getSpotLightUserIds:function(){return this._spotLightDetails.userIds},getLastSpotLightActivityTime:function(){return this._spotLightDetails.actionTime},getSpotLightUsersCount:function(){return this._spotLightDetails.userIds.length},getSpotLightSetById:function(){return this._spotLightDetails.setBy},isSpotLightSetByCurrentUser:function(){return this._spotLightDetails.setBy===this.getCurrentUserId()},isSpotLightEnabled:function(){return this._spotLightDetails.isEnabled},isInSpotLight:function(){return-1!==this.getSpotLightUserIds().indexOf(this.getCurrentUserId())},isUserInSpotLight:function(e){return-1!==this.getSpotLightUserIds().indexOf(e)},isSpeakersAudioRestrictedInSpotLight:function(){return this._spotLightDetails.restrictSpeakersAudio},isSpeakersVideoRestrictedInSpotLight:function(){return this._spotLightDetails.restrictSpeakersVideo},isSpeakersVideoAllowedInSpotLight:function(){return!this._spotLightDetails.restrictSpeakersVideo},updateSpotLightConfig:function(e,t,n,i){t<this.getLastSpotLightActivityTime()||(this._spotLightDetails.actionTime=t,this._spotLightDetails.setBy=e,void 0!==n&&(this._spotLightDetails.restrictSpeakersAudio=n),void 0!==i&&(this._spotLightDetails.restrictSpeakersVideo=i))},addUserInSpotLight:function(e,t,n){this.setSpotLightAsEnabled([e],t,n)},setSpotLightAsEnabled:function(e,t,n,i,r){if(!(t<this.getLastSpotLightActivityTime())){var o=this.isSpotLightEnabled(),s=this.getSpotLightUserIds(),a=$Util.removeDuplicateEntries(s.concat(e));for(var c of(this._spotLightDetails.actionTime=t,this._spotLightDetails.isEnabled=!0,this._spotLightDetails.userIds=a,this._spotLightDetails.setBy=n,void 0!==i&&(this._spotLightDetails.restrictSpeakersAudio=i),void 0!==r&&(this._spotLightDetails.restrictSpeakersVideo=r),o||ZCSmartConferenceUI.updateSpotLightInfo(this),ZCSmartConferenceUI.updateSpotLightCount(this),e))ZCSmartConferenceUI.updateSpotLightInList(this,c);ZCSmartConferenceUI.handleContainerVisibility()}},removeUserFromSpotLight:function(e,t,n){if(!(t<this.getLastSpotLightActivityTime())){var i=this.getSpotLightUserIds().filter((function(t){return t!==e}));0!==i.length?(this._spotLightDetails.actionTime=t,this._spotLightDetails.userIds=i,this._spotLightDetails.setBy=n,ZCSmartConferenceUI.updateSpotLightCount(this),ZCSmartConferenceUI.updateSpotLightInList(this,e)):this.setSpotLightAsDisabled(t,n)}},setSpotLightAsDisabled:function(e,t){if(!(e<this.getLastSpotLightActivityTime())){var n=this.isSpotLightEnabled(),i=this.getSpotLightUserIds();for(var r of(this._spotLightDetails={actionTime:e,isEnabled:!1,userIds:[],setBy:t,restrictSpeakersAudio:!1,restrictSpeakersVideo:!0},n&&ZCSmartConferenceUI.updateSpotLightInfo(this),ZCSmartConferenceUI.updateSpotLightCount(this),i))ZCSmartConferenceUI.updateSpotLightInList(this,r);ZCSmartConferenceUI.handleContainerVisibility()}},isUDPBlockedForAllConnections:function(){var e=this._dcConnection&&this._dcConnection.isUDPBlocked();return this.hasAudioUpStreamConnection()&&this._audioUpStreamConnection.hasConnectionMonitor()&&(e=this._audioUpStreamConnection.isUDPBlocked()),this.hasAudioDownStreamConnection()&&this._audioDownStreamConnection.hasConnectionMonitor()&&(e=this._audioDownStreamConnection.isUDPBlocked()),this.hasVideoUpStreamConnection()&&this._videoUpStreamConnection.hasConnectionMonitor()&&(e=this._videoUpStreamConnection.isUDPBlocked()),this.hasVideoDownStreamConnection()&&this._videoDownStreamConnection.hasConnectionMonitor()&&(e=this._videoDownStreamConnection.isUDPBlocked()),e},getStreamingLink:function(){return $zcg._SERVERURL+"/huddlestream/"+this._streamingId},setStreamingId:function(e){this._streamingId=e},getMediaServerIp:function(){return this._mediaServerIp},getCohostDetails:function(){return this._cohostsDetails},getCohostUserIds:function(){return this._cohostsDetails.userIds},getLastCohostSetTime:function(){return this._cohostsDetails.actionTime},updateCohostDetails:function(e,t,n){var i=this.getCurrentMember(),r=i.isAudioUnmuteRestricted(),o=i.isCohost(),s=this.getCohostDetails();if(!(s.actionTime>t)){var a=s.userIds;for(var c in this._cohostsDetails={actionTime:t,previousUserIds:a,userIds:e},a){if(l=this.getMember(a[c])){var d=-1!==e.indexOf(l.getId());l.setCohostStatus(d),d?l.setAudioUnmuteRestrictedStatus(!1,t,this.getHostId()):!n||this.isCurrentUser(l.getId())||this.isHost(l.getId())||UI.updateBanner(Resource.getRealValue("conference.cohost.removed.info",Users.getName(l.getId(),l.getName())),2e3,!1),ZCSmartConferenceUI.modifyUserInList(this,l.getId())}}for(var c in e){var l;(l=this.getMember(e[c]))&&(!n||l.isCohost()||this.isCurrentUser(l.getId())||this.isHost(l.getId())||UI.updateBanner(Resource.getRealValue("conference.cohost.assigned.info",Users.getName(l.getId(),l.getName())),2e3,!1),l.setCohostStatus(!0),l.setAudioUnmuteRestrictedStatus(!1,t,this.getHostId()),ZCSmartConferenceUI.modifyUserInList(this,l.getId()))}i.isCohost()?(r&&ZCSmartConferenceImpl.resetAudioUnmuteRestrictedStatusForUser(i.getId()),!n||o||this.isHost(i.getId())||UI.updateBanner(Resource.getRealValue("conference.cohost.you.assigned"),2e3,!1)):n&&o&&(this.setStreamingId(void 0),UI.updateBanner(Resource.getRealValue("conference.cohost.you.removed"),2e3,!1),ZCSmartConferenceImpl.resetHostPermissions(this)),ZCSmartConferenceUI.updateCohostOptions(this)}},getRingingStateForUser:function(e){var t=void 0,n=this._ringingStates[e];n&&(t=n.state,$Util.getSyncedCurrentTime()-n.time>MediaCallConstants.callRingingTimeLimit&&(t=void 0));return t},removeRingingState:function(e){this._ringingStates[e]&&(clearTimeout(this._ringingStates[e].timeout),delete this._ringingStates[e])},handleRingingState:function(e,t,n,i,r){if("undefined"!==this._ringingStates[e]||t===MediaCallConstants.ringingStates.ringing){var o=this._ringingStates[e]||{};if(n&&(o.name=n),o.state=t,o.time=$Util.getSyncedCurrentTime(),this._ringingStates[e]=o,this.updateRingingStateText(e),clearTimeout(o.timeout),t===MediaCallConstants.ringingStates.ringing)ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!0),o.timeout=setTimeout(function(){var t=this._ringingStates[e];void 0!==t&&t.state===MediaCallConstants.ringingStates.ringing&&(ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!1),this.handleRingingState(e,MediaCallConstants.ringingStates.no_response),this.updateRingingStateText(e))}.bind(this),MediaCallConstants.callRingingTimeLimit);else{this.removeRingingState(e),ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!1,i);let t=ZCSmartConferenceImpl.getCurrentActiveSession();if(!r&&void 0!==t&&t.hasHostPermission()){let e=$("#yetToJoinSection").find("[ringallbutton]");e&&"stopRingingForAll"===e.attr("purpose")&&!t.hasRingingStateForAnyUser()&&(t instanceof ConferenceSession?(e.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("conferencebutton")),clearTimeout(ConferenceUI.clearRingAllTimeout)):t instanceof ZCSmartConferenceSession&&(e.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton")),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout)))}o.timeout=setTimeout(function(){var t=this._ringingStates[e];void 0!==t&&t.state===MediaCallConstants.ringingStates.ringing||this.updateRingingStateText(e)}.bind(this),5e3)}}},updateRingingStateText:function(e){var t=$.escapeSelector(e),n=(this._ringingStates[e]&&this._ringingStates[e].name,$("#smartconferenceuserslist").find('[pendingparticipant][userId="'+t+'"]'));n.length&&(n.find('[smartconferencebutton][purpose="startRinging"], [smartconferencebutton][purpose="cancelRinging"]').remove(),n.find("[ringingContent]").remove(),n.append(ZCSmartConferenceTemplates.getRhsSectionUserRingActionHtml(this,e,"smartconferencebutton")))},hasRingingStateForAnyUser:function(){return Object.keys(this._ringingStates).length>0},setMember:function(e){let t=e.getId();this._members[t]=e,Conference.isGuestUserId(t)&&(this._guestMembers[t]=e)},setPresenterViewWindowPosition:function(e){this._presenterViewWindowPosition=e},setMembers:function(e){this._members=e},updateInvitedMembers:function(e){Object.assign(this._invitedMembersObject,e)},removeFromInvitedMembers:function(e){delete this._invitedMembersObject[e]},setScreenSharerId:function(e){this._screenShareUserId=e},setTurnServers:function(e){this._turnServers=e},setTurnUserName:function(e){this._turnCredential.userName=e},setTurnPassWord:function(e){this._turnCredential.passWord=e},setMainSpeakerCount:function(e){this._mainSpeakerCount=e},setSpeakerCount:function(e){this._speakerCount=e},setViewersCount:function(e){this._viewersCount=e},setMemberType:function(e){this.getCurrentMember().setMemberType(e)},isSilentConnectionMember:function(){return this.getCurrentMember().isSilentConnectionMember()},isOnDemandConnectionMember:function(){return this.getCurrentMember().isOnDemandConnectionMember()},setMemberConnectionMode:function(e){this.getCurrentMember().setMemberConnectionMode(e)},hasSentEventsLog:function(){return this._hasSentEventsLog},setEventsLogAsSent:function(){return this._hasSentEventsLog=!0},getEventsLogString:function(){return this._eventsLogString},getEventsLogObject:function(){return this._eventsLogObj},setEventsLogString:function(e){this._eventsLogString=e},setEventsLogObject:function(e){this._eventsLogObj=e},writeToEventsLog:function(e){if(!this.hasSentEventsLog()){var t=(new Date).getTime();this._eventsLogString=this._eventsLogString+"["+e+"]:["+t+"]\n",this._eventsLogObj[e]||(this._eventsLogObj[e]=t)}},updateEventsLog:function(){ZCSmartConferenceImpl.updateEventsLog(this)},isInPIP:function(){return this._pipCanvasElem&&this._pipCanvasElem.isInPIP()},getCanvasForPIP:function(){return this._pipCanvasElem||(this._pipCanvasElem=document.createElement("canvas")),this._pipCanvasElem},enableLowBandwidthMode:function(){this._isLowBandwidthModeEnabled=!0,ZCSmartConferenceUI.updateLowBandwidthModeInfo(this)},disableLowBandwidthMode:function(){this._isLowBandwidthModeEnabled=!1,this._isLowBandwidthModeAutoEnableAllowed=!1,this.getBandwidthAllowedSpeakerCount()===this.getSpeakerCount()||this.isDownStreamRestrictedToMainSpeakers()||this.setBandwidthAllowedSpeakerCount(this.getSpeakerCount()),ZCSmartConferenceUI.updateLowBandwidthModeInfo(this)},setStatsData:function(e,t,n,i){this._bandwidthAnalyser||(this._bandwidthAnalyser=new GroupCallStrengthAnalyser(this.getId(),this.increaseBandwidthAllowedSpeakerCount.bind(this),this.reduceBandwidthAllowedSpeakerCount.bind(this),this.handleNetworkHealth.bind(this)));var r=WebRTCPeerConnectionConstants.isAudioConnection(i.connectionType);i.isUpStream?r?this._bandwidthAnalyser.updateAudioUpStreamConnectionStatsData(n,t):this._bandwidthAnalyser.updateVideoUpStreamConnectionStatsData(n,t):r?this._bandwidthAnalyser.updateAudioDownStreamConnectionStatsData(n,t):this._bandwidthAnalyser.updateVideoDownStreamConnectionStatsData(n,t)},increaseBandwidthAllowedSpeakerCount:function(e,t){if(this.isLowBandwidthModeEnabled()&&!this.isDownStreamRestrictedToMainSpeakers()){var n=this.getSpeakerCount(),i=this.getBandwidthAllowedSpeakerCount();void 0===i?(this.setBandwidthAllowedSpeakerCount(n),this.sendBandWidthScore(e,t)):i<n&&(this.setBandwidthAllowedSpeakerCount(++i),this.sendBandWidthScore(e,t))}},reduceBandwidthAllowedSpeakerCount:function(e,t){if(!this.isInGridLayout()){var n=this.getActiveMembersCount();if(!(this.isActiveMember()&&n<=1)){if(!this.isLowBandwidthModeEnabled()){if(!this.isLowBandwidthModeAutoEnableAllowed())return;this.enableLowBandwidthMode()}var i=this.getBandwidthAllowedSpeakerCount();if(void 0===i){var r=this.getSpeakerCount();i=r>n?n:r}i>0&&(this.setBandwidthAllowedSpeakerCount(--i),this.sendBandWidthScore(e,t))}}},handleNetworkHealth:function(e){ZCSmartConferenceUI.updateNetworkHealth(e-1)},getConfigurations:function(){return this._configurations},getGuestConfigurations:function(){return this._guestConfigurations},updateGuestConfigurations:function(e){Object.assign(this._guestConfigurations,e)},resetGuestConfigurations:function(){this._guestConfigurations={}},setSpeakerRequest:function(){this.getCurrentMember().setSpeakerRequest()},resetSpeakerRequest:function(){this.getCurrentMember().resetSpeakerRequest()},setAsNotified:function(){this._hasNotifiedStart=!0},resetNotified:function(){this._hasNotifiedStart=!1},setChatCreationAsPending:function(){this._isChatCreationPending=!0},resetChatCreationStatus:function(){this._isChatCreationPending=!1},setCurrentView:function(e){this._currentView=e},getCurrentView:function(){return this._currentView},setCurrentLayout:function(e){this._currentLayout=e},setCurrentScreenLayout:function(e){this._currentScreenLayout=e},getCurrentScreenLayout:function(){return this._currentScreenLayout},setPreviousSSLayout:function(e){this._previousSSLayout=e},getPreviousSSLayout:function(){return this._previousSSLayout},isScreenInTopView:function(){return ZCSmartConferenceConstants.screenLayouts.isInTopView(this._currentScreenLayout)},isScreenInRhsView:function(){return ZCSmartConferenceConstants.screenLayouts.isInRhsView(this._currentScreenLayout)},isScreenInActiveSpeakerView:function(){return ZCSmartConferenceConstants.screenLayouts.isInActiveSpeakerView(this._currentScreenLayout)},setCurrentVideoGridPageInView:function(e){this._currentVideoGridPageInView=e},setFilmStripStatus:function(e){this._showFilmStrip=e},setBottomPaneStatus:function(e){this._showBottomPane=e},canShowBottomPane:function(){return this._showBottomPane},setChatId:function(e){this._chatId=e},setInvitedMembersObject:function(e){this._invitedMembersObject=e},canRememberVideoEffects:function(){return this._canRememberVideoEffects},setRememberVideoEffectsStatus:function(e){this._canRememberVideoEffects=e},getVideoEffects:function(){return this._videoEffects},setVideoEffects:function(e){this._videoEffects=e},getSelectedVideoBackground:function(){return this._videoEffects.background},getSelectedVideoFilter:function(){return this._videoEffects.filter},setSelectedVideoBackground:function(e){this._videoEffects.background=e},setSelectedVideoFilter:function(e){this._videoEffects.filter=e},isPushToTalkEnabled:function(){return this._isPushToTalkEnabled},setPushToTalkState:function(e){this._isPushToTalkEnabled=e},setFocusedModeAsEnabled:function(e,t,n){if(!(t<this._isFocusedModeDetails.actionTime)){var i=-1!==this.getFocusedUserIds().indexOf(this.getCurrentUserId()),r=-1!==e.indexOf(this.getCurrentUserId());if(this._isFocusedModeDetails={actionTime:t,isEnabled:!0,userIds:e,setBy:n},i&&!r){var o=ZCMediaDomUtil.getFullScreenElement();o&&o.hasAttribute("mediaContainer")&&ZCSmartConferenceHandler.UIEvents.exitFromFullScreen()}this.muteUnfocusedUsers(),ZCSmartConferenceUI.updateFocusedModeInfo(this)}},muteUnfocusedUsers:function(){var e=this.getFocusedUserIds(),t=this.getLastFocusActivityTime(),n=this.getFocusedSetById(),i=this.getMembers();for(var r in i)if(-1===e.indexOf(r)){var o=i[r];o.handleAVStreamStatus("audio",!0,t,n),o.handleAVStreamStatus("video",!0,t,n)}-1===e.indexOf(this.getCurrentUserId())&&(ZCSmartConferenceUI.setMicMutedOption(),ZCSmartConferenceUI.setVideoMutedOption())},setFocusedModeAsDisabled:function(e,t){if(!(e<this._isFocusedModeDetails.actionTime)){var n=this.getFocusedUserIds();this._isFocusedModeDetails={actionTime:e,isEnabled:!1,userIds:[],setBy:t},-1===n.indexOf(this.getCurrentUserId())&&ZCSmartConferenceUI.showUnmuteConfirmPrompt(this,t,!1,!1);var i=ZCMediaDomUtil.getFullScreenElement();i&&i.hasAttribute("mediaContainer")&&ZCSmartConferenceHandler.UIEvents.exitFromFullScreen(),ZCSmartConferenceUI.updateFocusedModeInfo(this)}},storeFocusedModeDetails:function(e,t,n,i){this._isFocusedModeDetails={actionTime:t,isEnabled:e,userIds:n||[],setBy:i}},handleFocusedUserStreamMute:function(e){var t=e.syncData,n=this.getAudioStreamWithAudioStreamId(t.audiostreamid);if(n){var i=this.getCurrentUserId();t.mute&&-1!==t.mute.indexOf(i)?n._disableAudioTrack():t.unmute&&-1!==t.unmute.indexOf(i)&&n._enableAudioTrack()}},setMuteAllStatusForParticipants:function(e,t,n,i,r,o,s,a){var c="audio"===e;if(t?(r=r||[]).push(i):(o=!1,r=[]),c){if(this._audioStatusForAllParticipants.time>n)return;this._audioStatusForAllParticipants.time=n,this._audioStatusForAllParticipants.muted=t,this._audioStatusForAllParticipants.muteStatusSetBy=i,this._audioStatusForAllParticipants.excludedIds=r,void 0!==o&&(this._audioStatusForAllParticipants.unmuteRestricted=o,this._audioStatusForAllParticipants.restrictionStatusSetBy=i,this._audioStatusForAllParticipants.restrictionTriggeredTime=n,this.setAllowAudioUnmuteCheckboxStatus(!o))}t?this.muteAllParticipants(e,n,i,r,o,s,a):this.resetMuteAllParticipants(e,n,i,a)},muteAllParticipants:function(e,t,n,i,r,o,s){var a=this.getCurrentMember(),c=a.isAudioMuted(),d=a.isAudioUnmuteRestricted(),l=this.getMembers();for(var u in l){var f=l[u];-1!==i.indexOf(u)||this.isHost(u)||f.isCohost()||(o||f.handleAVStreamStatus(e,!0,t,n),void 0!==r&&f.setAudioUnmuteRestrictedStatus(r,t,n))}-1!==i.indexOf(a.getId())||this.isHost(a.getId())||a.isCohost()||(o||ZCSmartConferenceUI.setMicMutedOption(),ZCSmartConferenceUI.updateMuteRestrictionStatus(c,d,this,a,n,!0,!1,s),ZCSmartConferenceUI.updateMutedInfoInList(this,a)),this.hasHostPermission()&&ZCSmartConferenceUI.setParticipantMuteAllOption(this),ZCSmartConferenceUI.resetMuteOptionsInParticipantList(this)},resetMuteAllParticipants:function(e,t,n,i){var r=this.getCurrentMember(),o=r.isAudioMuted(),s=r.isAudioUnmuteRestricted(),a=this.getMembers();for(var c in a){if(!this.isHost(c))a[c].setAudioUnmuteRestrictedStatus(!1,t,n)}this.isHost(r.getId())||r.isCohost()||ZCSmartConferenceUI.updateMuteRestrictionStatus(o,s,this,r,n,!1,!1,i),this.hasHostPermission()&&ZCSmartConferenceUI.setParticipantMuteAllOption(this),ZCSmartConferenceUI.resetMuteOptionsInParticipantList(this)},setAudioUnmuteRestrictedStatusForParticipants:function(e,t,n,i){if(!(t<this._audioStatusForAllParticipants.restrictionTriggeredTime)){this._audioStatusForAllParticipants.unmuteRestricted=e,this._audioStatusForAllParticipants.restrictionStatusSetBy=n,this._audioStatusForAllParticipants.restrictionTriggeredTime=t,this.setAllowAudioUnmuteCheckboxStatus(!e);e?this.muteAllParticipants("audio",t,n,this._audioStatusForAllParticipants.excludedIds,e,!0,i):this.resetMuteAllParticipants("audio",t,n,i)}},isAudioMutedForAllParticipants:function(){return this._audioStatusForAllParticipants.muted},isAudioUnmuteRestrictedForAllParticipants:function(){return this._audioStatusForAllParticipants.unmuteRestricted},isAllowAudioUnmuteCheckboxEnabled:function(){return this._isAllowAudioUnmuteCheckboxEnabled},setAllowAudioUnmuteCheckboxStatus:function(e){this._isAllowAudioUnmuteCheckboxEnabled=e},isAudioNotMutedForAnyParticipant:function(){var e=this.getMembers();for(var t in e){var n=e[t];if(n.isActiveMember()&&!n.isCohost()&&!n.isAudioMuted()&&!n.isHost())return!0}return!1},isAudioUnmuteRestrictedForAny:function(){var e=this.getMembers();for(var t in e){var n=e[t];if(n.isActiveMember()&&!n.isCohost()&&n.isAudioUnmuteRestricted())return!0}return!1},canShowMuteAllParticipantsOpt:function(){return!!this.hasHostPermission()&&(!this.isAudioMutedForAllParticipants()||this.isAudioNotMutedForAnyParticipant())},canShowUnmuteAllParticipantsOpt:function(){return!!this.hasHostPermission()&&(this.isAudioMutedForAllParticipants()||this.isAudioUnmuteRestrictedForAny())},canShowParticipantsUnmuteRestrictOpt:function(){if(!this.hasHostPermission())return!1;if(this.isAudioMutedForAllParticipants())return!0;var e=this.getCurrentUserId(),t=this.getMembers();for(var n in t){var i=t[n];if(i.isActiveMember()&&!i.isCohost()&&!this.isCurrentUser(n)){var r=i.getAudioMutedBy(),o=i.getAudioUnmuteRestrictedBy();if(r===e||o===e)return!0}}return!1},hasUnmutePermission:function(){return!(this.isFocusedModeEnabled()&&!this.isInFocusedUsers()||this.isAudioUnmuteRestricted()||this.isSilentMember())&&(!this.isPrimarySession()||!this.hasSecondaryAudioUpStream())},setUserAudioUnmuteRestrictedStatus:function(e,t,n,i){this.getMember(e).setAudioUnmuteRestrictedStatus(t,n,i)},setMuteStatusForUser:function(e,t,n,i,r,o){var s=this.getMember(e);s&&s.setMuteStatus(t,n,i,r,o)},setUpdatedAVStatus:function(){this.getCurrentMember().setUpdatedAVStatus()},setScreenUpStream:function(e){this._screenUpStream=e},setWindowInFullScreen:function(){this._isInFullScreen=!0},setAudioTrackEndedInfo:function(e){this._audioTrackEndedInfo={trackLabel:e,time:$Util.getSyncedCurrentTime()}},getAudioTrackEndedInfo:function(e){return this._audioTrackEndedInfo},setAudioUpStream:function(e){this._audioUpStream=e;var t=this.getCurrentMember();t&&t.setAudioUpStream(e)},setVideoUpStream:function(e){this._videoUpStream=e;var t=this.getCurrentMember();t&&t.setVideoUpStream(e)},setAVUpStream:function(e){if(this._avUpStream=e,e._hasAudioTrack()){var t=e._getPrimaryAudioTrack();this.setAudioUpStream(new MediaStream([t]))}if(e._hasVideoTrack()){var n=e._getPrimaryVideoTrack();this.setVideoUpStream(new MediaStream([n]))}var i=this.getCurrentMember();i&&i.setAVUpStream(e)},setHiddenUserIdsFromStrip:function(e){this._hiddenUserIdsFromStrip=e},resetHiddenUserIdsFromStrip:function(){this._hiddenUserIdsFromStrip=[]},setAudioStreamIds:function(e){this._audioStreamIds=e},setVideoStreamIds:function(e){this._videoStreamIds=e},setVideoGridStreamIds:function(e){this._videoGridStreamIds=e},getVideoGridStreamIdsVsRTPData:function(){return this._videoGridStreamIdsVsRTPData},setVideoGridStreamIdRTPData:function(e,t,n){this._videoGridStreamIdsVsRTPData[e]={rtpTimeStamp:t,pageNo:n}},setVideoGridLayoutDetails:function(e){this._videoGridLayoutDetails=e},setLocalMediaContainer:function(e){this._localMediaContainer=e},setAndPlayAudioStream:function(e){var t=e.id;this._audioStreamIdVsStream[t]=e;var n=this.getMediaContainerWithAudioStreamId(t);n||(n=new Audio,this._audioMediaContainers[t]=n),n.setStream(e),MediaManager.setPreferredAudioOutput([n]),n.play()},addMediaContainersForReceivedStreamIds:function(){var e=this.getDataChannelData(!1);if(e){var t=JSON.parse(e.syncData.video);for(var n in t){var i=this.getMediaContainerWithVideoStreamId(n);if(!i){var r=this._videoStreamIdVsStream[n];i=ZCSmartConferenceUI.addAndGetMediaContainer(t[n],void 0,n),this._mediaContainers.push(i),MediaUtil.setAndPlayStreamInMediaContainer(i,r),r instanceof MediaStream&&this.isSilentConference()&&AdhocCallBridge.publish(this,"handleVideoStream",{associatedSessionId:this.getAdhocCallId(),videoStream:r,userId:this.getUserIdWithVideoStreamId(n)})}}}},setAndPlayVideoStream:function(e,t){var n=void 0,i=e.id;this._videoStreamIdVsStream[i]=e,this.startTransceiverPolling(),-1!==this.getVideoGridStreamIds().indexOf(i)?(this._videoGridStreamIdVsTransceiver[i]=t,n=ZCSmartConferenceUI.getGridMediaContainerWithVideoStreamId(i)):(this._streamIdVsTransceiver[i]=t,n=this.getMediaContainerWithVideoStreamId(i)),n&&n.length&&MediaUtil.setAndPlayStreamInMediaContainer(n,e)},setAndPlayScreenStream:function(e,t){var n=ZCSmartConferenceUI.getConferenceWindow().find('[screenContainer][userId="'+t+'"]');if(0===n.length){var i,r=ZCSmartConferenceImpl.getCurrentSession(),o=r.getMember(t);o&&(i=o.getName()),n=ZCSmartConferenceUI.addAndGetScreenContainer(t,Users.getName(t,i),r)}MediaUtil.setAndPlayStreamInMediaContainer(n,e),e instanceof MediaStream&&this.isSilentConference()&&AdhocCallBridge.publish(this,"handleScreenStream",{associatedSessionId:this.getAdhocCallId(),screenStream:e,userId:t})},hasAudioUpStreamConnection:function(){return void 0!==this._audioUpStreamConnection},hasVideoUpStreamConnection:function(){return void 0!==this._videoUpStreamConnection},hasScreenUpStreamConnection:function(){return void 0!==this._screenUpStreamConnection},hasAudioDownStreamConnection:function(){return void 0!==this._audioDownStreamConnection},hasVideoDownStreamConnection:function(){return void 0!==this._videoDownStreamConnection},hasScreenDownStreamConnection:function(){return void 0!==this._screenDownStreamConnection},isAudioUpStreamConnected:function(){return this._audioUpStreamConnected},isVideoUpStreamConnected:function(){return this._videoUpStreamConnected},isScreenUpStreamConnected:function(){return this._screenUpStreamConnected},isDataChannelConnected:function(){return this._isDataChannelConnected},isAudioDownStreamConnected:function(){return this._audioDownStreamConnected},isVideoDownStreamConnected:function(){return this._videoDownStreamConnected},isScreenDownStreamConnected:function(){return this._screenDownStreamConnected},isVideoUpStreamBlocked:function(){return this._videoUpStreamBlocked},setVideoUpStreamBlockedStatus:function(e){this._videoUpStreamBlocked=e},isAudioUpStreamBlocked:function(){return this._audioUpStreamBlocked},setAudioUpStreamBlockedStatus:function(e){this._audioUpStreamBlocked=e},setConnectionStatus:function(e,t,n){var i=void 0;WebRTCPeerConnectionConstants.isAudioConnection(e)?t?(this._audioUpStreamReconnecting=n,this._audioUpStreamConnected=!n,i=n?ConferenceLog.constants.eventsLog.audioUpStreamFailed:ConferenceLog.constants.eventsLog.audioUpStreamConnected):(this._audioDownStreamReconnecting=n,this._audioDownStreamConnected=!n,i=n?ConferenceLog.constants.eventsLog.audioDownStreamFailed:ConferenceLog.constants.eventsLog.audioDownStreamConnected):WebRTCPeerConnectionConstants.isVideoConnection(e)?t?(this._videoUpStreamReconnecting=n,this._videoUpStreamConnected=!n,i=n?ConferenceLog.constants.eventsLog.videoUpStreamFailed:ConferenceLog.constants.eventsLog.videoUpStreamConnected):(this._videoDownStreamReconnecting=n,this._videoDownStreamConnected=!n,i=n?ConferenceLog.constants.eventsLog.videoDownStreamFailed:ConferenceLog.constants.eventsLog.videoDownStreamConnected):WebRTCPeerConnectionConstants.isScreenConnection(e)?t?(this._screenUpStreamReconnecting=n,this._screenUpStreamConnected=!n):(this._screenDownStreamReconnecting=n,this._screenDownStreamConnected=!n,i=n?ConferenceLog.constants.eventsLog.screenDownStreamFailed:ConferenceLog.constants.eventsLog.screenDownStreamConnected):WebRTCPeerConnectionConstants.isDataChannelConnection(e)&&t&&(this._dcReconnecting=n,this._isDataChannelConnected=!n,i=n?ConferenceLog.constants.eventsLog.dcFailed:ConferenceLog.constants.eventsLog.dcConnected),ZCSmartConferenceUI.updateConnectionStatus(this),this.isPrimarySession()&&(i&&this.writeToEventsLog(i),!this.isDataChannelConnected()||!(this.isLayoutDataReceived()||this.getActiveMembersCount()<=1)||this.hasAudioUpStreamConnection()&&!this.isAudioUpStreamConnected()||this.hasVideoUpStreamConnection()&&!this.isVideoUpStreamConnected()||this.hasAudioDownStreamConnection()&&!this.isAudioDownStreamConnected()||this.hasVideoDownStreamConnection()&&!this.isVideoDownStreamConnected()||this.hasScreenDownStreamConnection()&&!this.isScreenDownStreamConnected()||(this.updateEventsLog(),ZCSmartConferenceUI.showBottomPane(!1),ZCSmartConferenceUI.constructBottomPane()))},setVideoBitRate:function(){WebRTCUserMedia.isSetBitRateSupported()&&this._videoUpStreamConnection&&this._videoUpStreamConnection.setBitRate(500)},storeRemoteOfferDetails:function(e,t,n){WebRTCPeerConnectionConstants.isAudioConnection(n)?(this._audioConnectionRemoteDetails.sdp=e,this._audioConnectionRemoteDetails.candidates=t):(this._videoConnectionRemoteDetails.sdp=e,this._videoConnectionRemoteDetails.candidates=t)},setInitialScreenOfferMsgObj:function(e){this._initialScreenOfferMsgObj=e},clearInitialScreenOfferMsgObj:function(){this._initialScreenOfferMsgObj=void 0},getInitialScreenOfferMsgObj:function(){return this._initialScreenOfferMsgObj},setDataChannelAsInitiated:function(){this._isDataChannelInitiated=!0},setLastAudioOfferTime:function(e){this._lastAudioOfferTime=e},setLastVideoOfferTime:function(e){this._lastVideoOfferTime=e},setLastScreenOfferTime:function(e){this._lastScreenOfferTime=e},isLayoutDataReceived:function(){return this._isLayoutDataReceived},setDataChannelData:function(e){this.isLayoutDataReceived()||(this._isLayoutDataReceived=!0,this.setConnectionStatus()),this._dataChannelData=e},getCurrentSpeakerId:function(){return this._currentSpeakerId},setCurrentSpeakerId:function(e){this._currentSpeakerId=e},setMainSpeakerData:function(e){this._mainSpeakerData=e;var t=e.syncData.solointeractive.split(",");this.setMainSpeakerCount(t.length)},setMainSpeakerRestrictionInDownStream:function(){this._streamMainSpeakersOnly=!0},resetMainSpeakerRestrictionInDownStream:function(){this._streamMainSpeakersOnly=!1},setSilentSpeakerInfoAsHidden:function(){this._isSilentSpeakerInfoHidden=!0},setAudioMutedInfoAsHidden:function(){this._isAudioMutedInfoHidden=!0},setLowBandwidthModeInfoAsHidden:function(){this._isLowBandwidthModeInfoHidden=!0},setStreamingStatus:function(e){this._isStreaming=e},setRecordingReferenceIndex:function(e){this._recordingRefIndex=e},sendRecordingStatusToParticipants:function(){var e,t={};this._recordingRefIndex&&(t.recording_index=this._recordingRefIndex),e=WmsImpl.isGuestConferenceUser()?$zcg._GUEST_NAME:Users.getDisplayName(this.getCurrentUserId());var n=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.CUSTOM,{userId:this.getCurrentUserId(),userName:e,operation:"handleRecording",customData:t});this._dcConnection.send(n)},setMediaServerIp:function(e){void 0!==e&&(this._mediaServerIp=e)},setPendingUsersListAsPopulated:function(){this._hasPopulatedPendingUsersList=!0},setRequestAsPending:function(e){this._pendingRequests[e]=!0},setRequestAsCompleted:function(e){delete this._pendingRequests[e]},setDCConnectionRemoteDescription:function(e,t,n){this._dcConnection.setRemoteDescription(e,t,n)},setAudioConnectionRemoteDescription:function(e,t,n){this._audioUpStreamConnection.setRemoteDescription(e,t,n)},setVideoConnectionRemoteDescription:function(e,t,n){this._videoUpStreamConnection.setRemoteDescription(e,t,n)},setScreenConnectionRemoteDescription:function(e,t,n){this._screenUpStreamConnection.setRemoteDescription(e,t,n)},setAudioDownStreamConnectionRemoteIceCandidates:function(){this._audioDownStreamConnection&&this._audioDownStreamConnection.addRemoteIceCandidates()},setVideoDownStreamConnectionRemoteIceCandidates:function(){this._videoDownStreamConnection&&this._videoDownStreamConnection.addRemoteIceCandidates()},setScreenDownStreamConnectionRemoteIceCandidates:function(){this._screenDownStreamConnection&&this._screenDownStreamConnection.addRemoteIceCandidates()},updateDCConnectionLocalIceCandidates:function(){this._dcConnection.updateLocalIceCandidates()},updateAudioConnectionLocalIceCandidates:function(){this._audioUpStreamConnection.updateLocalIceCandidates()},updateVideoConnectionLocalIceCandidates:function(){this._videoUpStreamConnection.updateLocalIceCandidates()},updateScreenConnectionLocalIceCandidates:function(){this._screenUpStreamConnection.updateLocalIceCandidates()},updateAudioDownStreamConnectionLocalIceCandidates:function(){this._audioDownStreamConnection.updateLocalIceCandidates()},updateVideoDownStreamConnectionLocalIceCandidates:function(){this._videoDownStreamConnection.updateLocalIceCandidates()},updateScreenDownStreamConnectionLocalIceCandidates:function(){this._screenDownStreamConnection.updateLocalIceCandidates()},updateUserInfoFromServer:function(e){clearTimeout(this._fetchUserInfoTimeout),this._fetchUserInfoTimeout=setTimeout(function(){var e=this.getDataChannelData(!1),t=JSON.parse(e.syncData.video),n=[];for(var i in t)n.push(t[i]);Conference.isCurrentUserGuest()||Users.getProfileInfoFromServer(n,!1,(function(){ZCSmartConferenceUI.updateUserNames()}))}.bind(this),100)},isHost:function(e){return this._hostId===e},isCurrentUser:function(e){return this.getCurrentUserId()===e},isCurrentUserHost:function(){return this.getCurrentUserId()===this._hostId},isCurrentUserCohost:function(){return this.getCurrentMember().isCohost()},hasHostPermission:function(){return this.isCurrentUserHost()||this.isCurrentUserCohost()},isActiveMember:function(){return this.getCurrentMember().isActiveMember()},isSilentMember:function(){return this.getCurrentMember().isSilentMember()},getMemberType:function(){return this.getCurrentMember().getMemberType()},hasAudioUpStream:function(){return this.getAudioUpStream()instanceof MediaStream},hasVideoUpStream:function(){return this.getVideoUpStream()instanceof MediaStream},hasRequestedToSpeak:function(){return this.getCurrentMember().hasRequestedToSpeak()},isScreenSharer:function(){return this.getCurrentUserId()===this.getScreenSharerId()&&!this.isPresentationStream()},isUserScreenSharer:function(e){return e===this.getScreenSharerId()},hasScreenShare:function(){return void 0!==this.getScreenSharerId()},hadScreenShare:function(){return this._hadScreenShare},setAsScreenShared:function(){this._hadScreenShare=!0},wasFeedbackShown:function(){return this._wasFeedbackShown},setFeedbackAsShown:function(){this._wasFeedbackShown=!0},isHDVideoNeeded:function(){return this._isHDVideoNeeded},setHDVideoNeededState:function(e){this._isHDVideoNeeded=e},isIncomingVideoEnabled:function(){return this._isIncomingVideoEnabled},setIncomingVideoState:function(e){this._isIncomingVideoEnabled=e},hasNotifiedStart:function(){return this._hasNotifiedStart},isChatCreationPending:function(){return this._isChatCreationPending},isInMinimizedView:function(){return this._currentView===ZCSmartConferenceUI.views.MINIMIZED},isInStageLayout:function(){return this._currentLayout===ZCSmartConferenceConstants.layouts.STAGE},isInGridLayout:function(){return this._currentLayout===ZCSmartConferenceConstants.layouts.GRID},isPersonalScope:function(){return this._scope.type===ZCMediaConstants.scopeTypes.PERSONAL},isChatScope:function(){return this._scope.type===ZCMediaConstants.scopeTypes.CHAT},isEventScope:function(){return MediaManager.isEventScope(this._scope.type)},hasChatId:function(){return void 0!==this._chatId},isSilentConference:function(){return void 0!==this._adhocCallDetails},getAdhocCallDetails:function(){return this._adhocCallDetails},getAdhocCallId:function(){return this.isSilentConference()?this._adhocCallDetails.call_id:void 0},isMigratedForRecording:function(){return this.isSilentConference()&&this._adhocCallDetails.recording_migration},isAudioConference:function(){return Conference.isAudioConference(this.getType())},isVideoConference:function(){return Conference.isVideoConference(this.getType())},isPrimarySession:function(){return this._isPrimary},hasSecondaryAudioUpStream:function(){return this._hasSecondaryAudioUpStream},hasSecondaryVideoUpStream:function(){return this._hasSecondaryVideoUpStream},hasSecondaryScreenUpStream:function(){return this._hasSecondaryScreenUpStream},setSecondaryAudioUpStreamStatus:function(e){this._hasSecondaryAudioUpStream=e},setSecondaryVideoUpStreamStatus:function(e){this._hasSecondaryVideoUpStream=e},setSecondaryScreenUpStreamStatus:function(e){this._hasSecondaryScreenUpStream=e},setSecondarySessionId:function(e){this._secondarySessionId=e},getSecondarySessionId:function(){return this._secondarySessionId},isSmartMode:function(){return Conference.isSmartMode(this._mode)},isOldImpl:function(){return!1},isStartPreview:function(){return this.getId()===ZCSmartConferenceConstants.startPreviewSessionId},isQuickStartPreview:function(){return this._isQuickStartPreview},setAsQuickStartPreview:function(){this._isQuickStartPreview=!0},isMixingEnabled:function(){return this.isSmartMode()},isInUnifiedPlan:function(){return this.isSmartMode()},isDataChannelInitiated:function(){return this._isDataChannelInitiated},isDownStreamRestrictedToMainSpeakers:function(){return this._streamMainSpeakersOnly},isSilentSpeakerInfoHidden:function(){return this._isSilentSpeakerInfoHidden},isAudioMutedInfoHidden:function(){return this._isAudioMutedInfoHidden},isLowBandwidthModeInfoHidden:function(){return this._isLowBandwidthModeInfoHidden},isStreaming:function(){return this._isStreaming},getRecordingReferenceIndex:function(){return this._recordingRefIndex},isRecording:function(){return void 0!==this._recordingRefIndex},isFocusedModeEnabled:function(){return this._isFocusedModeDetails.isEnabled},isInFocusedUsers:function(){return-1!==this.getFocusedUserIds().indexOf(this.getCurrentUserId())},isAudioMuted:function(){return this.getCurrentMember().isAudioMuted()},isAudioUnmuteRestricted:function(){return this.getCurrentMember().isAudioUnmuteRestricted()},isRequestPending:function(e){return this._pendingRequests[e]},isAudioUpStreamReconnecting:function(){return this._audioUpStreamReconnecting},isVideoUpStreamReconnecting:function(){return this._videoUpStreamReconnecting},isScreenUpStreamReconnecting:function(){return this._screenUpStreamReconnecting},isDataChannelReconnecting:function(){return this._dcReconnecting},isAudioDownStreamReconnecting:function(){return this._audioDownStreamReconnecting},isVideoDownStreamReconnecting:function(){return this._videoDownStreamReconnecting},isScreenDownStreamReconnecting:function(){return this._screenDownStreamReconnecting},hasPopulatedPendingUsersList:function(){return this._hasPopulatedPendingUsersList},addMember:function(e,t,n,i){var r=this.getMember(e);if(r)return void 0!==t&&r.setName(t),void 0!==n&&r.setMemberType(n),void(void 0!==i&&r.setReferrerInfo(i));r=new ZCSmartConferenceMember(e,t,n),this.isHost(e)&&r.setAsHost(),void 0!==i&&r.setReferrerInfo(i),this.setMember(r)},removeMember:function(e){var t=this._members[e];t&&this.setLeftMemberName(e,t.getName()),delete this._members[e],Conference.isGuestUserId(e)&&delete this._guestMembers[e]},handleMuteShortcut:function(){return this.getCurrentMember().isAudioMuted()?ZCSmartConferenceHandler.UIEvents.unmuteAudio():ZCSmartConferenceHandler.UIEvents.muteAudio()},handleStickyInfoConfigUpdate:function(e){ZCSmartConferenceUI.updateStickyInfoStatus(e)},updateParticipantStatus:function(e){(Contacts.isExist(e)||WmsImpl.isLocalUser(e))&&ZCSmartConferenceUI.updateUserStatus(e,Contacts.getStatusStyle(e))},initDataChannelConnection:function(){this.isDataChannelInitiated()||(this.setDataChannelAsInitiated(),this._dcConnection=new ConferenceDCConnection(this.getId(),this.getCurrentUserId(),WebRTCPeerConnectionConstants.connectionTypes.DATA_CHANNEL,ZCSmartConferenceHandler.dcConnectionEvents),this._dcConnection.setTurnCredentials(this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord()),this._dcConnection.init())},checkAndInitUpstream:function(){if(this.isActiveMember()&&!this._isUpStreamConnectionInitiated){if(this._isUpStreamConnectionInitiated=!0,this.isOnDemandConnectionMember())ZCSmartConferenceHandler.UIEvents.muteAudio(),"audiovideo"===this.getCurrentMember().getOnDemandMuteDataMode()&&ZCSmartConferenceHandler.UIEvents.muteVideo();var e=this.getAudioUpStream();if(e&&!e._isAudioRestrictedForConnection()&&this.initAudioUpStreamConnection(),this.getVideoUpStream()&&this.initVideoUpStreamConnection(),Conference.isAddDeviceEnabled()){var t=this.getScreenUpStream();t&&ZCSmartConferenceImpl.addScreenInSession(t)}}},initAudioUpStreamConnection:function(){this._audioUpStreamConnection=new UnifiedWebRTCPeerConnection(this.getId(),WebRTCPeerConnectionConstants.connectionTypes.AUDIO,ZCSmartConferenceHandler.unifiedPeerConnectionEvents,this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord(),!0,this.getAudioUpStream())},initVideoUpStreamConnection:function(){this._videoUpStreamConnection=new UnifiedWebRTCPeerConnection(this.getId(),WebRTCPeerConnectionConstants.connectionTypes.VIDEO,ZCSmartConferenceHandler.unifiedPeerConnectionEvents,this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord(),!0,this.getVideoUpStream())},initScreenUpStream:function(e){this.setScreenSharerId(this.getCurrentUserId()),this.setAsScreenShared(),this.setScreenUpStream(e),this._screenUpStreamConnection||(this._screenUpStreamConnection=new WebRTCPeerConnection(this.getId(),this.getCurrentUserId(),WebRTCPeerConnectionConstants.connectionTypes.SCREEN,ZCSmartConferenceHandler.peerConnectionEvents,void 0,this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord(),e._getType(),!0))},reinitAudioUpStreamConnection:function(){this._audioUpStreamConnection&&this._audioUpStreamConnection.reinit()},reinitVideoUpStreamConnection:function(){this._videoUpStreamConnection&&this._videoUpStreamConnection.reinit()},reinitScreenUpStream:function(){this._screenUpStreamConnection&&this._screenUpStreamConnection.reinit()},attachAudioInConnection:function(e){var t=this.getAudioUpStream();t&&t._isAudioRestrictedForConnection()&&(t._resetConnectionRestrictionForAudio(),this._audioUpStreamConnection?this._audioUpStreamConnection.attachAudioTracks(t):e&&this.initAudioUpStreamConnection())},detachAudioFromConnection:function(){var e=this.getAudioUpStream();e&&e._setConnectionRestrictionForAudio(),this._audioUpStreamConnection&&this._audioUpStreamConnection.detachAudioTracks()},renegotiateAudioUpStream:function(e){this.setAudioUpStream(e),this.setUpdatedAVStatus(),this._audioUpStreamConnection&&this._audioUpStreamConnection.replaceTracks(e,WebRTCUserMedia.streamTypes.AUDIO_ONLY)},renegotiateVideoUpStream:function(e){this.setVideoUpStream(e),Conference.applyVideoConstraints(e,this),MediaUtil.setAndPlayStreamInMediaContainer(this.getLocalMediaContainer(),e,!0);var t=ZCSmartConferenceUI.getLocalGridMediaContainer();t&&t.length&&MediaUtil.setAndPlayStreamInMediaContainer(t,e,!0);var n=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();n&&n.length&&MediaUtil.setAndPlayStreamInMediaContainer(n,e,!0),ZCSmartConferenceUI.setStreamInDeviceWidget(e),this.setUpdatedAVStatus(),this._videoUpStreamConnection&&this._videoUpStreamConnection.replaceTracks(e,WebRTCUserMedia.streamTypes.VIDEO_ONLY),e instanceof MediaStream&&this.isSilentConference()&&AdhocCallBridge.publish(this,"handleVideoStream",{associatedSessionId:this.getAdhocCallId(),videoStream:e,userId:this.getUserIdWithVideoStreamId(e.id)})},handleIncomingVideoState:function(e){this.setIncomingVideoState(e),e?(this.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.VIDEO,!1,!0),ConferenceAPI.reconnect(this.getId(),WebRTCPeerConnectionConstants.connectionTypes.VIDEO)):(this.closeVideoDownStreamConnection(),this.setConnectionStatus(WebRTCPeerConnectionConstants.connectionTypes.VIDEO,!1,!1)),this._handleProfileImageStatus()},handleHDVideoConfigUpdate:function(e){this.handleHDVideoState(this.isHDVideoNeeded())},handleHDVideoState:function(e){this.setHDVideoNeededState(e);var t=this.getVideoUpStream();t&&Conference.applyVideoConstraints(t,this)},applyVideoEffects:function(e,t){if(!this.isRequestPending(ZCSmartConferenceConstants.requests.applyVideoBackgroundEffect)){var n=this.hasVideoUpStream(),i=!1,r=!1,o={},s=!1,a=!1;this.getSelectedVideoBackground()!==e&&(o.backgroundType=e,i=n,this.setSelectedVideoBackground(e),s=!0),this.getSelectedVideoFilter()!==t&&(o.filterType=t,r=n,this.setSelectedVideoFilter(t),a=!0);var c=this.getLocalMediaContainer().find("[loader]"),d=function(e,t){c.removeClass("hide dN"),this.setRequestAsPending(ZCSmartConferenceConstants.requests.applyVideoBackgroundEffect),MLBackgroundProcessor.applyVideoFilter(e,t,function(e){c.addClass("hide dN"),this.setRequestAsCompleted(ZCSmartConferenceConstants.requests.applyVideoBackgroundEffect),e&&this.renegotiateVideoUpStream(e)}.bind(this))}.bind(this);if(i?(c.removeClass("hide dN"),this.setRequestAsPending(ZCSmartConferenceConstants.requests.applyVideoBackgroundEffect),MLBackgroundProcessor.applyVideoBackground(this.getVideoUpStream(),e,function(e){c.addClass("hide dN"),this.setRequestAsCompleted(ZCSmartConferenceConstants.requests.applyVideoBackgroundEffect),e?(r&&MLBackgroundProcessor.applyVideoFilter(e,t),this.renegotiateVideoUpStream(e)):r&&d(this.getVideoUpStream(),t)}.bind(this))):r&&d(this.getVideoUpStream(),t),this.canRememberVideoEffects()&&(s||a)){var l={};if(s)MLBackgroundProcessor.backgroundTypes.isSeasonalImage(e)?l.seasonal_video_background=e:(l.video_background=e,l.seasonal_video_background=MLBackgroundProcessor.backgroundTypes.NONE);a&&(l.video_filter=t),Settings.update(l)}ZCTrack.track("CONFERENCE_VIDEO_EFFECTS_ADDED",o)}},replaceAudioUpStream:function(e){this.setAudioUpStream(e),this.isActiveMember()&&(this._audioUpStreamConnection?this._audioUpStreamConnection.replaceTracksWithoutNegotiation(e,WebRTCUserMedia.streamTypes.AUDIO_ONLY):this.initAudioUpStreamConnection())},replaceVideoUpStream:function(e){this.setVideoUpStream(e),Conference.applyVideoConstraints(e,this),MediaUtil.setAndPlayStreamInMediaContainer(this.getLocalMediaContainer(),e,!0);var t=ZCSmartConferenceUI.getLocalGridMediaContainer();t&&t.length&&MediaUtil.setAndPlayStreamInMediaContainer(t,e,!0);var n=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();n&&n.length&&MediaUtil.setAndPlayStreamInMediaContainer(n,e,!0),ZCSmartConferenceUI.setStreamInDeviceWidget(e),this.isActiveMember()&&(this._videoUpStreamConnection?(this._videoUpStreamConnection.replaceTracksWithoutNegotiation(e,WebRTCUserMedia.streamTypes.VIDEO_ONLY),ZCSmartConferenceUI.updateConnectionStatus(this)):this.initVideoUpStreamConnection(),e instanceof MediaStream&&this.isSilentConference()&&AdhocCallBridge.publish(this,"handleVideoStream",{associatedSessionId:this.getAdhocCallId(),videoStream:e,userId:this.getCurrentUserId()}))},checkAndConnectAudioDownstream:function(){this._audioDownStreamConnection||this.connectAudioDownStreamConnection()},checkAndConnectVideoDownstream:function(){this.isVideoConference()&&!this._videoDownStreamConnection&&this.connectVideoDownStreamConnection()},connectAudioDownStreamConnection:function(){var e=this.getAudioRemoteOfferDetails();e.sdp&&(this._audioDownStreamConnection=new UnifiedWebRTCPeerConnection(this.getId(),WebRTCPeerConnectionConstants.connectionTypes.AUDIO,ZCSmartConferenceHandler.unifiedPeerConnectionEvents,this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord(),!1,void 0,e.sdp,e.candidates))},connectVideoDownStreamConnection:function(){var e=this.getVideoRemoteOfferDetails();e.sdp&&this.isIncomingVideoEnabled()&&(this._videoDownStreamConnection=new UnifiedWebRTCPeerConnection(this.getId(),WebRTCPeerConnectionConstants.connectionTypes.VIDEO,ZCSmartConferenceHandler.unifiedPeerConnectionEvents,this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord(),!1,void 0,e.sdp,e.candidates))},renegotiateAudioDownStreamConnection:function(){var e=this.getAudioRemoteOfferDetails();this._audioDownStreamConnection._renegotiate(e.sdp,e.candidates)},renegotiateVideoDownStreamConnection:function(){var e=this.getVideoRemoteOfferDetails();this._videoDownStreamConnection._renegotiate(e.sdp,e.candidates)},closeAudioDownStreamConnection:function(){this._audioDownStreamConnection.close(),this._audioDownStreamConnection=void 0},closeVideoDownStreamConnection:function(){this._videoDownStreamConnection.close(),this._videoDownStreamConnection=void 0},connectDownstream:function(e,t,n,i){if(WebRTCPeerConnectionConstants.isAudioConnection(e)){if(this.getLastAudioOfferTime()>t)return;this.setLastAudioOfferTime(t),this.storeRemoteOfferDetails(n,i,e),this._audioDownStreamConnection?this._audioDownStreamReconnecting?(this.closeAudioDownStreamConnection(),this.connectAudioDownStreamConnection()):this.renegotiateAudioDownStreamConnection():this.connectAudioDownStreamConnection()}else{if(this.getLastVideoOfferTime()>t)return;this.setLastVideoOfferTime(t),this.storeRemoteOfferDetails(n,i,e),this._videoDownStreamConnection?this._videoDownStreamReconnecting?(this.closeVideoDownStreamConnection(),this.connectVideoDownStreamConnection()):this.renegotiateVideoDownStreamConnection():this.connectVideoDownStreamConnection()}},connectScreenDownStream:function(e){this.getLastScreenOfferTime()>e.joinedTime||(this._screenDownStreamConnection&&(this._screenDownStreamConnection.close(),this._screenDownStreamReconnecting=!1),this.setScreenSharerId(e.host.id),this.setAsScreenShared(),this.setLastScreenOfferTime(e.joinedTime),this._screenDownStreamConnection=new WebRTCPeerConnection(this.getId(),e.host.id,WebRTCPeerConnectionConstants.connectionTypes.SCREEN,ZCSmartConferenceHandler.peerConnectionEvents,void 0,this.getTurnServers(),this.getTurnUserName(),this.getTurnPassWord(),WebRTCUserMedia.streamTypes.SCREEN,!1,e.offerSdp,e.remoteIceCandidates))},disconnectScreenUpStream:function(){this._screenUpStreamReconnecting=!1,this._screenUpStreamConnection.close(),this._screenUpStreamConnection=void 0,this._screenUpStream=void 0,this.isScreenSharer()&&this.setScreenSharerId(void 0)},disconnectScreenDownStream:function(e){this.isSilentConference()&&AdhocCallBridge.publish(this,"handleScreenRemoved",{associatedSessionId:this.getAdhocCallId(),userId:e}),this.isUserScreenSharer(e)&&(this._screenDownStreamReconnecting=!1,this._screenDownStreamConnection.close(),this._screenDownStreamConnection=void 0,this.setScreenSharerId(void 0),ZCSmartConferenceUI.removeScreenContainer(e,this),ZCSmartConferenceUI.updateConnectionStatus(this))},_getDataForMex:function(e,t){var n={};return n.type=e,n.packetType=1,n.conferenceId=this.getId(),n.processId=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n.userId=this.getCurrentUserId(),n.syncData=JSON.stringify(t),n.binaryData="",n},showActiveSpeakers:function(){this.resetMainSpeakerRestrictionInDownStream();var e=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.SET_SPEAKER_COUNT,{userId:this.getCurrentUserId(),noOfDownStreams:this.getSpeakerCount()});this._dcConnection.send(e)},restrictToMainSpeakers:function(){this.setMainSpeakerRestrictionInDownStream();var e=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.SET_SPEAKER_COUNT,{userId:this.getCurrentUserId(),noOfDownStreams:this.getMainSpeakerCount()});this._dcConnection.send(e)},setBandwidthAllowedSpeakerCount:function(e){if(e!==this.getBandwidthAllowedSpeakerCount()){var t=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.SET_SPEAKER_COUNT,{userId:this.getCurrentUserId(),noOfDownStreams:e});this._dcConnection.send(t),this._bandwidthAllowedSpeakerCount=e,ZCSmartConferenceUI.updateLowBandwidthModeInfo(this),ZCSmartConferenceUI.handleContainerVisibility()}},sendBandWidthScore:function(e,t){var n={};void 0!==e&&(n.upStream=e),void 0!==t&&(n.downStream=t);var i=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.BANDWIDTH_SCORE,{userId:this.getCurrentUserId(),opr:"updateConnectionScore",data:{audio:n}});this._dcConnection.send(i)},sendNetworkDetails:function(e){var t=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),opr:"stats_header",data:e});this._dcConnection.send(t)},sendConnectionStats:function(e){var t=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),opr:"stats_data",data:e});this._dcConnection.send(t)},switchToVideoGridLayout:function(){this.restrictToMainSpeakers(),this.setCurrentLayout(ZCSmartConferenceConstants.layouts.GRID),ConferenceAPI.switchLayout(this.getId(),ZCSmartConferenceConstants.layouts.GRID,void 0)},switchToStageLayout:function(){this._videoGridStreamIdVsLastRtpTimeStamp={},this._videoGridStreamIdsVsRTPData={},this.showActiveSpeakers(),this.setCurrentLayout(ZCSmartConferenceConstants.layouts.STAGE),ConferenceAPI.switchLayout(this.getId(),ZCSmartConferenceConstants.layouts.STAGE,void 0)},switchGridPageThroughDC:function(e,t){t!==e&&(this._videoGridStreamIdVsLastRtpTimeStamp={},this._videoGridStreamIdsVsRTPData={});var n=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),mediaip:this.getMediaServerIp(),opr:"pagedetails",pageno:e});this._dcConnection.send(n)},sendReaction:function(e){var t=0;void 0!==this._currentReactionsGroup[e]&&(t=this._currentReactionsGroup[e]),this._currentReactionsGroup[e]=++t,void 0===this._reactionGroupingTimeout&&(this._reactionGroupingTimeout=setTimeout(function(){for(var e in this._reactionGroupingTimeout=void 0,this._currentReactionsGroup)this._previousReactionsGroup[e]?this._previousReactionsGroup[e]=this._previousReactionsGroup[e]+this._currentReactionsGroup[e]:this._previousReactionsGroup[e]=this._currentReactionsGroup[e];ConferenceAPI.bulkReact(this.getId(),this._currentReactionsGroup),this._currentReactionsGroup={}}.bind(this),1e3)),ZCSmartConferenceUI.showReaction(this,{customData:{smileyCode:e}})},initiateActivePing:function(){this._activeIndicationTimer||(this._activeIndicationTimer=setInterval(function(){var e=this._getDataForMex(ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SEND,{userId:this.getCurrentUserId(),mediaip:this.getMediaServerIp(),opr:"ping",status:"alive",callid:this.getId()});this._dcConnection.send(e)}.bind(this),2e4))},stopActivePing:function(){clearInterval(this._activeIndicationTimer),this._activeIndicationTimer=void 0},_handleGridTransceiverPollingCallBack:function(){if(this.isInGridLayout()&&this.getVideoGridLayoutDetails()){var e=this.getCurrentVideoGridPageInView(),t=this.getVideoGridStreamIdsVsRTPData();for(var n in this._videoGridStreamIdVsTransceiver){var i=!1,r=this._videoGridStreamIdVsTransceiver[n].receiver.getSynchronizationSources(),o=t[n];if(o)if(e!==o.pageNo)i=!0;else if(r.length){var s=r[0],a=parseInt(o.rtpTimeStamp);i=s.rtpTimestamp<=a,this._videoGridStreamIdVsLastRtpTimeStamp[n]=s.rtpTimestamp}else if(this._videoGridStreamIdVsLastRtpTimeStamp[n]){a=parseInt(o.rtpTimeStamp);i=this._videoGridStreamIdVsLastRtpTimeStamp[n]<=a}else i=!0;else i=!0;this.isIncomingVideoEnabled()||(i=!0);var c=ZCSmartConferenceUI.getGridMediaContainerWithVideoStreamId(n);c&&c.toggleClass("smartconf-img-show",i)}}},startTransceiverPolling:function(){this._transceiverPollingTimer||(this._transceiverPollingTimer=setInterval(function(){this._handleProfileImageStatus()}.bind(this),1e3))},_handleProfileImageStatus:function(){this._handleGridTransceiverPollingCallBack();var e=this.getDataChannelData(!1);if(void 0!==e&&void 0!==e.syncData.profilepicturestatus&&void 0!==e.syncData.rtptimestamp){JSON.parse(e.syncData.profilepicturestatus);var t=JSON.parse(e.syncData.rtptimestamp);for(var n in this._streamIdVsTransceiver){var i=!1,r=this._streamIdVsTransceiver[n].receiver.getSynchronizationSources();if(r.length){var o=r[0],s=parseInt(t[n]);i=o.rtpTimestamp<=s,this._streamIdVsLastRtpTimeStamp[n]=o.rtpTimestamp}else if(this._streamIdVsLastRtpTimeStamp[n]){s=parseInt(t[n]);i=this._streamIdVsLastRtpTimeStamp[n]<=s}else i=!0;this.isIncomingVideoEnabled()||(i=!0);var a=this.getMediaContainerWithVideoStreamId(n);a&&a.toggleClass("smartconf-img-show",i)}}},switchToSilentMember:function(){var e=this.getCurrentMember();e.setMemberType(ZCSmartConferenceConstants.memberTypes.SILENT),ZCSmartConferenceUI.modifyUserInList(this,e.getId()),ZCSmartConferenceUI.updateBottomPaneList(),ZCSmartConferenceUI.updateSessionOptions(this),ZCSmartConferenceUI.handleContainerVisibility(),this._isUpStreamConnectionInitiated=!1,this.closeAudioUpStreamConnection(),this.closeVideoUpStreamConnection();var t=this.getAVUpStream();if(t)WebRTCUserMedia.closeStream(t._getType()),this._avUpStream=void 0;else{var n=this.getAudioUpStream();n&&WebRTCUserMedia.closeStream(n._getType());var i=this.getVideoUpStream();i&&WebRTCUserMedia.closeStream(i._getType())}this.setAudioUpStream(void 0),this.setVideoUpStream(void 0)},closeAudioUpStreamConnection:function(){this._audioUpStreamConnection&&(this._audioUpStreamReconnecting=!1,this._audioUpStreamConnection.close(),this._audioUpStreamConnection=void 0,this.setAudioUpStream(void 0))},closeVideoUpStreamConnection:function(){this._videoUpStreamConnection&&(this._videoUpStreamReconnecting=!1,this._videoUpStreamConnection.close(),this._videoUpStreamConnection=void 0,this.setVideoUpStream(void 0),ZCSmartConferenceUI.updateConnectionStatus(this))},closeScreenUpStreamConnection:function(){this._screenUpStreamConnection&&(this._screenUpStreamReconnecting=!1,this._screenUpStreamConnection.close(),this._screenUpStreamConnection=void 0,this.setScreenUpStream(void 0))},terminateSecondarySession:function(e){if(this._screenUpStreamConnection&&this._screenUpStreamConnection.close(e),!e){var t=this.getScreenUpStream();t&&t._close()}},terminate:function(){clearInterval(this._transceiverPollingTimer),this._transceiverPollingTimer=void 0,clearInterval(this._activeIndicationTimer),this._activeIndicationTimer=void 0,clearTimeout(this._fetchUserInfoTimeout),this._fetchUserInfoTimeout=void 0,clearTimeout(this._reactionGroupingTimeout),this._reactionGroupingTimeout=void 0,this._bandwidthAnalyser&&(this._bandwidthAnalyser.destroy(),this._bandwidthAnalyser=void 0),this._audioUpStreamConnection&&this._audioUpStreamConnection.close(),this._videoUpStreamConnection&&this._videoUpStreamConnection.close(),this._screenUpStreamConnection&&this._screenUpStreamConnection.close(),this._audioDownStreamConnection&&this._audioDownStreamConnection.close(),this._videoDownStreamConnection&&this._videoDownStreamConnection.close(),this._screenDownStreamConnection&&this._screenDownStreamConnection.close(),this._dcConnection&&this._dcConnection.close();var e=this.getAVUpStream();if(e)WebRTCUserMedia.closeStream(e._getType());else{var t=this.getAudioUpStream();t&&WebRTCUserMedia.closeStream(t._getType());var n=this.getVideoUpStream();n&&WebRTCUserMedia.closeStream(n._getType())}var i=this.getScreenUpStream();for(var r in i&&i._close(),this._dcConnection&&this._dcConnection.close(),this._audioMediaContainers){this._audioMediaContainers[r].srcObject=null}this._audioMediaContainers=void 0,MediaUtil.clearAudioPreview(this),this.clearVideoEffectsPreview(),this.unSubscribe()},hasOngoingPresentation:function(){return this.hasScreenShare()||this.hasWhiteBoard()||this.hasPresentation()},getCurrentPresentionOwner:function(){return this.hasScreenShare()?this.getScreenSharer():this.hasWhiteBoard()?this.getWhiteBoardCreator():this.hasPresentation()?this.getPresentor():void 0},updateWhiteBoardInfo:function(e){this._whiteBoard.currentBoard=e.boardId,this._whiteBoard.boards[this._whiteBoard.currentBoard]=e,ZCSmartConferenceUI.checkAndRemoveEditRequestButton()},hasWhiteBoard:function(){return void 0!==this._whiteBoard.currentBoard},getWhiteBoardCreatorId:function(){if(void 0!==this._whiteBoard.currentBoard)return this._whiteBoard.boards[this._whiteBoard.currentBoard].creator},getPresentationOwnerName:function(){var e=this.getPresentor();return Users.getName(e.getId(),e.getName())},getPresentor:function(){return this.getMember(this.getPresenterId())},isWhiteBoardCreator:function(){return void 0!==this._whiteBoard.currentBoard&&this._whiteBoard.boards[this._whiteBoard.currentBoard].creator===$zcg._ZUID},getCurrentWhiteBoardId:function(){return this._whiteBoard.currentBoard},getCurrentWhiteBoard:function(){if(void 0!==this._whiteBoard.currentBoard)return this._whiteBoard.boards[this._whiteBoard.currentBoard]},resetCurrentWhiteBoard:function(){this._whiteBoard.currentBoard=void 0},getReactionsDB:function(){return this._reactionsDB},getPreviousReactionsGroup:function(){return this._previousReactionsGroup},getChatContainer:function(){return Conference.domCache.get("#smartconferencechatsection",!0)},getConferenceWindow:function(){return ZCSmartConferenceUI.getConferenceWindow()}},(ZCSmartConferenceMember=function(e,t,n){this._id=e,this._name=t,this._type=n||ZCSmartConferenceConstants.memberTypes.ACTIVE,this._memberConnectionMode=void 0,this._onDemandMuteDataMode=void 0,this._sessionId=void 0,this._isHost=!1,this._isCohost=!1,this._audioStatus={time:-1,muted:!1,muteStatusSetBy:void 0,restrictionTriggeredTime:-1,unmuteRestricted:!1,restrictionStatusSetBy:void 0},this._videoStatus={muted:!1,time:-1},this._hasRequestedToSpeak=!1,this._avUpStream=void 0,this._audioUpStream=void 0,this._videoUpStream=void 0,this._emailId=void 0,this._designation=void 0,this._department=void 0,this._referrerInfo=void 0,this._pendingRequests={},this._presentationRequests={}}).prototype={getId:function(){return this._id},getName:function(){return this._name},getType:function(){return this._type},getSessionId:function(){return this._sessionId},getAudioUpStream:function(){return this._audioUpStream},getVideoUpStream:function(){return this._videoUpStream},getAVUpStream:function(){return this._avUpStream},getDesignation:function(){return this._designation},getDepartmentName:function(){return this._department},setReferrerInfo:function(e){this._referrerInfo=e},getReferrerInfo:function(){return this._referrerInfo},setPeopleDetails:function(e){this._emailId=e.emailid,this._designation=e.designation,this._department=e.departmentname},setName:function(e){this._name=e},setMemberType:function(e){this._type=e},isSilentConnectionMember:function(){return this._memberConnectionMode===ZCSmartConferenceConstants.memberConnectionMode.SILENT},isOnDemandConnectionMember:function(){return this._memberConnectionMode===ZCSmartConferenceConstants.memberConnectionMode.ON_DEMAND},setMemberConnectionMode:function(e){this._memberConnectionMode=e},getOnDemandMuteDataMode:function(){return this._onDemandMuteDataMode},setOnDemandMuteDataMode:function(e){this._onDemandMuteDataMode=e},setSessionId:function(e){this._sessionId=e},setHostStatus:function(e){this._isHost=e},setAsHost:function(){this._isHost=!0},setSpeakerRequest:function(){this._hasRequestedToSpeak=!0},resetSpeakerRequest:function(){this._hasRequestedToSpeak=!1},setAudioUpStream:function(e){this._audioUpStream=e},setVideoUpStream:function(e){this._videoUpStream=e},setAVUpStream:function(e){this._avUpStream=e},setUpdatedAVStatus:function(){this.setUpdatedAudioStatus(),this.setUpdatedVideoStatus()},setUpdatedAudioStatus:function(){this.handleAVStreamStatus("audio",this._audioStatus.muted,this._audioStatus.time,this._audioStatus.muteStatusSetBy)},setUpdatedVideoStatus:function(){this.handleAVStreamStatus("video",this._videoStatus.muted,this._videoStatus.time,this._videoStatus.muteStatusSetBy)},isHost:function(){return this._isHost},isCohost:function(){return this._isCohost},setCohostStatus:function(e){this._isCohost=e},setAsCohost:function(){this._isCohost=!0},removeFromCohost:function(){this._isCohost=!1},isActiveMember:function(){return this._type===ZCSmartConferenceConstants.memberTypes.ACTIVE},isSilentMember:function(){return this._type===ZCSmartConferenceConstants.memberTypes.SILENT},getMemberType:function(){return this._type},isCurrentUser:function(){return this.getId()===ZCSmartConferenceImpl.getCurrentUserId()},isAudioMuted:function(){return this._audioStatus.muted},getAudioMutedBy:function(){return this._audioStatus.muteStatusSetBy},getAudioUnmuteRestrictedBy:function(){return this._audioStatus.restrictionStatusSetBy},isVideoMuted:function(){return this._videoStatus.muted},isAudioUnmuteRestricted:function(){return this._audioStatus.unmuteRestricted},hasRequestedToSpeak:function(){return this._hasRequestedToSpeak},setPresentationRequest:function(e,t){this._presentationRequests[e]={status:ZCSmartConferenceConstants.requestStates.PENDING,requestedTime:t}},resetPresentationRequest:function(e){delete this._presentationRequests[e]},setPresentationRequestAsApproved:function(e){this._presentationRequests[e]={status:ZCSmartConferenceConstants.requestStates.ACCEPTED}},isPresentationRequestApproved:function(e){return!!this.hasRequestedToPresent(e)&&this._presentationRequests[e].status==ZCSmartConferenceConstants.requestStates.ACCEPTED},resetAllPresentationRequests:function(){this._presentationRequests={}},hasRequestedToPresent:function(e){return e?this._presentationRequests[e]:Object.keys(this._presentationRequests).length},getPresentationRequest:function(e){if(e)return this._presentationRequests[e]},setAudioUnmuteRestrictedStatus:function(e,t,n){this._audioStatus.restrictionTriggeredTime>t||(this._audioStatus.restrictionTriggeredTime=t,this._audioStatus.unmuteRestricted=e,this._audioStatus.restrictionStatusSetBy=n)},isRequestPending:function(e){return this._pendingRequests[e]},setRequestAsPending:function(e){this._pendingRequests[e]=!0},setRequestAsCompleted:function(e){delete this._pendingRequests[e]},setMuteStatus:function(e,t,n,i,r){"audio"===e&&(t&&(this._audioStatus.time=i,this._audioStatus.muted=t,this._audioStatus.muteStatusSetBy=r),this._audioStatus.restrictionTriggeredTime=i,this._audioStatus.unmuteRestricted=n,this._audioStatus.restrictionStatusSetBy=r)},updateAVStreamStatus:function(e){e.audio&&(this._audioStatus.time=e.audio.time,this._audioStatus.muted=e.audio.muted),e.video&&(this._videoStatus.time=e.video.time,this._videoStatus.muted=e.video.muted)},handleAVStreamStatus:function(e,t,n,i){var r=ZCSmartConferenceImpl.getCurrentSession(),o=!1;if("video"===e){if(this._videoStatus.time>n)return;this._videoStatus.time=n,this._videoStatus.muted=t,this._videoStatus.muteStatusSetBy=i;var s=this.getVideoUpStream();if(r){if(o=!0,ZCSmartConferenceUI.updateMutedInfo(r.getUserMediaContainer(this.getId()),this),(c=r.getUserGridMediaContainer(this.getId()))&&c.length&&ZCSmartConferenceUI.updateMutedInfo(c,this),r.isCurrentUser(this.getId())){var a=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();a&&a.length&&ZCSmartConferenceUI.updateMutedInfo(a,this),ZCSmartConferenceImpl.changeAVStatusInSettingsPreview(e,t)}}else r=ZCSmartConferenceImpl.getJoiningSession();if(r){r.getVideoUpStreamConnection();if(s&&t)return r.setVideoUpStream(void 0),this.setVideoUpStream(void 0),WebRTCUserMedia.closeStream(s._getType()),void(o&&ZCSmartConferenceUI.updateConnectionStatus(r))}return t?s&&s._disableVideoTrack():s&&s._enableVideoTrack()}if(!(this._audioStatus.time>n)){this._audioStatus.time=n,this._audioStatus.muted=t,this._audioStatus.muteStatusSetBy=i;var c,d=this.getAudioUpStream();if(r)o=!0,ZCSmartConferenceUI.updateMutedInfo(r.getUserMediaContainer(this.getId()),this),ZCSmartConferenceUI.updateMutedInfoInList(r,this),r.isCurrentUser(this.getId())&&(ZCSmartConferenceUI.updateAudioMutedInfo(r),ZCSmartConferenceImpl.changeAVStatusInSettingsPreview(e,t)),(c=r.getUserGridMediaContainer(this.getId()))&&c.length&&ZCSmartConferenceUI.updateMutedInfo(c,this);else r=ZCSmartConferenceImpl.getJoiningSession();if(r){if(ZCMediaPreferences.isSpeechDetectionAllowedByUser()&&r.isCurrentUser(this.getId()))return void(t?r.detachAudioFromConnection():r.attachAudioInConnection(o));if(d&&t)return r.setAudioUpStream(void 0),this.setAudioUpStream(void 0),void WebRTCUserMedia.closeStream(d._getType())}return d&&d._hasAudioTrack()?t?d._disableAudioTrack():d._enableAudioTrack():void 0}},openWhiteBoard:function(){var e=ZCSmartConferenceUI.getConferenceWindow(),t=ZCSmartConferenceImpl.getCurrentSession();ZCSmartConferenceUI.addAndGetWhiteBoardContainer(e,t)},closeWhiteBoard:function(){var e=ZCSmartConferenceImpl.getCurrentSession();e.resetCurrentWhiteBoard(),ZCSmartConferenceUI.removeWhiteBoardContainer(e)},updateWhiteBoardEditorList:function(){ZCSmartConferenceUI.updateUserInfoInWhiteBoardContainer(ZCSmartConferenceImpl.getCurrentSession())}},(ReactionsDB=function(){this._voteCount={},this._userVotes={},this._isNVFEnabled=!1,this._reactionsCount={},this._userReactions={},this._userGifs={}}).prototype={isNonVerbalFeedbackEnabled:function(){return this._isNVFEnabled},setNonVerbalFeedbackStatus:function(e){e?this._isNVFEnabled=!0:this.clearNonVerbalFeedback()},getVoteCount:function(){return this._voteCount},setVoteCount:function(e){for(var t in e)this._voteCount[t]=e[t]},incrementVoteCount:function(e){void 0!==this._voteCount[e]?this._voteCount[e]++:this._voteCount[e]=1},decrementVoteCount:function(e){void 0!==this._voteCount[e]&&this._voteCount[e]>0?this._voteCount[e]--:this._voteCount[e]=0},getUserVotes:function(){return this._userVotes},getUserVote:function(e){if(this._userVotes)return this._userVotes[e]},getUsersByVoteType:function(e){var t=[];if(this._userVotes){var n=this._userVotes;for(var i in n)ZCSmartConferenceConstants.nvfValueVsType[n[i]]===e&&t.push(i)}return t},setUserVote:function(e,t){t===ZCSmartConferenceConstants.nvfValues.NO_VOTE?delete this._userVotes[e]:this._userVotes[e]=t},setUserVotes:function(e){for(var t in e){var n=e[t];this.setUserVote(t,n)}},clearVoteCountByType:function(e){for(var t in this._voteCount)ZCSmartConferenceConstants.nvfValueVsType[t]===e&&(this._voteCount[t]=0)},clearNonVerbalFeedback:function(){this._voteCount={},this._userVotes={},this._isNVFEnabled=!1},getUserGifObjs:function(){return this._userGifs},getUserGifObj:function(e){if(this._userGifs)return this._userGifs[e]},setUserGif:function(e,t,n){this._userGifs[e]={time:t,url:n}},setUserGifs:function(e){for(var t in e){var n=e[t];this.setUserGif(t,n.time,n.url)}}};var ZCSmartConferenceHandler={};ZCSmartConferenceHandler={unifiedPeerConnectionEvents:{sendOffer:function(e,t,n,i,r,o){if(ZCSmartConferenceImpl.isCurrentSession(e)){ConferenceAPI.sendSDP(e,t,n,i,r,"offer");var s={conferenceId:e,connectionType:t,processType:r,streamType:o,iceCandidate:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendOffer,s);var a=ZCSmartConferenceImpl.getCurrentSession();WebRTCPeerConnectionConstants.isAudioConnection(t)?a.writeToEventsLog(ConferenceLog.constants.eventsLog.sendAudioOffer):WebRTCPeerConnectionConstants.isVideoConnection(t)&&a.writeToEventsLog(ConferenceLog.constants.eventsLog.sendVideoOffer)}},sendAnswer:function(e,t,n,i,r){if(ZCSmartConferenceImpl.isCurrentSession(e)){ConferenceAPI.sendSDP(e,t,n,i,r,"answer");var o={conferenceId:e,connectionType:t,processType:r,iceCandidate:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendAnswer,o),ZCSmartConferenceImpl.pushSendAnswerInEventLog(ZCSmartConferenceImpl.getCurrentSession(),t)}},updateIceCandidates:function(e,t,n,i,r){if(ZCSmartConferenceImpl.isCurrentSession(e)){var o=[];for(var s in n)o.push(n[s].candidate);ConferenceAPI.updateIceCandidates(e,t,void 0,o,i,r);var a={conferenceId:e,connectionType:t,processType:i,iceCandidates:n,isUpStream:r};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.updateIce,a),ZCSmartConferenceImpl.pushUpdateIceCandidatesInEventLog(ZCSmartConferenceImpl.getCurrentSession(),t,r)}},handleConnected:function(e,t,n,i,r,o){if(ZCSmartConferenceImpl.isCurrentSession(e)){var s=ZCSmartConferenceImpl.getCurrentSession();s.setConnectionStatus(t,r,!1);var a=!1;r?(WebRTCUserMedia.isSetBitRateSupported()&&s.setVideoBitRate(),a=!0):(WebRTCPeerConnectionConstants.isAudioConnection(t)&&Conference.notifyDownStreamConnectedForAdhocCall(s),WebRTCPeerConnectionConstants.isVideoConnection(t)&&s.isDownStreamRestrictedToMainSpeakers()&&s.restrictToMainSpeakers(),a=!s.hasAudioUpStreamConnection()&&!s.hasVideoUpStreamConnection(),ZCSmartConferenceUI.getConferenceWindow().removeClass("zc-av-conference-connecting")),a&&s.isCurrentUserHost()&&!s.hasNotifiedStart()&&(ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiCalled),s.setAsNotified(),ConferenceAPI.notifyStart(e,(function(){ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiSuccess)}),(function(){s.resetNotified(),ConferenceLog.writeToLog(ConferenceLog.constants.apiEvents.sendInvitationCardApiFailed)})));var c=void 0,d=void 0,l=void 0;Conference.isStatsEnabled()&&s.getMembersCount()<=ConferenceLog.participantLimitForStats&&(ConferenceLog.networkStats.connectionIds=WebRTCPeerConnectionStats.getConnectionIds("conferences"),ConferenceLog.connectionStats.connectionIds=WebRTCPeerConnectionStats.getConnectionIds("conferences"),d=ConferenceLog.networkStats.callBack,l=ConferenceLog.connectionStats.callBack),Conference.isLowBandwidthModeEnabled()&&(c=function(e,t,n,i){var r=ZCSmartConferenceImpl.getCurrentSession();r&&r.getId()===i.conferenceId&&r.setStatsData(e,t,n,i)});var u=e+"_"+r+"_"+t;WebRTCPeerConnectionStats.initiateGathering(u,"conferences",n,{isUpStream:r,connectionType:t,conferenceId:e,isSSRCBased:!0,statsGatheringIntervalTime:ConferenceLog.statsGatheringIntervalTime},{networkInfoCallBack:d,updateStatsCallBack:l,statsCallBack:c});var f={conferenceId:e,connectionType:t,processType:o,isUpStream:r,streamType:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.connected,f)}},handleTrack:function(e,t,n,i){if(ZCSmartConferenceImpl.isCurrentSession(e)){var r=ZCSmartConferenceImpl.getCurrentSession();"audio"===t.kind?r.setAndPlayAudioStream(i):r.setAndPlayVideoStream(i,n)}},reconnectStream:function(e,t,n,i){if(ZCSmartConferenceImpl.isCurrentSession(e)){ZCSmartConferenceImpl.getCurrentSession().setConnectionStatus(t,i,!0),i||ConferenceAPI.reconnect(e,t);var r={conferenceId:e,connectionType:t,isUpStream:i,streamType:n};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.failed,r)}},handleRenegotiate:function(e,t,n,i){ConferenceAPI.renegotiate(e,n,t)},handleConnectionError:function(e,t){ZCSmartConferenceImpl.checkAndShowUDPBlockedInfo(e,t)}},dcConnectionEvents:{sendOffer:function(e,t,n,i,r,o){if(ZCSmartConferenceImpl.isCurrentSession(e)){ConferenceAPI.sendSDP(e,n,i,r,o,"offer");var s={conferenceId:e,connectionType:n,processType:o,iceCandidate:r,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendOffer,s),ZCSmartConferenceImpl.getCurrentSession().writeToEventsLog(ConferenceLog.constants.eventsLog.sendDCOffer)}},updateIceCandidates:function(e,t,n,i,r){if(ZCSmartConferenceImpl.isCurrentSession(e)){ConferenceAPI.updateIceCandidates(e,n,t,i,r);var o={conferenceId:e,connectionType:n,processType:r,iceCandidates:i,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.updateIce,o),ZCSmartConferenceImpl.getCurrentSession().writeToEventsLog(ConferenceLog.constants.eventsLog.sendDCIceCandidates)}},handleConnected:function(e,t,n){if(ZCSmartConferenceImpl.isCurrentSession(e)){ZCSmartConferenceImpl.getCurrentSession().setConnectionStatus(n,!0,!1);var i={conferenceId:e,connectionType:n,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.connected,i)}},reconnectStream:function(e,t,n){if(ZCSmartConferenceImpl.isCurrentSession(e)){ZCSmartConferenceImpl.getCurrentSession().setConnectionStatus(n,!0,!0);var i={conferenceId:e,connectionType:n,hostId:t};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.failed,i)}},handleData:function(e,t,n){if(ZCSmartConferenceImpl.isCurrentSession(t)){var i=ZCSmartConferenceImpl.getCurrentSession();if(e.type===ZCSmartConferenceConstants.dcMtypes.VIEW_CHANGE)i.setDataChannelData(e),i.updateUserInfoFromServer(),i.addMediaContainersForReceivedStreamIds(),ZCSmartConferenceUI.handleContainerVisibility();else if(e.type===ZCSmartConferenceConstants.dcMtypes.CURRENT_SPEAKER){var r=e.syncData,o=JSON.parse(r.speakers).shift();i.setCurrentSpeakerId(o),ZCSmartConferenceUI.setCurrentSpeakerIndicatorInStage(i)}else if(e.type===ZCSmartConferenceConstants.dcMtypes.ACTIVE_SPEAKER)i.setMainSpeakerData(e),ZCSmartConferenceUI.handleContainerVisibility();else if(e.type===ZCSmartConferenceConstants.dcMtypes.FOCUSED_MODE)i.handleFocusedUserStreamMute(e);else if(e.type===ZCSmartConferenceConstants.dcMtypes.CUSTOM)ZCSmartConferenceHandler.mexEvents[e.syncData.operation](e.syncData);else if(e.type===ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_RECEIVE){"grid_page_info"===(s=e.syncData.opr)?ZCSmartConferenceHandler.mexEvents.updateVideoGridDetails(e.syncData):"showvideo"===s&&ZCSmartConferenceHandler.mexEvents.updateVideoGridStreamRTPData(e.syncData)}else if(e.type===ZCSmartConferenceConstants.dcMtypes.MEDIA_SERVER_DATA_SHOW_GRID){var s;"showvideo"===(s=e.syncData.opr)&&ZCSmartConferenceHandler.mexEvents.updateVideoGridStreamRTPData(e.syncData)}}},handleSendDataChannelOpen:function(e,t){if(ZCSmartConferenceImpl.isCurrentSession(e)){var n=ZCSmartConferenceImpl.getCurrentSession();if(n.isDownStreamRestrictedToMainSpeakers()&&n.restrictToMainSpeakers(),n.isInGridLayout()){var i=n.getCurrentVideoGridPageInView();n.switchGridPageThroughDC(i,i)}}},handleConnectionError:function(e,t){ZCSmartConferenceImpl.checkAndShowUDPBlockedInfo(e,t)}},peerConnectionEvents:{sendOffer:function(e,t,n,i,r,o){if(ZCSmartConferenceImpl.isCurrentSession(e)){var s=ZCSmartConferenceImpl.getCurrentSession();WebRTCPeerConnectionConstants.isInit(r)?ConferenceAPI.startScreenShare(e,n,i,s.getSecondarySessionId()):ConferenceAPI.sendSDP(e,t,n,i,r,"offer",void 0,s.getSecondarySessionId());var a={conferenceId:e,connectionType:t,processType:r,streamType:o,iceCandidate:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendOffer,a)}},sendAnswer:function(e,t,n,i,r,o){if(ZCSmartConferenceImpl.isCurrentSession(e)){var s=ZCSmartConferenceImpl.getCurrentSession();ConferenceAPI.sendSDP(e,t,n,i,r,"answer",o,s.getSecondarySessionId());var a={conferenceId:e,connectionType:t,processType:r,iceCandidate:i,hostId:o};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.sendAnswer,a),ZCSmartConferenceImpl.pushSendAnswerInEventLog(s,t)}},updateIceCandidates:function(e,t,n,i,r,o){if(ZCSmartConferenceImpl.isCurrentSession(e)){var s=ZCSmartConferenceImpl.getCurrentSession();ConferenceAPI.updateIceCandidates(e,t,n,i,r,void 0,s.getSecondarySessionId());var a={conferenceId:e,connectionType:t,processType:r,iceCandidates:i,hostId:n};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.updateIce,a),ZCSmartConferenceImpl.pushUpdateIceCandidatesInEventLog(s,t,o)}},handleConnected:function(e,t,n,i,r,o,s){if(ZCSmartConferenceImpl.isCurrentSession(e)){ZCSmartConferenceImpl.getCurrentSession().setConnectionStatus(t,o,!1);var a={conferenceId:e,connectionType:t,processType:s,isUpStream:o,streamType:r,hostId:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.connected,a)}},handlePlay:function(e,t,n,i,r){ZCSmartConferenceImpl.isCurrentSession(conferenceId)&&ZCSmartConferenceImpl.getCurrentSession().setConnectionStatus(e,!1,!1)},handleTrack:function(e,t,n,i,r){ZCSmartConferenceImpl.isCurrentSession(e)&&ZCSmartConferenceImpl.getCurrentSession().setAndPlayScreenStream(i,r)},reconnectStream:function(e,t,n,i,r){ZCSmartConferenceImpl.getCurrentSession().setConnectionStatus(t,r,!0),r||ConferenceAPI.reconnect(e,t,n);var o={conferenceId:e,connectionType:t,isUpStream:r,streamType:i};ConferenceLog.writeToLog(ConferenceLog.constants.webRTCEvents.connectionState.failed,o)}},wmsEvents:{handleConferenceStart:function(e){if(ZCSmartConferenceImpl.hasOutgoingSession()){var t=ZCSmartConferenceImpl.getOutgoingSession().getSessionKey();if($WC.Util.isEmpty(t)||t===e.session_key){var n=new ZCSmartConferenceSession(e);n.setMediaServerIp(e.mediaServerIp),n.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedConferenceStart),e.videoGridStreamIds&&(n.setVideoGridStreamIds(e.videoGridStreamIds),e.videoGridPageDetails&&n.setVideoGridLayoutDetails(e.videoGridPageDetails)),ZCSmartConferenceImpl.convertOutgoingToCurrentSession(n),e.configurations&&ConferenceHandler.wmsEvents.updateConfigurations({conferenceId:e.conferenceId,data:e.configurations}),MediaManager.updateGroupCallOptionsInChatHeader(n.getChatId()),e.invitedMembersObject&&n.setInvitedMembersObject(e.invitedMembersObject),e.spotLightMode&&(e.spotLightMode.enabled?n.setSpotLightAsEnabled(e.spotLightMode.userIds,e.spotLightMode.time,e.spotLightMode.actionUserId,e.spotLightMode.restrictSpeakersAudio,e.spotLightMode.restrictSpeakersVideo):n.setSpotLightAsDisabled(e.spotLightMode.time,e.spotLightMode.actionUserId)),n.initDataChannelConnection(),Conference.isDefaultGridViewEnabled()&&n.getConfigurations().isGridViewAccessible(n)&&ZCSmartConferenceUI.switchToVideoGridLayout();var i=e.offerDetails;i&&(i.audio&&(n.setAudioStreamIds(i.audio.streamIds),n.storeRemoteOfferDetails(i.audio.offerSdp,i.audio.remoteIceCandidates,WebRTCPeerConnectionConstants.connectionTypes.AUDIO)),i.video&&(n.setVideoStreamIds(i.video.streamIds),n.storeRemoteOfferDetails(i.video.offerSdp,i.video.remoteIceCandidates,WebRTCPeerConnectionConstants.connectionTypes.VIDEO))),n.checkAndInitUpstream(),n.checkAndConnectAudioDownstream(),n.checkAndConnectVideoDownstream(),"undefined"!=typeof RemoteWork&&RemoteWork.isInRemoteWorkView()&&RemoteWork.syncDetailsUI()}}else ConferenceLog.writeToLog(ConferenceLog.constants.errorEvents.sessionClosedBeforeStart)},handleOfferSDP:function(e){if(ZCSmartConferenceImpl.isCurrentSession(e.conferenceId)){var t=WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType),n=ZCSmartConferenceImpl.getCurrentSession();if(!t||n.isDataChannelInitiated()){n.setTurnServers(e.turnServers),n.setTurnUserName(e.turnUserName),n.setTurnPassWord(e.turnCredential),t||n.setMediaServerIp(e.mediaServerIp),n.setEncryptedResourceId(e.encryptedResourceId),n.setNativeWigetId(e.nativeWidgetMessageId),n.setPublicUrl(e.public_url),n.setIsThreadsAllowed(e.threads_allowed),e.scope&&n.setThreadChatId(e.scope.threadChatId),e.configurations&&ConferenceHandler.wmsEvents.updateConfigurations({conferenceId:e.conferenceId,data:e.configurations}),MediaManager.updateGroupCallOptionsInChatHeader(n.getChatId()),e.invitedMembersObject&&n.setInvitedMembersObject(e.invitedMembersObject),e.focusedMode&&(e.focusedMode.enabled?n.setFocusedModeAsEnabled(e.focusedMode.userIds,e.focusedMode.time,e.focusedMode.actionUserId):n.setFocusedModeAsDisabled(e.focusedMode.time,e.focusedMode.actionUserId)),e.spotLightMode&&(e.spotLightMode.enabled?n.setSpotLightAsEnabled(e.spotLightMode.userIds,e.spotLightMode.time,e.spotLightMode.actionUserId,e.spotLightMode.restrictSpeakersAudio,e.spotLightMode.restrictSpeakersVideo):n.setSpotLightAsDisabled(e.spotLightMode.time,e.spotLightMode.actionUserId));var i=e.members;for(var r in i){var o=i[r];n.addMember(r,o.name,o.memberType,o.referrerInfo);var s=n.getMember(r);o.memberConnectionMode&&s.setMemberConnectionMode(o.memberConnectionMode),o.hasRequestedToSpeak&&s.setSpeakerRequest(),s.updateAVStreamStatus(o),n.isHost(r)?ZCSmartConferenceUI.updateMutedInfoInList(n,s):ZCSmartConferenceUI.addUserInList(n,r)}if(e.cohostsDetails&&n.updateCohostDetails(e.cohostsDetails.userIds,e.cohostsDetails.time,!1),!n.hasPresentation()&&e.ppt){var a=new Presentation(e.ppt);n.setPresentation(a),a.open()}if(e.audioMuteAll){var c=e.audioMuteAll;void 0===c.actionUserId&&(c.actionUserId=n.getHostId()),n.setMuteAllStatusForParticipants("audio",c.muted,c.time,c.actionUserId,c.excludedIds,c.unmuteRestricted,!0,!1)}if(e.isForceMuted){var d=n.getCurrentMember();d.setAudioUnmuteRestrictedStatus(e.unmuteRestricted,e.messageTime),d.handleAVStreamStatus("audio",!0,e.messageTime),ZCSmartConferenceUI.setMicMutedOption(),ZCSmartConferenceUI.addUnmuteRestrictedHelpTip(n)}if(e.video_quality===ZCMediaConstants.videoQuality.HD&&n.handleHDVideoState(!0),e.memberType&&(n.setMemberType(e.memberType),ZCSmartConferenceUI.modifyUserInList(n,n.getCurrentUserId())),e.memberConnectionMode&&(n.setMemberConnectionMode(e.memberConnectionMode),e.muteDataMode&&n.getCurrentMember().setOnDemandMuteDataMode(e.muteDataMode)),e.speakerCount&&n.setSpeakerCount(e.speakerCount),e.mainSpeakerCount&&n.setMainSpeakerCount(e.mainSpeakerCount),e.videoGridStreamIds&&(n.setVideoGridStreamIds(e.videoGridStreamIds),e.videoGridPageDetails&&n.setVideoGridLayoutDetails(e.videoGridPageDetails)),e.special_reactions&&(e.special_reactions.conferenceId=n.getId(),ZCSmartConferenceImpl.handleSpecialReactionData(e.special_reactions)),ZCSmartConferenceUI.updateBottomPaneList(),ZCSmartConferenceUI.updateSessionOptions(n),WmsImpl.isGuestConferenceUser()&&($zcg.inviteeInfo={name:n.getHost().getName()}),n.initDataChannelConnection(),Conference.isDefaultGridViewEnabled()&&n.getConfigurations().isGridViewAccessible(n)&&n.getActiveMembersCount()<=20&&ZCSmartConferenceUI.switchToVideoGridLayout(),n.checkAndInitUpstream(),t)n.isPresentationStream()||n.connectScreenDownStream(e),n.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedScreenOffer);else{var l=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(l)?(n.setAudioStreamIds(e.streamIds),n.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedAudioOffer)):WebRTCPeerConnectionConstants.isVideoConnection(l)&&(n.setVideoStreamIds(e.streamIds),n.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedVideoOffer)),n.connectDownstream(l,e.joinedTime,e.offerSdp,e.remoteIceCandidates)}var u=n.getInitialScreenOfferMsgObj();!t&&u&&(n.clearInitialScreenOfferMsgObj(),this.handleOfferSDP(u))}else n.setInitialScreenOfferMsgObj(e)}},handleAnswerSDP:function(e){if(ZCSmartConferenceImpl.isCurrentSession(e.conferenceId)){var t=ZCSmartConferenceImpl.getCurrentSession();if(WebRTCPeerConnectionConstants.isDataChannelConnection(e.connectionType)||WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType)||t.setMediaServerIp(e.mediaServerIp),WebRTCPeerConnectionConstants.isDataChannelConnection(e.connectionType))t.updateDCConnectionLocalIceCandidates(),t.setDCConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates),t.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedDCAnswer);else if(WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType))t.updateScreenConnectionLocalIceCandidates(),t.setScreenConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates);else{var n=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(n)?(t.updateAudioConnectionLocalIceCandidates(),t.setAudioConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates),t.isHost(t.getCurrentUserId())&&t.checkAndConnectAudioDownstream(),t.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedAudioAnswer)):WebRTCPeerConnectionConstants.isVideoConnection(n)&&(t.updateVideoConnectionLocalIceCandidates(),t.setVideoConnectionRemoteDescription("answer",e.answerSdp,e.remoteIceCandidates),t.isHost(t.getCurrentUserId())&&t.checkAndConnectVideoDownstream(),t.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedVideoAnswer))}}},setRemoteIceCandidates:function(e){if(ZCSmartConferenceImpl.isCurrentSession(e.conferenceId)){var t=ZCSmartConferenceImpl.getCurrentSession();if(WebRTCPeerConnectionConstants.isScreenConnection(e.connectionType)){t.getScreenSharerId()===e.connectionHostId&&(t.setScreenDownStreamConnectionRemoteIceCandidates(),t.updateScreenDownStreamConnectionLocalIceCandidates(),t.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedScreenAnswerCallback))}else{var n=ConferenceImpl.dataModeVsConnectionType[e.connectionDataMode];WebRTCPeerConnectionConstants.isAudioConnection(n)?(t.setAudioDownStreamConnectionRemoteIceCandidates(),t.updateAudioDownStreamConnectionLocalIceCandidates(),t.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedAudioAnswerCallback)):WebRTCPeerConnectionConstants.isVideoConnection(n)&&(t.setVideoDownStreamConnectionRemoteIceCandidates(),t.updateVideoDownStreamConnectionLocalIceCandidates(),t.writeToEventsLog(ConferenceLog.constants.eventsLog.receivedVideoAnswerCallback))}}},handleDeviceAdd:function(e){if(ZCSmartConferenceImpl.isCurrentSession(e.conferenceId)){var t=ZCSmartConferenceImpl.getCurrentSession();t.setTurnServers(e.turnServers),t.setTurnUserName(e.turnUserName),t.setTurnPassWord(e.turnCredential),!Conference.isAddDeviceEnabled()||t.isPrimarySession()||t.initScreenUpStream(t.getScreenUpStream())}},handleReinit:function(e){if(ZCSmartConferenceImpl.isCurrentSession(e.conferenceId)){var t=ZCSmartConferenceImpl.getCurrentSession();if(e.upStream){var n=e.upStream;n.audio&&t.reinitAudioUpStreamConnection(),n.video&&t.reinitVideoUpStreamConnection(),n.screen&&t.reinitScreenUpStream()}}},handleScreenShareEnd:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getScreenSharerId();if(e.screenSharerId===n)if(e.screenSharerId===t.getCurrentUserId()){if(ZCSmartConferenceUI.resetScreenShareOption(),t.disconnectScreenUpStream(),void 0!==e.actionUserId&&e.actionUserId!==e.screenSharerId){var i=Resource.getRealValue(t.isHost(e.actionUserId)?"media.host":"cc.cohost").toLowerCase();return void(e.reason===ZCMediaConstants.screenShareEndReasons.USER_REMOVED_FROM_SPOTLIGHT?UI.updateBanner(Resource.getRealValue("avcliq.conf.ssended.removed",[i]),2e3,!0):UI.updateBanner(Resource.getRealValue("avcliq.conf.ssended",[i]),2e3,!0))}if(e.reason===ZCMediaConstants.screenShareEndReasons.RESTRICTED_BY_SPOTLIGHT)return void(t.hasHostPermission()?ZCSmartConferenceUI.showSetSpotlightAndScreenShareDialog():ZCSmartConferenceUI.showInvalidUserInitScreenShareDialog())}else t.disconnectScreenDownStream(e.screenSharerId)}},handleParticipantLimitExceeded:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId&&WmsImpl.getSid()===e.sessionId)if(e.switchToViewer){var n=function(){ZCSmartConferenceImpl.endConference(e.conferenceId,!1),setTimeout((function(){"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleLeft(e.conferenceId)}),2e3)};ConferenceImpl.checkAndJoinStreaming(e.streamingId,void 0,n,n,!0)}else ZCSmartConferenceImpl.endConference(e.conferenceId,!1),UI.updateBanner(Resource.getRealValue("media.room.full"),2e3,!0)},handleScreenShareMaxLimit:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&t.isScreenSharer()&&(ZCSmartConferenceUI.resetScreenShareOption(),t.disconnectScreenUpStream())},handleUserIn:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){t.addMember(e.userId,e.userName,e.memberType,e.referrerInfo);var n=t.getMember(e.userId);e.memberConnectionMode&&n.setMemberConnectionMode(e.memberConnectionMode);var i=n.isActiveMember(),r=t.isCurrentUser(e.userId);e.audio?(n.handleAVStreamStatus("audio",e.audio.muted,e.audio.time),n.setAudioUnmuteRestrictedStatus(e.audio.unmuteRestricted,e.audio.time)):i&&!r&&n.handleAVStreamStatus("audio",!1,e.messageTime),e.video?n.handleAVStreamStatus("video",e.video.muted,e.video.time):i&&!r&&t.isVideoConference()&&n.handleAVStreamStatus("video",!1,e.messageTime),e.cohostsDetails&&ZCSmartConferenceImpl.updateUserCohostState(t,e.userId),ZCSmartConferenceUI.addUserInList(t,e.userId),ZCSmartConferenceUI.updateBottomPaneList();var o=t.getUserMediaContainer(e.userId);o&&o.length&&ZCSmartConferenceUI.updateUserInfo(o,n,t);var s=t.getUserGridMediaContainer(e.userId);s&&s.length&&ZCSmartConferenceUI.updateUserInfo(s,n,t),ZCSmartConferenceUI.updateUserInfoInWhiteBoardContainer(t),t.isSpotLightEnabled()&&(t.isUserInSpotLight(e.userId)||t.isSpeakersVideoAllowedInSpotLight()&&t.isUserIdInStageViewData(e.userId))&&ZCSmartConferenceUI.handleContainerVisibility(),t.handleRingingState(e.userId,void 0,e.userName,!0)}},handleUserOut:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=ConferenceImpl.getCurrentUserId();if(e.userId!==n||e.sessionId&&!WmsImpl.isSameBrowser(e.sessionId))ZCSmartConferenceUI.handleReplacedHostCallback(t,e.assignedHostId,e.previousHostId,e.messageTime),t.removeMember(e.userId),t.isSpotLightEnabled()&&t.isUserInSpotLight(e.userId)&&ZCSmartConferenceUI.handleContainerVisibility(),ZCSmartConferenceUI.removeUserFromList(t,e.userId),void 0!==e.special_reactions&&(e.special_reactions.conferenceId=t.getId(),ZCSmartConferenceImpl.handleSpecialReactionData(e.special_reactions));else{var i=void 0;e.actionUserId&&e.actionUserId!==n?i=ZCMediaConstants.endCases.kickedOut:e.previousHostId&&e.previousHostId===n&&(i=ZCMediaConstants.endCases.assignHostAndLeave),ZCSmartConferenceImpl.endConference(e.conferenceId,!1,i)}ZCSmartConferenceUI.updateUserInfoInWhiteBoardContainer(t),ZCSmartConferenceImpl.handleRingingSoundForCurrentUser(!0)}},handleReplacedHost:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&ZCSmartConferenceUI.handleReplacedHostCallback(t,e.assignedHostId,e.previousHostId,e.messageTime)},handleConferenceEnd:function(e){ZCSmartConferenceImpl.endConference(e.conferenceId,!1)},handleInvalidParticipant:function(e){WmsImpl.getSid()===e.sessionId&&ZCSmartConferenceImpl.endConference(e.conferenceId,!1)},handleConferenceLimitForChat:function(e){WmsImpl.getSid()===e.sessionId&&ZCSmartConferenceImpl.endConference(e.conferenceId,!1)},handleSessionExpired:function(e){ZCSmartConferenceImpl.endConference(e.conferenceId,!1)},updateUserConnectionMode:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getMember(e.userId);n&&(n.setMemberConnectionMode(e.memberConnectionMode),t.isCurrentUser(e.userId)&&(n.isOnDemandConnectionMember()?"audio"===e.muteDataMode?ZCSmartConferenceHandler.UIEvents.muteAudio():"audiovideo"===e.muteDataMode&&(ZCSmartConferenceHandler.UIEvents.muteAudio(),ZCSmartConferenceHandler.UIEvents.muteVideo()):n.isSilentConnectionMember()&&(e.actionUserId?(t.switchToSilentMember(),ZCSmartConferenceUI.showSwitchedToSilentInfo()):n.isCohost()||n.isSilentMember()||t.isScreenSharer()||ConferenceAPI.sendAck(t.getId(),ZCSmartConferenceConstants.ackTypes.SWITCHED_TO_SILENT,void 0,(function(){t.switchToSilentMember()})))))}},handleSwitchedMemberType:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getMember(e.userId);n&&(n.setMemberType(e.memberType),ZCSmartConferenceUI.modifyUserInList(t,n.getId()),ZCSmartConferenceUI.updateBottomPaneList())}},handleNewSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getMember(e.requesterId);n&&(n.setSpeakerRequest(),n.setSessionId(e.requesterSessionId),ZCSmartConferenceUI.modifyUserInList(t,n.getId()))}},handleCancelledSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getMember(e.cancelledUserId);n&&(n.resetSpeakerRequest(),ZCSmartConferenceUI.modifyUserInList(t,n.getId()))}},handleDeniedSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getMember(e.deniedUserId);if(n&&(n.resetSpeakerRequest(),ZCSmartConferenceUI.modifyUserInList(t,n.getId())),t.isCurrentUser(n.getId()))$('[smartconferencebutton][purpose="dropSpeakerRequest"]').removeClass("smartconf-requested").attr("purpose","raiseSpeakerRequest")}},handleApprovedSpeakerRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getMember(e.approvedUserId);if(n&&(n.setMemberType(ZCSmartConferenceConstants.memberTypes.ACTIVE),e.memberConnectionMode&&n.setMemberConnectionMode(e.memberConnectionMode),n.resetSpeakerRequest(),ZCSmartConferenceUI.modifyUserInList(t,n.getId()),ZCSmartConferenceUI.updateBottomPaneList()),t.isCurrentUser(n.getId()))$('[smartconferencebutton][purpose="dropSpeakerRequest"]').removeClass("smartconf-requested").attr("purpose","raiseSpeakerRequest"),t.checkAndInitUpstream(),ZCSmartConferenceUI.updateSessionOptions(t)}},handleFocusViewEnabled:function(e){ZCSmartConferenceImpl.getCurrentSession().setFocusedModeAsEnabled(e.focusedUserIds,e.time,e.actionUserId),ZCSmartConferenceUI.handleContainerVisibility()},handleFocusViewDisabled:function(e){ZCSmartConferenceImpl.getCurrentSession().setFocusedModeAsDisabled(e.time,e.actionUserId),ZCSmartConferenceUI.handleContainerVisibility()},handleMuteAllStatus:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){var n=e.audio?"audio":"video";t.setMuteAllStatusForParticipants(n,e[n].muted,e.time,e.actionUserId,e.excludedIds,e.unmuteRestricted,!1,!0)}},handleUnmuteRestrictionStatus:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&e.audio&&t.setAudioUnmuteRestrictedStatusForParticipants(e.audio.unmuteRestricted,e.time,e.actionUserId,!0)},handleAVStatus:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t&&t.getId()===e.conferenceId){var n=t.getCurrentUserId(),i=n===e.actionUserId,r=e.userIds.split(",");for(var o in r){var s=r[o],a=n===s;if(!a||!i){var c=t.getMember(s);if(c){var d=c.isAudioUnmuteRestricted(),l=c.isAudioMuted(),u="video";e.audio&&(u="audio",void 0!==e.unmuteRestricted&&t.setUserAudioUnmuteRestrictedStatus(s,e.unmuteRestricted,e.time,e.actionUserId)),e.actionUserId===s||e[u].muted?(n===s&&ZCSmartConferenceUI.setMicMutedOption(),c.handleAVStreamStatus(u,e[u].muted,e.time,e.actionUserId)):ZCSmartConferenceUI.updateMutedInfoInList(t,c),a&&void 0!==e.unmuteRestricted&&ZCSmartConferenceUI.updateMuteRestrictionStatus(l,d,t,c,e.actionUserId,e[u].muted,!0,!0)}}}t.hasHostPermission()&&ZCSmartConferenceUI.setParticipantMuteAllOption(t)}},startRinging:function(e){for(var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=t&&t.getId()===e.conferenceId,i=e.target,r=0;r<i.length;r++){var o=i[r],s=o.id;if(WmsImpl.isLocalUser(s)){if(n)continue;ZCSmartConferenceImpl.addIncomingCallNetwokPredictor(e.conferenceId),ConferenceUI.showRingingUI(e.conferenceId,e.conferenceType,e.title,e.conferenceHostId,e.conferenceHostName,e.adhocCallDetails)}else n&&t.handleRingingState(s,MediaCallConstants.ringingStates.ringing,o.name)}},stopRinging:function(e){for(var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=t&&t.getId()===e.conferenceId,i=e.target,r=0;r<i.length;r++){var o=i[r],s=o.id;WmsImpl.isLocalUser(s)?ConferenceUI.removeRingingUI(e.conferenceId):n&&t.handleRingingState(s,MediaCallConstants.ringingStates.cancel_ringing,o.name)}},declineCall:function(e){var t=ZCSmartConferenceImpl.getCurrentSession(),n=t&&t.getId()===e.conferenceId,i=e.target[0].id;WmsImpl.isLocalUser(i)?ConferenceUI.removeRingingUI(e.conferenceId):n&&t.handleRingingState(i,MediaCallConstants.ringingStates.declined)},startRingingAll:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=e.excluded_ids;if(ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.RING_ALL),t&&t.getId()===e.conferenceId||-1!==n.indexOf(ZCSmartConferenceImpl.getCurrentUserId())){if(t&&t.getId()===e.conferenceId){var i=$("#yetToJoinSection").find("[ringAllButton]");if("startRingingForAll"===i.attr("purpose")&&i.replaceWith(ZCSmartConferenceTemplates.getCancelRingAllOption("smartconferencebutton")),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout),ZCSmartConferenceUI.clearRingAllTimeout=setTimeout((function(){$("#yetToJoinSection").find("[ringAllButton]").replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton")),ZCSmartConferenceUI.clearRingAllTimeout=void 0}),MediaCallConstants.callRingingTimeLimit),t.hasChatId()){var r=t.getChatId();Participants.getIDsAfterPopulated(r,(function(){for(var e=Participants.get(r).recipants,i=0;i<e.length;i++){var o=e[i],s=MediaCallConstants.ringingStates.cancel_ringing;-1===n.indexOf(o)&&(s=MediaCallConstants.ringingStates.ringing),t.handleRingingState(o,s,void 0,!1,!0)}}))}for(var o=t.getInvitedMemberIds(),s=0;s<o.length;s++){var a=o[s],c=MediaCallConstants.ringingStates.cancel_ringing;-1===n.indexOf(a)&&(c=MediaCallConstants.ringingStates.ringing),t.handleRingingState(a,c,void 0,!1,!0)}}}else{if(e.adhocCallDetails&&MediaCallImpl.isCurrentUserParticipantOfAdhocCall(e.adhocCallDetails))return void(MediaCallImpl.canPerformSilentJoin(e.adhocCallDetails)&&Conference.join(e.conferenceId,ZCMediaConstants.triggerSource.CONVERTED_CALL));ZCSmartConferenceImpl.addIncomingCallNetwokPredictor(e.conferenceId),ConferenceUI.showRingingUI(e.conferenceId,e.conferenceType,e.title,e.conferenceHostId,e.conferenceHostName)}},stopRingingAll:function(e){ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.STOP_RING_ALL);var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t){if(t.getId()===e.conferenceId){ConferenceUI.removeRingingUI(e.conferenceId);var n=$("#yetToJoinSection").find("[ringAllButton]");if("startRingingForAll"!==n.attr("purpose")&&(n.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton")),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout),ZCSmartConferenceUI.clearRingAllTimeout=void 0),t.hasChatId()){var i=t.getChatId();Participants.getIDsAfterPopulated(i,(function(){for(var e=Participants.get(i).recipants,n=0;n<e.length;n++){var r=e[n];t.handleRingingState(r,MediaCallConstants.ringingStates.cancel_ringing)}}))}for(var r=t.getInvitedMemberIds(),o=0;o<r.length;o++){var s=r[o];t.handleRingingState(s,MediaCallConstants.ringingStates.cancel_ringing)}}}else ConferenceUI.removeRingingUI(e.conferenceId)},updateInvitedMembers:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&t.getId()===e.conferenceId&&(t.updateInvitedMembers(e.invitedMembersObject),t.hasPopulatedPendingUsersList()&&(ZCSmartConferenceUI.populateYetToJoinList(t,t.getInvitedMemberIds()),ZCSmartConferenceUI.handleRingingStatusCTA(ZCSmartConferenceConstants.ringBannerCases.PARTICIPANT_UPDATE),ZCSmartConferenceUI.checkAndShowRhsSearch(t)))},setChatId:function(e){let t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=void 0!==t&&t.getId()==e.conferenceId,i=!1;if(n){let n=e.chatId||e.chatDetails.chid;Config.isConferenceChatSwitcherEnabled()&&Conference.isCurrentUserGuest()&&!ChatUI.isExist(n)&&(GuestChatUtils.setChatId(n),DummyCwinUtils.replaceDummyCwinWithNormalCwin(t.getActiveChatId(),e.chatDetails),i=!0),void 0!==e.chatDetails&&Chat.isThreadChat(e.chatDetails)&&t.setThreadChatId(n),Conference.isCurrentUserGuest()||ChatUI.isExist(n)||(t.setActiveChatId(n),void 0!==t.getDummyThreadChatId()?DummyCwinUtils.replaceDummyCwinWithNormalCwin(t.getDummyThreadChatId(),e.chatDetails):void 0!==t.getDummyChatId()&&DummyCwinUtils.replaceDummyCwinWithNormalCwin(t.getDummyChatId(),e.chatDetails))}let r=t instanceof ZCSmartConferenceSession;!n||Conference.isCurrentUserGuest()||t.hasChatId()?Conference.isCurrentUserGuest()&&(Conference.setGuestChat(e),n&&(t.setChatId(e.chatId),r?ZCSmartConferenceUI.showRhsChatOption():ConferenceUI.showRhsChatOption()),GuestChatView.loadChat($zcg.guestChatDetails,i)):(t.setChatId(e.chatId),r?(ZCSmartConferenceUI.showRhsChatOption(),ZCSmartConferenceUI.isChatInView()&&ZCSmartConferenceHandler.UIEvents.openChatInRHS()):(ConferenceUI.showRhsChatOption(),ConferenceUI.isChatInView()&&ConferenceHandler.UIEvents.openChatInRHS()))},handleLastChunk:function(e){"undefined"!=typeof PrimeTimeHandler&&(e.primeTimeId=e.conferenceId,PrimeTimeHandler.wmsEvents[e.opr](e))},handleRefreshMpd:function(e){e.primeTimeId=e.conferenceId,PrimeTimeHandler.wmsEvents[e.opr](e)},updateStreamingViewerCount:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==t&&t.getId()===e.conferenceId&&(t.setViewersCount(e.viewersCount),ZCSmartConferenceUI.updateViewersCount())},handleModifiedCohosts:function(e){ZCSmartConferenceImpl.getCurrentSession().updateCohostDetails(e.cohostUserIds,e.time,!0)},handleUserInfo:function(e){let t=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==t&&t.getId()===e.conferenceId&&ConferenceAPI.updateUserInfo(e.conferenceId)},setStreamingId:function(e){let t=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==t&&t.getId()===e.conferenceId&&ZCSmartConferenceImpl.handleStartStreaming(t,e.streamingId)},removeStreamingId:function(e){let t=ZCSmartConferenceImpl.getCurrentActiveSession();void 0!==t&&t.getId()===e.conferenceId&&(ZCSmartConferenceImpl.handleStopStreaming(t),e.userId!=ConferenceImpl.getCurrentUserId()&&UI.updateBanner(I18N("cs.stopped.user",[$WC.$CUtil.processXSS(e.userName)]),2e3,!1))}},mexEvents:{handleReaction:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();t&&ZCSmartConferenceUI.showReaction(t,e)},handleRecording:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&e&&e.userId!=ConferenceImpl.getCurrentUserId()&&(e.customData&&e.customData.recording_index?(t.setRecordingReferenceIndex(e.customData.recording_index),t instanceof ConferenceSession?ConferenceUI.showRecordingIndication($("#conferencewindow, #conferenceminimizedwindow")):ConferenceUI.showRecordingIndication(ZCSmartConferenceUI.getConferenceWindow()),t.hasSubscribed()||t.isCurrentUserHost()?UI.updateBanner(I18N("conference.recording.started.info",[$WC.$CUtil.processXSS(e.userName)]),2e3,!1):(ConferenceHandler.UIEvents.showRecordingAlertToAttendees(Users.getName(t.getHostId(),t.getHostName())),ZCSmartConferenceUI.recordingConsentTimer=setTimeout(()=>{Sound.play("recordingConsent")},5e3)),t.isSilentConference()&&AdhocCallBridge.publish(t,"handleRecordingState",{associatedSessionId:t.getAdhocCallId(),referenceIndex:e.customData.recording_index,state:"start"})):(t.setRecordingReferenceIndex(void 0),t instanceof ConferenceSession?ConferenceUI.hideRecordingIndication($("#conferencewindow, #conferenceminimizedwindow")):ConferenceUI.hideRecordingIndication(ZCSmartConferenceUI.getConferenceWindow()),$WC.$Dlg.destroy("recording_alert"),UI.updateBanner(I18N("conference.recording.stopped.info",[$WC.$CUtil.processXSS(e.userName)]),2e3,!1),t.isSilentConference()&&AdhocCallBridge.publish(t,"handleRecordingState",{associatedSessionId:t.getAdhocCallId(),state:"stop"})))},updateVideoGridDetails:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){var n={},i=e.page_details,r=0;for(var o in i){var s=i[o],a={};for(var c in s){var d=s[c];a[c]=d}n[o]=a,r++}var l={count:r,pages:n};t.setVideoGridLayoutDetails(l),ZCSmartConferenceUI.updateVideoGridPages(t)}},updateVideoGridStreamRTPData:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t)if(void 0!==e.timestamp_info)for(var n in e.timestamp_info)t.setVideoGridStreamIdRTPData(n,e.timestamp_info[n],e.pageno);else t.setVideoGridStreamIdRTPData(e.msid,e.timestamp,e.pageno)}},UIEvents:{openChatInRHS:function(e,t){ZCSmartConferenceUI.openChatInRHS()},openNotesInRHS:function(){var e=function(e,t){var n=$("#conference-notes-iframe"),i=function(){NotebookIntegration.setEntityId(n,e.getId()),NotebookIntegration.setDefaultNoteTitle(e.getTitle(),n),NotebookIntegration.setIframeType(n,n.find('[purpose="popoutRhsNotes"]').length>0),n.find("#conference-notes-iframe-loader").addClass("dN")};t?(n.attr("conference-id",e.getId()),i()):n.find("iframe[service=notebook]")[0].onload=i},t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t){var n,i;if(t.isOldImpl()){i="show-aside";var r=(n=ConferenceUI.getConferenceWindow()).find("#conferencerhscnt");r.hasClass("huddl-notes-view")||r.addClass("huddl-notes-view").removeClass("huddl-chat-view huddl-participant-view huddl-associatedresource-view")}else i="show-rhs",(n=ZCSmartConferenceUI.getConferenceWindow()).find("#smartconferenceusertab, #smartconferencechattab, #smartconferenceassociatedresourcetab").removeClass("active"),n.find("#smartconferencechatsection, #smartconferenceusersection").addClass("rhs-dN");Conference.hideAssociatedResourceIFrame(t.getId());var o=$("#conference-notes-iframe");o.length<1?($("body").prepend(ZCSmartConferenceTemplates.getRhsNotesIframeHtml(t)),o=$("#conference-notes-iframe"),e(t)):(o.show(),e(t,!0)),o.find('[purpose="popoutRhsNotes"]').length?n.addClass(i):n.hasClass(i)&&n.removeClass(i),ZCSmartConferenceUI.resetHeaderOptions(n,ZCSmartConferenceUI.headerOptions.NOTES),t.isOldImpl()?ConferenceUI.handleResize():ZCSmartConferenceUI.handleResize(),NoteBookLHS.trackAction("OPEN_NOTE","CONFERENCE_RHS")}},backToSourceChat:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i=t.attr("source_chatid");ConferenceChatWindow.moveCurrentChatToHidePort(),ConferenceChatWindow.hasChatExistInHidePort(i)?(n.setActiveChatId(i),n.setSwitchedChatId(i),ConferenceChatWindow.moveToViewPort(i)):ZCSmartConferenceUI.showChatInRHS(i)}},newToggleRHSChat:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i,r=ConferenceChatWindow.getToggleChatIds();i=r.threadChatId==ConferenceChatWindow.getActiveChatId()?r.parentChatId:r.threadChatId,ConferenceChatWindow.moveCurrentChatToHidePort(),ConferenceChatWindow.updatePreviouslyOpenedChatId(),ZCTrack.track("SWITCH_CHAT_IN_CONFERENCE",{TRIGGER:"SWAP_THREAD_PARENT"}),ConferenceChatWindow.hasChatExistInHidePort(i)?(n.setActiveChatId(i),ConferenceChatWindow.moveToViewPort(i)):ZCSmartConferenceUI.showChatInRHS(i)}},toggleRHSChat:function(e,t){if(Config.isConferenceChatSwitcherEnabled())this.newToggleRHSChat(e,t);else{var n,i=(ZCSmartConferenceImpl.getCurrentActiveSession()instanceof ZCSmartConferenceSession?$("#smartconferencechatsection"):$("#conferencechatsection")).find('[purpose="chatview"]').attr("id");if(void 0!==t.attr("toggle_chat")){ZCTrack.track("SWITCH_CHAT_IN_CONFERENCE",{TRIGGER:"SWAP_THREAD_PARENT"});var r=$("#conference-rhs-thread").attr("chat_id");n=i==r?$("#conference-rhs-parent").attr("chat_id"):r}else n=t.attr("chat_id"),Conference.domCache.get("#title"+n,!0).parents("[title-header]").removeClass("focussed-header");ZCSmartConferenceUI.setChatInRHS(n,i)}},toggleVideoRotateConfigForDeviceSettings:function(e,t){var n=t.is(":checked"),i={huddle_mirror_video:n?1:0};WmsImpl.isGuestConferenceUser()?Settings.updateInObj(i):Settings.update(i);var r=ZCSmartConferenceUI.getConferenceWindow().find('[streamsource="local"]'),o=ZCJQuery("#smartconference_settings_preview");MediaUtil.changeVideoOrientation(o,n),MediaUtil.changeVideoOrientation(r,n)},toggleVideoRotateConfigForPreviewPage:function(e,t){var n=t.is(":checked"),i={huddle_mirror_video:n?1:0};WmsImpl.isGuestConferenceUser()?Settings.updateInObj(i):Settings.update(i);var r=ZCJQuery("#smartconferencepreview");MediaUtil.changeVideoOrientation(r,n)},openParticipantsFromRingingStatus:function(e,t){this.openParticipantsInRHS()},hideRingingStatus:function(){$("#conf-ringing-status").addClass("hide"),clearTimeout(ZCSmartConferenceUI.ringingTimer),ZCSmartConferenceUI.ringingTimer=void 0},openParticipantsInRHS:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n){var i=ZCSmartConferenceUI.getConferenceWindow();i.find("#smartconferenceusertab").addClass("active"),i.find("#smartconferencechattab").removeClass("active"),i.find("#smartconferenceassociatedresourcetab").removeClass("active"),i.find("#smartconferencechatsection").addClass("rhs-dN"),i.find("#smartconferenceusersection").removeClass("rhs-dN"),Conference.hideAssociatedResourceIFrame(n.getId()),Conference.hideRhsNotesIFrame(n.getId()),i.addClass("show-rhs"),ZCSmartConferenceUI.resetHeaderOptions(i,ZCSmartConferenceUI.headerOptions.PARTICIPANTS);var r=i.find('[smartconferenceinput][keyup-purpose="searchParticipants"]');r&&r.is(":visible")&&r.focus(),ZCSmartConferenceUI.initiateListView(n),ZCSmartConferenceUI.handleResize(),ZCSmartConferenceImpl.getAndPopulateYetToJoinList(n)}},openPresentationRequestsWin:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=n.getId(),r=i+"presentrequestscnt";if(n&&0===t.find("#"+r).length){var o=ZCSmartConferenceTemplates.getPendingPresentationRequestsHtml(n,"smartconferencebutton");t.attr("id",i+"presentrequestsopt"),t.addClass("active").removeAttr("tooltip-title").append(o),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:r,doNotClose:function(e,t,n){return n&&n.target.id===i+"presentrequestsopt"},customHide:function(e){t.removeClass("active").attr("tooltip-title",Resource.getRealValue("media.presentation.requests")),$("#"+e.destid).remove()}})}else t.removeClass("active").attr("tooltip-title",Resource.getRealValue("media.presentation.requests")),$("#"+r).remove(),Clickoutside.clear(r)},approvePresentationRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.attr("userId"),r=t.attr("presentationType"),o=n.getMember(i),s=function(){ConferenceAPI.approveMediaSesssionRequest(n.getId(),i,r,(function(){o.resetPresentationRequest(r),UI.updateBanner(Resource.getRealValue("conference.banner.knock.hostaccept")),t.parents("[presentrequestitem]").remove(),ZCSmartConferenceUI.updateHeadersStatus(n),r===ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD&&WhiteBoard.setUserAsEditorForCurrentBoard(i,n)}))};n.hasOngoingPresentation()&&r!==ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD?ZCSmartConferenceUI.showPresentationSwitchDialog(n,n.getCurrentPresentionOwner(),o,r,s):s()}},denyPresentationRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.attr("userId"),r=t.attr("presentationType");ConferenceAPI.denyMediaSessionRequest(n.getId(),i,r,(function(){n.getMember(i).resetPresentationRequest(r),UI.updateBanner(Resource.getRealValue("conference.banner.knock.hostreject")),t.parents("[presentrequestitem]").remove(),ZCSmartConferenceUI.updateHeadersStatus(n)}))}},handleWaitingLobbyRequestBtn:function(e,t){$("#waitingroomrequestscnt").remove();var n=ZCSmartConferenceImpl.getCurrentActiveSession().getWaitingLobbyRequests();t.addClass("active").removeAttr("tooltip-title").append(ZCSmartConferenceTemplates.getWaitingRoomRequestsHtml(n)),Clickoutside.bind({srcid:"waitinglobbyrequestsbtn",destid:"waitingroomrequestscnt",closeOnClickSrc:!0,customHide:()=>{t.removeClass("active").attr("tooltip-title",I18N("media.waitingroom")),$("#waitingroomrequestscnt").remove()}})},approveWaitingLobbyRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n&&n.hasHostPermission()){var i=t.attr("user_id");ConferenceAPI.approveMediaSesssionRequest(n.getId(),i,ZCSmartConferenceConstants.KNOCK,()=>{n.resetWaitingLobbyRequest(i),$($.escapeSelector("#waitinglobbyrequest"+i)).remove(),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(n)})}},denyWaitingLobbyRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n&&n.hasHostPermission()){var i=t.attr("user_id");ConferenceAPI.denyMediaSessionRequest(n.getId(),i,ZCSmartConferenceConstants.KNOCK,()=>{n.resetWaitingLobbyRequest(i),$($.escapeSelector("#waitinglobbyrequest"+i)).remove(),ZCSmartConferenceUI.updateWaitingLobbyRequestsList(n)})}},openAssociatedResource:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e){var t=ZCSmartConferenceUI.getConferenceWindow();t.find("#smartconferenceusertab").removeClass("active"),t.find("#smartconferencechattab").removeClass("active"),t.find("#smartconferenceassociatedresourcetab").addClass("active"),t.find("#smartconferencechatsection, #smartconferenceusersection").addClass("rhs-dN"),Conference.hideRhsNotesIFrame(e.getId()),t.addClass("show-rhs");var n=e.getAssociatedResourceData(),i=$("#conference-associatedresource-iframe");i.length<1?"townhall"===n.type&&t.append(ZCSmartConferenceTemplates.getAssociatedResourceIframeHtml(e)):i.show(),ZCSmartConferenceUI.resetHeaderOptions(t,ZCSmartConferenceUI.headerOptions.TOWN_HALL),ZCSmartConferenceUI.handleResize()}},showAssociatedResourceTabOptions:function(e,t){ZCSmartConferenceUI.showAssociatedResourceTabOptions(e,t)},reloadAssociatedResource:function(){var e=$("#conference-associatedresource-iframe");if($("#associatedResourceTabOptions").hide(),e.length<1)this.openAssociatedResource();else{var t=ZCSmartConferenceImpl.getCurrentSession().getAssociatedResourceData(),n=t.url.includes("?")?"&":"?";e.find("iframe")[0].src=t.url+n+"frameorigin="+$Util.getFrameOrigin()}},popoutRhsNotes:function(){var e=$("#conference-notes-iframe");e.find('[purpose="popoutRhsNotes"]').attr({purpose:"stickRhsNotes","tooltip-title":Resource.getRealValue("notebook.rhs.tooltip.popin")}).removeClass("zcf-popout2").addClass("zcf-popin");e.css({top:function(e){return $(window).height()-e-60+"px"}(400),height:"400px"}),e.setAsDraggable();var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=t.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow(),i=t.isOldImpl()?"show-aside":"show-rhs";n.removeClass(i),ZCSmartConferenceUI.resetHeaderOptions(n,ZCSmartConferenceUI.headerOptions.NOTES),"undefined"!=typeof NotebookIntegration&&NotebookIntegration.setIframeType(e,!1)},stickRhsNotes:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();e.isInMinimizedView()&&(e.isOldImpl()?(ConferenceUI.showMaximizedWindow(),ConferenceUI.handleResize()):ZCSmartConferenceUI.showMaximizedWindow());var t=$("#conference-notes-iframe");t.find('[purpose="stickRhsNotes"]').attr({purpose:"popoutRhsNotes","tooltip-title":Resource.getRealValue("notebook.rhs.tooltip.popout")}).removeClass("zcf-popin").addClass("zcf-popout2"),t.removeAttr("style"),t.setAsNonDraggable();var n=e.isOldImpl()?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow(),i=e.isOldImpl()?"show-aside":"show-rhs";n.addClass(i),ZCSmartConferenceUI.resetHeaderOptions(n,ZCSmartConferenceUI.headerOptions.NOTES),"undefined"!=typeof NotebookIntegration&&NotebookIntegration.setIframeType(t,!0)},reloadRhsNotes:function(){var e=$("#conference-notes-iframe"),t=e.find("iframe")[0];t.src=NoteBookUtil.getNotesUrl(NoteBookUtil.view.CONFERENCE_RHS);var n=$(t);e.find("#conference-notes-iframe-loader").removeClass("dN"),n.on("load",(function(){e.find("#conference-notes-iframe-loader").addClass("dN")}))},closeRHS:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=n.isOldImpl(),r=i?ConferenceUI.getConferenceWindow():ZCSmartConferenceUI.getConferenceWindow();ZCSmartConferenceUI.resetHeaderOptions(r,void 0),Conference.hideAssociatedResourceIFrame(n.getId());var o=!1;if(t){var s=t.attr("id");o="rhsnotesoption"===s||"rhsnotesoption_close"===s}Conference.hideRhsNotesIFrame(n.getId(),o);var a="";i?($("#smartconferenceusersection, #conferencechatsection").addClass("rhs-dN"),a="show-aside",ConferenceHandler.UIEvents.handlePopups(),n.isInGalaxyLayout()&&$("#conferencevideowrapper").css("width","")):(a="show-rhs",r.find("#smartconferenceusertab","#smartconferencechattab","#smartconferenceassociatedresourcetab").removeClass("active"),r.find("#smartconferencechatsection","#smartconferenceusersection").addClass("rhs-dN")),Config.isConferenceChatSwitcherEnabled()&&ConferenceChatWindow.hasChatExistInViewPort(ConferenceChatWindow.getActiveChatId())&&(a+=" show-aside"),o?$("#conference-notes-iframe").find('[purpose="popoutRhsNotes"]').length&&(r.removeClass(a),i||ZCSmartConferenceUI.handleResize()):(r.removeClass(a),i||ZCSmartConferenceUI.handleResize())},showEditTitle:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){if(!n.isCurrentUserHost())return;var i=(n.isOldImpl()?ConferenceUI:ZCSmartConferenceUI).getConferenceWindow();Clickoutside.bind({srcid:"conf_title",destid:"conf_title_edit",customShow:function(){i.find("#conf_title").addClass("vsbH");var e=i.find("#conf_title_edit");e.val(n.getTitle()),e.removeClass("dN"),e[0].select()},customHide:function(e){i.find("#conf_title").removeClass("vsbH"),i.find("#conf_title_edit").addClass("dN").val("")}})}},startScreenShare:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.startScreenShare()},raiseScreenShareRequest:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();ConferenceAPI.raiseMediaSessionRequest(n.getId(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,(function(t){n.getCurrentMember().setPresentationRequest(ZCSmartConferenceConstants.presentationType.SCREENSHARE);var i=ZCSmartConferenceUI.getConferenceWindow();Conference.isWhiteBoardAllowed()?ZCSmartConferenceHandler.UIEvents.showShareOptions(e,i.find("[purpose=showShareOptions]")):ZCSmartConferenceHandler.UIEvents.showMoreOptions(e,i.find("[purpose=showMoreOptions]")),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},dropScreenShareRequest:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();ConferenceAPI.dropPresentationRequest(n.getId(),ZCSmartConferenceConstants.presentationType.SCREENSHARE,(function(){n.getCurrentMember().resetPresentationRequest(ZCSmartConferenceConstants.presentationType.SCREENSHARE);ZCSmartConferenceUI.getConferenceWindow();UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},stopScreenShare:function(e,t){e?Clickoutside.handleClickOnChild(e):ZCSmartConferenceUI.removeOptionsDropDown();var n=ZCSmartConferenceImpl.getCurrentSession();ZCSmartConferenceUI.resetScreenShareOption(),ConferenceAPI.stopScreenShare(n.getId())},stopScreenShareFromBottomBand:function(e,t){this.stopScreenShare(e,t)},startWhiteBoard:function(e,t){e?Clickoutside.handleClickOnChild(e):ZCSmartConferenceUI.removeOptionsDropDown(),ZCSmartConferenceImpl.startWhiteBoard()},raiseWhiteboardRequest:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();ConferenceAPI.raiseMediaSessionRequest(n.getId(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,(function(t){n.getCurrentMember().setPresentationRequest(ZCSmartConferenceConstants.presentationType.WHITEBOARD);var i=ZCSmartConferenceUI.getConferenceWindow();ZCSmartConferenceHandler.UIEvents.showShareOptions(e,i.find("[purpose=showShareOptions]")),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},dropWhiteboardRequest:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();ConferenceAPI.dropPresentationRequest(n.getId(),ZCSmartConferenceConstants.presentationType.WHITEBOARD,(function(){n.getCurrentMember().resetPresentationRequest(ZCSmartConferenceConstants.presentationType.WHITEBOARD);ZCSmartConferenceUI.getConferenceWindow();UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},raiseWbEditRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=n.getCurrentMember();n&&!i.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&ConferenceAPI.raiseMediaSessionRequest(n.getId(),ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD,(function(e){i.setPresentationRequest(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD),ZCSmartConferenceUI.toggleRequestEditWhiteboardButton(n,!0),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},dropWbEditRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=n.getCurrentMember();n&&i.hasRequestedToPresent(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD)&&ConferenceAPI.dropPresentationRequest(n.getId(),ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD,(function(){i.resetPresentationRequest(ZCSmartConferenceConstants.presentationType.EDIT_WHITEBOARD),ZCSmartConferenceUI.toggleRequestEditWhiteboardButton(n,!1),UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},setAsWbEditor:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceParticipant]").attr("userId"),i=ZCSmartConferenceImpl.getCurrentActiveSession();WhiteBoard.hasEditPermissionForCurrentBoard(n,i)||WhiteBoard.setUserAsEditorForCurrentBoard(n,i),Clickoutside.handleClickOnChild(e)},stopWhiteBoard:function(e,t){e?Clickoutside.handleClickOnChild(e):ZCSmartConferenceUI.removeOptionsDropDown();var n=ZCSmartConferenceImpl.getCurrentSession();WhiteBoard.closeWhiteBoard(n.getId(),"group_call",n.getCurrentWhiteBoardId())},raiseSpeakerRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&!n.hasRequestedToSpeak()){var i=function(){ConferenceAPI.raiseSpeakerRequest(n.getId()),n.setSpeakerRequest(),$('[smartconferencebutton][purpose="raiseSpeakerRequest"]').addClass("smartconf-requested").attr("purpose","dropSpeakerRequest"),ZCSmartConferenceUI.modifyUserInList(n,n.getCurrentUserId())};if(n.hasAudioUpStream()&&n.hasVideoUpStream())i();else{var r=function(e,t){MediaManager.resetStreamRequested(),void 0!==e&&MediaManager.handleMediaError(e,t)},o=function(e){MediaManager.resetStreamRequested(),n.setVideoUpStream(e),Conference.applyVideoConstraints(e,n),MediaUtil.setAndPlayStreamInMediaContainer(n.getLocalMediaContainer(),e,!0);var t=ZCSmartConferenceUI.getLocalGridMediaContainer();t&&t.length&&MediaUtil.setAndPlayStreamInMediaContainer(t,e,!0);var r=ZCSmartConferenceUI.getLocalBottomBandMediaContainer();r&&r.length&&MediaUtil.setAndPlayStreamInMediaContainer(r,e,!0),n.getCurrentMember().setUpdatedVideoStatus(),i(),ZCSmartConferenceUI.updateConnectionStatus(n)};if(n.hasAudioUpStream())MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream(o,r,void 0,Conference.getVideoEffects(n));else{MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream((function(e){MediaManager.resetStreamRequested(),n.setAudioUpStream(e),n.getCurrentMember().setUpdatedAudioStatus(),n.hasVideoUpStream()?i():(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestVideoStream(o,r,void 0,Conference.getVideoEffects(n)))}),r)}}}},dropSpeakerRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n&&n.hasRequestedToSpeak()&&(ConferenceAPI.dropSpeakerRequest(n.getId()),n.resetSpeakerRequest(),$('[smartconferencebutton][purpose="dropSpeakerRequest"]').removeClass("smartconf-requested").attr("purpose","raiseSpeakerRequest"),ZCSmartConferenceUI.modifyUserInList(n,n.getCurrentUserId()))},approveSpeakerRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.parents("[userId]").attr("userId"),r=n.getMember(i);r.resetSpeakerRequest(),ConferenceAPI.approveSpeakerRequest(n.getId(),i,r.getSessionId()),ZCSmartConferenceUI.modifyUserInList(n,r.getId()),ZCSmartConferenceUI.updateBottomPaneList()}},denySpeakerRequest:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&n.hasHostPermission()){var i=t.parents("[userId]").attr("userId"),r=n.getMember(i);r.resetSpeakerRequest(),ConferenceAPI.denySpeakerRequest(n.getId(),i),ZCSmartConferenceUI.modifyUserInList(n,r.getId())}},navigateAttachmentsLeft:function(e,t){document.getElementById("huddle_attachments_list").scrollLeft-=WaitingRoom.getAttachmentListCntWidth()},navigateAttachmentsRight:function(e,t){document.getElementById("huddle_attachments_list").scrollLeft+=WaitingRoom.getAttachmentListCntWidth()},openInFullScreen:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n&&n.isInPIP()&&ZCSmartConferenceImpl.exitFromPIPMode(n),ZCMediaDomUtil.openFullScreen($(t.attr("targetElemSelector"))[0],(function(){ZCSmartConferenceUI.handleOpenFullScreen(t)}),(function(e,n){n?ZCSmartConferenceUI.handleOpenFullScreen(t):ZCSmartConferenceUI.handleExitFullScreen(t)}))},exitFromFullScreen:function(e,t){ZCMediaDomUtil.exitFullScreen()},openInPIP:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n&&(Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.switchToPIPMode(n))},exitPIP:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n&&(Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.exitFromPIPMode(n))},closePresentationPreview:function(e,t){PresentationHandler.closePresentationPreview(e,t)},openPresentationFromHistory:function(e,t){PresentationHandler.openPresentationFromHistory(e,t)},navigateToNextSlide:function(e,t){PresentationImpl.navigateToNextSlide()},togglePresentationSlidesList:function(e,t){PresentationHandler.togglePresentationSlidesList(t)},jumpToPresentationSlide:function(e,t){PresentationHandler.jumpToPresentationSlide(t,parseInt(t.attr("slide_no")))},navigateToPreviousSlide:function(e,t){PresentationImpl.navigateToPreviousSlide()},jumpToHostView:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession().getPresentation();PresentationHandler.jumpToPresentationSlide(t,n.getPresenterSlideNo(),n.getPresenterAnimIndex())},openPresenterViewInFullScreen:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=void 0,r=void 0;n instanceof ZCSmartConferenceSession?(i=ZCSmartConferenceUI,r="smartconf_main_container"):(i=ConferenceUI,r=n.hasPresentation()?"conferencepresentationwrapper":"conferencevideowrapper");n.setPreviousSSLayout(n.getCurrentScreenLayout()),ZCSmartConferenceUI.setScreenShareView(ZCSmartConferenceConstants.screenLayouts.ACTIVE_SPEAKER_VIEW),ZCMediaDomUtil.openFullScreen($("#"+r)[0],(function(){i.handleOpenPresenterViewInFullScreen(t)}),(function(e,n){if(n)i.handleOpenPresenterViewInFullScreen(t);else{i.handleExitPresenterViewFromFullScreen(t);var r=ZCSmartConferenceImpl.getCurrentActiveSession();if(r instanceof ZCSmartConferenceSession)ZCSmartConferenceUI.setCurrentPresenterViewPosition(r);else ConferenceUI.getConferenceWindow().find("#presenter_view").css({top:"",left:""})}var o=ZCSmartConferenceUI.getConferenceWindow();o&&ZCSmartConferenceUI.adjustContainerView(o.find("[activeSpeakerSection]"),o.find("[mainsection]"),ZCMediaConstants.minimizedWindowRange.visibleArea)}))},exitPresenterViewFromFullScreen:function(e,t){ZCMediaDomUtil.exitFullScreen((function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession(),t=e.getPreviousSSLayout();ZCSmartConferenceUI.setScreenShareView(t),e.setPreviousSSLayout(void 0)}))},muteAudioFromRhs:function(e,t){ConferenceImpl.hasCurrentSession()?ConferenceHandler.UIEvents.muteAudio():this.muteAudio(e,t)},unmuteAudioFromRhs:function(e,t){ConferenceImpl.hasCurrentSession()?ConferenceHandler.UIEvents.unmuteAudio():this.unmuteAudio(e,t)},muteAudioFromOpt:function(e,t){this.muteAudioFromRhs(e,t),Clickoutside.handleClickOnChild(e)},unmuteAudioFromOpt:function(e,t){this.unmuteAudioFromRhs(e,t),Clickoutside.handleClickOnChild(e)},muteAudio:function(e,t){return MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)&&MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioForUnmute),ZCSmartConferenceUI.setMicMutedOption(),ZCSmartConferenceImpl.changeAVStatus("audio",!0,!1),!0},unmuteAudio:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n.isFocusedModeEnabled()&&!n.isInFocusedUsers())return!1;if(n.isAudioUnmuteRestricted())return!1;if(!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)){if(n.isPrimarySession()&&n.hasSecondaryAudioUpStream())return!1;var i=function(){$('[smartconferencebutton][purpose="unmuteAudio"]').addClass("zcf-mic").removeClass("zcf-mic-mute").attr({purpose:"muteAudio","tooltip-title":MediaUtil.getMicOffToolTip()}),ZCSmartConferenceImpl.changeAVStatus("audio",!1,!1),ZCSmartConferenceUI.closeUnmuteConfirmPrompt(),ZCSmartConferenceUI.closeSpeechDetectedInfo()};if(n.hasAudioUpStream())i();else{MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute),MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute)||(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute),WebRTCUserMedia.requestAudioStream((function(e){if(MediaManager.resetStreamRequested(),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute),MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestAudioForUnmute)){MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioForUnmute),i(),n.replaceAudioUpStream(e);var t=function(){ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(n)};WebRTCUserMedia.getMediaDevices(t,t)}else WebRTCUserMedia.closeStream(e._getType())}),(function(e,t){MediaManager.resetStreamRequested(),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioForUnmute),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestAudioStreamForUnmute),void 0!==e&&MediaManager.handleMediaError(e,t),ZCSmartConferenceImpl.changeAVStatus("audio",!0,!0)})))}return!0}},closeScreenShareIndicator:function(e,t){ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-screen-share-ind"),ZCJQuery(t).parents("[screen_share_indicator_v2]").addClass("zc-av-hide"),ZCSmartConferenceUI.getConferenceParentDOM().removeClass("smartconf-bottom-banner")},closePresentationIndicator:function(e,t){ZCSmartConferenceUI.getConferenceWindow().removeClass("smartconf-screen-share-ind"),ZCJQuery(t).parents("[presentation_indicator_v2]").addClass("zc-av-hide"),ZCSmartConferenceUI.getConferenceParentDOM().removeClass("smartconf-bottom-banner")},unmuteAudioFromHelptip:function(e,t){this.unmuteAudio(e,t)},muteVideo:function(e,t){return MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestVideoForUnmute)&&MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestVideoForUnmute),ZCSmartConferenceUI.setVideoMutedOption(),ZCSmartConferenceImpl.changeAVStatus("video",!0,!1),!0},unmuteVideo:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n.isFocusedModeEnabled()&&!n.isInFocusedUsers())return!1;if(!MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestVideoForUnmute)){if(n.isPrimarySession()&&n.hasSecondaryVideoUpStream())return!1;var i=function(){ZCSmartConferenceUI.setVideoUnmutedOption(),ZCSmartConferenceImpl.changeAVStatus("video",!1,!1),ZCSmartConferenceUI.closeUnmuteConfirmPrompt()};if(n.hasVideoUpStream())i();else{MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestVideoForUnmute),MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestVideoStreamForUnmute)||(MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),MediaManager.setCustomRequestAsPending(ZCSmartConferenceConstants.requests.requestVideoStreamForUnmute),WebRTCUserMedia.requestVideoStream((function(e){MediaManager.resetStreamRequested(),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestVideoStreamForUnmute),MediaManager.isCustomRequestPending(ZCSmartConferenceConstants.requests.requestVideoForUnmute)?(MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestVideoForUnmute),i(),n.replaceVideoUpStream(e)):WebRTCUserMedia.closeStream(e._getType())}),(function(e,t){MediaManager.resetStreamRequested(),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestVideoStreamForUnmute),MediaManager.setCustomRequestAsCompleted(ZCSmartConferenceConstants.requests.requestVideoForUnmute),void 0!==e&&MediaManager.handleMediaError(e,t),ZCSmartConferenceImpl.changeAVStatus("video",!0,!0)}),void 0,Conference.getVideoEffects(n)))}return!0}},muteAllParticipantsAudio:function(e,t){ZCSmartConferenceImpl.updateMuteAllParticipantsStatus("audio",!0,$("#smartconferenceuserslist"))},unmuteAllParticipantsAudio:function(e,t){ZCSmartConferenceImpl.updateMuteAllParticipantsStatus("audio",!1,$("#smartconferenceuserslist"))},muteUserAudio:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceParticipant]");ZCSmartConferenceImpl.updateMuteStatusForUser(t,n,n.attr("userId"),"audio",!0,!1)},forceMuteUserAudio:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceParticipant]");ZCSmartConferenceImpl.updateMuteStatusForUser(t,n,n.attr("userId"),"audio",!0,!0)},restrictAudioUnmuteForUser:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceParticipant]");ZCSmartConferenceImpl.updateMuteStatusForUser(t,n,n.attr("userId"),"audio",!0,!0),Clickoutside.handleClickOnChild(e)},allowUserToUnmuteAudio:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceParticipant]");ZCSmartConferenceImpl.updateMuteStatusForUser(t,n,n.attr("userId"),"audio",!1,!1)},askUserToUnmuteAudio:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceParticipant]");ZCSmartConferenceImpl.updateMuteStatusForUser(t,n,n.attr("userId"),"audio",!1,!1,(function(e,t){UI.updateBanner(Resource.getRealValue("conference.user.unmute.asked",Users.getName(t.getId(),t.getName())),2e3,!1)}))},muteUserAudioFromOpt:function(e,t){ZCSmartConferenceImpl.getDataAndUpdateMuteStatusForUser(t,!0,!1,"conference.user.muted"),Clickoutside.handleClickOnChild(e)},forceMuteUserAudioFromOpt:function(e,t){ZCSmartConferenceImpl.getDataAndUpdateMuteStatusForUser(t,!0,!0,"conference.user.muted"),Clickoutside.handleClickOnChild(e)},restrictAudioUnmuteForUserFromOpt:function(e,t){ZCSmartConferenceImpl.getDataAndUpdateMuteStatusForUser(t,!0,!0,"conference.user.unmute.restricted"),Clickoutside.handleClickOnChild(e)},allowUserToUnmuteAudioFromOpt:function(e,t){ZCSmartConferenceImpl.getDataAndUpdateMuteStatusForUser(t,!1,!1,"conference.you.unmute.allowed"),Clickoutside.handleClickOnChild(e)},askUserToUnmuteAudioFromOpt:function(e,t){ZCSmartConferenceImpl.getDataAndUpdateMuteStatusForUser(t,!1,!1,"conference.user.unmute.asked"),Clickoutside.handleClickOnChild(e)},openChatFromOpt:function(e,t){ContactsList.doOperation("hchat",t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},setMediaDevices:function(e){if(e&&Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.hasCurrentSession()){var t=ZCSmartConferenceImpl.getCurrentSession(),n=t.isActiveMember(),i=t.getAudioUpStream(),r=t.getVideoUpStream(),o={handleCustomUI:function(e,t,n,i,r){ConferenceImpl.openDeviceSettings(e,t,n,i,r)}};i&&n||(o[ZCMediaDevices.kinds.AUDIO_INPUT]=!1),r&&n||(o[ZCMediaDevices.kinds.VIDEO_INPUT]=!1);MediaDeviceWidget.show((function(e){t.getAudioUpStream(),t.getVideoUpStream();$WC.Util.isEmptyObject(e)||(ZCMediaDevices.setPreferredDevices(e,!Conference.isCurrentUserGuest()),ZCSmartConferenceImpl.hasCurrentSession()&&ZCSmartConferenceImpl.handleDeviceChange(t,e,!1))}),o,i,r,Object.values(t.getAudioMediaContainers())[0],(function(){MediaUtil.clearAudioPreview(t),t.clearVideoEffectsPreview()}))}},showActiveSpeakers:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n&&(n.showActiveSpeakers(),ZCSmartConferenceUI.handleContainerVisibility())},restrictToMainSpeakers:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n&&(n.restrictToMainSpeakers(),ZCSmartConferenceUI.handleContainerVisibility())},closeSilentSpeakerInfo:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n&&(n.setSilentSpeakerInfoAsHidden(),ZCSmartConferenceUI.updateSilentSpeakerInfo(n))},closeLowBandwidthModeInfo:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n&&(n.setLowBandwidthModeInfoAsHidden(),ZCSmartConferenceUI.updateLowBandwidthModeInfo(n))},closeAllowUnmutePrompt:function(e,t){ZCSmartConferenceUI.closeUnmuteConfirmPrompt()},closeAllAllowUnmutePrompt:function(e,t){ConferenceUI.closeUnmuteConfirmPrompt()},closeAudioMutedInfo:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n&&n.setAudioMutedInfoAsHidden(),ZCSmartConferenceUI.updateAudioMutedInfo(n)},revokeInvite:function(e,t){if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n&&n.hasHostPermission()){var i=t.parents("[userId]").attr("userId");ConferenceAPI.revokeInvite(n.getId(),i)}}},startRinging:function(e,t){if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n&&n.hasHostPermission()){var i=t.parents("[userId]").attr("userId");ConferenceAPI.startRingingForUser(n.getId(),i)}}},cancelRinging:function(e,t){if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n.hasHostPermission()){var i=t.parents("[userId]").attr("userId");ConferenceAPI.cancelRingingForUser(n.getId(),i)}}},startRingingForAll:function(e,t){if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n.hasHostPermission()&&(ConferenceAPI.startRingingForAll(n.getId()),t.parents('[purpose="openParticipantsFromRingingStatus"]').length>0?n instanceof ConferenceSession?ConferenceHandler.UIEvents.openParticipantsInRHS():n instanceof ZCSmartConferenceSession&&this.openParticipantsInRHS():n instanceof ConferenceSession?(t.replaceWith(ZCSmartConferenceTemplates.getCancelRingAllOption("conferencebutton")),clearTimeout(ConferenceUI.clearRingAllTimeout),ConferenceUI.clearRingAllTimeout=setTimeout((function(){$("#yetToJoinSection").find("[ringAllButton]").replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("conferencebutton")),ConferenceUI.clearRingAllTimeout=void 0}),MediaCallConstants.callRingingTimeLimit)):n instanceof ZCSmartConferenceSession&&(t.replaceWith(ZCSmartConferenceTemplates.getCancelRingAllOption("smartconferencebutton")),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout),ZCSmartConferenceUI.clearRingAllTimeout=setTimeout((function(){$("#yetToJoinSection").find("[ringAllButton]").replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton")),ZCSmartConferenceUI.clearRingAllTimeout=void 0}),MediaCallConstants.callRingingTimeLimit)))}},stopRingingForAll:function(e,t){if(ZCSmartConferenceImpl.hasCurrentActiveSession()){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n&&n.hasHostPermission()&&(ConferenceAPI.stopRingingForAll(n.getId()),n instanceof ConferenceSession?(t.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("conferencebutton")),clearTimeout(ConferenceUI.clearRingAllTimeout),ConferenceUI.clearRingAllTimeout=void 0):n instanceof ZCSmartConferenceSession&&(t.replaceWith(ZCSmartConferenceTemplates.getStartRingAllOption("smartconferencebutton")),clearTimeout(ZCSmartConferenceUI.clearRingAllTimeout),ZCSmartConferenceUI.clearRingAllTimeout=void 0))}},startBroadcast:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentActiveSession();n.isRequestPending(ZCSmartConferenceConstants.requests.startStopStreaming)||n.hasHostPermission()&&(n.setRequestAsPending(ZCSmartConferenceConstants.requests.startStopStreaming),ConferenceAPI.startBroadcast(n.getId(),(function(e){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopStreaming),ZCSmartConferenceImpl.handleStartStreaming(n,e),void 0!==e&&ZCSmartConferenceUI.showStreamingPopup()}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopStreaming)})))},stopBroadcast:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentActiveSession();n.isRequestPending(ZCSmartConferenceConstants.requests.startStopStreaming)||n.hasHostPermission()&&(n.setRequestAsPending(ZCSmartConferenceConstants.requests.startStopStreaming),ConferenceAPI.stopBroadcast(n.getId(),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopStreaming),ZCSmartConferenceImpl.handleStopStreaming(n)}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopStreaming)})))},showStreamingPopup:function(){ZCSmartConferenceUI.showStreamingPopup()},startRecording:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n.isRequestPending(ZCSmartConferenceConstants.requests.startStopRecording)||n.hasHostPermission()&&(n.setRequestAsPending(ZCSmartConferenceConstants.requests.startStopRecording),ConferenceAPI.startRecording(n.getId(),(function(e){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording),n.setRecordingReferenceIndex(e),n.sendRecordingStatusToParticipants(),ConferenceUI.showRecordingIndication(ZCSmartConferenceUI.getConferenceWindow())}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording)})))},stopRecording:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n.isRequestPending(ZCSmartConferenceConstants.requests.startStopRecording)||n.hasHostPermission()&&(n.setRequestAsPending(ZCSmartConferenceConstants.requests.startStopRecording),ConferenceAPI.stopRecording(n.getId(),n.getRecordingReferenceIndex(),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording),n.setRecordingReferenceIndex(void 0),n.sendRecordingStatusToParticipants(),ConferenceUI.hideRecordingIndication(ZCSmartConferenceUI.getConferenceWindow())}),(function(){n.setRequestAsCompleted(ZCSmartConferenceConstants.requests.startStopRecording)})))},goToStore:function(){$WC.$Win.destroy("extension_install_preview"),ScreenShare.Extension.openStore()},minimizeWindow:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.showMinimizedWindow()},maximizeWindow:function(){ZCSmartConferenceUI.showMaximizedWindow()},showFilmStrip:function(){ZCSmartConferenceUI.showFilmStrip()},hideFilmStrip:function(){ZCSmartConferenceUI.hideFilmStrip()},showBottomPane:function(){ZCSmartConferenceUI.showBottomPane(!0)},hideBottomPane:function(){ZCSmartConferenceUI.hideBottomPane()},switchToVideoGridLayout:function(e,t){ZCSmartConferenceUI.switchToVideoGridLayout()},switchToStageLayout:function(e,t){ZCSmartConferenceUI.switchToStageLayout(!1)},showPreviousVideoGridPage:function(e,t){ZCSmartConferenceUI.showVideoGridPage(parseInt(t.attr("prevPageNo")))},showNextVideoGridPage:function(e,t){ZCSmartConferenceUI.showVideoGridPage(parseInt(t.attr("nextPageNo")))},showScreenLayoutOptions:function(e,t){ZCSmartConferenceUI.showScreenShareLayoutOptions(e,t)},setSSInTopView:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.setScreenShareView(ZCSmartConferenceConstants.screenLayouts.TOP_VIEW),ZCSmartConferenceImpl.updateScreenLayoutSettings(ZCSmartConferenceConstants.screenLayouts.TOP_VIEW_INT),ZCSmartConferenceImpl.handleResize()},setSSInRhsView:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.setScreenShareView(ZCSmartConferenceConstants.screenLayouts.RHS_VIEW),ZCSmartConferenceImpl.updateScreenLayoutSettings(ZCSmartConferenceConstants.screenLayouts.RHS_VIEW_INT),ZCSmartConferenceImpl.handleResize()},setSSInActiveSpeakerView:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.setScreenShareView(ZCSmartConferenceConstants.screenLayouts.ACTIVE_SPEAKER_VIEW),ZCSmartConferenceImpl.updateScreenLayoutSettings(ZCSmartConferenceConstants.screenLayouts.ACTIVE_SPEAKER_VIEW_INT);var n=ZCSmartConferenceUI.getConferenceWindow();n&&ZCSmartConferenceUI.adjustContainerView(n.find("[activeSpeakerSection]"),n.find("[mainsection]"),ZCMediaConstants.minimizedWindowRange.visibleArea),ZCSmartConferenceImpl.handleResize()},openFocusedModePanel:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n.hasHostPermission()&&ZCSmartConferenceUI.openFocusedModePanel(n)},closeFocusedModePanel:function(e,t){ZCSmartConferenceImpl.getCurrentSession().hasHostPermission()&&ZCSmartConferenceUI.closeFocusedModePanel()},enableFocusedMode:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n.hasHostPermission()){var i=ZCSmartConferenceHandler.focusedUsersSuggestion.getSelectedListValues();if(0===i.length)return;ConferenceAPI.enableFocusedMode(n.getId(),i,(function(){n.setFocusedModeAsEnabled(i,n.getLastFocusActivityTime()+1,n.getCurrentUserId())})),ZCSmartConferenceUI.closeFocusedModePanel()}},switchFocusedUsers:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n.hasHostPermission()){var i=ZCSmartConferenceHandler.focusedUsersSuggestion.getSelectedListValues();if(0===i.length||JSON.stringify(n.getFocusedUserIds())===JSON.stringify(i))return void ZCSmartConferenceUI.closeFocusedModePanel();ConferenceAPI.switchFocusedUsers(n.getId(),i,(function(){n.setFocusedModeAsEnabled(i,n.getLastFocusActivityTime()+1,n.getCurrentUserId())})),ZCSmartConferenceUI.closeFocusedModePanel()}},disableFocusedMode:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n.hasHostPermission()&&(ConferenceAPI.disableFocusedMode(n.getId(),(function(){n.setFocusedModeAsDisabled(n.getLastFocusActivityTime()+1,n.getCurrentUserId())})),ZCSmartConferenceUI.closeFocusedModePanel())},assignAsHostAndLeave:function(e,t){var n=ZCSmartConferenceHandler.assignHostSuggestion.getSelectedListValue();if(!$WC.Util.isEmpty(n)){var i=t.attr("conference_id");ConferenceAPI.assignHostAndLeave(i,n,t,(function(){ZCSmartConferenceImpl.endConference(i,!1,ZCMediaConstants.endCases.assignHostAndLeave),"undefined"!=typeof HuddleWidgetHandler&&HuddleWidgetHandler.handleLeft(i)}))}},showHostLeaveConfirmation:function(e,t){ZCSmartConferenceUI.showHostLeaveConfirmation(ZCSmartConferenceImpl.getCurrentSession(),"smartconferencebutton")},endConferenceAfterConfirmation:function(e,t){ZCSmartConferenceImpl.endConference(t.attr("conference_id"),!0)},closeHostLeaveConfirmation:function(e,t){ZCSmartConferenceUI.closeHostLeaveConfirmation(t.attr("conference_id"))},closeInviteUsers:function(e,t){ZCSmartConferenceUI.closeInviteUsers(t.attr("conference_id"))},toggleInvitePanelTab:function(e,t){var n=$("#conference_invite_users");if(n.length>0){if(t.hasClass("sel"))return;n.find("#conf_inviteusers").toggleClass("dN"),n.find("#conf_sharelink").toggleClass("dN"),n.find("#conf_invitebutton").toggleClass("dN"),n.find("#conf_sharelinkheader").toggleClass("sel"),n.find("#conf_inviteheader").toggleClass("sel")}},enableLowBandwidthMode:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n&&n.enableLowBandwidthMode()},disableLowBandwidthMode:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n&&n.disableLowBandwidthMode()},startPresentation:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();PresentationHandler.startPresentation(n)},stopPresentation:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n.getPresentation().stop(n)},raisePresentationRequest:function(e,t){PresentationHandler.raiseRequest(e)},dropPresentationRequest:function(e,t){PresentationHandler.dropRequest(e)},showShareOptions:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=n.getId()+"shrdropdowncnt";if(n&&0===t.children().length){var r=ZCSmartConferenceTemplates.getShareOptionsHtml(n);t.attr("id",n.getId()+"shrdropdownopt"),t.addClass("active").removeAttr("tooltip-title").html(r),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:i,doNotClose:function(e,t,i){return i&&i.target.id===n.getId()+"shrdropdownopt"},customHide:function(e){t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.share")),$("#"+e.destid).remove()}})}else t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.share")),$("#"+i).remove(),Clickoutside.clear(i)},showMoreOptions:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=n.getId()+"dropdowncnt";if(n&&0===t.children().length){var r=ZCSmartConferenceTemplates.getMoreOptionsHtml(n);t.attr("id",n.getId()+"dropdownopt"),t.addClass("active").removeAttr("tooltip-title").html(r),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:i,doNotClose:function(e,t,i){return i&&i.target.id===n.getId()+"dropdownopt"},customHide:function(e){t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.more")),$("#"+e.destid).remove()}})}else t.removeClass("active").attr("tooltip-title",Resource.getRealValue("common.more")),$("#"+i).remove(),Clickoutside.clear(i)},showUserOptions:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n){var i=t[0].hasAttribute("mediaContainer_opts"),r=i?"mediaContainer":"gridMediaContainer",o=t.parents("["+r+"]"),s=void 0;if("local"===o.attr("streamSource"))s=ZCSmartConferenceImpl.getCurrentUserId();else{var a=o.attr("videoStreamId");if(!a)return;s=i?n.getUserIdWithVideoStreamId(a):n.getUserIdWithVideoGridStreamId(a)}if(s){var c=n.getMember(s);c?ZCSmartConferenceUI.showUserOptions(e,t,n,c):ZCSmartConferenceUI.showNonMemberOptions(e,t,n,s)}}},showUserOptionsFromPane:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i=t.attr("user_id"),r=n.getMember(i);r&&ZCSmartConferenceUI.showUserOptions(e,t,n,r)}},takeNotes:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();NotebookIntegration.open(n.getId(),(function(){NotebookIntegration.setDefaultNoteTitle(n.getTitle())}))},copyStreamingLink:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentActiveSession();n.hasHostPermission()&&$Util.copyTextToClipboard(n.getStreamingLink(),(function(){UI.updateBanner(Resource.getRealValue("channel.link.copied"))}))},openReactions:function(e,t){Clickoutside.bind({event:e,srcid:t.attr("id"),destid:"smartconf-reactions",customShow:function(){$("#smartconfreactionopt").addClass("active").removeAttr("tooltip-title"),$("#smartconf-reactions").removeClass("dN");let e=ZCSmartConferenceImpl.getCurrentActiveSession().getConfigurations();ConferenceImpl.handleReactionConfigUpdate(e)},customHide:function(){$("#smartconfreactionopt").removeClass("active").attr("tooltip-title",Resource.getRealValue("message.option.addreactions")),$("#smartconf-reactions").addClass("dN")}})},handleReactionClick:function(e,t){t.stopPropagation();var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n)if(e[0]instanceof Image&&"stickerConf"!=e[0].getAttribute("data-purpose")){var i=e.attr("src");ConferenceAPI.reactGIF(n.getId(),i,(function(){n.getReactionsDB().setUserGif(n.getCurrentUserId(),$Util.getSyncedCurrentTime(),i),ZCSmartConferenceUI.showGifInUI(n,n.getCurrentMember())}))}else n.sendReaction(e.attr("code"))},showAllReactions:function(e,t){var n=$("#smartconf-all-reactions");0===n.children().length?(Smiley.populateSmileyDOM(n,e),ConferenceImpl.handleReactionConfigUpdate(ZCSmartConferenceImpl.getCurrentActiveSession().getConfigurations()),n.show()):"none"===n.css("display")?n.show():n.hide()},clearNonVerbalFeedback:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n.hasHostPermission()){var i=t.attr("type");ConferenceAPI.clearNonVerbalFeedback(n.getId(),i,t.parent(),(function(){t.parent().addClass("dN");var e=n.getReactionsDB(),r=e.getUsersByVoteType(i);for(var o of r)n.isCurrentUser(o)&&$('[smartconferencebutton][purpose="handleSpecialReaction"].active').removeClass("active"),e.setUserVote(o,ZCSmartConferenceConstants.nvfValues.NO_VOTE),ZCSmartConferenceUI.updateNvfInfo(n,n.getMember(o),!0);e.clearVoteCountByType(i)}))}},handleSpecialReaction:function(e,t){e.stopPropagation();var n=t.attr("type"),i=t.hasClass("active"),r=ZCSmartConferenceImpl.getCurrentActiveSession();i?ConferenceAPI.unvoteNVF(r.getId(),n,t,(function(){t.parent().find(".active").removeClass("active");var e=r.getReactionsDB(),i=r.getCurrentMember(),o=e.getUserVote(i.getId());e.setUserVote(i.getId(),ZCSmartConferenceConstants.nvfValues.NO_VOTE),o&&e.decrementVoteCount(n),ZCSmartConferenceUI.updateNvfInfo(r,i,!1),ZCSmartConferenceUI.setNvfCountInUI(r)})):ConferenceAPI.voteNVF(r.getId(),n,t,(function(){t.parent().find(".active").removeClass("active"),t.addClass("active");var e=r.getReactionsDB(),i=r.getCurrentMember(),o=e.getUserVote(i.getId());e.setUserVote(i.getId(),n),void 0===o&&e.incrementVoteCount(n),ZCSmartConferenceUI.updateNvfInfo(r,i,!1),ZCSmartConferenceUI.setNvfCountInUI(r)}))},showFeedbackPopup:function(e){Clickoutside.handleClickOnChild(e);var t=ZCSmartConferenceImpl.getCurrentActiveSession();t&&(t.setFeedbackAsShown(),ZCSmartConferenceUI.showFeedback(t,!1,!0))},turnOnIncomingVideo:function(e){Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.handleIncomingVideoState(!0)},turnOffIncomingVideo:function(e){Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.handleIncomingVideoState(!1)},openSettings:function(e,t){ZCSmartConferenceUI.createDeviceSettings(e,t,!1)},switchToConfigurationsTab:function(){ZCTrack.track("MEETING_PERMISSIONS",{TRIGGER:"DURING_CALL"});var e=ZCSmartConferenceImpl.getCurrentActiveSession();$("#conf-settings-lhs").find("[settingstab]").removeClass("active"),$("#conf-config-lhs").addClass("active"),$("#conference_settings_body").html(ConferenceTemplates.getConfigurationsBodyHtml(e.getConfigurations().configurations,e)),MediaUtil.clearAudioPreview(e),e.clearVideoEffectsPreview()},switchToPersonalConfigurations:function(e,t){var n=$("#conf-settings-lhs");n.find("[settingstab]").removeClass("active"),n.find("#conf-personal-config-lhs").addClass("active"),$("#conference_settings_body").html(MediaTemplates.getCallSettingsHtml(!1));var i=ZCSmartConferenceImpl.getCurrentActiveSession();MediaUtil.clearAudioPreview(i),i.clearVideoEffectsPreview()},switchToVideoEffects:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n.clearVideoEffectsPreview();var i=$("#conf-settings-lhs");i.find("[settingstab]").removeClass("active"),i.find("#conf-video-effects-lhs").addClass("active");var r=$("#conference_settings_body");r.html(ZCSmartConferenceTemplates.getVideoEffectsPanel(n));MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.VIDEO_ONLY),WebRTCUserMedia.requestNewStreamInstance(WebRTCUserMedia.streamInstanceIds.video_effects_preview,WebRTCUserMedia.streamTypes.VIDEO_ONLY,(function(e){MediaManager.resetStreamRequested();var t=r.find("#video_effect_preview_dom");t.length?(MediaUtil.setAndPlayStreamInMediaContainer(t,e,!0),n.setVideoEffectsPreviewStream(e)):WebRTCUserMedia.closeStreamInstance(WebRTCUserMedia.streamInstanceIds.video_effects_preview,e._getType())}),(function(e){MediaManager.resetStreamRequested();var t=r.find("#video_effect_preview_dom");t.find("[loader]").addClass("hide"),t.find("[user_image]").removeClass("dN")}),void 0,Conference.getVideoEffects(n)),MediaUtil.clearAudioPreview(n)},selectVideoBackground:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(!n.isRequestPending(ZCMediaConstants.requests.applyPreviewVideoBackgroundEffect)){var i=$("#conf_video_effects_panel");i.find("[background_list] [list_item]").removeClass("zc-av-video-effects-list-item-active"),t.addClass("zc-av-video-effects-list-item-active");var r=n.getSelectedVideoBackground(),o=n.getSelectedVideoFilter(),s=t.attr("value"),a=n.getVideoEffectsPreviewStream();if(a){var c=$("#conference_settings_body").find("#video_effect_preview_dom"),d=c.find("[loader]");d.removeClass("hide");var l=t.find("[loader]");l.removeClass("dN"),n.setRequestAsPending(ZCMediaConstants.requests.applyPreviewVideoBackgroundEffect),MLBackgroundProcessor.applyVideoBackground(a,s,(function(e){d.addClass("hide"),l.addClass("dN"),n.setRequestAsCompleted(ZCMediaConstants.requests.applyPreviewVideoBackgroundEffect),e&&(MediaUtil.setAndPlayStreamInMediaContainer(c,e,!0),n.setVideoEffectsPreviewStream(e))}))}var u=s;(MLBackgroundProcessor.backgroundTypes.hasNoBackground(s)||MLBackgroundProcessor.backgroundTypes.isBlur(s))&&(u=MLBackgroundProcessor.backgroundTypes.images[0]);var f=i.find("[filters_list] [list_item]");f.find("img").attr("src",MLBackgroundProcessor.backgroundTypes.getThumbNailUrl(u));var m=f.filter(".zc-av-video-effects-list-item-active").attr("value");$("#conference_settings_body").toggleClass("smartconf-effect-edited",r!==s||o!==m)}},selectVideoFilter:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(!n.isRequestPending(ZCMediaConstants.requests.applyPreviewVideoBackgroundEffect)){var i=$("#conf_video_effects_panel");i.find("[filters_list] [list_item]").removeClass("zc-av-video-effects-list-item-active"),t.addClass("zc-av-video-effects-list-item-active");var r=n.getSelectedVideoBackground(),o=n.getSelectedVideoFilter(),s=i.find("[background_list] [list_item].zc-av-video-effects-list-item-active").attr("value"),a=t.attr("value"),c=n.getVideoEffectsPreviewStream();if(c){var d=$("#conference_settings_body").find("#video_effect_preview_dom"),l=d.find("[loader]");l.removeClass("hide");var u=t.find("[loader]");u.removeClass("dN"),n.setRequestAsPending(ZCMediaConstants.requests.applyPreviewVideoBackgroundEffect),MLBackgroundProcessor.applyVideoFilter(c,a,(function(e){l.addClass("hide"),u.addClass("dN"),n.setRequestAsCompleted(ZCMediaConstants.requests.applyPreviewVideoBackgroundEffect),e&&(MediaUtil.setAndPlayStreamInMediaContainer(d,e,!0),n.setVideoEffectsPreviewStream(e))}))}$("#conference_settings_body").toggleClass("smartconf-effect-edited",r!==s||o!==a)}},setVideoEffects:function(e,t){var n=$("#conf_video_effects_panel"),i=n.find("[background_list] [list_item].zc-av-video-effects-list-item-active").attr("value"),r=n.find("[filters_list] [list_item].zc-av-video-effects-list-item-active").attr("value");ZCSmartConferenceImpl.getCurrentSession().applyVideoEffects(i,r),$WC.$Win.destroy("conference_settings_win")},closeVideoEffectsPanel:function(e,t){$WC.$Win.destroy("conference_settings_win")},showVideoEffectsInPreview:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession();n&&MediaUtil.waitingRoom.showVideoEffectsInPreview(e,t,n,$("#preview_room_window"),{customAttribute:"smartconferencebutton",checkboxAttribute:"smartconferencemediacheckbox"})},closeVideoEffectsInPreview:function(e,t){MediaUtil.waitingRoom.closeVideoEffectsInPreview(e,t)},switchToBackgroundImgEffectInPreview:function(e,t){MediaUtil.waitingRoom.switchToBackgroundImgEffectInPreview(e,t)},switchToBackgroundFilterEffectInPreview:function(e,t){MediaUtil.waitingRoom.switchToBackgroundFilterEffectInPreview(e,t)},setVideoBackgroundInPreview:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession();n&&MediaUtil.waitingRoom.setVideoBackgroundInPreview(e,t,n,$("#smartconferencepreview"))},setVideoFilterInPreview:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession();n&&MediaUtil.waitingRoom.setVideoFilterInPreview(e,t,n,$("#smartconferencepreview"))},openInviteUserPanel:function(e,t){Clickoutside.handleClickOnChild(e);var n=$("#invite_users_panel"),i=ZCJQuery(t).attr("invite_user_rhs");n.length?ZCSmartConferenceUI.closeV2InviteUserPanel():ZCSmartConferenceUI.openInviteUserPanel("true"===i)},inviteUsers:function(e,t){var n=ZCSmartConferenceHandler.inviteUserSuggestion.getSelectedListValues();if(n.length>0){var i=ZCSmartConferenceImpl.getCurrentActiveSession().getId();ConferenceAPI.invite(i,n),ZCSmartConferenceUI.closeInviteUsers(i)}else UI.updateBanner(Resource.getRealValue("common.select.recipant"),2e3,!1,!0)},copyPublicLink:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();if(e){var t=e.getPublicUrl();$WC.Util.isEmpty(t)||$Util.copyTextToClipboard(t,(function(){UI.updateBanner(Resource.getRealValue("channel.link.copied"))}))}},copyInvitationFromPanel:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i=n.getPublicUrl();if(!$WC.Util.isEmpty(i)){var r="conference.invitation.content."+(n.isVideoConference()?"video":"audio"),o=Resource.getRealValue(r,Users.getName(n.getCurrentUserId(),n.getCurrentMember().getName(),-1));o+="\n\n",o+=Resource.getRealValue("formbuilder.info.title")+": "+n.getTitle(),o+="\n\n",o+=Resource.getRealValue("conference.invitation.join")+": ",o+="\n",o+=i,$Util.copyTextToClipboard(o,(function(){UI.updateBanner(Resource.getRealValue("conference.invitation.copied"))}))}}},showSendMailInPanel:function(e,t){t.addClass("zcdisabled");var n=$("#invite_users_panel");n.find('[smartconferencebutton][purpose="showInviteUsersInPanel"]').removeClass("zcdisabled"),n.find("#conf_send_invite_panel_cnt").addClass("dN"),n.find("#conf_send_mail_panel_cnt").removeClass("dN"),ZCSmartConferenceUI.adjustInviteUsersInPanelInRhs(n)},showInviteUsersInPanel:function(e,t){t.addClass("zcdisabled");var n=$("#invite_users_panel");n.find('[smartconferencebutton][purpose="showSendMailInPanel"]').removeClass("zcdisabled"),n.find("#conf_send_mail_panel_cnt").addClass("dN"),n.find("#conf_send_invite_panel_cnt").removeClass("dN"),ZCSmartConferenceUI.adjustInviteUsersInPanelInRhs(n)},sendMailFromPanel:function(e,t){var n=ZCSmartConferenceHandler.invitePanelMailSuggestion.getSelectedListValues();if(0!==n.length){var i=ZCSmartConferenceImpl.getCurrentActiveSession();ConferenceAPI.invite(i.getId(),n,!0),Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.closeV2InviteUserPanel()}},inviteUsersFromPanel:function(e,t){var n=ZCSmartConferenceHandler.invitePanelUsersSuggestion.getSelectedListValues();if(0!==n.length){var i=ZCSmartConferenceImpl.getCurrentActiveSession();ConferenceAPI.invite(i.getId(),n,!1),Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.closeV2InviteUserPanel()}},close_v2_invite_panel:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceUI.closeV2InviteUserPanel()},showActionsOnMember:function(e,t){var n=t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId"),i=ZCSmartConferenceImpl.getCurrentActiveSession(),r=i.getId()+n+"useractiondropdowncnt";if(i&&0===t.children().length){var o=i.getMember(n),s=ZCSmartConferenceTemplates.getRhsSectionUserOptionsCntHtml(i,o);t.addClass("active").html(s),ZCSmartConferenceUI.adjustPositionWithMainWindow($("#smartconferenceuserslist"),t.find("#"+i.getId()+o.getId()+"useractiondropdowncnt")),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:r,doNotClose:function(e,t,n){return n&&n.target.id===i.getId()+o.getId()+"useractiondropdownopt"},customHide:function(e){t.removeClass("active"),$("#"+$.escapeSelector(e.destid)).remove()}})}else t.removeClass("active"),$("#"+$.escapeSelector(r)).remove(),Clickoutside.clear(r)},setAsCohost:function(e,t){ZCSmartConferenceImpl.setAsCohost(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},removeFromCohost:function(e,t){ZCSmartConferenceImpl.removeFromCohost(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},setAsCohostFromOpt:function(e,t){ZCSmartConferenceImpl.setAsCohost(t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},removeFromCohostFromOpt:function(e,t){ZCSmartConferenceImpl.removeFromCohost(t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},setAsHost:function(e,t){ZCSmartConferenceImpl.setAsHost(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},setAsHostFromOpt:function(e,t){ZCSmartConferenceImpl.setAsHost(t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},setInSpotLight:function(e,t){ZCSmartConferenceImpl.setInSpotLight(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},removeFromSpotLight:function(e,t){ZCSmartConferenceImpl.removeFromSpotLight(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},setInSpotLightFromOpt:function(e,t){ZCSmartConferenceImpl.setInSpotLight(t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},removeFromSpotLightFromOpt:function(e,t){ZCSmartConferenceImpl.removeFromSpotLight(t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},showSpotLightOptions:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n.hasHostPermission()){var i="spotlightdropdowncnt",r=$("#"+i);if(n&&0===r.children().length){var o=ZCSmartConferenceTemplates.getSpotLightOptionsHtml(n);t.attr("id",n.getId()+"spotlightdropdownopt"),t.addClass("active"),r.removeClass("dN").html(o),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:i,doNotClose:function(e,t,i){return i&&i.currentTarget.id===n.getId()+"spotlightdropdownopt"},customShow:function(e){$("#"+e.destid).removeClass("dN")},customHide:function(e){t.removeClass("active"),$("#"+e.destid).addClass("dN").empty()}})}else t.removeClass("active"),r.addClass("dN").empty(),Clickoutside.clear(i)}},disableSpotLight:function(e,t){Clickoutside.handleClickOnChild(e);var n=ZCSmartConferenceImpl.getCurrentSession();n.hasHostPermission()&&ConferenceAPI.disableSpotLight(n.getId(),(function(){n.setSpotLightAsDisabled(n.getLastSpotLightActivityTime()+1,n.getCurrentUserId())}))},removeFromSpeaker:function(e,t){ZCSmartConferenceImpl.removeFromSpeaker(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},removeFromSpeakerFromOpt:function(e,t){ZCSmartConferenceImpl.removeFromSpeaker(t.parents("[user_id]").attr("user_id")),Clickoutside.handleClickOnChild(e)},raiseSpeakerRequestFromOpt:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.getCurrentActiveSession()instanceof ZCSmartConferenceSession?ZCSmartConferenceHandler.UIEvents.raiseSpeakerRequest(e,t):ConferenceHandler.UIEvents.raiseSpeakerRequest(e,t)},dropSpeakerRequestFromOpt:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.getCurrentActiveSession()instanceof ZCSmartConferenceSession?ZCSmartConferenceHandler.UIEvents.dropSpeakerRequest(e,t):ConferenceHandler.UIEvents.dropSpeakerRequest(e,t)},approveSpeakerRequestFromOpt:function(e,t){ZCSmartConferenceImpl.getCurrentActiveSession()instanceof ZCSmartConferenceSession?ZCSmartConferenceHandler.UIEvents.approveSpeakerRequest(e,t):ConferenceHandler.UIEvents.approveSpeakerRequest(e,t),Clickoutside.handleClickOnChild(e)},denySpeakerRequestFromOpt:function(e,t){ZCSmartConferenceImpl.getCurrentActiveSession()instanceof ZCSmartConferenceSession?ZCSmartConferenceHandler.UIEvents.denySpeakerRequest(e,t):ConferenceHandler.UIEvents.denySpeakerRequest(e,t),Clickoutside.handleClickOnChild(e)},kickoutUser:function(e,t){ZCSmartConferenceImpl.kickoutUser(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId")),Clickoutside.handleClickOnChild(e)},setWbEditor:function(e,t){WhiteBoard.setUserAsEditorForCurrentBoard(t.parents("[smartconferenceparticipant], [conferenceparticipant]").attr("userId"),ZCSmartConferenceImpl.getCurrentActiveSession()),Clickoutside.handleClickOnChild(e)},playDummySoundInPreviewPage:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(void 0===n){if(!ZCSmartConferenceImpl.hasJoiningSession())return;n=ZCSmartConferenceImpl.getJoiningSession()}MediaUtil.playDummySoundForSession(n,t)},stopDummySoundInPreviewPage:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(void 0===n){if(!ZCSmartConferenceImpl.hasJoiningSession())return;n=ZCSmartConferenceImpl.getJoiningSession()}MediaUtil.stopDummySoundForSession(n,t)},showJoinDeviceSettings:function(e,t){ZCSmartConferenceImpl.hasJoiningSession()&&ZCSmartConferenceUI.showJoinDeviceSettings(ZCSmartConferenceImpl.getJoiningSession())},setDeviceInJoinRoom:function(e,t){Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.hasJoiningSession()&&ConferenceImpl.setDeviceInJoinRoom(t,!1)},joinFromPreviewRoom:function(){if(ZCSmartConferenceImpl.hasJoiningSession()){var e=ZCSmartConferenceImpl.getJoiningSession();if(e.removePreviewRoomNetworkPredictor(),e.writeToEventsLog(ConferenceLog.constants.eventsLog.joinClickedFromPreview),!e.isSmartMode()||e.isAudioConference())return void ConferenceImpl.joinFromPreviewRoom(e);ZCSmartConferenceImpl.joinFromPreviewRoom()}},acceptRecordingConsentInJoinPreview:function(){if(ZCSmartConferenceImpl.hasJoiningSession()){var e=ZCSmartConferenceImpl.getJoiningSession();if(e.writeToEventsLog(ConferenceLog.constants.eventsLog.joinClickedFromRecordingConsent),!e.isSmartMode()||e.isAudioConference())return void ConferenceImpl.joinFromPreviewRoom(e);ZCSmartConferenceImpl.joinFromPreviewRoom()}},closePreviewRoomFromRecordingConsent:function(){ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.closedFromRecordingConsent)},closePreviewRoom:function(e,t){ZCSmartConferenceImpl.closePreviewRoom(ZCSmartConferenceConstants.previewCloseSource.closedFromUI)},startFromPreviewRoom:function(){ConferenceImpl.startFromPreviewRoom()},quickStartFromPreviewRoom:function(){ConferenceImpl.quickStartFromPreviewRoom()},transferGroupCall:function(e,t){var n=t.attr("conference_id"),i=ZCSmartConferenceImpl.getAPIResponse(n);if(i){$WC.$Win.destroy(n+"_transfer_group_call"),MediaManager.handleExistingSessions((function(){MediaManager.prefetchMetaDetails((function(){Conference.isSmartMode(i.mode)&&Conference.isVideoConference(i.type)?ZCSmartConferenceImpl.openJoinSettings(n,i):ConferenceImpl.openJoinSettings(n,i)}))}))}},transferGroupCallToAddedScreen:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();if(n&&!n.isPrimarySession()){ZCSmartConferenceImpl.endSecondarySession(n,!0,!0);var i={type:n.getScopeType(),ids:n.getScopeIds()};MediaManager.isChatScope(i.type)&&(i.chatId=n.getChatId(),i.threadChatId=n.getThreadChatId());var r={mode:n.getMode(),type:n.getType(),host:{id:n.getHostId(),name:n.getHostName()},creatorId:n.getCreatorId(),creatorName:n.getCreatorName(),title:n.getTitle(),scope:i,start_time:n.getStartTime(),adhocCallDetails:n.getAdhocCallDetails(),associated_resource:n.getAssociatedResourceData(),encryptedResourceId:n.getEncryptedPublicResorceId(),memberType:n.getMemberType(),recording:n.isRecording(),configurations:n.getConfigurations().configurations};MediaManager.prefetchMetaDetails((function(){n.isAudioConference()?ConferenceImpl.openJoinSettings(n.getId(),r):ZCSmartConferenceImpl.openJoinSettings(n.getId(),r)}))}},addScreenInGroupCall:function(e,t){var n=t.attr("conference_id"),i=ZCSmartConferenceImpl.getAPIResponse(n);if(i){$WC.$Win.destroy(n+"_transfer_group_call"),MediaManager.handleExistingSessions((function(){if(!$Util.Browser.isChrome()||WebRTCUserMedia.isScreenShareSupportedInNative()||ScreenShare.Extension.isInstalled()){MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.SCREEN,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestScreenStream((function(e){MediaManager.resetStreamRequested(),ZCSmartConferenceImpl.startScreenShareSession(n,e,i)}),(function(e,t){MediaManager.resetStreamRequested(),void 0!==e&&MediaManager.handleMediaError(e,t)}),(function(){ZCSmartConferenceHandler.UIEvents.closeAddedScreenShare()}),MediaManager.getComputerAudioConstraints(),void 0,void 0,!0)}else MediaManager.showExtensionInstallPreview("smartconferencebutton")}))}},closeAddedScreenShare:function(){var e=ZCSmartConferenceImpl.getCurrentSession();e&&!e.isPrimarySession()&&ZCSmartConferenceImpl.endSecondarySession(e,!0,!1)},endConference:function(e,t){var n=t.parents("[conferenceId]").attr("conferenceId");ZCSmartConferenceImpl.showEndOptionsOrEnd(n,e,t)},clearRHSSearch:function(e,t){ZCSmartConferenceUI.clearRhsSearch()},showChatSwitchDropdown:function(e,t){let n=ZCSmartConferenceImpl.getCurrentActiveSession();if(void 0===n||n.isInMinimizedView())return;let i=t.attr("chid"),r=Conference.domCache.get("#title"+i,!0).parents("[title-header]");r.addClass("focussed-header");let o=ZCSmartConferenceHandler.switchChatSuggestion;0===o.getContainer().length?(n.getChatContainer().find('[purpose="chatbody"]').before(ZCSmartConferenceTemplates.getSwitchChatDropdownHtml(n.getChatId(),n.getActiveChatId())),SearchField.init(o.id),o.getContainer().hide()):$("#conference-switch-chat-parent").replaceWith(ZCSmartConferenceTemplates.getSwitchChatHeaderHtml(n.getChatId(),n.getChatId()===n.getActiveChatId())),o.populateDefaultResult();let s=()=>{o.getContainer().hide(),o.getResultsListContainer().empty(),r.removeClass("focussed-header")};o.getContainer().is(":visible")?(s(),Clickoutside.clear(o.id)):Clickoutside.bind({srcid:"switchchatbtn"+i,destid:o.id,closeOnClickSrc:!0,doNotClose:function(e,t,n){return n&&n.currentTarget.id==="switchchatbtn"+i},customShow:()=>{o.getContainer().show(),o.getSearchContainer().focus()},customHide:(e,t)=>{s()}})},closeStreamingPopup:function(){$("#conference_streamingpopup").remove()},openDeviceSettings:function(e,t){if(ZCSmartConferenceUI.removeDeviceSettingsPopup()){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=(n.isActiveMember(),Object.values(n.getAudioMediaContainers())[0]),r=n.getAudioUpStream(),o=n.getVideoUpStream(),s={handleCustomUI:function(n,i,r,o,s){var a=MediaManager.getDeviceSettings(n,i,r,o,s,t);$("#bottom_band_local_user").append(a),Clickoutside.bind({event:e,destid:"bottom_band_device_settings",srcid:t.attr("id"),doNotClose:function(e,t,n,i,r){return n&&ZCJQuery(n.currentTarget).attr("id")===e.srcid},customShow:function(e){ZCJQuery(t).addClass("active")},customHide:function(e){$("#"+e.destid).remove(),ZCJQuery(t).removeClass("active")}})}};n.isVideoConference()||(s[ZCMediaDevices.kinds.VIDEO_INPUT]=!1),MediaDeviceWidget.show((function(e,t,i){n.getAudioUpStream(),n.getVideoUpStream();$WC.Util.isEmptyObject(e)||(ZCMediaDevices.setPreferredDevices(e,!Conference.isCurrentUserGuest()),(ZCSmartConferenceImpl.hasCurrentSession()||ConferenceImpl.hasCurrentSession())&&(n instanceof ZCSmartConferenceSession?ZCSmartConferenceImpl.handleDeviceChange(n,e,!1):ConferenceImpl.handleDeviceChange(n,e,!1),ZCJQuery("#media_device_widget").find('[devicetype="'+t+'"]').removeClass("sel"),i.addClass("sel"),i.parents("[media_list]").attr("selecteddeviceid",i.attr("deviceid"))))}),s,r,o,i)}},openSettingsWindow:function(e,t){ZCSmartConferenceUI.createDeviceSettings(e,t,!0)}},UIToggleEvents:{toggleAudioInPreview:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession();if(n){var i=t.is(":checked");if(n.hasAudioUpStream())ZCSmartConferenceImpl.changeAVStatusInPreview("audio",!i);else{if(t.prop("checked",!1),MediaManager.isStreamRequested())return;MediaManager.setAsStreamRequested(WebRTCUserMedia.streamTypes.AUDIO_ONLY,ZCMediaConstants.mediaModules.CONFERENCE),WebRTCUserMedia.requestAudioStream((function(e){t.prop("checked",!0),MediaManager.resetStreamRequested(),n.setAudioUpStream(e),ZCSmartConferenceImpl.changeAVStatusInPreview("audio",!1);var i=function(){ZCSmartConferenceUI.updateAudioDevicesInJoinPreview(n)};WebRTCUserMedia.getMediaDevices(i,i)}),(function(e,t){MediaManager.resetStreamRequested(),void 0!==e&&MediaManager.handleMediaError(e,t)}))}}},toggleVideoInPreview:function(e,t){if(!MediaManager.isStreamRequested()){var n=ZCSmartConferenceImpl.getJoiningSession();if(n){var i=t.is(":checked");if(n.hasVideoUpStream()||!i)ZCSmartConferenceImpl.changeAVStatusInPreview("video",!i),ZCSmartConferenceImpl.changeVideoMirrorCheckBoxDisabledState(!0);else{t.prop("checked",!1);ZCSmartConferenceImpl.handleVideoPreviewUnmute(n,(function(e){t.prop("checked",!0),ZCSmartConferenceImpl.changeVideoMirrorCheckBoxDisabledState(!1)}),(function(e,t){void 0!==e&&MediaManager.handleMediaError(e,t)}))}}}},toggleAudioInSessionPreview:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i=n.isOldImpl()?ConferenceHandler:ZCSmartConferenceHandler,r=t.is(":checked");(r?i.UIEvents.unmuteAudio():i.UIEvents.muteAudio())||t.prop("checked",!r)}},toggleVideoInSessionPreview:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){var i=n.isOldImpl()?ConferenceHandler:ZCSmartConferenceHandler,r=t.is(":checked"),o=!1;r?(ZCSmartConferenceImpl.changeVideoMirrorCheckBoxDisabledState(!1),o=i.UIEvents.unmuteVideo(),n.isVideoUpStreamBlocked()&&n.setVideoUpStreamBlockedStatus(!1)):(ZCSmartConferenceImpl.changeVideoMirrorCheckBoxDisabledState(!0),o=i.UIEvents.muteVideo()),o||t.prop("checked",!r)}},toggleEmailValidation:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=t.is(":checked");ConferenceAPI.configure(n.getId(),Conference.configurations.GUEST_VALIDATION,i,(function(){var e={};e[Conference.configurations.GUEST_VALIDATION]=i,n.updateGuestConfigurations(e),UI.updateBanner(Resource.getRealValue(i?"conference.banner.validation.enable":"conference.banner.validation.disable"))}))},toggleModeInPreview:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession();if(n){var i=t.is(":checked"),r=$("#preview_room_window");r.toggleClass("smartconf-audio-preview",i),r.find("[preview_controls]").toggleClass("flexC",!i),r.find("#videoinputdropdowncnt").toggleClass("dN",i),r.find("[video_toggle_in_preview]").toggleClass("dN",i);var o=i?Conference.types.AUDIO:Conference.types.VIDEO;n.setType(o);var s=r.find('[purpose="toggleVideoInPreview"]');s.prop("checked",!i),this.toggleVideoInPreview(void 0,s)}},toggleParticipantsUnmuteRestriction:function(e,t){var n=t.is(":checked"),i=!n,r=$("#smartconferenceusersection").find('[purpose="toggleParticipantsUnmuteRestriction"]');r.prop("checked",n);var o=ZCSmartConferenceImpl.getCurrentSession();if(!o.isAudioMutedForAllParticipants())return o.setAllowAudioUnmuteCheckboxStatus(n),void ZCSmartConferenceUI.resetMuteOptionsInParticipantList(o);if(o.isRequestPending(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction))r.prop("checked",!n);else{o.setAllowAudioUnmuteCheckboxStatus(n);var s=r.parents("[checkboxContainer]");s.addClass("smartconf-requesting"),o.setRequestAsPending(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),ConferenceAPI.updateUnmuteRestriction(o.getId(),"audio",i,(function(){o.setRequestAsCompleted(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),o.setAudioUnmuteRestrictedStatusForParticipants(i,$Util.getSyncedCurrentTime(),o.getCurrentUserId(),!0),s.removeClass("smartconf-requesting")}),(function(){o.setRequestAsCompleted(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),r.prop("checked",!n),o.setAllowAudioUnmuteCheckboxStatus(!n),s.removeClass("smartconf-requesting")}))}},toggleExternalAccess:function(e,t){let n=t.is(":checked"),i=t.parents("[checkboxcontainer]");i.addClass("loading_progress");let r=ZCSmartConferenceImpl.getCurrentActiveSession().getId();ConferenceAPI.configure(r,Conference.configurations.PUBLIC_ACCESS,n,()=>{i.removeClass("loading_progress"),UI.updateBanner(I18N("conference.banner.guestaccess."+(n?"enable":"disable")))},e=>{t.prop("checked",!n),i.removeClass("loading_progress"),e&&void 0!==e.message&&UI.updateBanner(e.message,2e3,!0)})},toggleStreamingExternalAccess:function(e,t){let n=t.is(":checked"),i=t.parents("[checkboxcontainer]");i.addClass("loading_progress");ConferenceAPI.configure(t.attr("session_id"),Conference.configurations.PUBLIC_STREAMING,n,()=>{i.removeClass("loading_progress")},e=>{t.prop("checked",!n),i.removeClass("loading_progress"),e&&void 0!==e.message&&UI.updateBanner(e.message,2e3,!0)})},toggleRememberVideoEffectsInPreview:function(e,t){var n=ZCSmartConferenceImpl.getJoiningSession(),i=t.is(":checked");n.setRememberVideoEffectsStatus(i)},toggleRememberVideoEffects:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession(),i=t.is(":checked");n.setRememberVideoEffectsStatus(i)},toggleAllowSpeakersVideoInSpotLight:function(e,t){var n=t.is(":checked"),i=!n,r=ZCSmartConferenceImpl.getCurrentSession();if(r.hasHostPermission())if(r.isRequestPending(ZCSmartConferenceConstants.requests.spotLightAllowSpeakersVideo))t.prop("checked",!n);else{var o=t.parents("[checkboxContainer]");o.addClass("smartconf-requesting"),r.setRequestAsPending(ZCSmartConferenceConstants.requests.unmuteParticipantsRestriction),ConferenceAPI.updateSpotLightConfig(r.getId(),void 0,i,(function(){r.setRequestAsCompleted(ZCSmartConferenceConstants.requests.spotLightAllowSpeakersVideo),r.updateSpotLightConfig(r.getCurrentUserId(),r.getLastSpotLightActivityTime()+1,void 0,i),o.removeClass("smartconf-requesting")}),(function(){t.prop("checked",!n),r.setRequestAsCompleted(ZCSmartConferenceConstants.requests.spotLightAllowSpeakersVideo),o.removeClass("smartconf-requesting")}))}}},onImageLoadEvents:{videoCardUserImage:function(e){var t=ZCJQuery(e),n=t.parents("[mediacontainer]"),i=!0;0===n.length&&(n=t.parents("[gridmediacontainer]"),i=!1),n.removeClass("smartconf-userimg-fallback"),n.find("[default-username]").addClass("dN");var r=t.attr("src");if(!r.includes("&fs=original")&&!r.includes("/guestimg")){var o=ZCSmartConferenceImpl.getCurrentSession(),s=n.attr("videostreamid"),a="";if("local"===n.attr("streamSource"))a=ZCSmartConferenceImpl.getCurrentUserId();else{if(!s)return;a=i?o.getUserIdWithVideoStreamId(s):o.getUserIdWithVideoGridStreamId(s)}var c=ZCSmartConferenceTemplates.getUserImgUrl(a,"original");n.find("[originalUserImage]").attr("src",c)}r.includes("&fs=original")&&(n.find("[userImage]").addClass("dN"),n.find("[originalUserImage]").removeClass("dN"))},audioCardUserImage:function(e){GalaxyView.onImageLoad(this);var t=ZCJQuery(e),n=t.attr("src"),i=t.parents("[videocontainer]");if(n.includes("&fs=thumb")&&!n.includes("/guestimg")&&i.hasClass("layer-0-speaker")){var r=i.attr("uid"),o=ZCSmartConferenceTemplates.getUserImgUrl(r,"original");i.find("[org_user_dp]").attr("src",o)}if(n.includes("&fs=original")){i.find("[user_dp]").remove(),i.find("[org_user_dp]").removeClass("dN");var s=i.find("[user_card_wrapper]");s.find("[user_name]").addClass("dN"),s.find("[userimagecnt]").addClass("usr-img-cnt zc-usr-img-cnt")}}},onImageLoadErrorEvents:{removeVideoCardUserImage:function(e){var t=ZCJQuery(e),n=t.parents("[mediacontainer]");0===n.length&&(n=t.parents("[gridmediacontainer]")),n.addClass("smartconf-userimg-fallback"),n.find("[default-username]").removeClass("dN")},removeAudioCardUserImage:function(e){var t=ZCJQuery("#events_createview");0!==t.length&&t.find("[card_audio_status]").addClass("hudl-mic-mute");var n=ZCJQuery(e),i=n.parents("[audio_strip_item]"),r=n.parents("[audio_grid_box]"),o=n.parents("[minimized_audio_player]"),s="";if(0!==i.length?(n.addClass("huddle-audio-strip-item-user-image"),i.find("[user_name]").addClass("huddle-audio-strip-item-user-name"),s=i.attr("previewUserId")):0!==r.length?s=r.attr("user_id"):0!==o.length&&(s=o.attr("active_speaker_id")),0!==r.length||0!==i.length||0!==o.length){var a=ConferenceImpl.getCurrentSession(),c=void 0,d=void 0;a&&(c=a.getMember(s))&&(d=c.getDefaultUserImageIndex()),void 0===d&&(d=Math.floor(11*Math.random())+1,c&&c.setDefaultUserImageIndex(d));var l=$zcg._IMGSTATICURL+"/default/media/default_user_images/dp"+d+".png";n.attr("src",l)}else{n.addClass("dN");var u=n.parents("[user_card_wrapper]");u.find("[user_name]").removeClass("dN"),u.find("[userimagecnt]").removeClass("usr-img-cnt zc-usr-img-cnt")}}},UITransitionStartEvents:{footerTransition:function(e,t){e.originalEvent&&e.originalEvent.propertyName&&"height"!==e.originalEvent.propertyName||ZCSmartConferenceUI.initiateResizeInterval()}},PIPEvents:{onChange:function(e,t){var n=ZCSmartConferenceImpl.getCurrentSession();n&&!t&&(Clickoutside.handleClickOnChild(e),ZCSmartConferenceImpl.exitFromPIPMode(n))},onHangup:function(){var e=ZCSmartConferenceImpl.getCurrentSession();e&&ZCSmartConferenceImpl.endConference(e.getId(),!0)},onCamToggle:function(e){ZCSmartConferenceImpl.getCurrentSession()&&(e?ZCSmartConferenceHandler.UIEvents.unmuteVideo():ZCSmartConferenceHandler.UIEvents.muteVideo())},onMicToggle:function(e){ZCSmartConferenceImpl.getCurrentSession()&&(e?ZCSmartConferenceHandler.UIEvents.unmuteAudio():ZCSmartConferenceHandler.UIEvents.muteAudio())},isVideoMuted:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e)return e.getCurrentMember().isVideoMuted()},isAudioMuted:function(){var e=ZCSmartConferenceImpl.getCurrentSession();if(e)return e.getCurrentMember().isAudioMuted()}},UITransitionEndEvents:{footerTransition:function(e,t){e.originalEvent&&e.originalEvent.propertyName&&"height"!==e.originalEvent.propertyName||(ZCSmartConferenceUI.destroyResizeInterval(),ZCSmartConferenceUI.handleResize())}},deviceEvents:{handleDeviceChange:function(e,t){var n=[],i=[],r=void 0,o=void 0,s=void 0,a=[];if(ZCSmartConferenceImpl.hasCurrentActiveSession()?(s=ZCSmartConferenceImpl.getCurrentActiveSession(),a=Object.values(s.getAudioMediaContainers()),ZCSmartConferenceUI.updateAudioDevicesInSessionPreview(s)):ZCSmartConferenceImpl.hasJoiningSession()&&(s=ZCSmartConferenceImpl.getJoiningSession(),a=[MediaUtil.setAndGetAudioPreviewContainer(s)],ZCSmartConferenceUI.updateAudioDevicesInJoinPreview(s)),s){var c=s.getAudioUpStream();c&&c._hasAudioTrack()&&(r=c._getAudioDeviceId()),a.length&&(o=a[0].sinkId);for(var d=0;d<e.length;d++){var l=e[d];ZCMediaDevices.isAudioInputDeviceKind(l.kind)?r&&!ZCMediaDevices.isDefaultDeviceId(r)&&r!==l.deviceId&&n.push(l):ZCMediaDevices.isAudioOutputDeviceKind(l.kind)&&o&&!ZCMediaDevices.isDefaultDeviceId(o)&&o!==l.deviceId&&i.push(l)}$WC.$Win.destroy("device_switched_info");e={};n.length&&(e[ZCMediaDevices.kinds.AUDIO_INPUT]=n[0]),i.length&&(e[ZCMediaDevices.kinds.AUDIO_OUTPUT]=i[0]),$WC.Util.isEmptyObject(e)||(ZCMediaDevices.setPreferredDevices(e,!1),ZCSmartConferenceImpl.hasCurrentActiveSession()?s instanceof ConferenceSession?ConferenceImpl.handleDeviceChange(s,e,!0):ZCSmartConferenceImpl.handleDeviceChange(s,e,!0):ZCSmartConferenceImpl.hasJoiningSession()&&ConferenceImpl.handleDevicesAddedInJoiningPage(e))}}},UIFocusEvents:{selectInput:function(e,t){t.select()}},UIKeyUpEvents:{searchParticipants:function(e,t){var n="";e.which===$zcg.ESCAPE_KEYCODE?t.val(n):n=ZCSmartConferenceImpl.getSearchValue(t),ZCSmartConferenceUI.setRhsSearchValue(n),ZCSmartConferenceUI.clearRhsSearchTimeout(),ZCSmartConferenceUI.rhsSearchTimeout=setTimeout((function(){ZCSmartConferenceImpl.handleSearchParticipantInRHS()}),200)},jumpToPresentationSlide:function(e,t){PresentationHandler.validateInput(t),e.which===$zcg.ENTER_KEYCODE&&PresentationHandler.jumpToPresentationSlide(t)},searchParticipantsInBottomPane:function(e,t){var n="";e.which===$zcg.ESCAPE_KEYCODE?t.val(n):n=ZCSmartConferenceImpl.getSearchValue(t),ZCSmartConferenceUI.setBottomPaneSearchValue(n),ZCSmartConferenceUI.clearBottomPaneSearchTimeout(),ZCSmartConferenceUI.bottomPaneSearchTimeout=setTimeout((function(){ZCSmartConferenceUI.handleSearchParticipantInBottomPane()}),200)},editConferenceTitle:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n){$Dom.limitInput(t);var i="";e.which===$zcg.ESCAPE_KEYCODE&&t.val(i),i=t.val().trim();var r=MediaUtil.isValidTitle(i);if(e.which===$zcg.ENTER_KEYCODE&&r){e.preventDefault();var o=n.getTitle();ConferenceHandler.wmsEvents.updateTitle({conferenceId:n.getId(),title:i,actionUserId:n.getCurrentUserId()}),ConferenceAPI.updateTitle(n.getId(),i,void 0,(function(){ConferenceHandler.wmsEvents.updateTitle({conferenceId:n.getId(),title:o,actionUserId:n.getCurrentUserId()})}));var s=$("#conference-notes-iframe");s.attr("conference-id")===n.getId()&&NotebookIntegration.setDefaultNoteTitle(i,s),Clickoutside.handleClickOnChild(e)}t.toggleClass("zcfdk_tmbzoom",!r)}}},focusedUsersSuggestion:{id:"conference-focusedusers-selection",limit:Conference.MAX_FOCUSED_USERS,getResultsListID:function(){return this.id+"-list"},getResultsListContainer:function(){return $("#"+this.getResultsListID())},getResultsContainerID:function(){return this.id+"-results"},getResultsContainer:function(){return $("#"+this.getResultsContainerID())},getSearchFieldInputID:function(){return this.id+"-search-field"},getSearchFieldContainer:function(){return $("#"+this.id)},getSelectedList:function(){return this.getSearchFieldContainer().find("[data-selections]").children()},getSelectedListValues:function(){var e=[];if(this.limit>1){this.getSelectedList().each((function(){this.hasAttribute("key")&&e.push(this.getAttribute("key"))}))}else{var t=$("#conference-focusedusers-selection").find("[input_value]").attr("input_value");void 0!==t&&e.push(t)}return e},search:function(e){var t=ZCSmartConferenceImpl.getCurrentSession();if(t){this.getResultsListContainer().empty();var n=[];if(!(this.limit>1&&(n=this.getSelectedListValues()).length>=this.limit)){var i={searchin:SearchAgent.CUSTOMSEARCH,val:e,ignorelist:n,includeCurrentUser:!0,listid:this.getResultsListID(),contactshtml:SearchHTML.user,orgcontactshtml:SearchHTML.user,customobject:t.getActiveMembersForSearch(e),emptycallback:function(){this.displayNoResultFound(e)}.bind(this),clearcallback:function(){this.clear()}.bind(this)},r=SearchAgent.search(i);return r?this.displayResultDOM():this.limit>1&&this.clear(),r}UI.updateBanner(Resource.getRealValue("conference.focused.mode.maxerror",[this.limit]),2e3,!0)}},handleAction:function(e,t,n){},clear:function(){this.getResultsContainer().hide(),this.getResultsListContainer().empty(),Clickoutside.clear(this.getResultsContainerID())},displayNoResultFound:function(e){$WC.Util.isEmpty(e)||this.getSelectedListValues().length>0&&"*"===e||(this.getResultsListContainer().html($WC.template.replace('<div class="p15 textcent">{{content}}</div>',{$content:"conference.focused.mode.user.notfound"})),this.displayResultDOM())},displayResultDOM:function(){if(!(this.limit>1&&this.getSelectedListValues().length>=this.limit)){var e=this.getResultsContainer();e.find("[purpose='search']").first().addClass("srchbn sel"),e.is(":visible")||Clickoutside.bind({srcid:this.getSearchFieldInputID(),destid:this.getResultsContainerID()}),ZCScroll.scrollTop(e,0)}}},assignHostSuggestion:{id:"conference-assign-host-selection",getResultsListID:function(){return this.id+"-list"},getResultsListContainer:function(){return $("#"+this.getResultsListID())},getResultsContainerID:function(){return this.id+"-results"},getResultsContainer:function(){return $("#"+this.getResultsContainerID())},getSearchFieldInputID:function(){return this.id+"-search-field"},getSearchFieldContainer:function(){return $("#"+this.id)},getSelectedListValue:function(){return $("#conference-assign-host-selection").find("[input_value]").attr("input_value")},getSelectedNodeName:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t)return Users.getName(e,ZCSmartConferenceImpl.getSessionUserName(t,e))},search:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t){this.getResultsListContainer().empty();var n={searchin:SearchAgent.CUSTOMSEARCH,val:e,ignorelist:[],includeCurrentUser:!1,listid:this.getResultsListID(),contactshtml:SearchHTML.user,orgcontactshtml:SearchHTML.user,customobject:t.getActiveMembersForSearch(e),emptycallback:function(){this.displayNoResultFound(e)}.bind(this),clearcallback:function(){this.clear()}.bind(this)},i=SearchAgent.search(n);return i&&this.displayResultDOM(),i}},handleAction:function(e,t){this.replacSelectedValueAsNode(t.attr("uid"))},replacSelectedValueAsNode:function(e){this.clearSelectedValue();var t=ZCSmartConferenceTemplates.getSingleSelectedUserHtml(this.id,this.getSelectedNodeName(e));$WC.Util.isEmpty(t)||$("#"+this.id+"-result-cnt").prepend(t)},clearSelectedValue:function(){$("#"+this.id+"-selected-input").remove()},clear:function(){this.getResultsContainer().hide(),this.getResultsListContainer().empty(),Clickoutside.clear(this.getResultsContainerID())},displayNoResultFound:function(e){$WC.Util.isEmpty(e)||void 0!==this.getSelectedListValue()&&"*"===e||(this.getResultsListContainer().html($WC.template.replace('<div class="p15 textcent">{{content}}</div>',{$content:"conference.focused.mode.user.notfound"})),this.displayResultDOM())},displayResultDOM:function(){var e=this.getResultsContainer();e.find("[purpose='search']").first().addClass("srchbn sel"),e.is(":visible")||Clickoutside.bind({srcid:this.getSearchFieldInputID(),destid:this.getResultsContainerID()}),ZCScroll.scrollTop(e,0)}},switchChatSuggestion:{id:"conference-switch-chat-selection",getContainer:function(){return $("#"+this.id)},getResultsListId:function(){return this.id+"-list"},getResultsListContainer:function(){return $("#"+this.getResultsListId())},getSearchContainer:function(){return $("#"+this.id+"-search-field")},getIgnoreList:function(){let e=[],t=ZCSmartConferenceImpl.getCurrentActiveSession();return void 0!==t.getChatId()&&e.push(t.getChatId()),void 0!==t.getSwitchedChatId()&&e.push(t.getSwitchedChatId()),e},search:function(e){this.getResultsListContainer().empty();var t={searchin:SearchAgent.CHATHISTORY,val:e||"*",ignorelist:this.getIgnoreList(),listid:this.getResultsListId(),chathistoryhtml:SearchHTML.meetingswitchchathtml,sortByTime:!0,skipDeletedChat:!0,skipDummyChat:!0,skipMutedChat:!0,isThreadChatNeeded:!1,emptycallback:function(){this.displayNoResultFound()}.bind(this),clearcallback:function(){this.displayNoResultFound()}.bind(this)},n=SearchAgent.search(t);return this.getResultsListContainer().find('[searchcatagory="chats"],[searchcatagory="chathistory"]').children().first().addClass("sel"),n},populateDefaultResult:function(){this.getSearchContainer().val("").focus(),this.search()},displayNoResultFound:function(){this.getResultsListContainer().html($Util.emptyStateHtml({imageclass:"search_empty",title:I18N("history.search.none")}))},clear:function(){this.populateDefaultResult()},clearSelectedValue:function(){this.populateDefaultResult()},handleAction:function(e,t){ZCTrack.track("SWITCH_CHAT_IN_CONFERENCE",{TRIGGER:"NEW_CHAT"}),ZCSmartConferenceHandler.UIEvents.toggleRHSChat(e,t)},handleKeyUp:function(e,t){e.which===$zcg.ESCAPE_KEYCODE&&(e.stopPropagation(),$WC.Util.isEmpty(t)?this.getContainer().remove():this.populateDefaultResult())}},inviteUserSuggestion:{id:"smartconf-inviteusers",limit:100,getResultsListID:function(){return this.id+"-list"},getResultsListContainer:function(){return $("#"+this.getResultsListID())},getResultsContainerID:function(){return this.id+"-results"},getResultsContainer:function(){return $("#"+this.getResultsContainerID())},getSearchFieldInputID:function(){return this.id+"-search-field"},getSearchFieldContainer:function(){return $("#"+this.id)},getSelectedList:function(){return this.getSearchFieldContainer().find("[data-selections]").children()},getSelectedListValues:function(){var e=[];return this.getSelectedList().each((function(){this.hasAttribute("key")&&e.push(this.getAttribute("key"))})),e},search:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t){this.getResultsListContainer().empty();var n=[];t.isPersonalScope()&&(n=t.getInvitedMemberIds());var i=this.getSelectedListValues();n=n.concat(i);var r=$("#"+this.getSearchFieldInputID());0==i.length?r.attr("placeholder",Resource.getRealValue("quickchat.node.placeholder")):r.removeAttr("placeholder");var o={searchin:SearchAgent.CONTACTS+SearchAgent.ORGCONTACTS,val:e,ignorelist:n,listid:this.getResultsListID(),contactshtml:SearchHTML.user,orgcontactshtml:SearchHTML.user,allstatuscontacts:!0,emptycallback:function(){}.bind(this),clearcallback:function(){this.clear(e)}.bind(this)},s=SearchAgent.search(o);return s?this.displayResultDOM():this.limit>1&&this.clear(e),s}},displayResultDOM:function(){if(!(this.limit>1&&this.getSelectedListValues().length>=this.limit)){var e=this.getResultsContainer();e.find("[purpose='search']").first().addClass("srchbn sel"),e.is(":visible")||Clickoutside.bind({srcid:this.getSearchFieldInputID(),destid:this.getResultsContainerID()}),ZCScroll.scrollTop(e,0)}},handleAction:function(e,t){var n=this.getSelectedListValues(),i=$("#"+this.getSearchFieldInputID());0==n.length?i.attr("placeholder",Resource.getRealValue("quickchat.node.placeholder")):i.removeAttr("placeholder")},clear:function(e){this.getResultsContainer().hide(),this.getResultsListContainer().empty(),Clickoutside.clear(this.getResultsContainerID()),SearchField.checkAndAddEmailInAutocomplete(this.id,e,!1,ConferenceTemplates.externalUserNode)}}};var ConferenceChatWindow=function(){var e={$el:null,activeChat:null,init:function(){return this.$el=this.getConferenceDOM(),this},render:function(e,t){this.$el&&(this.preRender(t),e.hide(),this.getConferenceViewPort().removeClass("rhs-dN").html(e),this.postRender(t))},preRender:function(e){if(this.hasSession()){var t=this.getSession();this.updateChatIdIfDummyChat(t,e),this.updateChatMemberCountIfIsADummyChat(t,e)}},updateChatIdIfDummyChat:function(e,t){var n=ChatUI.getWin(t);n&&n.isDummyChat()&&(e.isThreadChatAllowed()?e.setDummyThreadChatId(t):e.setDummyChatId(t))},updateChatMemberCountIfIsADummyChat:function(e,t){if(DummyCwinUtils.isDummyCwinExists(t)&&ChatUI.exist[t]){var n=e.getMembersCount();e.getConfigurations().isChatAccessibleToExternalUser()||(n-=e.getGuestMembersCount()),ChatUI.exist[t].updateChatParticipants(Resource.getRealValue(n<2?"channel.tip.joinedparticip":"chat.participants.count",n+""))}},postRender:function(e){if(!this.hasSession()||!ChatUI.getWin(e))return;ZCSmartConferenceUI.addToggleForRHSChatHeader(this.getSession(),this.getConferenceDOM()),MainUI.handleIframes(e);var t=ChatUI.getWin(e),n=t.win();CodeSnippet.handleThemeForAVChat(!0),n.addClass("selcht").show();n.css({left:"",top:"",height:"",zIndex:""}),this.getConferenceDOM().addClass("show-aside"),this.getConferenceViewPort().addClass("dccontainer"),t.focus(),t.handleEmptyState(),this.activeChat=e,Config.isScrollOptimizeConfigEnabled()?n.addClass("ovrflwA chatnativescroll"):ZCScroll.customScroll(n.find("#chatbody"),!0),this.isSmartConference()?ZCSmartConferenceUI.handleResize():ConferenceUI.handleResize(),t.retainScrollOnVisible()},moveToHidePort:function(e){e=e||this.getActiveChatId();var t=ChatUI.getWin(e);t&&("none"!==t.win().css("display")&&t.storeScrollPosition(),this.getConferenceHidePort().prepend(t.win()))},moveToViewPort:function(e){var t=ChatUI.getWin(e);this.render(t.win(),e)},hasChatExistInHidePort:function(e){return Boolean(this.getConferenceHidePort().find("#"+e).length)},hasChatExistInViewPort:function(e){return Boolean(this.getConferenceViewPort().find("#"+e).length)},getConferenceDOM:function(){return this.isSmartConference()?Conference.domCache.get("#smartconferencewindow"):Conference.domCache.get("#conferencewindow")},getConferenceViewPort:function(){return this.isSmartConference()?Conference.domCache.get("#smartconferencechatsection"):Conference.domCache.get("#conferencechatsection")},isSmartConference:function(){return this.getSession()instanceof ZCSmartConferenceSession||this.hasSmartConference},hasSession:function(){return Boolean(this.getSession())},getSession:function(){return ZCSmartConferenceImpl.getCurrentActiveSession()},getConferenceHidePort:function(){return this.isSmartConference()?Conference.domCache.get("#smartconferencechatsectionhideport"):Conference.domCache.get("#conferencechatsectionhideport")},updateChatHeaderImage:function(e){var t=ChatUI.getWin(e);t&&(t.isThreadChat()?t.renderChatImage():t.updateWinHeader())},hasAnyActiveChat:function(){return Boolean(this.activeChat)},showSwitchedChat:function(e){this.hasChatExistInViewPort(e)&&(ZCSmartConferenceUI.addToggleForRHSChatHeader(this.getSession(),this.getConferenceDOM(),e),this.getConferenceViewPort().find("#"+e).show(),this.activeChat=e)},getActiveChatId:function(){return this.activeChat},getPreviouslyOpenedChatId:function(){return this.previouslyOpenedChatId||this.getSession()&&this.getSession().getChatId()},setPreviouslyOpenedChatId:function(){this.previouslyOpenedChatId=this.activeChat},clear:function(){this.$el=null,this.previouslyOpenedChatId=null,this.activeChat=null,this.hasSmartConference=!1,Conference.domCache.clearAll(),ConferenceUI.setSwitchChatOnProgress(!1)},getAllChats:function(){var e=this.getConferenceHidePort().children('[purpose="chatview"]');return Array.from(e).map(e=>e.id).concat(this.activeChat)},moveChatsToMainChatwindowViewportIfIsInVisibleChats:function(e){var t=this.getAllChats(),n=this.getVisibleChats();n=MainUI.isChatPaneView()&&e?n:n.length>0?[n[0]]:[],t.forEach(t=>{if(n.includes(t))if(e)this.moveToChatWindowViewport(t);else{var i=ChatUI.getWin(t);i&&(i.isDetachedCwin=!1,MainUI.addChatInView(i.win(),t))}})},handleIfChatExists:function(e){var t=ChatUI.getWin(e);ZCSmartConferenceUI.addToggleForRHSChatHeader(this.getSession(),this.getConferenceViewPort()),this.getConferenceViewPort().removeClass("rhs-dN"),this.getConferenceDOM().addClass("show-aside"),t&&t.focus(),t&&t.handleEmptyState()},moveToChatWindowViewport:function(e){var t=ChatUI.getWin(e);this.updateChatHeaderImage(e),t&&(t.win().removeClass("nested-parent"),t.isDetachedCwin?t.moveToViewport():MainUI.revertToViewPort(e))},updateAllChatHeaderImage:function(){this.getAllChats().forEach(e=>{this.updateChatHeaderImage(e)})},moveActiveChatToChatWindowViewPort:function(){this.moveToChatWindowViewport(this.activeChat)},keepVisibleChats:function(){this.visibleChats=MainUI.getVisibleChats()},getVisibleChats:function(){return this.visibleChats||[]},updateActiveChatId:function(e){this.hasSession()&&(this.activeChat=e)},closeOpenedConferenceChatsIfIsNotInMainChatWindowViewport:function(){var e=this.getAllChats(),t=this.getVisibleChats();e.filter(e=>!t.includes(e)).forEach(e=>{var t=ChatUI.getWin(e);t&&(t.closeWindow(),this.getConferenceDOM().find("#"+e).remove())})},updateToggleAbleChatId:function(e){this.toggleChatIds=e||{}},getToggleChatIds:function(){return this.toggleChatIds},toggleMsgSentTime:function(){if(this.hasSession()){var e=Settings.getFromObj("show_msgtime_always");this.getConferenceViewPort().toggleClass("zcmsgtimealways",1==e)}},setSmartConference:function(e){this.hasSmartConference=e}};return{init:function(){return e.init()},render:function(t,n){e.render(t,n)},updateChatHeaderImage:function(t){e.updateChatHeaderImage(t)},showSwitchedChat:function(t){e.showSwitchedChat(t)},getPreviouslyOpenedChatId:function(){return e.getPreviouslyOpenedChatId()},getActiveChatId:function(){return e.getActiveChatId()},moveCurrentChatToHidePort:function(){e.moveToHidePort()},moveToViewPort:function(t){e.moveToViewPort(t)},moveToHidePort:function(t,n){e.moveToHidePort(t,n)},hasChatExistInViewPort:function(t){return e.hasChatExistInViewPort(t)},hasChatExistInHidePort:function(t){return e.hasChatExistInHidePort(t)},clear:function(){e.clear()},updatePreviouslyOpenedChatId:function(){e.setPreviouslyOpenedChatId()},moveChatsToMainChatwindowViewportIfIsInVisibleChats:function(t){e.moveChatsToMainChatwindowViewportIfIsInVisibleChats(t)},handleIfChatExists:function(t){e.handleIfChatExists(t)},moveActiveChatToChatWindowViewPort:function(){e.moveActiveChatToChatWindowViewPort()},updateAllChatHeaderImage:function(){e.updateAllChatHeaderImage()},keepVisibleChats:function(){e.keepVisibleChats()},updateActiveChatId:function(t){e.updateActiveChatId(t)},closeOpenedConferenceChatsIfIsNotInMainChatWindowViewport:function(){e.closeOpenedConferenceChatsIfIsNotInMainChatWindowViewport()},updateParentAndThreadChatId:function(t){e.updateToggleAbleChatId(t)},getToggleChatIds:function(){return e.getToggleChatIds()},toggleMsgSentTime:function(){e.toggleMsgSentTime()},setSmartConference:function(t){e.setSmartConference(t)}}}(),GalaxyView={};GalaxyView={participantCount:0,currentActiveSpeaker:0,participantsMap:{},participantsLayerInfo:{},layerWiseParticipantDuration:{},cardHiderTimer:{},mainUserRipple:!0,isSwapInProgress:!1,currentSessionHostId:"",isUserInfo:!1,rippleTimer:null,parallelSwapCounter:{},refresh:function(){GalaxyView.participantCount=0,GalaxyView.parallelSwapCounter={},GalaxyView.participantsMap={},GalaxyView.isSwapInProgress=!1,GalaxyView.participantsLayerInfo={},GalaxyView.layerWiseParticipantDuration={},GalaxyView.isUserInfo=!1},addParticipant:function(e){var t="";if(void 0!==GalaxyView.participantsMap[e]){var n=GalaxyView.participantsLayerInfo[e];return t="layer-"+n+"-speaker",5!==n&&(t+=" active-speaker-"+GalaxyView.participantsMap[e]),t}try{if(!GalaxyView.layerWiseParticipantDuration[0]||0==GalaxyView.layerWiseParticipantDuration[0].length)return GalaxyView.participantCount++,GalaxyView.currentActiveSpeaker=e,GalaxyView.participantsMap[e]=0,GalaxyView.participantsLayerInfo[e]=0,GalaxyView.layerWiseParticipantDuration={0:[{zuid:e,duration:0,index:0}]},t=" currentUser layer-0-speaker active-speaker-0";if(!GalaxyView.layerWiseParticipantDuration[1]||GalaxyView.layerWiseParticipantDuration[1].length<6){var i=0;return GalaxyView.layerWiseParticipantDuration[1]?i+=GalaxyView.findNextBestIndex(GalaxyView.layerWiseParticipantDuration[1],6,1):i=1,GalaxyView.participantsMap[e]=i,GalaxyView.participantsLayerInfo[e]=1,"1"in GalaxyView.layerWiseParticipantDuration?GalaxyView.layerWiseParticipantDuration[1].push({zuid:e,duration:0,index:i}):GalaxyView.layerWiseParticipantDuration[1]=[{zuid:e,duration:0,index:i}],GalaxyView.participantCount++,t="layer-1-speaker active-speaker-"+i}if(!GalaxyView.layerWiseParticipantDuration[2]||GalaxyView.layerWiseParticipantDuration[2].length<12){i=0;return GalaxyView.layerWiseParticipantDuration[2]?i+=GalaxyView.findNextBestIndex(GalaxyView.layerWiseParticipantDuration[2],18,7):i=7,GalaxyView.participantsMap[e]=i,GalaxyView.participantsLayerInfo[e]=2,"2"in GalaxyView.layerWiseParticipantDuration?GalaxyView.layerWiseParticipantDuration[2].push({zuid:e,duration:0,index:i}):GalaxyView.layerWiseParticipantDuration[2]=[{zuid:e,duration:0,index:i}],GalaxyView.participantCount++,t="layer-2-speaker active-speaker-"+i}if(!GalaxyView.layerWiseParticipantDuration[3]||GalaxyView.layerWiseParticipantDuration[3].length<20){i=0;return GalaxyView.layerWiseParticipantDuration[3]?i+=GalaxyView.findNextBestIndex(GalaxyView.layerWiseParticipantDuration[3],38,19):i=19,GalaxyView.participantsMap[e]=i,GalaxyView.participantsLayerInfo[e]=3,"3"in GalaxyView.layerWiseParticipantDuration?GalaxyView.layerWiseParticipantDuration[3].push({zuid:e,duration:0,index:i}):GalaxyView.layerWiseParticipantDuration[3]=[{zuid:e,duration:0,index:i}],GalaxyView.participantCount++,t="layer-3-speaker active-speaker-"+i}if(!GalaxyView.layerWiseParticipantDuration[4]||GalaxyView.layerWiseParticipantDuration[4].length<21){i=0;return GalaxyView.layerWiseParticipantDuration[4]?i+=GalaxyView.findNextBestIndex(GalaxyView.layerWiseParticipantDuration[4],59,39):i=39,GalaxyView.participantsMap[e]=i,GalaxyView.participantsLayerInfo[e]=4,"4"in GalaxyView.layerWiseParticipantDuration?GalaxyView.layerWiseParticipantDuration[4].push({zuid:e,duration:0,index:i}):GalaxyView.layerWiseParticipantDuration[4]=[{zuid:e,duration:0,index:i}],GalaxyView.participantCount++,t="layer-4-speaker active-speaker-"+i}i=0;return GalaxyView.layerWiseParticipantDuration[5]?i+=GalaxyView.findNextBestIndex(GalaxyView.layerWiseParticipantDuration[5],439,60):i=60,GalaxyView.participantsMap[e]=i,GalaxyView.participantsLayerInfo[e]=5,"5"in GalaxyView.layerWiseParticipantDuration?GalaxyView.layerWiseParticipantDuration[5].push({zuid:e,duration:0,index:i}):GalaxyView.layerWiseParticipantDuration[5]=[{zuid:e,duration:0,index:i}],GalaxyView.participantCount++,t="layer-5-speaker"}catch(e){}},onImageLoad:function(e){try{var t=e.src.replace("thumb","original"),n=$(e).parents("[uid]").attr("uid"),i=$("#conferencewindow").find('[videocontainer][uid="'+n+'"]').find("[user_card_wrapper]").find("[user_image]"),r=GalaxyView.getLayer(n),o=0;switch(r){case 1:o=500;break;case 2:o=1e3;break;case 3:o=1500;break;case 4:o=2e3;break;case 5:o=2500}setTimeout((function(e,t){var n=$(ConferenceTemplates.userImage);n.on("load",(function(){t.replaceWith(n)})),n.attr("src",e)}),o,t,i)}catch(e){}},findNextBestIndex:function(e,t,n){for(var i=[],r=n;r<=t;r++){for(var o=!1,s=0;s<e.length;s++)if(e[s]&&e[s].index==r){o=!0;break}o||i.push(r)}return i.sort((function(e,t){return e-t})),i[0]},isParticipant:function(e){return e in GalaxyView.participantsMap},removeParticipant:function(e,t,n){GalaxyView.deleteThisParticipant(e,t,n)},copyUserInfo:function(e,t){e.zuid=t.zuid,e.duration=t.duration},deleteThisParticipant:function(e,t,n){if(!GalaxyView.isParticipant(e))return!1;switch(GalaxyView.getLayer(e)){case 5:for(var i in GalaxyView.layerWiseParticipantDuration[5]){if((w=GalaxyView.layerWiseParticipantDuration[5][i]).zuid==e)return void GalaxyView.removeAndSortParticipantInfo(e,i,5,[5])}break;case 4:for(var r in GalaxyView.layerWiseParticipantDuration[4]){if((_=GalaxyView.layerWiseParticipantDuration[4][r]).zuid==e){if(GalaxyView.layerWiseParticipantDuration[5])for(var o in GalaxyView.layerWiseParticipantDuration[5]){if(w=GalaxyView.layerWiseParticipantDuration[5][o]){var s="layer-5-speaker",a="layer-4-speaker active-speaker-"+_.index;return ConferenceUI.addAndGetContainerForBubbleUI(w.zuid).fadeOut(500,(function(){$(this).removeClass(s).addClass(a).fadeIn(500),ConferenceUI.handleLastLayerSwap(_.index)})),GalaxyView.participantsLayerInfo[w.zuid]=4,GalaxyView.copyUserInfo(_,w),void GalaxyView.removeAndSortParticipantInfo(e,o,5,[4,5])}}return void GalaxyView.removeAndSortParticipantInfo(e,r,4,[4])}}break;case 3:for(var r in GalaxyView.layerWiseParticipantDuration[3]){if((I=GalaxyView.layerWiseParticipantDuration[3][r]).zuid==e){var c="layer-3-speaker active-speaker-"+I.index;for(var o in GalaxyView.layerWiseParticipantDuration[4]){if(_=GalaxyView.layerWiseParticipantDuration[4][o]){a="layer-4-speaker active-speaker-"+_.index;for(var d in GalaxyView.layerWiseParticipantDuration[5]){if(w=GalaxyView.layerWiseParticipantDuration[5][d]){s="layer-5-speaker";return ConferenceUI.addAndGetContainerForBubbleUI(w.zuid).fadeOut(500,(function(){$(this).removeClass(s).addClass(a).fadeIn(500),ConferenceUI.handleLastLayerSwap(_.index)})),$("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.participantsLayerInfo[w.zuid]=4,GalaxyView.copyUserInfo(I,_),GalaxyView.copyUserInfo(_,w),void GalaxyView.removeAndSortParticipantInfo(e,d,5,[3,4,5])}}return $("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.copyUserInfo(I,_),void GalaxyView.removeAndSortParticipantInfo(e,o,4,[3,4])}}return void GalaxyView.removeAndSortParticipantInfo(e,r,3,[3])}}break;case 2:for(var r in GalaxyView.layerWiseParticipantDuration[2]){if((S=GalaxyView.layerWiseParticipantDuration[2][r]).zuid==e){var l="layer-2-speaker active-speaker-"+S.index;for(var o in GalaxyView.layerWiseParticipantDuration[3]){if(I=GalaxyView.layerWiseParticipantDuration[3][o]){c="layer-3-speaker active-speaker-"+I.index;for(var d in GalaxyView.layerWiseParticipantDuration[4]){if(_=GalaxyView.layerWiseParticipantDuration[4][d]){a="layer-4-speaker active-speaker-"+_.index;for(var u in GalaxyView.layerWiseParticipantDuration[5]){if(w=GalaxyView.layerWiseParticipantDuration[5][u]){s="layer-5-speaker";return ConferenceUI.addAndGetContainerForBubbleUI(w.zuid).fadeOut(500,(function(){$(this).removeClass(s).addClass(a).fadeIn(500),ConferenceUI.handleLastLayerSwap(_.index)})),$("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.participantsLayerInfo[w.zuid]=4,GalaxyView.copyUserInfo(S,I),GalaxyView.copyUserInfo(I,_),GalaxyView.copyUserInfo(_,w),void GalaxyView.removeAndSortParticipantInfo(e,u,5,[2,3,4,5])}}return $("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.copyUserInfo(S,I),GalaxyView.copyUserInfo(I,_),void GalaxyView.removeAndSortParticipantInfo(e,d,4,[2,3,4])}}return $("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.copyUserInfo(S,I),void GalaxyView.removeAndSortParticipantInfo(e,o,3,[2,3])}}return void GalaxyView.removeAndSortParticipantInfo(e,r,2,[2])}}break;case 1:for(var r in GalaxyView.layerWiseParticipantDuration[1]){if((v=GalaxyView.layerWiseParticipantDuration[1][r]).zuid==e){var f="layer-1-speaker active-speaker-"+v.index;for(var o in GalaxyView.layerWiseParticipantDuration[2]){if(S=GalaxyView.layerWiseParticipantDuration[2][o]){l="layer-2-speaker active-speaker-"+S.index;for(var d in GalaxyView.layerWiseParticipantDuration[3]){if(I=GalaxyView.layerWiseParticipantDuration[3][d]){c="layer-3-speaker active-speaker-"+I.index;for(var u in GalaxyView.layerWiseParticipantDuration[4]){if(_=GalaxyView.layerWiseParticipantDuration[4][u]){a="layer-4-speaker active-speaker-"+_.index;for(var m in GalaxyView.layerWiseParticipantDuration[5]){if(w=GalaxyView.layerWiseParticipantDuration[5][m]){s="layer-5-speaker";if(n){var C=(p=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]')).attr("conferencebubbletransition","");p.attr("conferencebubbletransition","transitionone"),p.attr("prevconferencebubbletransition",C)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),ConferenceUI.addAndGetContainerForBubbleUI(w.zuid).fadeOut(500,(function(){$(this).removeClass(s).addClass(a).fadeIn(500),ConferenceUI.handleLastLayerSwap(_.index)})),GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.participantsLayerInfo[w.zuid]=4,GalaxyView.copyUserInfo(v,S),GalaxyView.copyUserInfo(S,I),GalaxyView.copyUserInfo(I,_),GalaxyView.copyUserInfo(_,w),void GalaxyView.removeAndSortParticipantInfo(e,m,5,[1,2,3,4,5])}}if(n){C=(p=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]')).attr("conferencebubbletransition","");p.attr("conferencebubbletransition","transitionone"),p.attr("prevconferencebubbletransition",C)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),$("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(c).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.copyUserInfo(v,S),GalaxyView.copyUserInfo(S,I),GalaxyView.copyUserInfo(I,_),void GalaxyView.removeAndSortParticipantInfo(e,u,4,[1,2,3,4])}}if(n){C=(p=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]')).attr("conferencebubbletransition","");p.attr("conferencebubbletransition","transitionone"),p.attr("prevconferencebubbletransition",C)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.copyUserInfo(v,S),GalaxyView.copyUserInfo(S,I),void GalaxyView.removeAndSortParticipantInfo(e,d,3,[1,2,3])}}if(n){var p;C=(p=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]')).attr("conferencebubbletransition","");p.attr("conferencebubbletransition","transitionone"),p.attr("prevconferencebubbletransition",C)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.copyUserInfo(v,S),void GalaxyView.removeAndSortParticipantInfo(e,o,2,[1,2])}}return void GalaxyView.removeAndSortParticipantInfo(e,r,1,[1])}}break;case 0:if(GalaxyView.layerWiseParticipantDuration[0][0].zuid==e){var h=GalaxyView.layerWiseParticipantDuration[0][0],g="layer-0-speaker active-speaker-0";for(var r in GalaxyView.layerWiseParticipantDuration[1]){var v;if(v=GalaxyView.layerWiseParticipantDuration[1][r]){e==GalaxyView.currentActiveSpeaker&&(GalaxyView.currentActiveSpeaker=v.zuid);f="layer-1-speaker active-speaker-"+v.index;for(var o in GalaxyView.layerWiseParticipantDuration[2]){var S;if(S=GalaxyView.layerWiseParticipantDuration[2][o]){l="layer-2-speaker active-speaker-"+S.index;for(var d in GalaxyView.layerWiseParticipantDuration[3]){var I;if(I=GalaxyView.layerWiseParticipantDuration[3][d]){c="layer-3-speaker active-speaker-"+I.index;for(var u in GalaxyView.layerWiseParticipantDuration[4]){var _;if(_=GalaxyView.layerWiseParticipantDuration[4][u]){a="layer-4-speaker active-speaker-"+_.index;for(var m in GalaxyView.layerWiseParticipantDuration[5]){var w;if(w=GalaxyView.layerWiseParticipantDuration[5][m]){var b;s="layer-5-speaker";if(n){var U=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]'),R=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]'),T=U.attr("conferencebubbletransition"),y=R.attr("conferencebubbletransition");U.attr("conferencebubbletransition","transitionone"),R.attr("conferencebubbletransition","transitionone"),U.attr("prevconferencebubbletransition",T),R.attr("prevconferencebubbletransition",y)}return(b=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]')).removeClass(f).addClass(g),ConferenceUI.handleLayerZeroSwap(b),$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),ConferenceUI.addAndGetContainerForBubbleUI(w.zuid).fadeOut(500,(function(){$(this).removeClass(s).addClass(a).fadeIn(500),ConferenceUI.handleLastLayerSwap(_.index)})),$("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[v.zuid]=0,GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.participantsLayerInfo[w.zuid]=4,GalaxyView.copyUserInfo(h,v),GalaxyView.copyUserInfo(v,S),GalaxyView.copyUserInfo(S,I),GalaxyView.copyUserInfo(I,_),GalaxyView.copyUserInfo(_,w),void GalaxyView.removeAndSortParticipantInfo(e,m,5,[1,2,3,4,5])}}if(n){U=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]'),R=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]'),T=U.attr("conferencebubbletransition"),y=R.attr("conferencebubbletransition");U.attr("conferencebubbletransition","transitionone"),R.attr("conferencebubbletransition","transitionone"),U.attr("prevconferencebubbletransition",T),R.attr("prevconferencebubbletransition",y)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),(b=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]')).removeClass(f).addClass(g),ConferenceUI.handleLayerZeroSwap(b),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+_.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(a).addClass(c).fadeIn(500)})),GalaxyView.participantsLayerInfo[v.zuid]=0,GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.participantsLayerInfo[_.zuid]=3,GalaxyView.copyUserInfo(h,v),GalaxyView.copyUserInfo(v,S),GalaxyView.copyUserInfo(S,I),GalaxyView.copyUserInfo(I,_),void GalaxyView.removeAndSortParticipantInfo(e,u,4,[1,2,3,4])}}if(n){U=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]'),R=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]'),T=U.attr("conferencebubbletransition"),y=R.attr("conferencebubbletransition");U.attr("conferencebubbletransition","transitionone"),R.attr("conferencebubbletransition","transitionone"),U.attr("prevconferencebubbletransition",T),R.attr("prevconferencebubbletransition",y)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),(b=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]')).removeClass(f).addClass(g),ConferenceUI.handleLayerZeroSwap(b),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(c).addClass(l).fadeIn(500)})),GalaxyView.participantsLayerInfo[v.zuid]=0,GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.participantsLayerInfo[I.zuid]=2,GalaxyView.copyUserInfo(h,v),GalaxyView.copyUserInfo(v,S),GalaxyView.copyUserInfo(S,I),void GalaxyView.removeAndSortParticipantInfo(e,d,3,[1,2,3])}}if(n){U=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]'),R=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]'),T=U.attr("conferencebubbletransition"),y=R.attr("conferencebubbletransition");U.attr("conferencebubbletransition","transitionone"),R.attr("conferencebubbletransition","transitionone"),U.attr("prevconferencebubbletransition",T),R.attr("prevconferencebubbletransition",y)}return $("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(l).addClass(f),(b=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]')).removeClass(f).addClass(g),ConferenceUI.handleLayerZeroSwap(b),GalaxyView.participantsLayerInfo[v.zuid]=0,GalaxyView.participantsLayerInfo[S.zuid]=1,GalaxyView.copyUserInfo(h,v),GalaxyView.copyUserInfo(v,S),void GalaxyView.removeAndSortParticipantInfo(e,o,2,[1,2])}}if(n){T=(U=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]')).attr("conferencebubbletransition");U.attr("conferencebubbletransition","transitionone"),U.attr("prevconferencebubbletransition",T)}return(b=$("#conferencewindow").find('[videocontainer][uid="'+v.zuid+'"]')).removeClass(f).addClass(g),ConferenceUI.handleLayerZeroSwap(b),GalaxyView.participantsLayerInfo[v.zuid]=0,GalaxyView.copyUserInfo(h,v),void GalaxyView.removeAndSortParticipantInfo(e,r,1,[1])}}}}},removeAndSortParticipantInfo:function(e,t,n,i){GalaxyView.layerWiseParticipantDuration[n].splice(t,1),delete GalaxyView.participantsMap[e],delete GalaxyView.participantsLayerInfo[e],GalaxyView.sortLayerWiseParticipantDuration(i),GalaxyView.participantCount--},sortLayerWiseParticipantDuration:function(e){for(var t in e){var n=e[t];GalaxyView.layerWiseParticipantDuration[n]&&(GalaxyView.hasDuration(GalaxyView.layerWiseParticipantDuration[n])?GalaxyView.layerWiseParticipantDuration[n].sort((function(e,t){t.duration,e.duration})):GalaxyView.layerWiseParticipantDuration[n].sort((function(e,t){e.index,t.index})))}},sortLayerWiseParticipantDuration:function(e,t){for(var n in e){var i=e[n];GalaxyView.layerWiseParticipantDuration[i].sort((function(e,n){return 1==t?e.duration-n.duration:-1==t?n.duration-e.duration:void 0}))}},getLayer:function(e){return GalaxyView.isParticipant(e)?GalaxyView.participantsLayerInfo[e]:-1},hasDuration:function(e){for(var t=0;t<e.length;t++)if(e.duration&&e.duration>0)return!0;return!1},setSwapCompleted:function(){GalaxyView.isSwapInProgress=!1},swapSpeaker:function(e,t){try{if(e==GalaxyView.currentActiveSpeaker){if(GalaxyView.increaseLayerWiseParticipantDuration(e),$("#conferencevideowrapper").find('[videocontainer][uid="'+e+'"]').addClass("huddle-active-speaker"),GalaxyView.mainUserRipple)(n=$("#conferencevideowrapper").find('[videocontainer][uid="'+e+'"]'))&&0==n.find($(".zc-av-impulse-orange")).length&&n.find("[user_card_wrapper]").before('<div class="zc-av-impulse zc-av-impulse-orange"></div>'),GalaxyView.rippleTimer&&clearTimeout(GalaxyView.rippleTimer),GalaxyView.rippleTimer=setTimeout((function(e){e&&e.find($(".zc-av-impulse-orange")).remove()}),3e3,n);return}if(!GalaxyView.isParticipant(e)||!GalaxyView.isParticipant(GalaxyView.currentActiveSpeaker))return;var n,i=GalaxyView.getLayer(e),r=GalaxyView.getLayer(GalaxyView.currentActiveSpeaker),o=e,s=GalaxyView.currentActiveSpeaker;if(GalaxyView.isSwapInProgress)return void(GalaxyView.parallelSwapCounter[i]?GalaxyView.parallelSwapCounter[i]++:GalaxyView.parallelSwapCounter[i]=1);if(GalaxyView.mainUserRipple)(n=$("#conferencevideowrapper").find('[videocontainer][uid="'+e+'"]'))&&0==n.find($(".zc-av-impulse-orange")).length&&n.find("[user_card_wrapper]").before('<div class="zc-av-impulse zc-av-impulse-orange"></div>'),GalaxyView.rippleTimer=setTimeout((function(e){e&&e.find($(".zc-av-impulse-orange")).remove()}),3e3,n);switch($("#conferencewindow").find("[videocontainer]").removeClass("huddle-active-speaker"),$("#conferencewindow").find('[videocontainer][uid="'+e+'"]').addClass("huddle-active-speaker"),i){case 1:GalaxyView.isSwapInProgress=!0;var a=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(o),c=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(s);if(a!={}&&c!={}){GalaxyView.layerWiseParticipantDuration[i][a.position].zuid=s,GalaxyView.layerWiseParticipantDuration[i][a.position].duration=c.duration,GalaxyView.layerWiseParticipantDuration[r][c.position].zuid=o,GalaxyView.layerWiseParticipantDuration[r][c.position].duration=a.duration,GalaxyView.sortLayerWiseParticipantDuration([i],-1),GalaxyView.participantsLayerInfo[s]=1,GalaxyView.participantsLayerInfo[o]=0;var d="layer-1-speaker active-speaker-"+a.index,l="layer-0-speaker active-speaker-"+c.index;if(t){var u=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]'),f=$("#conferencewindow").find('[videocontainer][uid="'+s+'"]'),m=u.attr("conferencebubbletransition"),C=f.attr("conferencebubbletransition");u.attr("conferencebubbletransition","transitionone"),f.attr("conferencebubbletransition","transitionone"),u.attr("prevconferencebubbletransition",m),f.attr("prevconferencebubbletransition",C)}else GalaxyView.isSwapInProgress=!1;(U=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]')).removeClass(d).addClass(l),ConferenceUI.handleLayerZeroSwap(U),$("#conferencewindow").find('[videocontainer][uid="'+s+'"]').removeClass(l).addClass(d),GalaxyView.currentActiveSpeaker=e,GalaxyView.increaseLayerWiseParticipantDuration(e)}break;case 2:GalaxyView.isSwapInProgress=!0,GalaxyView.sortLayerWiseParticipantDuration([1],1);a=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(o);var p={zuid:GalaxyView.layerWiseParticipantDuration[1][0].zuid,duration:GalaxyView.layerWiseParticipantDuration[1][0].duration,index:GalaxyView.layerWiseParticipantDuration[1][0].index,position:0,layer:1};c=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(s);if(a!={}||c!={}||p!={}){GalaxyView.layerWiseParticipantDuration[i][a.position].zuid=p.zuid,GalaxyView.layerWiseParticipantDuration[i][a.position].duration=p.duration,GalaxyView.layerWiseParticipantDuration[1][p.position].zuid=c.zuid,GalaxyView.layerWiseParticipantDuration[1][p.position].duration=c.duration,GalaxyView.layerWiseParticipantDuration[r][c.position].zuid=o,GalaxyView.layerWiseParticipantDuration[r][c.position].duration=a.duration,GalaxyView.sortLayerWiseParticipantDuration([i,1],-1),GalaxyView.participantsLayerInfo[s]=1,GalaxyView.participantsLayerInfo[p.zuid]=2,GalaxyView.participantsLayerInfo[o]=0;d="layer-2-speaker active-speaker-"+a.index,l="layer-0-speaker active-speaker-"+c.index;var h="layer-1-speaker active-speaker-"+p.index;if(t){u=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]'),f=$("#conferencewindow").find('[videocontainer][uid="'+s+'"]');var g=$("#conferencewindow").find('[videocontainer][uid="'+p.zuid+'"]'),v=(m=u.attr("conferencebubbletransition"),C=f.attr("conferencebubbletransition"),g.attr("conferencebubbletransition"));u.attr("conferencebubbletransition","transitiontwo"),f.attr("conferencebubbletransition","transitionone"),g.attr("conferencebubbletransition","transitionone"),u.attr("prevconferencebubbletransition",m),f.attr("prevconferencebubbletransition",C),g.attr("prevconferencebubbletransition",v)}else GalaxyView.isSwapInProgress=!1;(U=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]')).removeClass(d).addClass(l),ConferenceUI.handleLayerZeroSwap(U),$("#conferencewindow").find('[videocontainer][uid="'+s+'"]').removeClass(l).addClass(h),$("#conferencewindow").find('[videocontainer][uid="'+p.zuid+'"]').removeClass(h).addClass(d),GalaxyView.currentActiveSpeaker=e,GalaxyView.increaseLayerWiseParticipantDuration(e)}break;case 3:GalaxyView.isSwapInProgress=!0,GalaxyView.sortLayerWiseParticipantDuration([1,2],1);a=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(o);var S={zuid:GalaxyView.layerWiseParticipantDuration[1][0].zuid,duration:GalaxyView.layerWiseParticipantDuration[1][0].duration,index:GalaxyView.layerWiseParticipantDuration[1][0].index,position:0,layer:1},I={zuid:GalaxyView.layerWiseParticipantDuration[2][0].zuid,duration:GalaxyView.layerWiseParticipantDuration[2][0].duration,index:GalaxyView.layerWiseParticipantDuration[2][0].index,position:0,layer:2};c=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(s);if(a!={}||c!={}||S!={}||I!={}){GalaxyView.layerWiseParticipantDuration[i][a.position].zuid=I.zuid,GalaxyView.layerWiseParticipantDuration[i][a.position].duration=I.duration,GalaxyView.layerWiseParticipantDuration[2][I.position].zuid=S.zuid,GalaxyView.layerWiseParticipantDuration[2][I.position].duration=S.duration,GalaxyView.layerWiseParticipantDuration[1][S.position].zuid=c.zuid,GalaxyView.layerWiseParticipantDuration[1][S.position].duration=c.duration,GalaxyView.layerWiseParticipantDuration[r][c.position].zuid=o,GalaxyView.layerWiseParticipantDuration[r][c.position].duration=a.duration,GalaxyView.sortLayerWiseParticipantDuration([i,1,2],-1),GalaxyView.participantsLayerInfo[s]=1,GalaxyView.participantsLayerInfo[S.zuid]=2,GalaxyView.participantsLayerInfo[I.zuid]=3,GalaxyView.participantsLayerInfo[o]=0;d="layer-3-speaker active-speaker-"+a.index,l="layer-0-speaker active-speaker-"+c.index;var _="layer-1-speaker active-speaker-"+S.index,w="layer-2-speaker active-speaker-"+I.index;if(t){u=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]'),f=$("#conferencewindow").find('[videocontainer][uid="'+s+'"]'),g=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]'),m=u.attr("conferencebubbletransition"),C=f.attr("conferencebubbletransition"),v=g.attr("conferencebubbletransition");u.attr("conferencebubbletransition","transitionthree"),f.attr("conferencebubbletransition","transitionone"),g.attr("conferencebubbletransition","transitionone"),u.attr("prevconferencebubbletransition",m),f.attr("prevconferencebubbletransition",C),g.attr("prevconferencebubbletransition",v)}else GalaxyView.isSwapInProgress=!1;(U=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]')).removeClass(d).addClass(l),ConferenceUI.handleLayerZeroSwap(U),$("#conferencewindow").find('[videocontainer][uid="'+s+'"]').removeClass(l).addClass(_),$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(_).addClass(w),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(w).addClass(d).fadeIn(500)})),GalaxyView.currentActiveSpeaker=e,GalaxyView.increaseLayerWiseParticipantDuration(e)}break;case 4:GalaxyView.isSwapInProgress=!0,GalaxyView.sortLayerWiseParticipantDuration([1,2,3],1);a=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(o),S={zuid:GalaxyView.layerWiseParticipantDuration[1][0].zuid,duration:GalaxyView.layerWiseParticipantDuration[1][0].duration,index:GalaxyView.layerWiseParticipantDuration[1][0].index,position:0,layer:1},I={zuid:GalaxyView.layerWiseParticipantDuration[2][0].zuid,duration:GalaxyView.layerWiseParticipantDuration[2][0].duration,index:GalaxyView.layerWiseParticipantDuration[2][0].index,position:0,layer:2};var b={zuid:GalaxyView.layerWiseParticipantDuration[3][0].zuid,duration:GalaxyView.layerWiseParticipantDuration[3][0].duration,index:GalaxyView.layerWiseParticipantDuration[3][0].index,position:0,layer:3};c=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(s);if(a!={}||c!={}||S!={}||I!={}||b!={}){GalaxyView.layerWiseParticipantDuration[i][a.position].zuid=b.zuid,GalaxyView.layerWiseParticipantDuration[i][a.position].duration=b.duration,GalaxyView.layerWiseParticipantDuration[3][b.position].zuid=I.zuid,GalaxyView.layerWiseParticipantDuration[3][b.position].duration=I.duration,GalaxyView.layerWiseParticipantDuration[2][I.position].zuid=S.zuid,GalaxyView.layerWiseParticipantDuration[2][I.position].duration=S.duration,GalaxyView.layerWiseParticipantDuration[1][S.position].zuid=c.zuid,GalaxyView.layerWiseParticipantDuration[1][S.position].duration=c.duration,GalaxyView.layerWiseParticipantDuration[r][c.position].zuid=o,GalaxyView.layerWiseParticipantDuration[r][c.position].duration=a.duration,GalaxyView.sortLayerWiseParticipantDuration([i,1,2,3],-1),GalaxyView.participantsLayerInfo[s]=1,GalaxyView.participantsLayerInfo[S.zuid]=2,GalaxyView.participantsLayerInfo[I.zuid]=3,GalaxyView.participantsLayerInfo[b.zuid]=4,GalaxyView.participantsLayerInfo[o]=0;d="layer-4-speaker active-speaker-"+a.index,l="layer-0-speaker active-speaker-"+c.index,_="layer-1-speaker active-speaker-"+S.index,w="layer-2-speaker active-speaker-"+I.index;var U,R="layer-3-speaker active-speaker-"+b.index;if(t){u=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]'),f=$("#conferencewindow").find('[videocontainer][uid="'+s+'"]'),g=$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]'),m=u.attr("conferencebubbletransition"),C=f.attr("conferencebubbletransition"),v=g.attr("conferencebubbletransition");u.attr("conferencebubbletransition","transitionfour"),f.attr("conferencebubbletransition","transitionone"),g.attr("conferencebubbletransition","transitionone"),u.attr("prevconferencebubbletransition",m),f.attr("prevconferencebubbletransition",C),g.attr("prevconferencebubbletransition",v)}else GalaxyView.isSwapInProgress=!1;(U=$("#conferencewindow").find('[videocontainer][uid="'+o+'"]')).removeClass(d).addClass(l),ConferenceUI.handleLayerZeroSwap(U),$("#conferencewindow").find('[videocontainer][uid="'+s+'"]').removeClass(l).addClass(_),$("#conferencewindow").find('[videocontainer][uid="'+S.zuid+'"]').removeClass(_).addClass(w),$("#conferencewindow").find('[videocontainer][uid="'+I.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(w).addClass(R).fadeIn(500)})),$("#conferencewindow").find('[videocontainer][uid="'+b.zuid+'"]').fadeOut(500,(function(){$(this).removeClass(R).addClass(d).fadeIn(500)})),GalaxyView.currentActiveSpeaker=e,GalaxyView.increaseLayerWiseParticipantDuration(e)}break;case 5:GalaxyView.isSwapInProgress=!0,GalaxyView.sortLayerWiseParticipantDuration([4],1);a=GalaxyView.getZuidDetailsLayerWiseParticipantDuration(o);var T=GalaxyView.layerWiseParticipantDuration[4].length-1,y={zuid:GalaxyView.layerWiseParticipantDuration[4][T].zuid,duration:GalaxyView.layerWiseParticipantDuration[4][T].duration,index:GalaxyView.layerWiseParticipantDuration[4][T].index,position:T,layer:4};if(a!={}||y!={}){GalaxyView.layerWiseParticipantDuration[i][a.position].zuid=y.zuid,GalaxyView.layerWiseParticipantDuration[i][a.position].duration=y.duration,GalaxyView.layerWiseParticipantDuration[4][y.position].zuid=a.zuid,GalaxyView.layerWiseParticipantDuration[4][y.position].duration=a.duration,GalaxyView.sortLayerWiseParticipantDuration([i,4],-1),GalaxyView.participantsLayerInfo[o]=4,GalaxyView.participantsLayerInfo[y.zuid]=5;var M="layer-4-speaker active-speaker-"+y.index;$("#conferencewindow").find('[videocontainer][uid="'+y.zuid+'"]').removeClass(M).addClass("layer-5-speaker").fadeOut(200),ConferenceUI.removeHiddenContainerFromBubble(y.zuid),ConferenceUI.addAndGetContainerForBubbleUI(o).removeClass("layer-5-speaker").addClass(M).fadeIn(500),ConferenceUI.handleLastLayerSwap(y.index),GalaxyView.increaseLayerWiseParticipantDuration(e)}GalaxyView.isSwapInProgress=!1}}catch(e){GalaxyView.isSwapInProgress=!1}},increaseLayerWiseParticipantDuration:function(e){for(var t in GalaxyView.layerWiseParticipantDuration)for(var n=0;n<GalaxyView.layerWiseParticipantDuration[t].length;n++)if(GalaxyView.layerWiseParticipantDuration[t][n]&&GalaxyView.layerWiseParticipantDuration[t][n].zuid==e)return void GalaxyView.layerWiseParticipantDuration[t][n].duration++},getZuidDetailsLayerWiseParticipantDuration:function(e){for(var t=GalaxyView.getLayer(e),n={},i=0;i<GalaxyView.layerWiseParticipantDuration[t].length;i++)if(GalaxyView.layerWiseParticipantDuration[t][i]&&GalaxyView.layerWiseParticipantDuration[t][i].zuid==e)return n.layer=t,n.zuid=e,n.position=i,n.duration=GalaxyView.layerWiseParticipantDuration[t][i].duration,n.index=GalaxyView.layerWiseParticipantDuration[t][i].index,n;return n},showUserInfo:function(e,t){if(!GalaxyView.isUserInfo){GalaxyView.isUserInfo=!0;var n=ConferenceImpl.getCurrentSession().getMember(e),i=n?n.getName():void 0,r=$WC.template.replace('<div class="fontB ellips">{{user_name}}</div>',{user_name:Users.getName(e,i)}),o=$("#userInfoTooltip");o.html(r);var s=$Util.positionTargetElementUpDown(t,o,{setInTop:!0,bottom_offset:5,center:!0});delete s.width,delete s.height,o.css(s),o.show()}},hideUserInfo:function(){GalaxyView.isUserInfo=!1,$("#userInfoTooltip").hide()}};var Presentation={},PresentationImpl={},PresentationAPI={},PresentationUI={},PresentationHandler={},PresentationConstants={},cssPath=void 0,jsPath=void 0,skipZSWmsLiteImpl=!1,doNotExtendRemoveClass=!1;(Presentation=function(e){e.presentation_id?(this._id=e.presentation_id,this._presenterId=e.presenter_id,this._rsrcId=e.file_id,this._presenterSlideNo=e.slide_no,this._presenterAnimIndex=e.anim_index,this._fileName=e.file_name,this._fileSize=e.file_size,this._fileId=e.file_id):(this._id=e[PresentationConstants.PRESENTATION_ID],this._presenterId=e[PresentationConstants.PRESENTER_ID],this._rsrcId=e[PresentationConstants.RSRC_ID],this._presenterSlideNo=e[PresentationConstants.SLIDE_NO],this._presenterAnimIndex=e[PresentationConstants.ANIM_INDEX]),this._initialized=!1}).prototype={setPresentationId:function(e){this._id=e},getPresentationId:function(){return this._id},setPresenterId:function(e){this._presenterId=e},getPresenterId:function(){return this._presenterId},setRsrcId:function(e){this._rsrcId=e},getRsrcId:function(){return this._rsrcId},setPresenterSlideNo:function(e){this._presenterSlideNo=e},getPresenterSlideNo:function(){return this._presenterSlideNo},setPresenterAnimIndex:function(e){this._presenterAnimIndex=e},getPresenterAnimIndex:function(){return this._presenterAnimIndex},getFileSize:function(){return this._fileSize},getFileId:function(){return this._fileId},getFileName:function(){return this._fileName},setCanvas:function(e){this._canvas=e},getCanvas:function(){return this._canvas},init:function(){this._initialized=!0},isInitialized:function(){return this._initialized},reset:function(){this._initialized=!1},resetDefault:function(e){Conference.isPresentationStreamingEnabled()&&e.isPresenter()&&(PresentationUI.hidePresentationIndicator(e),PresentationImpl.clearCanvasInterval(),ConferenceAPI.stopScreenShare(e.getId()),e.closeScreenUpStreamConnection(),WebRTCUserMedia.closeStream(WebRTCUserMedia.streamTypes.SCREEN)),e.resetPresentationStream(),e.setScreenSharerId(void 0),this.setPresenterId(void 0),this.setPresentationId(void 0),this.setRsrcId(void 0),this.setCanvas(void 0),this.setPresenterSlideNo(PresentationImpl.getDefaultSlideNo()),this.setPresenterAnimIndex(PresentationImpl.getDefaultAnimIndex()),this.reset(),PresentationImpl.exitSlideshow()},stop:function(e){PresentationUI.removeDropDown(e),PresentationAPI.stopPresentation(this.getPresentationId())},open:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession(),t=PresentationUI.getContainer();ZCSmartConferenceUI.addAndSetPresentationContainer(t,e),ZCSmartConferenceUI.handlePresentationStartOpenOrClose(),PresentationImpl.initConstants(),LazyLoader.loadShowIntegrationFiles().then((function(){if(PresentationImpl.bindEvents(),ZSSlideShowIntegration.init(PresentationImpl.getConfig(e)),Conference.isPresentationStreamingEnabled()){var t=($zcg._CSSTATICURL?$zcg._CSSTATICURL:$zcg._RAW_SERVERURL)+"/officechat/styles/media/presentation/zs_showtime_slideshow.css";SVGToCanvas.init({stylesheetUrl:t})}ZCSmartConferenceUI.handleResize()}))},close:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();if(e.getMember(this.getPresenterId()))if(this.resetDefault(e),ZCSmartConferenceImpl.isSmartConferenceSession(e))ZCSmartConferenceUI.removePresentationContainer(e);else{var t=PresentationUI.getContainer();t.addClass("hide"),t.find("#presentation_contatiner").remove(),t.find("#presenter_view").addClass("dN").empty(),$("#conferencevideowrapper").show(),ZCSmartConferenceUI.handlePresentationStartOpenOrClose()}},jumpToSlide:function(e,t){zsSlideShow.set.jumpTo.call(zsSlideShow,{slideNo:e,animIndex:t})},getCanvasAndSetStream:function(e,t){var n=this.getCanvas();SVGToCanvas.clearTempDataUrlMap(),SVGToCanvas.docData=ZSjQuery.docData;var i=zsSlideShow.get.currentSlideDetails.call(zsSlideShow).slideId,r=zsSlideShow.get.slideSetup.call(zsSlideShow,t).size,o={scale:1,target:"slide",dim:{width:r.width,height:r.height},slideID:i,canvaScale:2,canvasElement:n||function(){var e=document.createElement("canvas");return e.width=300,e.height=200,e.id="conference_ppt_canvas",e}(),outputFormat:SVGToCanvas.OUTPUTFORMATS.CANVAS},s=function(){var e=this.getCanvas();e.getContext("2d").drawImage(e,0,0)}.bind(this),a=function(t){if(void 0===n){n=t,this.setCanvas(n);var i=WebRTCUserMedia.createStreamFromCanvas(n,PresentationImpl.getStreamFPS());ZCSmartConferenceImpl.isSmartConferenceSession(e)?ZCSmartConferenceImpl.addScreenInSession(i):ConferenceImpl.addScreenInSession(i),PresentationConstants._canvasTimer=setInterval(s,PresentationImpl.getCanvasTimeout())}}.bind(this),c=ZSjQuery("#slidecontainer").find(`[slideid=${i}]`).closest("#svgcontainer");SVGToCanvas.SLIDE.convertSlide(a,c,o)}},PresentationImpl={isEnabled:function(){return SecurityManager.hasPermission(Modules.Presentation)},handleEnd:function(e){this.clearCanvasInterval(),e&&e.hasPresentation()&&(this.exitSlideshow(),e.getPresentation().reset())},clearCanvasInterval:function(){clearInterval(PresentationConstants._canvasTimer),PresentationConstants._canvasTimer=void 0},handleStreaming:function(e){if(Conference.isPresentationStreamingEnabled()){e=e||PresentationImpl.getCurrentSlideNo();var t=ZCSmartConferenceImpl.getCurrentActiveSession();if(t.isPresenter())t.getPresentation().getCanvasAndSetStream(t,e)}},navigateSlidesByShortcut:function(e){var t=!1;if(!Conference.isPresentationsAllowed())return t;var n=ZCSmartConferenceImpl.getCurrentActiveSession();if(n&&n.hasPresentation()){var i=PresentationImpl.getCurrentSlideNo();e===$zcg.LEFT_KEYCODE?i>PresentationImpl.getDefaultSlideNo()&&(PresentationImpl.navigateToPreviousSlide(),t=!0):e===$zcg.RIGHT_KEYCODE&&i<PresentationImpl.getTotalSlideCount()-1&&(PresentationImpl.navigateToNextSlide(),t=!0)}return t},initConstants:function(){cssPath="https://"+$zcg._CSSTATICSERVER,jsPath="https://"+$zcg._JSSTATICSERVER,skipZSWmsLiteImpl=!0,doNotExtendRemoveClass=!0},getConfig:function(e){var t=e.getPresentation();return{initParams:{broadcastid:t.getPresentationId(),servicename:$zcg._SERVICENAME},renderingParams:{broadcastId:t.getPresentationId(),audId:this.getModifiedZuidForNetworks(ConferenceImpl.getCurrentUserId()),servicename:$zcg._SERVICENAME},rsrcId:t.getRsrcId(),isAudience:!e.isPresenter(),_userId:this.getModifiedZuidForNetworks(ConferenceImpl.getCurrentUserId()),path:$zcg._RAW_SERVERURL+"/showapi/"}},getModifiedZuidForNetworks:function(e){return OrgFeatures.isIntranetRequest()?e:new $WmsUserId(e).getIamZuid()},getLastSlideUpdatedTime:function(){return PresentationConstants._lastSlideUpdatedTime},setLastSlideUpdatedTime:function(e){PresentationConstants._lastSlideUpdatedTime=e},isTimeEligibleToUpdateSlide:function(e){return this.getLastSlideUpdatedTime()<e},getStreamFPS:function(){return PresentationConstants._streamingFramesPerSecond},getCanvasTimeout:function(){return PresentationConstants._canvasTimeout},getDefaultAnimIndex:function(){return PresentationConstants._defaultAnimIndex},getDefaultSlideNo:function(){return PresentationConstants._defaultSlideNo},navigateToNextSlide:function(){zsSlideShow.set.next.call(zsSlideShow)},navigateToPreviousSlide:function(){zsSlideShow.set.previous.call(zsSlideShow)},getCurrentSlideNo:function(){return zsSlideShow.get.slideNo.call(zsSlideShow)},getCurrentAnimIndex:function(e){return zsSlideShow.get.completedAnimIndex.call(zsSlideShow,e)},exitSlideshow:function(){"undefined"!=typeof zsSlideShow&&zsSlideShow.exitSlideshow.call(zsSlideShow)},renderSlide:function(e,t){zsSlideShow.set.renderZsSlideThumb.call(zsSlideShow,{slideIndex:e,container:t})},renderSlides:function(e,t,n){for(var i=t=t||PresentationImpl.getDefaultSlideNo(),r=PresentationImpl.getTotalSlideCount();i<r;i++){ZSjQuery(e.find("#presentation_nav_slide_item_"+i)).data("scale",n)}this.initThumbnailContainers(e,{attribute:"presentation_thumbnail"}),this.renderZSSlideThumbs(t+1,PresentationImpl.getTotalSlideCount())},initThumbnailContainers:function(e,t){zsSlideShow.set.initThumbnailContainers.call(zsSlideShow,e,t)},renderZSSlideThumbs:function(e,t){zsSlideShow.set.renderZSSlideThumbs.call(zsSlideShow,[e,t])},getTotalSlideCount:function(){return zsSlideShow.get.totalSlidesCount.call(zsSlideShow)},getThumbnailURL:function(e){return $zcg._SHOWSERVER+"/show/image?rid="+e+"&a_t=DOC_THUMBNAIL&type=LARGE"},getURL:function(e,t){var n={entity_id:WorkDriveUtil.frameEntityId(t),module:"Meetings"};return $zcg._WORKDRIVESERVER+"/show/preview/"+e+"?authId="+encodeURIComponent(JSON.stringify(n))+"&notopbar=true"},replaceImageWithPresentationIcon:function(e){var t=$(e);t.parents("[presentation_thumbnail_cnt]").addClass("zcf-presentation font30"),t.remove()},updateSlide:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession();n&&n.isPresenter()&&PresentationAPI.updatePresentationSlide(n.getPresentation().getPresentationId(),e,t)},getSlideThumbnailDimentions:function(){return zsSlideShow.get.slideThumbDimensions.call(zsSlideShow,{height:120,width:170})},bindEvents:function(){if(!PresentationConstants._eventBinded){var e=ZSjQuery(document);e.on("ZSSlideShowIntegrationInitialized",(function(){var e={startSlide:ZCSmartConferenceImpl.getCurrentActiveSession().getPresentation().getPresenterSlideNo()};ZSSlideShowIntegration.initSlideshow(e)})),e.on("zs_slideshowload",(function(e,t){var n=t.slide;PresentationUI.updateSlideDetails(void 0,n),PresentationUI.removeLoader(),PresentationUI.updateThumbnailSlidesList(n),ZCSmartConferenceImpl.getCurrentActiveSession().getPresentation().init(),PresentationImpl.handleStreaming(n)})),e.on("zs_slideshownavigate",(function(e,t){PresentationUI.updateSlideDetails(),PresentationImpl.handleStreaming(),PresentationImpl.updateSlide(t.slide,t.animIndex)})),PresentationConstants._eventBinded=!0}}},PresentationUI={updateSlideDetails:function(e,t){e=e||this.getContainer();var n=void 0!==t?t+1:PresentationImpl.getCurrentSlideNo()+1,i=PresentationImpl.getTotalSlideCount(),r=e.find("#presentation_current_slide");r.val(n),e.find("#presentation_slide_count").text("/ "+i+" "+Resource.getRealValue(i>1?"common.slides":"common.slide")),this.toggleNavigator(r,i,n)},removeLoader:function(){var e=this.getContainer();e.find("#presentation_options_cnt").removeClass("dN"),e.find("#presentation_loader").addClass("dN")},showPresentationIndicator:function(e){(ZCSmartConferenceImpl.isSmartConferenceSession(e)?ZCSmartConferenceUI.getConferenceWindow():ConferenceUI.getConferenceWindow()).find("[presentation_indicator_v2]").removeClass("dN")},hidePresentationIndicator:function(e){(ZCSmartConferenceImpl.isSmartConferenceSession(e)?ZCSmartConferenceUI.getConferenceWindow():ConferenceUI.getConferenceWindow()).find("[presentation_indicator_v2]").addClass("dN")},getContainer:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession();return ZCSmartConferenceImpl.isSmartConferenceSession(e)?ZCSmartConferenceUI.getConferenceWindow():$("#conferencepresentationwrapper")},removeDropDown:function(e){ZCSmartConferenceImpl.isSmartConferenceSession(e)?ZCSmartConferenceUI.removeOptionsDropDown():ConferenceUI.removeDropDown()},showDropDown:function(e,t){var n=ZCSmartConferenceImpl.isSmartConferenceSession(e),i=n?ZCSmartConferenceUI.getConferenceWindow():ConferenceUI.getConferenceWindow(),r=Conference.isPresentationsAllowed();n?r?ZCSmartConferenceHandler.UIEvents.showShareOptions(t,i.find("[purpose=showShareOptions]")):ZCSmartConferenceHandler.UIEvents.showMoreOptions(t,i.find("[purpose=showMoreOptions]")):r?ConferenceHandler.UIEvents.showShareOptions(t,i.find("[purpose=showShareOptions]")):ConferenceHandler.UIEvents.showMoreOptions(t,i.find("[purpose=showMoreOptions]"))},updateThumbnailSlidesList:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession(),n=this.getContainer().find("#slidecontainer_leftnav_cnt");t.isPresenter()||PresentationHandler.togglePresentationSlidesList(n.siblings("#slidecontainer_leftnav_hidebar"));var i=PresentationImpl.getSlideThumbnailDimentions();n.html(ZCSmartConferenceTemplates.getPresentationNavSlides(i)),PresentationImpl.renderSlides(n,PresentationImpl.getDefaultSlideNo(),i.scale),this.addHostIndicator(n,e)},handleResize:function(){ZCSmartConferenceImpl.getCurrentActiveSession().getPresentation().isInitialized()&&ZSjQuery("#slidecontainer").zslideshow("resizeContainer")},toggleNavigator:function(e,t,n){var i=e.siblings('[purpose="navigateToNextSlide"]');e.siblings('[purpose="navigateToPreviousSlide"]').toggleClass("zcdisabled",1==n),i.toggleClass("zcdisabled",n==t)},replaceHostIndicator:function(e,t){var n=e.find("[host_indicator]");n.parents('[purpose="jumpToPresentationSlide"]').removeClass("active"),n.remove(),this.addHostIndicator(e,t)},addHostIndicator:function(e,t){e.find("#presentation_nav_slide_item_"+t).addClass("active").append('<div class="hudl-usr-info flexM huddle-presentation-host-slideindication" host_indicator>\n\t\t\t\t\t\t\t\t\t<span class="zcf-owner fshrink"></span>\n\t\t\t\t\t\t\t\t</div>')},openPrompt:function(e,t){var n=[$WC.$Dlg.getButtonObj("common.cancel",$zcg._cssClasses.SECONDARY_BTN),$WC.$Dlg.getButtonObj("media.presentation.start",$zcg._cssClasses.WARNING_BTN,(function(){PresentationAPI.uploadAndStartPresentation(e,t)}))];$WC.$Dlg.create({id:"share_presentation_prompt",version:3,class:"modalwindow zcl-alert-dialog-2 zcalgncntr zcbg_mask zcmodal-w600",headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="zcl-img lg flexM mAuto zcf-warning zcl-warning-bg"></div>',header:Resource.getRealValue("media.presentation.share.prompt.header"),subheader:Resource.getRealValue("media.presentation.share.prompt.subheader")}),buttons:n})}},PresentationHandler={handleStopPresentation:function(){var e=ZCSmartConferenceImpl.getCurrentActiveSession().getPresentation();e&&e.close()},dropRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();PresentationUI.removeDropDown(t),ConferenceAPI.dropPresentationRequest(t.getId(),ZCSmartConferenceConstants.presentationType.PRESENTATION,(function(){t.getCurrentMember().resetPresentationRequest(ZCSmartConferenceConstants.presentationType.PRESENTATION),PresentationUI.showDropDown(t,e),UI.updateBanner(Resource.getRealValue("media.present.request.cancelled"))}))},raiseRequest:function(e){var t=ZCSmartConferenceImpl.getCurrentActiveSession();PresentationUI.removeDropDown(t),ConferenceAPI.raiseMediaSessionRequest(t.getId(),ZCSmartConferenceConstants.presentationType.PRESENTATION,(function(n){t.getCurrentMember().setPresentationRequest(ZCSmartConferenceConstants.presentationType.PRESENTATION),PresentationUI.showDropDown(t,e),UI.updateBanner(Resource.getRealValue("media.present.request.raised"))}))},startPresentation:function(e){PresentationUI.removeDropDown(e),ZCSmartConferenceImpl.startPresentation()},closePresentationPreview:function(e,t){$(document.body).find("#presentation_history_view").remove()},openPresentationFromHistory:function(e,t){var n=t.attr("data-uid"),i=t.attr("data-title"),r=(t.attr("uid"),t.attr("session-key")),o=$WC.template.replace(WhiteBoardImpl.html.history_view_container,{title:i,purpose:"closePresentationPreview",custom_attr:"smartconferencebutton",id:"presentation"});o=$WC.template.replace(o,{buffer_loader:MediaTemplates.getBufferLoader()},"InSecureHTML");var s=$(document.body);s.append(o);var a=s.find("#presentation_history_view"),c=a.find("iframe")[0];$Util.animateBufferLoader(a.find("[bufferloadercnt]"),9),c.onload=function(){a.find("[bufferloadercnt]").empty(),$(c).removeClass("dN")},c.src=PresentationImpl.getURL(n,r),Clickoutside.bind({event:e,srcid:t.attr("id"),destid:"presentation_history_view",customHide:function(e){s.find("#"+e.destid).remove()}})},validateInput:function(e){var t=PresentationImpl.getTotalSlideCount(),n=parseInt(e.val());n>t?e.val(t):n<1&&e.val(1),PresentationUI.toggleNavigator(e,t,n)},togglePresentationSlidesList:function(e){e.parents("#slidecontainer_wrp").toggleClass("huddle-presentation-hide-left-nav");var t="hide"===e.attr("value")?{value:"show","tooltip-title":I18N("media.presentation.show.slides")}:{value:"hide","tooltip-title":I18N("media.presentation.hide.slides")};e.attr(t)},jumpToPresentationSlide:function(e,t,n){var i=ZCSmartConferenceImpl.getCurrentActiveSession();t=void 0!==t?t:parseInt(e.val())-1,n=void 0!==n?n:PresentationImpl.getDefaultAnimIndex(),i.getPresentation().jumpToSlide(t,n)}},PresentationAPI={uploadAndStartPresentation:function(e,t){var n=t.getHashForPresentation();e&&(n.resource_id=e),n.resource_type=PresentationConstants.GROUP_CALL;var i=ZCSmartConferenceImpl.getCurrentActiveSession();n.conference_id=i.getId(),MediaAPI.getConferenceAjaxWrapper()({url:"/v2/presentations",type:"POST",contentType:"application/json",data:n,success:function(e){var t=new Presentation(e.data);i.setPresentation(t),t.open()}})},updatePresentationSlide:function(e,t,n){var i=ZCSmartConferenceImpl.getCurrentActiveSession(),r=this._addCommonParams(i);r.slide_no=t,r.anim_index=n,r.slide_updated_time=$Util.getSyncedCurrentTime(),MediaAPI.getConferenceAjaxWrapper()({url:"/v2/presentations/"+e+"/navigate",type:"PUT",contentType:"application/json",data:r,success:function(){var e=i.getPresentation();e.setPresenterSlideNo(t),e.setPresenterAnimIndex(n),PresentationUI.replaceHostIndicator(PresentationUI.getContainer().find("#slidecontainer_leftnav_cnt"),e.getPresenterSlideNo())}})},stopPresentation:function(e,t){var n=ZCSmartConferenceImpl.getCurrentActiveSession(),i=this._addCommonParams(n);MediaAPI.getConferenceAjaxWrapper()({url:"/v2/presentations/"+e+"/stop",type:"POST",contentType:"application/json",data:i,success:function(e){PresentationHandler.handleStopPresentation(),"function"==typeof t&&t(e)}})},_addCommonParams:function(e){return{resource_id:e.getSessionKey(),resource_type:PresentationConstants.GROUP_CALL,conference_id:e.getId()}}},PresentationConstants={_eventBinded:!1,_lastSlideUpdatedTime:0,_defaultSlideNo:0,_defaultAnimIndex:0,_canvasTimeout:300,_canvasTimer:void 0,_streamingFramesPerSecond:15,GROUP_CALL:"group_call",PRESENTATION_ID:"p_id",PRESENTER_ID:"p_zuid",PRESENTATION_STATE:"p_state",RSRC_ID:"r_id",SLIDE_NO:"s_no",PREVIOUS_SLIDE_NO:"ps_no",ANIM_INDEX:"a_in",CONFERENCE_ID:"c_id",SLIDE_UPDATED_TIME:"s_u_t",PPT:"ppt"};