!function(){var e={Launcher:{},Util:{},Controller:{},Data:{},serviceClientInfo:{},Constants:{}};window.ZDLibrary={},window.ZDLibrary.Launcher=e.Launcher,window.ZDLibrary.PageLinks=e.PageLinks,window.ZDLibrary.I18NData=e.I18NData,window.ZDLibrary.__debug=e,e.Constants={LAUNCHER:"LAUNCHER",HTTPMethod:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"},Action:{LAUNCHER_INFO:"LAUNCHER_INFO",MICS_TRACK:"MICS_TRACK"},Time:{FIVE_MINS:3e5},AppCategory:{0:"oz.zdlibrary.recommended",1:"oz.apps.group.email.collaboration",2:"oz.apps.group.sales",3:"oz.apps.group.finance",4:"oz.apps.group.helpdesk",5:"oz.apps.group.hrms",6:"oz.apps.group.business.process",9:"oz.apps.group.marketing"},EscapeChar:{possible:/[&<>"'`]/,badChars:/[&<>"'`]/g,escapeBadChars:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},TrackAction:{OPEN_LAUNCHER:"Launcher: Open",CLOSE_LAUNCHER:"Launcher: Close",ACCESS_APP:"Launcher: Access App - ",TRY_NEW_APP:"Launcher: Tried New App - ",OPEN_ADMIN_PANEL:"Launcher: CLK - Admin Panel",OPEN_HOME:"Launcher: CLK - Home"}},e.Launcher.init=function(a){e.serviceClientInfo=a,e.Controller.initLauncher()},e.Launcher.open=function(){e.Controller.openLauncher()},e.Launcher.close=function(){e.Controller.closeLauncher()},e.Launcher.isOpen=function(){return e.Util.isLauncherOpen()},e.Launcher.render=function(a){e.Controller.renderLauncher(a)},e.Data.otherAppsCategoryOrder=[0,1,2,9,3,4,5,6],e.Launcher.setIconTheme=function(a){e.Controller.setIconTheme(a)},e.Controller.initLauncher=function(){var a=e.serviceClientInfo,t=a.icon.element,n=a.icon.theme,r=a.icon.color,o=a.icon.hover_color;if(t){if(e.Util.isDOMObject(t)||(t=document.querySelector(t)),t){if(a.icon.is_product_icon_available)return void(t.onclick=e.Controller.openLauncher);a.icon.is_hamburger_available&&(t.innerHTML="");var l=document.createElement("div");l.className="zod-launcher-icon-wrapper",r||void 0!==n&&null!==n||e.Util.addClass(l,"zod-launcher-icon-background"),l.onclick=e.Controller.openLauncher,r&&o&&(l.onmouseover=function(){e.Util.setBackgroundColorForIcon(o)},l.onmouseout=function(){e.Util.setBackgroundColorForIcon(r)});var p=document.createElement("div");p.className="zod-launcher-icon zod-launcher-icon-dark","dark"===n&&(p.className=p.className.replace(/\bdark\b/g,"light"));for(var s=document.createElement("span"),i=0;9>i;i++){var c=s.cloneNode(!0);r&&c.style.setProperty("background-color",r,"important"),1===i?e.Util.addClass(c,"two"):4===i?e.Util.addClass(c,"five"):7===i&&e.Util.addClass(c,"eight"),p.appendChild(c)}l.appendChild(p),t.appendChild(l)}e.Util.addEvent(window,"resize",e.Controller.handleResize)}},e.Controller.handleResize=function(){if(e.Util.isLauncherOpen()){var a=document.querySelector("#zdlibrary"),t=document.querySelector(".zod-launcher-wrapper"),n=t.scrollTop,r=document.querySelector(".zod-launcher-myapps-wrapper"),o=r.querySelector(".zod-launcher-myapps-tab._selected").getAttribute("data-tab-id");r.innerHTML="",e.Controller.renderMyAppsContent(r);var l=r.querySelector('[data-tab-id="'+o+'"]');l?e.Controller.changeMyAppsTab(l):(l=document.createElement("div"),l.setAttribute("data-id",o),e.Controller.changeMyAppsTabFromDropDown(l)),e.Controller.searchApps(document.querySelector(".zod-launcher-apps-search-box")),e.Controller.afterContentRender();var p=document.querySelector(".zod-launcher-close-icon");p.style.left=t.offsetWidth+(a.offsetWidth-t.offsetWidth)/2+15+"px",t.scrollTop=n}},e.Controller.openLauncher=function(){if(!e.Util.isLauncherOpen()){e.Controller.callMicsTrackAPI(e.Constants.TrackAction.OPEN_LAUNCHER,null),e.Data.launcherLoadedNow=!0;var a=document.body,t=document.querySelector("#zdlibrary");if(t){if(!e.Util.isLauncherExpired())return t.className=t.className.replace(/\bfadeOut\b/g,"fadeIn"),e.Util.makeDisplayBlock(t),setTimeout(e.Controller.showMainContainer,100),e.Controller.handleResize(),void(t.scrollTop=0);t.innerHTML="",t.className=t.className.replace(/\bfadeOut\b/g,"fadeIn"),e.Util.makeDisplayBlock(t),setTimeout(e.Controller.showMainContainer,100),t.scrollTop=0,e.Controller.buildMenuContainerAndLoadingState(t)}else t=e.Controller.createMainContainer(),e.Controller.buildMenuContainerAndLoadingState(t),a.appendChild(t),setTimeout(e.Controller.showMainContainer,100),document.querySelector(".zod-launcher-apps-search-box").focus();var n=document.querySelector(".zod-launcher-close-icon"),r=document.querySelector("#zdlibrary-wrapper");n.style.left=r.offsetWidth+(t.offsetWidth-r.offsetWidth)/2+15+"px",e.Controller.callLauncherInfoAPI()}},e.Controller.showMainContainer=function(){var a=document.querySelector(".zod-launcher-main-container");e.Util.addClass(a,"_visible")},e.Controller.renderLauncher=function(a){a.className="zod-launcher-cover",a.id="zdlibrary",e.Controller.buildMenuContainerAndLoadingState(a),e.Controller.callLauncherInfoAPI()},e.Controller.createMainContainer=function(){var a=e.serviceClientInfo.productWrapper;e.Util.isDOMObject(a)||(a=document.querySelector(a));var t=a?a.offsetWidth:document.body.offsetWidth,n=document.createElement("div");return n.className="zod-launcher-main-container zod-launcher-fadeIn",n.id="zdlibrary",n.style.maxWidth=t+"px",n.onclick=e.Controller.handleOutsideClick,n},e.Controller.buildMenuContainerAndLoadingState=function(a){var t=document.createElement("div");t.className="zod-launcher-wrapper",t.id="zdlibrary-wrapper",t.onscroll=e.Controller.handleScroll;var n=document.createElement("div");n.className="zod-launcher-menu-container";var r=document.createElement("div");r.className="zod-launcher-menu-container-left";var o=document.createElement("input");o.className="zod-launcher-apps-search-box",o.placeholder=e.Util.getI18NMessage("oz.apps.search"),o.setAttribute("type","text"),o.onkeyup=function(){e.Controller.searchApps(this)},r.appendChild(o);var l=document.createElement("div");l.className="zod-launcher-close-search-icon",l.onclick=e.Controller.clearSearch,r.appendChild(l);var p=document.createElement("span");p.className="zod-icons _icon_search_outline zod-launcher-apps-search-icon _ico-14",r.appendChild(p),n.appendChild(r),t.appendChild(n);var s=document.createElement("span");s.className="zod-launcher-close-icon zod-icons _icon_close",s.onclick=e.Controller.closeLauncher,a.offsetWidth&&(s.style.left=t.offsetWidth+(a.offsetWidth-t.offsetWidth)/2+15+"px"),t.appendChild(s);var i=document.createElement("div");i.className="zod-launcher-loading-container";var c=document.createElement("div");c.className="zod-launcher-apploader-wrapper";for(var d=0;12>d;d++){var u=document.createElement("div");u.className="zod-launcher-apploader-block",u.innerHTML='<div class="zod-launcher-myapps-img"><div class="zod-launcher-apploader"></div></div><div class="zod-launcher-myapps-name zod-launcher-apploader"></div>',c.appendChild(u)}i.appendChild(c),t.appendChild(i),a.appendChild(t)},e.Controller.callLauncherInfoAPI=function(){var a={};a.org_id=window.ZDLibrary.serviceData.org_id,e.Util.callAPI(e.Util.getZDLibraryAPI(),e.Constants.HTTPMethod.POST,e.Constants.Action.LAUNCHER_INFO,a,e.Controller.buildLauncher,e.Util.processError)},e.Controller.callMicsTrackAPI=function(a,t){var n={};n.feature=a,t||(t={}),t.Service=window.ZDLibrary.serviceData.app_name,t.Source=e.Constants.LAUNCHER,n.paramsJson=t,n.org_id=window.ZDLibrary.serviceData.org_id,e.Util.callAPI(e.Util.getZDLibraryAPI(),e.Constants.HTTPMethod.POST,e.Constants.Action.MICS_TRACK,n,null,null)},e.Controller.buildLauncher=function(a){e.Data.appsLoadedTime=(new Date).getTime(),e.Data.myApps=a.user_apps,e.Data.allApps=a.all_apps,e.Data.tabs=a.tabs_info,e.Data.permissions=a.permissions,e.Data.tabsVsIDMap={},e.Data.allAppsVsNameMap={},e.Data.myAppsVsNameMap={},e.Data.myAppsVsAppIDMap={},e.Data.allAppsVsTypeMap={},e.Data.allAddedAppsVsTypeMap={},e.Data.addedAppsOpenedTabs=[],e.Data.companyTabs=[],e.Data.personalTabs=[];for(var t=0;t<e.Data.tabs.length;t++)e.Data.tabsVsIDMap[e.Data.tabs[t].tab_id]=e.Data.tabs[t],e.Data.tabs[t].is_personal?e.Data.personalTabs.push(e.Data.tabs[t]):e.Data.companyTabs.push(e.Data.tabs[t]);e.Data.companyTabs=e.Util.sortObjectsByNextTo(e.Data.companyTabs,"tab_id","next_to"),e.Data.personalTabs=e.Util.sortObjectsByNextTo(e.Data.personalTabs,"tab_id","next_to");for(var t=0;t<e.Data.myApps.length;t++){e.Data.myAppsVsNameMap[e.Data.myApps[t].app_name]=e.Data.myApps[t],e.Data.myAppsVsAppIDMap[e.Data.myApps[t].app_id]=e.Data.myApps[t];for(var n=e.Data.myApps[t].tabs,r=0;r<n.length;r++){var o={app_id:e.Data.myApps[t].app_id,app_name:e.Data.myApps[t].app_name,next_to:n[r].next_to};e.Data.tabsVsIDMap[n[r].tab_id].apps||(e.Data.tabsVsIDMap[n[r].tab_id].apps=[]),e.Data.tabsVsIDMap[n[r].tab_id].apps.push(o)}}e.Data.recommendedApps=e.Data.allApps.filter(function(a){return a.is_new&&!e.Util.isAppAdded(a.app_name)}),e.Data.recommendedApps.length>0&&(e.Data.allAppsVsTypeMap[e.Util.getAppCategory(0)]=e.Data.recommendedApps);for(var t=1;t<e.Data.otherAppsCategoryOrder.length;t++)e.Data.allAppsVsTypeMap[e.Util.getAppCategory(e.Data.otherAppsCategoryOrder[t])]=[],e.Data.allAddedAppsVsTypeMap[e.Util.getAppCategory(e.Data.otherAppsCategoryOrder[t])]=[];for(var t=0;t<e.Data.allApps.length;t++)if(e.Data.allApps[t].app_type&&-1!==e.Data.allApps[t].app_type){var l=e.Util.getAppCategory(e.Data.allApps[t].app_type);e.Data.allAppsVsNameMap[e.Data.allApps[t].app_name]=e.Data.allApps[t];var p=e.Util.isAppAdded(e.Data.allApps[t].app_name);p&&e.Data.allAddedAppsVsTypeMap[l]?e.Data.allAddedAppsVsTypeMap[l].push(e.Data.allApps[t]):e.Data.allAppsVsTypeMap[l]&&e.Data.allAppsVsTypeMap[l].push(e.Data.allApps[t])}if(e.Data.allAppsTabs=e.Util.getKeysFromJSON(e.Data.allAppsVsTypeMap),e.Data.allAppsTabsAfterSearch=e.Data.allAppsTabs,e.Data.myApps){e.Data.myApps=a.user_apps.filter(function(a){return e.Util.isCreatorCustomApp(a)!==!0});var s=a.user_apps.filter(function(a){return e.Util.isCreatorCustomApp(a)===!0});e.Data.myApps=e.Data.myApps.sort(function(a,t){var n=e.Data.allAppsVsNameMap[a.app_name],r=e.Data.allAppsVsNameMap[t.app_name],o=(n.display_name?n.display_name:n.app_name).toLowerCase(),l=(r.display_name?r.display_name:r.app_name).toLowerCase();return l>o?-1:o>l?1:0}),s=s.sort(function(e,a){return e.app_name<a.app_name?-1:e.app_name>a.app_name?1:0});for(var t=0;t<s.length;t++)e.Data.myApps.push(s[t])}var i=document.querySelector(".zod-launcher-wrapper"),c=document.querySelector(".zod-launcher-menu-container"),d=document.createElement("div");d.className="zod-launcher-menu-container-right";var u=document.createElement("a");u.className="zod-launcher-menu-options-right",u.href=window.ZDLibrary.PageLinks.home,u.target="_blank",u.rel="noopener",u.onclick=function(){e.Controller.triggerTracking("OPEN_HOME",null)};var m=document.createTextNode(e.Util.getI18NMessage("oz.general.app.home"));if(u.appendChild(m),d.appendChild(u),e.Data.permissions.can_show_admin_panel_link){var h=document.createElement("a");h.className="zod-launcher-menu-options-right",h.href=window.ZDLibrary.PageLinks.adminPanel,h.target="_blank",h.rel="noopener",h.onclick=function(){e.Controller.triggerTracking("OPEN_ADMIN_PANEL",null)};var C=document.createTextNode(e.Util.getI18NMessage("oz.zdlibrary.link.adminpanel"));h.appendChild(C),d.appendChild(h)}c.appendChild(d);var y=document.querySelector(".zod-launcher-loading-container");i.removeChild(y);var f=document.createElement("div");f.className="zod-launcher-content-container";var v=document.createElement("div");e.Controller.renderMyApps(v),f.appendChild(v);var A=document.createElement("div");A.className="zod-launcher-allapps-container",e.Controller.renderAllApps(A,e.Data.allApps,e.Data.allAppsVsTypeMap,e.Data.allAddedAppsVsTypeMap),f.appendChild(A),i.appendChild(f);var g=document.createElement("span");g.className="zod-launcher-goto-top-icon",g.onclick=e.Controller.resetScroll,i.appendChild(g),e.Controller.afterContentRender()},e.Controller.closeLauncher=function(){var a=document.querySelector("#zdlibrary");a.className=a.className.replace(/\bfadeIn\b/g,"fadeOut"),a.className=a.className.replace(/\b _visible\b/g,""),setTimeout(e.Controller.hideMainContainer,200),window.onZDLibraryClose&&window.onZDLibraryClose(),e.Controller.callMicsTrackAPI(e.Constants.TrackAction.CLOSE_LAUNCHER,null)},e.Controller.hideMainContainer=function(){var a=document.querySelector("#zdlibrary");e.Util.makeDisplayNone(a)},e.Controller.renderMyApps=function(a){e.Data.myApps;e.Data.renderDropDownAgain=!1,a.className="zod-launcher-myapps-container";var t=document.createElement("div");t.className="zod-launcher-myapps-header";var n=document.querySelector(".zod-launcher-menu-container");t.style.top=n.offsetHeight+"px";var r=document.createTextNode(e.Util.getI18NMessage("oz.zdlibrary.my.apps"));t.appendChild(r),a.appendChild(t);var o=document.createElement("div");o.className="zod-launcher-myapps-wrapper",e.Controller.renderMyAppsContent(o),a.appendChild(o)},e.Controller.renderMyAppsContent=function(a){var t=document.createElement("div");t.className="zod-launcher-myapps-tabs-container";var n,r,o=e.Util.getPermissibleMyAppstabsCount();e.Data.personalTabs.length+e.Data.companyTabs.length<=o?n=e.Data.personalTabs.concat(e.Data.companyTabs):e.Data.personalTabs.length<=o?(n=e.Data.personalTabs.concat(e.Data.companyTabs.slice(0,o-e.Data.personalTabs.length)),r=e.Data.companyTabs.slice(o-e.Data.personalTabs.length)):(n=e.Data.personalTabs.slice(0,o),r=e.Data.personalTabs.slice(o,e.Data.personalTabs.length).concat(e.Data.companyTabs));for(var l=0;l<n.length;l++){var p=document.createElement("div");if(p.className="zod-launcher-myapps-tab",0===l&&e.Util.addClass(p,"_selected"),p.setAttribute("data-tab-id",n[l].tab_id),p.onclick=e.Controller.changeMyAppsTab,!n[l].is_personal){var s=document.createElement("span");s.className="zod-icons zod-company-icon _icon_organization_info zod-launcher-company-tab-icon",p.appendChild(s)}p.appendChild(document.createTextNode(n[l].tab_name)),t.appendChild(p)}if(r&&r.length){var i=document.createElement("div");i.className="zod-launcher-myapps-tab-more",e.Data.dropDownOptionsOfMyAppTabs={idKey:"tab_id",textKey:"tab_name",dropDownClass:"zod-launcher-myapps-tab-more-dropdown",action:e.Controller.changeMyAppsTabFromDropDown,data:r},i.onclick=function(a){e.Util.toggleDropdown(e.Data.dropDownOptionsOfMyAppTabs,this,a)};var c=document.createElement("div");c.className="zod-icons _icon_more_horizontal zod-launcher-myapps-tab-more-icon",i.appendChild(c),t.appendChild(i)}a.appendChild(t);var d=document.createElement("div");d.className="zod-launcher-myapps-block-container";var u=t.querySelector("._selected"),m=e.Data.tabsVsIDMap[u.getAttribute("data-tab-id")].apps;e.Data.renderedMyApps=e.Util.sortObjectsByNextTo(m,"app_id","next_to"),e.Controller.renderMyAppsForTabs(d,e.Data.renderedMyApps),a.appendChild(d)},e.Controller.renderMyAppsForTabs=function(a,t){if(t){for(var n=0;n<t.length;n++){var r=e.Data.myAppsVsAppIDMap[t[n].app_id];e.Controller.renderMyAppsElements(r,a)}if(!t||0===t.length){var o=document.createElement("div");o.className="zod-launcher-apps-none-icon",a.appendChild(o);var l=document.createElement("div");l.className="zod-launcher-apps-none",l.appendChild(document.createTextNode(e.Util.getI18NMessage("oz.apps.not.found"))),a.appendChild(l)}}},e.Controller.renderMyAppsElements=function(a,t){var n=document.createElement("div");n.className="zod-launcher-myapps-block";var r=a.app_name,o=a.app_id,l=e.Util.isCreatorCustomApp(a)?"Custom App":e.Util.isThirdPartyApp(a)?"Thirdparty App":e.Data.allAppsVsNameMap[a.app_name].display_name;if(n.onclick=function(){e.Controller.openAppHome(r,o,l)},e.Util.isCustomApp(a)){var p=document.createElement("div");p.className="zod-launcher-myapps-img zod-launcher-custom-apps-img";var s=document.createElement("div");s.className="zod-launcher-customapps-icon",s.appendChild(document.createTextNode(e.Util.getPhotoValueFromString(a.display_name))),p.appendChild(s),n.appendChild(p);var i=document.createElement("div");i.className="zod-launcher-myapps-name",i.appendChild(document.createTextNode(e.Util.escapeHTML(a.display_name))),n.appendChild(i)}else{var p=document.createElement("div");p.className="zod-launcher-myapps-img";var s=document.createElement("div");s.className="zod-app-logo _logo-x48 _logo-"+r,a.is_requested_app&&e.Util.addClass(s,"zod-launcher-requested-app"),p.appendChild(s),n.appendChild(p);var i=document.createElement("div");i.className="zod-launcher-myapps-name",i.appendChild(document.createTextNode(e.Data.allAppsVsNameMap[a.app_name].display_name)),n.appendChild(i)}t.appendChild(n)},e.Controller.renderAllApps=function(a,t,n,r){var o=e.Util.getKeysFromJSON(n),l=e.Util.removeValues(e.Util.getKeysFromJSON(r),o);o=o.concat(l);var p=document.createElement("div");p.className="zod-launcher-allapps-wrapper";var s=document.createElement("div");s.className="zod-launcher-allapps-header";var i=document.querySelector(".zod-launcher-menu-container");s.style.top=i.offsetHeight+"px";var c=document.createElement("div");c.className="zod-launcher-allapps-title";var d=document.createTextNode(e.Util.getI18NMessage("oz.zdlibrary.other.apps"));if(c.appendChild(d),s.appendChild(c),o.length>0){var u=document.createElement("div"),m={dropDownClass:"zod-launcher-allapps-tabs-list-dropdown",action:e.Controller.changeAllAppsTab,data:o};u.className="zod-launcher-allapps-tabs-list";var h=document.createElement("div");h.className="zod-icons _icon_chevron_down _ico-8",u.appendChild(h),s.appendChild(u),s.onclick=function(a){e.Util.toggleDropdown(m,this,a)},p.appendChild(s);for(var C=305,y=120,f=285,v=document.querySelector(".zod-launcher-wrapper").offsetWidth-55,A=0;A<e.Data.otherAppsCategoryOrder.length;A++){var g=e.Util.getAppCategory(e.Data.otherAppsCategoryOrder[A]),b=n[g],D=r[g];if(b&&!(b.length<=0)||D&&!(D.length<=0)){var N=document.createElement("div");N.className="zod-launcher-allapps-eachtab-wrapper",N.setAttribute("data-category-name",g);var _=document.createElement("div");_.className="zod-launcher-allapps-eachtab-header",_.appendChild(document.createTextNode(g)),N.appendChild(_);var T=document.createElement("div");T.className="zod-launcher-allapps-eachtab-appslist";var z=0,U=0;if(b&&b.length)for(var w=0;w<b.length;w++)e.Controller.createAppBlockInAllApps(b[w],T);if(D&&D.length){var L=document.createElement("span");L.className="zod-launcher-allapps-block zod-launcher-allapps-added-note",T.childElementCount&&(U=parseInt(T.lastChild.style.left.replace("px","")),z=parseInt(T.lastChild.style.top.replace("px","")),U+=C,U+f>v&&(U=0,z+=y)),L.style.left=U+"px",L.style.top=z+"px";var E=document.createElement("div");E.className="zod-launcher-allapps-block-content",E.appendChild(document.createTextNode(e.Util.getI18NMessage("oz.zdlibrary.added.applications.count",D.length)));var M=document.createElement("div");M.className="zod-launcher-allapps-show-added",M.onclick=e.Controller.showAddedAppsInAllApps,M.appendChild(document.createTextNode(e.Util.getI18NMessage("oz.general.show"))),E.appendChild(M),L.appendChild(E),T.appendChild(L)}if(T.childElementCount){var z=parseInt(T.lastChild.style.top.replace("px",""));T.style.height=z+y+"px",N.appendChild(T),p.appendChild(N),a.appendChild(p)}}}}else{p.appendChild(s);var I=document.createElement("div"),S=document.createElement("div");S.className="zod-launcher-apps-none-icon",I.appendChild(S);var O=document.createElement("div");O.className="zod-launcher-apps-none",O.appendChild(document.createTextNode(e.Util.getI18NMessage("oz.apps.not.found"))),I.appendChild(O),p.appendChild(I),a.appendChild(p)}},e.Controller.showAddedAppsInAllApps=function(){var a=this.closest(".zod-launcher-allapps-eachtab-appslist"),t=a.parentElement.getAttribute("data-category-name"),n=e.Data.allAddedAppsVsTypeMap[t],r=document.querySelector(".zod-launcher-apps-search-box").value;""!==r&&(n=n.filter(function(e){return-1!==e.app_name.toLowerCase().indexOf(r.toLowerCase())||-1!==e.display_name.toLowerCase().indexOf(r.toLowerCase())})),e.Controller.insertInAllAppsList(n,a),e.Data.addedAppsOpenedTabs.push(t)},e.Controller.insertInAllAppsList=function(a,t){var n=120;if(a&&a.length){for(var r=0;r<a.length;r++)e.Controller.createAppBlockInAllApps(a[r],t);var o=parseInt(t.lastChild.style.top.replace("px",""));t.style.height=o+n+"px"}},e.Controller.createAppBlockInAllApps=function(a,t){if(a.can_show_app&&!a.is_third_party_app){var n=305,r=120,o=285,l=document.querySelector(".zod-launcher-wrapper").offsetWidth-55,p=0,s=0;if(t.childElementCount){var i=t.lastChild;-1!==i.className.indexOf("zod-launcher-allapps-added-note")&&(i=t.lastChild.previousSibling),i&&(p=parseInt(i.style.left.replace("px",""))+n,s=parseInt(i.style.top.replace("px",""))),p+o>l&&(p=0,s+=r)}var c=a.app_name,d=a.display_name,u=a.description,m=a.is_new,h=e.Util.isAppAdded(c),C=document.createElement("span");C.className="zod-launcher-allapps-block",C.style.left=p+"px",C.style.top=s+"px";var y=document.createElement("div");if(y.className="zod-launcher-allapps-block-content",h){var f=document.createElement("a");f.className="zod-launcher-allapps-banner-added",f.appendChild(document.createTextNode(e.Util.getI18NMessage("oz.general.added"))),y.appendChild(f)}var v=document.createElement("div");v.className="zod-launcher-allapps-img";var A=document.createElement("div");A.className="zod-app-logo _logo-x48 _logo-"+c,v.appendChild(A),y.appendChild(v);var g=document.createElement("div");g.className="zod-launcher-allapps-content";var b=document.createElement("div");if(b.className="zod-launcher-allapps-name",b.appendChild(document.createTextNode(d)),m){var D=document.createElement("span");D.className="zod-launcher-allapps-new-flag",D.appendChild(document.createTextNode(e.Util.getI18NMessage("oz.general.new"))),b.appendChild(D)}g.appendChild(b);var N=document.createElement("div");N.className="zod-launcher-allapps-desc",N.appendChild(document.createTextNode(u)),g.appendChild(N);var _=document.createElement("a");_.className="zod-launcher-allapps-action";var T,z=e.Util.isCreatorCustomApp(a)?"Custom App":e.Util.isThirdPartyApp(a)?"Thirdparty App":e.Data.allAppsVsNameMap[a.app_name].display_name;h?(_.onclick=function(){var a=e.Data.myAppsVsNameMap[c],t=a?a.app_id:-1;e.Controller.openAppHome(c,t,z)},T="oz.general.open"):(_.onclick=function(){e.Controller.openApp(c,z)},T="oz.general.try.now"),_.appendChild(document.createTextNode(e.Util.getI18NMessage(T))),g.appendChild(_),y.appendChild(g),C.appendChild(y),t.appendChild(C)}},e.Controller.afterContentRender=function(){var a=document.querySelector("#zdlibrary"),t=document.querySelector("#zdlibrary-wrapper"),n=e.serviceClientInfo.productWrapper;e.Util.isDOMObject(n)||(n=document.querySelector(n));var r=n?n.offsetWidth:document.body.offsetWidth;a.style.maxWidth=r+"px";var o=document.querySelector(".zod-launcher-menu-container"),l=.8*r;o.style.maxWidth=l+"px";var p=document.querySelector(".zod-launcher-allapps-header");p.style.maxWidth=.8*r+"px";var s=document.querySelector(".zod-launcher-goto-top-icon");s.style.left=t.offsetWidth+(a.offsetWidth-t.offsetWidth)/2+15+"px"},e.Controller.handleScroll=function(){var a=document.querySelector("#zdlibrary-wrapper"),t=document.querySelector(".zod-launcher-goto-top-icon");a.scrollTop>80?-1===t.className.indexOf("_visible")&&e.Util.addClass(t,"_visible"):t.className=t.className.replace(/\b _visible\b/g,"")},e.Controller.changeAllAppsTab=function(){for(var a=e.Data.allAppsTabsAfterSearch,t=a.indexOf(this.textContent),n=document.querySelector("#zdlibrary-wrapper"),r=(document.querySelector(".zod-launcher-allapps-header"),document.getElementsByClassName("zod-launcher-allapps-eachtab-wrapper")),o=e.Util.getThresholdScrollTop()+3,l=0;t>l;l++)o+=r[l].offsetHeight;e.Util.scrollTo(n,o,300)},e.Controller.changeMyAppsTab=function(a){e.Util.isDOMObject(a)||(a=this);var t=document.getElementsByClassName("zod-launcher-myapps-tab _selected")[0];t.className=t.className.replace(/\b _selected\b/g,""),e.Util.addClass(a,"_selected");var n=e.Data.tabsVsIDMap[a.getAttribute("data-tab-id")].apps;e.Data.renderedMyApps=e.Util.sortObjectsByNextTo(n,"app_id","next_to");var r=document.querySelector(".zod-launcher-myapps-block-container");r.innerHTML="";var o=document.querySelector(".zod-launcher-apps-search-box");""!==o.value?e.Controller.searchApps(o):e.Controller.renderMyAppsForTabs(r,e.Data.renderedMyApps)},e.Controller.changeMyAppsTabFromDropDown=function(a){e.Util.isDOMObject(a)||(a=this);var t=document.getElementsByClassName("zod-launcher-myapps-tab"),n=t[t.length-1],r=e.Data.tabsVsIDMap[n.getAttribute("data-tab-id")],o=e.Data.tabsVsIDMap[a.getAttribute("data-id")];if(n.setAttribute("data-tab-id",o.tab_id),n.innerHTML="",!o.is_personal){var l=document.createElement("span");l.className="zod-icons zod-company-icon _icon_organization_info zod-launcher-company-tab-icon",n.appendChild(l)}n.appendChild(document.createTextNode(o.tab_name)),e.Controller.changeMyAppsTab(n);var p,s;r.is_personal?(s=e.Util.findPosition(e.Data.personalTabs,"tab_id",r.tab_id),p=s?e.Data.personalTabs[s-1].tab_id:-1):(s=e.Util.findPosition(e.Data.companyTabs,"tab_id",r.tab_id),p=s?e.Data.companyTabs[s-1].tab_id:e.Data.personalTabs&&e.Data.personalTabs.length?e.Data.personalTabs[e.Data.personalTabs.length-1].tab_id:-1);var i=e.Data.dropDownOptionsOfMyAppTabs.data,c=e.Util.findPosition(i,"tab_id",p);i.splice(c+1,0,r);var d=e.Util.findPosition(i,"tab_id",o.tab_id);i.splice(d,1),e.Data.dropDownOptionsOfMyAppTabs.renderAgainOnce=!0},e.Controller.resetScroll=function(){var a=document.querySelector("#zdlibrary"),t=document.querySelector("#zdlibrary-wrapper");e.Util.scrollTo(t,0,300),e.Util.scrollTo(a,0,100)},e.Controller.searchApps=function(a){var t=a.value,n=document.querySelector(".zod-launcher-close-search-icon");t.length>0?-1===n.className.indexOf("_visible")&&e.Util.addClass(n,"_visible"):n.className=n.className.replace(/\b _visible\b/g,"");var r=e.Data.renderedMyApps,o=e.Data.allApps,l=e.Data.allAppsTabs,p=e.Data.recommendedApps,s=r.filter(function(a){var n=-1!==a.app_name.toLowerCase().indexOf(t.toLowerCase()),r=e.Data.myAppsVsAppIDMap[a.app_id].display_name&&-1!==e.Data.myAppsVsAppIDMap[a.app_id].display_name.toLowerCase().indexOf(t.toLowerCase()),o=e.Data.allAppsVsNameMap[a.app_name]&&-1!==e.Data.allAppsVsNameMap[a.app_name].display_name.toLowerCase().indexOf(t.toLowerCase());return n||r||o}),i=o.filter(function(e){return-1!==e.app_name.toLowerCase().indexOf(t.toLowerCase())||-1!==e.display_name.toLowerCase().indexOf(t.toLowerCase())}),c=p.filter(function(e){return-1!==e.app_name.toLowerCase().indexOf(t.toLowerCase())||-1!==e.display_name.toLowerCase().indexOf(t.toLowerCase())}),d={},u={};c.length>0&&(d[e.Util.getAppCategory(0)]=c);for(var m=0;m<l.length;m++){var h=i.filter(function(a){return e.Util.getAppCategory(a.app_type)===l[m]&&!e.Util.isAppAdded(a.app_name)}),C=i.filter(function(a){return e.Util.getAppCategory(a.app_type)===l[m]&&e.Util.isAppAdded(a.app_name)});h.length>0&&(d[l[m]]=h),C.length>0&&(u[l[m]]=C)}e.Data.allAppsTabsAfterSearch=e.Util.getKeysFromJSON(d);var y=e.Util.removeValues(e.Util.getKeysFromJSON(u),e.Data.allAppsTabsAfterSearch);e.Data.allAppsTabsAfterSearch=e.Data.allAppsTabsAfterSearch.concat(y);var f=document.querySelector(".zod-launcher-myapps-block-container");f.innerHTML="",e.Controller.renderMyAppsForTabs(f,s);var v=document.querySelector(".zod-launcher-allapps-container");v.innerHTML="",e.Controller.renderAllApps(v,i,d,u);for(var A=document.getElementsByClassName("zod-launcher-allapps-eachtab-wrapper"),m=0;m<A.length;m++){var g=A[m].getAttribute("data-category-name");if(e.Util.isPresent(e.Data.addedAppsOpenedTabs,g)){var b=A[m].getElementsByClassName("zod-launcher-allapps-added-note")[0];b&&b.parentElement.removeChild(b);var D=u[g];D&&D.length&&e.Controller.insertInAllAppsList(D,A[m].getElementsByClassName("zod-launcher-allapps-eachtab-appslist")[0])}}e.Controller.handleScroll()},e.Controller.clearSearch=function(){var a=document.querySelector(".zod-launcher-apps-search-box");a.value="",e.Controller.searchApps(a)},e.Controller.openAppHome=function(a,t,n){return e.Controller.callMicsTrackAPI(e.Constants.TrackAction.ACCESS_APP+n,null),window.ZDLibrary.serviceData.app_name===a?void e.Controller.closeLauncher():void e.Util.openLinkInNewtab(e.Util.getAppHomeURL(a,t))},e.Controller.openApp=function(a,t){e.Controller.callMicsTrackAPI(e.Constants.TrackAction.TRY_NEW_APP+t,null),e.Util.openLinkInNewtab(e.Util.getAppURL(a))},e.Controller.setIconTheme=function(a){if(null!==a&&void 0!==a){var t=document.querySelector(".zod-launcher-icon"),n=document.querySelector(".zod-launcher-icon-wrapper"),r=a.theme,o=a.color,l=a.hover_color;(r||o)&&(n.className=n.className.replace(/\b zod-launcher-icon-background\b/g,""),"dark"===r?t.className="zod-launcher-icon zod-launcher-icon-light":"light"===r&&(t.className="zod-launcher-icon zod-launcher-icon-dark"),o&&(e.Util.setBackgroundColorForIcon(o),l&&(n.onmouseover=function(){e.Util.setBackgroundColorForIcon(l)},n.onmouseout=function(){e.Util.setBackgroundColorForIcon(o)})))}},e.Controller.triggerTracking=function(a,t){e.Controller.callMicsTrackAPI(e.Constants.TrackAction[a],t)},e.Controller.handleOutsideClick=function(a){if(a.target.closest("#zdlibrary-wrapper")||!e.Util.isLauncherOpen()||e.Data.launcherLoadedNow||e.Controller.closeLauncher(),a.target.closest(".zod-launcher-allapps-added-note")){var t=a.target.closest(".zod-launcher-allapps-added-note");t.parentElement.removeChild(t)}if(!e.Data.dontCloseDropDown)for(var n=document.getElementsByClassName("zod-launcher-dropdown"),r=0;r<n.length;r++)e.Util.makeDisplayNone(n[r]);e.Data.dontCloseDropDown=!1,e.Data.launcherLoadedNow&&(e.Data.launcherLoadedNow=!1)},document.addEventListener("keydown",function(a){a=a||window.event,27==a.keyCode&&e.Util.isLauncherOpen()&&e.Controller.closeLauncher()}),e.Util.callAPI=function(a,t,n,r,o,l){var p;p=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),p.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(""!==this.response){var e=JSON.parse(this.response);o&&o(e)}}else l&&l()},p.open(t,a,!0),p.withCredentials=!0,p.setRequestHeader("Content-type","application/x-www-form-urlencoded");var s=e.serviceClientInfo.csrfName,i=e.serviceClientInfo.getCsrfValue();p.setRequestHeader("X-ZCSRF-TOKEN",s+"="+i),null!==r?p.send(encodeURI("action="+n+"&data="+JSON.stringify(r))):p.send()},e.Util.isDOMObject=function(e){return!(!e||!e.nodeType||1!==e.nodeType)},e.Util.getKeysFromJSON=function(e){var a=[];for(var t in e)e.hasOwnProperty(t)&&a.push(t);return a},e.Util.getPhotoValueFromString=function(e){var a=e.indexOf(" ");return-1===a?e[0].toUpperCase():e[0].toUpperCase()+e[a+1].toUpperCase()},e.Util.processError=function(){},e.Util.isLauncherExpired=function(){var a=(new Date).getTime(),t=a-e.Data.appsLoadedTime;return t>e.Constants.Time.FIVE_MINS},e.Util.getThresholdScrollTop=function(){var e=document.querySelector(".zod-launcher-myapps-container").offsetTop,a=document.querySelector(".zod-launcher-allapps-container").offsetTop;return a-e+10},e.Util.getAllAppsTabIndexFromScrollPos=function(a){var t=e.Util.getThresholdScrollTop(),n=-1,r=document.getElementsByClassName("zod-launcher-allapps-eachtab-wrapper");do{n++;var o=r[n];if(!o){n--;break}t+=o.offsetHeight}while(a>=t);return n},e.Util.scrollTo=function(a,t,n){var r=a.scrollTop,o=t-r,l=0,p=20,s=function(){l+=p;var t=e.Util.easeInOutQuad(l,r,o,n);a.scrollTop=t,n>l&&setTimeout(s,p)};s()},e.Util.easeInOutQuad=function(e,a,t,n){return e/=n/2,1>e?t/2*e*e+a:(e--,-t/2*(e*(e-2)-1)+a)},e.Util.isAppAdded=function(a){return!!e.Data.myAppsVsNameMap[a]},e.Util.isAppNew=function(a){return e.Data.allAppsVsNameMap[a].is_new},e.Util.getAppCategory=function(a){return e.Util.getI18NMessage(e.Constants.AppCategory[a])},e.Util.getAppHomeURL=function(a,t){var n=e.Data.myAppsVsAppIDMap[t],r=e.Data.allAppsVsNameMap[a],o=n.is_portal_required;return e.Util.isCustomApp(n)||e.Util.isThirdPartyApp(n)?n.app_url:n.is_requested_app||!o?r.app_url:r.app_url+n.portal_url},e.Util.getAppURL=function(a){var t=e.Data.allAppsVsNameMap[a];return t.app_url},e.Util.isLauncherOpen=function(){
var e=document.querySelector("#zdlibrary");return e&&-1!==e.className.indexOf("_visible")},e.Util.getI18NMessage=function(e){var a=window.ZDLibrary.I18NData[e];if(a){if(arguments.length>1)for(var t=1;t<arguments.length;t++)a=a.replace(new RegExp("\\{"+(t-1)+"\\}","g"),arguments[t]);return a}return e},e.Util.hasI18NMessage=function(e){return!!window.ZDLibrary.I18NData[e]},e.Util.getZDLibraryAPI=function(){return window.location.origin+"/zdlibrary/handler"},e.Util.escapeChar=function(a){return e.Constants.EscapeChar.escapeBadChars[a]},e.Util.escapeHTML=function(a){if(window.Em&&window.Em.Handlebars)return window.Em.Handlebars.Utils.escapeExpression(a);if("string"!=typeof a){if(!a)return a+"";a+=""}return e.Constants.EscapeChar.possible.test(a)?a.replace(e.Constants.EscapeChar.badChars,e.Util.escapeChar):a},e.Util.addClass=function(e,a){-1===e.className.indexOf(a)&&(e.className+=" "+a)},e.Util.addEvent=function(e,a,t){e.addEventListener?e.addEventListener(a,t,!1):el.attachEvent&&e.attachEvent("on"+a,t)},e.Util.makeDisplayNone=function(e){e.style.display="none"},e.Util.makeDisplayBlock=function(e){e.style.display="block"},e.Util.openLinkInNewtab=function(e){window.open(e,"_blank","noopener")},e.Util.setBackgroundColorForIcon=function(e){for(var a=document.querySelector(".zod-launcher-icon"),t=a.childNodes,n=0;n<t.length;n++)t[n].style.setProperty("background-color",e,"important")},e.Util.sortObjectsByNextTo=function(a,t,n){if(!a)return[];var r=a.filter(function(e){return"-1"===e[n]});if(r.length>1)for(var o=0;o<r.length-1;o++){for(var l=r[o+1][t];e.Util.findBy(a,n,l);)l=e.Util.findBy(a,n,l)[t];r[o][n]=l}for(var p={},s=[],i=[],c=[],o=0;o<a.length;o++){var d=a[o][t],u=a[o][n];p[d]=a[o],s.push(d),i.push(u)}s=e.Util.removeValues(s,i);for(var m=s[0],o=0;o<a.length;o++)if(m){var h=p[m];h&&(c.push(h),"-1"!==m&&(m=h[n]))}if(a.length!==c.length)for(var o=0;o<a.length;o++)c.some(function(e){return e[t]===a[o][t]})||c.push(a[o]);return c},e.Util.findBy=function(e,a,t){t=t.toLowerCase();for(var n=0,r=e.length;r>n;n++){var o=e[n];if(o[a].toLowerCase()===t)return o}return null},e.Util.findPosition=function(e,a,t){t=t.toLowerCase();for(var n=0,r=e.length;r>n;n++){var o=e[n];if(o[a].toLowerCase()===t)return n}return-1},e.Util.removeValues=function(e,a){return e.filter(function(e){return!a.some(function(a){return a===e})})},e.Util.getPermissibleMyAppstabsCount=function(){var e=document.querySelector(".zod-launcher-wrapper");return Math.floor((e.offsetWidth-215)/130)},e.Util.toggleDropdown=function(a,t,n){if(n=window.event||n,!(t.querySelector(".zod-launcher-dropdown")===n.target||t.getElementsByClassName("zod-launcher-dropdown-option").length&&e.Util.isPresent(t.getElementsByClassName("zod-launcher-dropdown-option"),n.target))){var r=t.querySelector(".zod-launcher-dropdown");if(r&&-1!==r.className.indexOf(a.dropDownClass)&&!a.renderAgainOnce)"block"===r.style.display?e.Util.makeDisplayNone(r):e.Util.makeDisplayBlock(r);else{var o=a.data;a.renderAgainOnce?(a.renderAgainOnce=!1,r.innerHTML=""):r=document.createElement("ul"),r.className="zod-launcher-dropdown",a.dropDownClass&&e.Util.addClass(r,a.dropDownClass),e.Util.makeDisplayBlock(r);for(var l=0;l<o.length;l++){var p=document.createElement("li");p.className="zod-launcher-dropdown-option",p.onclick=a.action,a.idKey&&p.setAttribute("data-id",o[l][a.idKey]),p.appendChild(document.createTextNode(a.textKey?o[l][a.textKey]:o[l])),r.appendChild(p)}t.appendChild(r)}e.Data.dontCloseDropDown=!0}},e.Util.isPresent=function(e,a){for(var t=0;t<e.length;t++)if(e[t]===a)return!0;return!1},e.Util.isCreatorCustomApp=function(e){return 1===e.app_type},e.Util.isCustomApp=function(e){return 1===e.app_type||3===e.app_type},e.Util.isThirdPartyApp=function(e){return 2===e.app_type||3===e.app_type}}();