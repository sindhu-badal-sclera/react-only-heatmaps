function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var WBClient=function(){function n(e,t){_classCallCheck(this,n),this.initialized=!1,this.MSG_KEYS={INIT:"INIT",ACTIVE_USERS:"ACTIVE_USERS",ACTIVE_USERS_LOCAL:"ACTIVE_USERS_LOCAL",EXPORT_BOARD_IMG:"EXPORT_BOARD_IMG",CLEAR_BOARD:"CLEAR_BOARD",INSERT_IMAGE:"INSERT_IMAGE",INSERT_TEXT:"INSERT_TEXT"},this.messagesSent={},this.domain="https://whiteboard.zoho.com",t&&t.length&&(this.domain=t),this.frameElement=e}return _createClass(n,[{key:"init",value:function(){if(!this.initialized)return this.initialized=!0,this._messageReceiver(),new Promise(function(t,e){document.addEventListener("WB_SDK_READY",function(e){t({WB_SDK_READY:"WB_SDK_READY",data:e.detail})})})}},{key:"_messageReceiver",value:function(){var n=this;window.onmessage=function(e){var t,e=e.data.msg;e&&(t=e.msgKey,e=e.msgData,t===n.MSG_KEYS.INIT?(t=new CustomEvent("WB_SDK_READY",{detail:e}),document.dispatchEvent(t)):(t=e.msgID,n.messagesSent[t].promiseObj(e.data)))}}},{key:"_messageSender",value:function(e,t,n){var i=Object.keys(this.messagesSent).length,i=i?i-1:0,r={msgID:i,data:t};this.messagesSent[i]={msgKey:e,data:t,promiseObj:n},this.frameElement.contentWindow.postMessage({msg:{msgKey:e,msgData:r}},this.domain)}},{key:"activeUsers",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.ACTIVE_USERS,{},e)})}},{key:"boardAsImage",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.EXPORT_BOARD_IMG,{},e)})}},{key:"clearBoard",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.CLEAR_BOARD,{},e)})}},{key:"activeUsersLocal",get:function(){var n=this;return new Promise(function(e,t){n._messageSender(n.MSG_KEYS.ACTIVE_USERS_LOCAL,{},e)})}},{key:"insertImage",set:function(n){var i=this;return new Promise(function(e,t){i._messageSender(i.MSG_KEYS.INSERT_IMAGE,n,e)})}},{key:"insertText",set:function(n){var i=this;return new Promise(function(e,t){i._messageSender(i.MSG_KEYS.INSERT_TEXT,n,e)})}}]),n}();