let TeamsUtilConstants={ADMIN:"Team Admin",MEMBER:"Members",CHANNELS_SORT_1:"alphabetical",CHANNELS_SORT_2:"lastMsgTime",PENDING:"Pending Users"},TeamLimitConstants={NAME_LIMIT:30,DESCRIPTION_LIMIT:200};var TeamInfo=function(){let e="",t="",a={headerPreview:`<div class="flex flexG fdirC ovrflwH">\n\t\t\t\t<div class="flex zwc-app-details">\n\t\t\t\t\t<div id ="teamImage_{{id}}" class="zwc-app-image posrel">\n\t\t\t\t\t\t<img src="{{image_url}}" class="w100 h100 bdrR4 padd5"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="mL10 flex fdirC ovrflwH flexG">\n\t\t\t\t\t\t<div id="teamName_{{id}}" class="pL20 font15 fontB clr-M">{{team_name}}</div>\n\t\t\t\t\t\t<div class="zcl-hor-tab mT5" style="width: initial;">{{tabs_html}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="mLR10 flexC fshrink">\n\t\t\t\t\t\t<div id="teamactions_{{id}}"  data-team_id="{{id}}"  data-action="team_moreOpts"   class="more-actions {{hide_TeamOpt}}" ><em class ="zcl-icon zcl-icon--default zcf-more "></em></div>\n\t\t\t\t\t\t<div id="actiondrpdwn_{{id}}" class="posabs zcl-menu-wrap zindex2 no-pointer " style=" top: 68px; right: 40px; z-index: 3;display: none;">\n\t\t\t\t\t\t\t<div  data-team_id="{{id}}" data-action="leaveJoinedTeam" class="zcl-menu-item zcl-neg-menu-item {{hide_leaveOpt}}"><span class= "zcf-leave pR5"></span>${I18N("team.leave")}</div>\n\t\t\t\t\t\t\t<div  data-team_id="{{id}}" data-action="deleteTeam" class="zcl-menu-item zcl-neg-menu-item {{hide_deleteOpt}}"><span class= "zcf-delete pR5"></span>${I18N("team.delete")}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="mL5 zcl-icon zcl-icon--default zcf-link" documentclick="teamPermalinkCopy" title="${I18N("channel.permalink")}"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`,searchDomHtml:`<div class="zcl-search2 zcl-search2-sm">\n\t\t\t\t<span class="zcf-search2 zcl-seach-icon"></span>\n\t\t\t\t<div class="zcl-search-input">\n\t\t\t\t\t<input type="text" team_id="{{team_id}}" tab_id={{tab_id}} id="team-preview-search-field" onkeyup="TeamInfo.handleKeyUp(event);" placeholder="{{placeholder}}">\n\t\t\t\t\t<span class="zcl-search-clear" data-action="clearSearchInput">${I18N("common.clear")}</span>\n\t\t\t\t</div>\n\t\t\t</div>`,mainPreview:'<div id="team-tab-container_{{id}}" app_tab_id="{{id}}" current_tab="{{current_tab}}" class="flex fdirC h100">\n        \t\t<div id="team-tab-header" class="zwc-hdr-view zwc-header-div fshrink flexC justifySB posrel">{{header_html}}</div>\n        \t\t<div class="flexG ovrflwH flex-col {{pendingForApproval_cls}}">\n\t\t\t\t\t<div id="teamtab_actions_{{id}}" class="w100"></div>\n            \t\t<div id="teamtab_sections_{{id}}" class="h100 zwc-container flex-col"></div>\n        \t\t</div>\n        \t\t<div id="teamtab_footer_{{id}}" class="fshrink ">{{footer_html}}</div>\n\n    \t\t</div>',mainCenterLoader:'<div id="teamwin-center-loader" class="h100 w100 flexM fdirC zwc-tab-loader">\n\t\t\t\t<div class="zcl-rloader posrel"></div>\n\t\t\t\t<div class="mT30 clr-S">{{loading}}</div>\n\t\t\t</div>',member_list_hdr_html:`<div class="w100 clr-lp1 fontB flexC pLR36 font13 table-hdr-item">\n\t\t\t\t<div class="flexC {{width}} pR12">{{name_txt}}</div>\n\t\t\t\t${Config.isEmailIdVisibilityRestricted()?"":'<div class="flexC {{width}} pR12">{{emailid_txt}}</div>'}\n\t\t\t\t{{department}}\n\t\t\t\t{{designation}}\n\t\t\t\t{{sub_contentCol}}\n\t\t\t</div>`,member_list_hdr_html_department:'<div class="flexC w25 pR12">{{department_txt}}</div>',member_list_hdr_html_designation:'<div class="flexC w25 pR12">{{designation_txt}}</div>',role_hdr_html:'<div class="zcmodal-right-title w100">\n\t\t\t\t<div class="font14">{{role_txt}}</div>\n\t\t\t</div>',member_item_html:`<div data-name="joineduser_{{user_id}}" uid = {{user_id}} class="posrel flex"  >\n\t\t\t\t<div class="zcl-win-modal1-item w100" uid={{user_id}} documentclick="viewUserProfile" data-peoplepreview>\n\t\t\t\t\t<div class="flexC {{width}} ellips pR12">\n\t\t\t\t\t\t<div class="fshrink posrel contct-img bdrR100">\n\t\t\t\t\t\t\t<img class="w100 h100 bdrR100" src="{{img_url}}"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="pL12 clr-H  ellips font14 pR12">\n\t\t\t\t\t\t\t<span elemtype="user" hover="true" uid="{{user_id}}" class="zctxtseln cur mL0">\n\t\t\t\t\t\t\t\t{{user_name}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${Config.isEmailIdVisibilityRestricted()?"":'<div class="clr-S ellips {{width}} font13 pR12">\n\t\t\t\t\t\t{{email_id}}\n\t\t\t\t\t</div>'}\n\t\t\t\t\t{{department}}\n\t\t\t\t\t{{designation}}\n\t\t\t\t\t{{sub_content}}\n\t\t\t\t</div>\n\t\t\t</div>`,member_item_html_department:'<div class="clr-S ellips w25 font13">\n\t\t\t\t{{department}}\n\t\t\t</div>',member_item_html_designation:'<div class="clr-S ellips w25 font13">\n\t\t\t\t{{designation}}\n\t\t\t</div>',teamview_memberaction:'<div id="{{id}}" class="posabs zcl-menu-wrap zindex2 no-pointer">\n\t\t\t\t<div data-module="{{module_name}}" data-uid="{{user_id}}" data-teamid="{{team_id}}" data-action="{{action_name}}" class="zcl-menu-item">{{action_txt}}</div>\n\t\t\t\t<div data-module="{{module_name}}" data-uid="{{user_id}}" data-teamid="{{team_id}}" data-action="{{removeactn_txt}}" class="zcl-menu-item zcl-neg-menu-item {{remove_cls}}">{{remove_txt}}</div>\n\t\t\t</div>',channel_list_hdr_html:'<div class="w100 clr-lp1 fontB flexC pLR36 font13 table-hdr-item">\n\t\t\t\t<div class="fshrink pR12">{{name_txt}}</div>\n\t\t\t\t<div class="fshrink pR12">{{createdby_txt}}</div>\n\t\t\t\t<div class="fshrink">{{lastactivity_txt}}</div>\n\t\t\t</div>',channel_item_html:'<div data-name="teamchannel_{{channel_id}}" class="posrel flex">\n\t\t\t\t<div class="zcl-win-modal1-item w100" uid={{channel_id}} documentclick="viewChannelDetails">\n\t\t\t\t\t<div class="flexC w50 pR12">\n\t\t\t\t\t\t<div class="fshrink posrel contct-img bdrR100">{{channel_img_src}}</div>\n\t\t\t\t\t\t<div class="pL12 clr-H  ellips font14">{{channel_name}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="fshrink pR12 clr-S font13"><span elemtype="user" hover="true" uid="{{creator_id}}" class="zctxtseln cur mL0">{{createdby}}</span></div>\n\t\t\t\t\t<div class="fshrink clr-S ellips font13">{{lastactivity}}</div>\n\t\t\t\t\t<div id="teamchanneslsmoreoption_{{channel_id}}" class="zcl-icon zcl-icon--filled zcf-more team-management-channels-more dN" documentclick="showChannelsOption"></div>\n\t\t\t\t</div>\n\t\t\t</div>',teamsettings_header:'<div class="zcmodal-right-title  w100" style ="height:50px;">\n\t\t\t\t\t\t\t\t\t<div class="font15">{{header_txt}}</div>\n\t\t\t\t\t\t\t\t\t{{edit_header}}\n\t\t\t\t\t\t\t</div>',teamsettings_content:`<div class=" m30 flexC">\n\t\t\t\t\t<div class=" font14 fontB"  style = "width:177px"> {{teamimg_txt}} </div>\n\t\t\t\t\t\t<div class ="w50 p5 flexC">\n\t\t\t\t\t\t\t<div class = "zcl-avatar ">\n\t\t\t\t\t\t\t\t<div  class ="{{edit_cls}} posrel  imagecontainer ">\n\t\t\t\t\t\t\t\t\t<div id="team_img_preview" class ="w100 h100" >{{teamimg_url}}</div>\n\t\t\t\t\t\t\t\t\t<span  class=" {{edit_cls}} teaminput zcl-avatar-action flexM zcf-camera zindex1" >\n\t\t\t\t\t\t\t\t\t\t<input type="file" id="teamphoto_input" {{edit_cls}} style ="top:5px;" data-name="teamphoto" class="upload-img  {{imgset_cls}} clr-H  {{edit_cls}} teaminput" accept="image/*">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div  class="  w90 mL20  " >\n\t\t\t\t\t\t\t\t<input class = " w100   zcl-input pR30"  type="text" data-name="teamname" placeholder="{{enter_name_txt}}" value="{{team_name}}" {{readonly}}/>\n\t\t\t\t\t\t\t\t<div invalidtxt class="posabs clr-err font13 mT5"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t  <div class = " flex m30">\n\t\t\t\t<div  class=" font14  clr-H fontB" style =" width:177px" >{{desc_txt}}</div>\t\t\n\t\t\t\t<div  class="w50 descriptioncontainer ">\n\t\t\t\t\t<textarea class =" zcl-textarea w100    p15"  type="text" data-name="description" placeholder="{{enter_desc_txt}}" value="{{team_desc}}" {{readonly}}>{{team_desc}}</textarea>\n\t\t\t\t\t<div invalidtxt class="posabs clr-err font13 mT5"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{{TEAMSVISIBILITYANDGROUPHTML}}\n\t\t\t{{TEAMJOINTYPEHTML}}\n\t\t\t<div class = " mT30 {{hideForAppAccount}} ">\n\t\t\t\t<div class ="flexC fontB mT30 pLR36 zcl-row" >${I18N("common.permission")} </div> \n\t\t\t\t{{TEAMPERMISSIONTABLE}}\n\t\t\t</div>`,channelsSortMenu:`<div id="teamschannelssortlist" class="zcl-menu-wrap posabs no-pointer font14 fontN teams-channels-sort-menu">\n\t\t\t\t\t<div id="teamschanelssort-${TeamsUtilConstants.CHANNELS_SORT_1}" class="zcl-menu-item posl" data-sort="${TeamsUtilConstants.CHANNELS_SORT_1}">${I18N("channels.sort.alphabetical")}</div>\n\t\t\t\t\t<div id="teamschanelssort-${TeamsUtilConstants.CHANNELS_SORT_2}" class="zcl-menu-item posl" data-sort="${TeamsUtilConstants.CHANNELS_SORT_2}">${I18N("channels.sort.recent")}</div>\n\t\t\t\t</div>`,reject_noteHtml:'<div style ="height: 160px">\n\t\t\t\t     <div class="fontB line22 mB10">{{reason_reject_txt}}</div>\n\t\t\t\t\t\t<div class="posrel ">\n\t\t\t\t\t\t\t<textarea id="reason_note" class=" delreason-textarea w100 h100 zcl-input  p15 " data-name ="reject_reason" placeholder="{{reject_reason}}">{{reason_value}}</textarea>\n\t\t\t\t\t\t\t<div invalidtxt class="posabs clr-err font13 mT5"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="clr-S__dark font14 p10">{{note_txt}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',pendingForApprovalFtrHtml:'<div class ="pendingTeamRhsFooter p10 flexM fontB">\n\t\t\t\t\t{{pendingForApproval}}\n\t\t\t\t</div>',approvePendingTeamBtn_Html:'<div class="flexC justifyE flexG ">\n\t\t\t  \t<div data-uid="{{user_id}}" data-teamid="{{team_id}}" data-action="approve_PendingUserRequest" class="zcl-btn-xs zcl-btn--primary mL15 user_approve_btn"><em class="zcf-tick user_approve_icon dN curP" title ="{{approve_txt}}"></em><span class="user_approve_label">{{approve_txt}}</span></div>\n\t\t\t  \t<div data-uid="{{user_id}}" data-teamid="{{team_id}}" data-action="reject_PendingUserRequest" class="zcl-btn-xs zcl-btn--secondary mL5 user_reject_btn"><em class="zcf-close user_reject_icon dN curP" title ="{{reject_txt}}"></em><span class="user_reject_label">{{reject_txt}}</span></div>\n\t\t\t</div>',teamMemberMoreOptsHtml:'<div class ="mR20 fshrink posabs memberMoreOpt-icn  right0 " >\n\t\t\t\t\t<div id="memberactions_{{user_id}}" data-uid="{{user_id}}" data-teamid="{{team_id}}" data-module="{{module_name}}" data-action="{{action_name}}"   class="more-actions {{team_edit_allowed_cls}}" ><em class ="zcl-icon zcl-icon--plain zcf-more ztb-button-type"></em></div>\n\t\t\t </div>',delete_subheaderHtml:'<div class= "posrel flex-col">\n\t    \t\t<span class="font16 line26">{{delete_dlgSubdr1}}</span>\n\t    \t\t<span class = "font16 line26">{{delete_dlgSubdr2}}</span>\n\t    \t</div>',teamsUserNavigationListHtml:`<div id="teamsusersnavigator" class="zcf-pointer font10 mL8 mT3 curP teams-users-header-navi clr-icon2 dN" documentclick="showTeamsUsersNavigator"></div>\n\t\t\t\t<div id="teamsusersnavigatorlist" class="zcl-menu-wrap posabs no-pointer font14 fontN dN teams-users-navi-list">\n\t\t\t\t<div class="font14 zcl-menu-item {{hide_pendingUserHdr}}" team_id="66216029" data-category="${TeamsUtilConstants.PENDING}">${I18N("team.pending.users")}</div>\n\t\t\t\t<div class="font14 zcl-menu-item" team_id="66216029" data-category="${TeamsUtilConstants.ADMIN}">${I18N("channel.role.0.2")}</div>\n\t\t\t\t<div class="font14 zcl-menu-item" team_id="66216029" data-category="${TeamsUtilConstants.MEMBER}">${I18N("channel.role.4")}</div>\n\t\t\t </div>`,assignAdminDropdownHtml:'<div class = "mB20" >\n\t\t\t\t <div class="fontB line22 mB10">{{assignAdmin_Txt}}</div>\n\t\t\t\t<div id = "assign_admin" data-key="" data-name = "admin_ids" purpose = "dropdown" class= "zcl-dropdown-wrp mT10"></div>\n\t\t\t\t\n\t\t\t</div>'},s=TeamsUtilConstants.CHANNELS_SORT_1,n=e=>{if(Teams.isExist(e))var t=Teams.getTeamsObj(e);else t=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);return $WC.template.replace(a.mainPreview,{id:e,current_tab:e,header_html:r(e),sections_html:o(),footer_html:!t.isStatusPending()||_isAdmin()||OrgFeatures.isIntranetRequest()?"":h(),pendingForApproval_cls:!t.isStatusPending()||_isAdmin()||OrgFeatures.isIntranetRequest()?"":"teams_rhsDisabled"},"InSecureHTML")},r=e=>{if(Teams.isExist(e))var t=Teams.getTeamsObj(e);else t=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);let s=$WC.template.replace(a.headerPreview,{image_url:t.getTeamImgUrl(),team_name:t.getTeamName(),id:e,hide_TeamOpt:OrgFeatures.isIntranetRequest()||t.onlyOneParticipant()&&!t.getIsModerator()?"hide":"",hide_leaveOpt:t.onlyOneParticipant()?"hide":"",hide_deleteOpt:t.getIsModerator()?"":"hide"});return $WC.template.replace(s,{tabs_html:l(e)},"InSecureHTML")},l=t=>{let a=[{id:LHSConstants.Teams.Members,status:!0,label:I18N("formbuilder.info.users")},{id:LHSConstants.Teams.Channels,status:SecurityManager.hasPermission(Modules.TeamChannels),label:I18N("menuname.channelsandgroups")},{id:LHSConstants.Teams.Settings,status:!0,label:I18N("common.settings")}],s="";return a.forEach(a=>{a.status&&(s+=$WC.template.replace('<div tab_id="{{id}}" team_id="{{teamid}}" documentclick="teamTabClick" class="zcl-hor-tab2-item {{sel}}"><div class="ellips">{{label}}</div></div>',{label:a.label,id:a.id,teamid:t,sel:a.id===e?"sel":""}))}),s},o=()=>p(),c=(e,t)=>{if(!t){if($("#teamtab_actions_"+e).html(d(e)),Teams.isExist(e))var a=Teams.getTeamsObj(e);else a=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);(!a.isStatusPending()||_isAdmin()||OrgFeatures.isIntranetRequest())&&$("#team-preview-search-field").focus()}},m=e=>{$("#teamtab_actions_"+e).html("")},d=t=>{if(e===LHSConstants.Teams.Settings)return"";return`<div class="mLR35 pB16 flexC pT14 justifySB">${u(t)+b(t)+(e===LHSConstants.Teams.Channels?w(t):"")}</div>`},u=t=>e===LHSConstants.Teams.Settings?"":$WC.template.replace(a.searchDomHtml,{$placeholder:e===LHSConstants.Teams.Members?"quickchat.node.placeholder":"channel.search.ph",tab_id:e,team_id:t}),p=()=>$WC.template.replace(a.mainCenterLoader,{$loading:$Util.getRandomQuotes()}),h=function(){return $WC.template.replace(a.pendingForApprovalFtrHtml,{$pendingForApproval:"team.approval.pending"})},g=({teamId:t,section_html:a,val:s,tab_name:i})=>{if(e===i){let i=e===LHSConstants.Teams.Members;if(i){var n;n=C(t);var r=`<div class="flexC zcl-win-subcategory posrel"><div class="stickytitle" zc_sticky_title="" zc_stick_init="" "><span></span></div>${B(t)}</div>\n\t\t\t\t\t<div id="teamtab_sections" zc_sticky_title_list class=" zcrchtlt flexG flexG h100">{{sections_html}}</div>`;if(r=$WC.template.replace(n+r,{sections_html:a},"InSecureHTML"),$WC.Util.isEmpty(a)){var l=!$WC.Util.isEmpty(s)&&"*"!=s;a=`<div class="h100 searchEmptyImgClass ">${$Util.emptyStateHtml({imageclass:l?"no_such_user":"people_empty_myreports",title:Resource.getRealValue(l?"team.members.searchempty":"team.members.empty")})}</div>`}else a=r}$("#teamtab_sections_"+t).html(a),i&&(v(),TeamInfo.handleResize())}},v=()=>{let e=$("#teamtab_sections");if(e.length){let t=e[0].scrollHeight,a=e.offset().top;Math.round(a+t)>window.innerHeight&&$("#teamsusersnavigator").removeClass("dN")}},f=(e,t)=>{let a="",s="",i=$("#team-preview-search-field").val().toLowerCase();if(t.forEach(t=>{let n=TeamMemberInfoHandler._getMemberObj(t);($WC.Util.isEmpty(i)||T(n,i))&&(n.getIsModerator()?a+=P(e,n,i):s+=P(e,n,i))}),$WC.Util.isEmpty(a)&&$WC.Util.isEmpty(s)){var n=!$WC.Util.isEmpty(i);return`<div class="h100 searchEmptyImgClass ">${$Util.emptyStateHtml({imageclass:n?"no_such_user":"people_empty_myreports",title:Resource.getRealValue(n?"team.members.searchempty":"team.members.empty")})}</div>`}return`<div>\n\t\t\t\t\t\t${C()}\n\t\t\t\t\t\t<div id="moderatorsList">\n\t\t\t\t\t\t\t${$WC.Util.isEmpty(a)?"":S(!0)+a}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="membersList">\n\t\t\t\t\t\t\t${$WC.Util.isEmpty(s)?"":S()+s}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`},T=(e,t)=>{let a=Users.getName(e.getUserId(),e.getDisplayName()),s=e.getEmailId();return a.toLowerCase().indexOf(t)>=0||s.toLowerCase().indexOf(t)>=0};var _=e=>Teams.getIsModerator(e);let b=t=>{if(e===LHSConstants.Teams.Members){var a=TeamPermissions.permission_actions.ADD_USERS,s=TeamPermissions.isCurrentTeamPermissionEnabled({team_id:t,permission_name:a})?"":"disabled",i=`<span id="teamsaddusersoptns" class="split-icon flexM zcf-pointer" documentclick="showOptionsDropDown"></span>\n\t\t\t\t\t\t<div id="teamsadduserslist" class="zcl-menu-wrap posabs no-pointer font14 dN fontN">\n\t\t\t\t\t\t\t<div class="font14 zcl-menu-item" documentclick="showAddAdminsToTeamUI"  team_id="${t}">${I18N("teams.addadmins")}</div>\n\t\t\t\t\t\t</div>`;return`<div class="zcl-btn-sm zcl-btn--primary zcl-split-btn fshrink ${_(t)?"teams-addusers-bt":""}n" documentclick="showAddMembersToTeamUI" team_id="${t}" ${s}><span>+${I18N("teams.addmembers")}</span>\n\t\t\t\t\t\t${_(t)?i:""}\n\t\t\t\t\t</div>`}return""},C=e=>{var t=MemberListHandler.getTeamsMembersParams(e).getPendingUsersCount()>0,s=$WC.template.replace(a.member_list_hdr_html,{sub_contentCol:t?'<div class="flexC {{width}} pR12"></div>':""},"InSecureHTML");return $WC.template.replace(s,{$name_txt:"common.name",$emailid_txt:"settings.noti.email",width:addDeptDesig?"w25":"w50",$department:addDeptDesig?$WC.template.replace(a.member_list_hdr_html_department,{$department_txt:"common.departmentname"}):"",$designation:addDeptDesig?$WC.template.replace(a.member_list_hdr_html_designation,{$designation_txt:"common.designation"}):""})},S=e=>$WC.template.replace(a.role_hdr_html,{$role_txt:e?"channel.role.0.2":"channel.role.4"});var y=function(e,t){if(void 0===t||0===t.length)return $WC.$CUtil.processXSS(e);var a=e.toLowerCase().indexOf(t),s=new RegExp($WC.Matcher.replace("escaperegexp",t),"i"),i=$WC.$CUtil.processXSS(e);return-1!==a&&(i=e.replace(s,"<b>$&</b>")),i};let P=(e,t,s,i)=>{var n=Users.getName(t.getUserId(),t.getDisplayName()),r=t.getEmailId(),l=i;"*"!==s&&(n=y(n,s),r=y(r,s));var o=t.isPending()?I(e,t):L(e,t);return l&&(o='<div id = "user_approverejectaction" class="clr-S ellips {{width}} font13 pR12">'+o+"</div>"),$WC.template.replace(a.member_item_html,{user_name:n,user_id:t.getUserId(),img_url:Users.getImgUrlById(t.getUserId()),team_id:e,email_id:r,width:addDeptDesig?l?"w20":"w25":"w50",$department:addDeptDesig?$WC.template.replace(a.member_item_html_department,{$department:$WC.Util.isEmpty(t.department)?"-":t.department.name}):"",$designation:addDeptDesig?$WC.template.replace(a.member_item_html_designation,{$designation:$WC.Util.isEmpty(t.designation)?"-":t.designation.name}):"",sub_content:o},"InSecureHTML")},L=(e,t)=>$WC.template.replace(a.teamMemberMoreOptsHtml,{user_id:t.getUserId(),team_id:e,action_name:t.getIsModerator()?"show_moderatoraction":"show_memberaction",team_edit_allowed_cls:$zcg._ZUID!==t.getUserId()&&_(e)?"":"hide"}),I=(e,t)=>$WC.template.replace(a.approvePendingTeamBtn_Html,{team_id:e,user_id:t.getUserId(),$approve_txt:"common.approve",$reject_txt:"common.reject"}),x=(e,t,s)=>{var i=e.dataset.uid,n=e.dataset.teamid,r=Teams.getTeamsObj(n),l=$("#actiondrpdwn_"+i);if(0===l.length){var o=$WC.template.replace(a.teamview_memberaction,{id:"actiondrpdwn_"+i,team_id:n,user_id:i,$remove_txt:"common.remove",action_name:s?"make_teammember":"make_teammoderator",$action_txt:s?"teams.assign.asmember":"team.assign.asadmin",remove_cls:1===r.participant_count?"hide":"",removeactn_txt:s?"remove_moderatorfromteam":"remove_memberfromteam"},"InSecureHTML");$(e).after(o),Clickoutside.bind({srcid:"memberactions_"+i,destid:"actiondrpdwn_"+i,customHide:function(e){$("#"+e.destid).remove()}});var c=$("#actiondrpdwn_"+i);M(c,t)}else Clickoutside.clear("actiondrpdwn_"+i),l.remove()},M=function(e,t){let a=$Util.positionTargetElemFixed(e,t);"auto"!==a.bottom&&(a.bottom=34,a.right=0,e.css(a))},R=(e,t)=>{$WC.$Dlg.confirm({id:"remove_member",version:3,class:"modalwindow zcl-alert-dialog-2 zcldel-dialog-box zcdgimgnone zcalgncntr zcbg_mask removedialog "+e.headerclass,headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="flexM  mAuto zcl-img"><img src="'+Users.getImgUrlById(t.memberid)+'" width="60" height="60"/></div>',header:e.header,subheader:e.info}),buttons:e.button})},U=e=>{$("#team-tab-container_"+e).on("click","[data-action]",(function(e){var a=e.currentTarget,s=this.getAttribute("data-action"),i={show_moderatoraction:function(){e.stopImmediatePropagation(),x(a,e,!0)},show_memberaction:function(){e.stopImmediatePropagation(),x(a,e,!1)},remove_memberfromteam:function(e,t){Clickoutside.handleClickOnChild(t);var a=e.dataset.uid,s=e.dataset.teamid,i={teamid:s,memberid:a,successCallBack:TeamInfo.removeMemberinTeamList},n=MemberListHandler.getTeamsMembersParams(s).getMemberObj(a),r=Users.getName(a,n.getDisplayName()),l={id:"remove_member",header:Resource.getRealValue("team.member.remove",r),headerclass:"",button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("remove_member")}},{text:Resource.getRealValue("common.remove"),colour:$zcg._cssClasses.NEG_PRIMARY_BTN,action:function(){TeamMembersHandler.removeMemberFromTeam(i)}}]};R(l,i)},remove_moderatorfromteam:function(e,t){Clickoutside.handleClickOnChild(t);var a=e.dataset.uid,s=e.dataset.teamid,i={teamid:s,memberid:a,successCallBack:TeamInfo.removeMemberinTeamList},n=MemberListHandler.getTeamsMembersParams(s).getMemberObj(a),r=Users.getName(a,n.getDisplayName()),l={id:"remove_member",header:Resource.getRealValue("team.member.remove",r),headerclass:"",button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("remove_member")}},{text:Resource.getRealValue("common.remove"),colour:$zcg._cssClasses.NEG_PRIMARY_BTN,action:function(){TeamMembersHandler.removeMemberFromTeam(i)}}]};R(l,i)},make_teammoderator:function(e,t){Clickoutside.handleClickOnChild(t);var a=e.dataset.uid,s=e.dataset.teamid,i={teamid:s,memberid:a,successCallBack:TeamInfo.changeMemberRoleInClient,changeto_moderator:!0},n=MemberListHandler.getTeamsMembersParams(s).getMemberObj(a),r=Users.getName(a,n.getDisplayName()),l={id:"role_change",header:Resource.getRealValue("team.assign.moderator.dialog",r),headerclass:"assignheader",button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("role_change")}},{text:Resource.getRealValue("reminders.tour.assign"),colour:$zcg._cssClasses.PRIMARY_BTN,action:function(){TeamMembersHandler.updateMemberRole(i)}}]};R(l,i)},make_teammember:function(e,t){Clickoutside.handleClickOnChild(t);var a=e.dataset.uid,s=e.dataset.teamid,i={teamid:s,memberid:a,successCallBack:TeamInfo.changeMemberRoleInClient,changeto_moderator:!1},n=MemberListHandler.getTeamsMembersParams(s).getMemberObj(a),r=Users.getName(a,n.getDisplayName()),l={id:"role_change",header:Resource.getRealValue("team.assign.member.dialog",r),headerclass:"assignheader",button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("role_change")}},{text:Resource.getRealValue("reminders.tour.assign"),colour:$zcg._cssClasses.PRIMARY_BTN,action:function(){TeamMembersHandler.updateMemberRole(i)}}]};R(l,i)},createTeamChannel:function(){if(Teams.isExist(t))var e=Teams.getTeamsObj(t);else e=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(t);ChannelsRHS.createChannelWin("",2,{hidelevel:!0,scope:2,teamid:t,teamname:$WC.$CUtil.processXSS(e.getTeamName())})},clearSearchInput:function(e,t){z(t,!0)},team_moreOpts:function(e,t){ae(e,t)},leaveJoinedTeam:function(){var e=a.dataset.team_id;G(e)},deleteTeam:function(){var e=a.dataset.team_id;se(e,a)},approve_PendingUserRequest:function(){var e=a.dataset.teamid,t=a.dataset.uid;$(a).addClass("reqprocess_anim");var s={team_id:e,user_id:t,successCallBack:TeamInfo.approveRejectPendingUserClientUpdate,errorCallBack:function(){$(a).removeClass("reqprocess_anim")},approve:!0,elem:a};TeamMembersHandler.approveRejectPendingUserRequest(s)},reject_PendingUserRequest:function(){var e=a.dataset.teamid,t=a.dataset.uid;$(a).addClass("reqprocess_anim");var s={team_id:e,user_id:t,successCallBack:TeamInfo.approveRejectPendingUserClientUpdate,errorCallBack:function(){$(a).removeClass("reqprocess_anim")},approve:!1};TeamMembersHandler.approveRejectPendingUserRequest(s)}};s&&"function"==typeof i[s]&&(i[s](a,e),e.stopImmediatePropagation())}))},w=e=>{return`<div id="teams-channels-utility" class="flexC posl">${(e=>{if(ChannelsPermission.hasPermission(MActions.Create,Channels.OrgGroup)){var t;if(Teams.isExist(e))var a=Teams.getTeamsObj(e);else a=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);var s=TeamPermissions.permission_actions.CREATE_CHANNEL;return t=TeamPermissions.isCurrentTeamPermissionEnabled({team_id:e,permission_name:s,teamObj:a})&&!a.isStatusPending()?"":"disabled",`<div class="zcl-btn-sm zcl-btn--primary " documentclick="createTeamChannel" team_id="${e}" team_name="${$WC.$CUtil.processXSS(a.getTeamName())}"  ${t}>+ ${I18N("team.channel.create","")}</div>`}return""})(e)} <div id="teamschannelssort" class="zcl-icon zcl-icon--filled zcf-sort mL20 font20" documentclick="teamsChannelsSort" title="Sort by"></div></div>`},A=e=>{let t=[],a=[],s=e.allchannels;return s&&s.forEach(e=>{e.joined?t.push(e):a.push(e)}),{joined:t,allowed:a}},E=(e,t)=>{let a=k(e.allchannels,t),s=t?$("#team-preview-search-field").val():"",i="",n=!1;if($WC.Util.isEmpty(a)){var r=!$WC.Util.isEmpty(s);n=!r,i=H(r)}else n=!1,i=`${N()}<div class="zcrchtlt">${a}</div>`;return{is_empty:n,content_html:i}},H=e=>{var a=TeamPermissions.permission_actions.CREATE_CHANNEL,s=TeamPermissions.isCurrentTeamPermissionEnabled({team_id:t,permission_name:a});if(Teams.isExist(t))var i=Teams.getTeamsObj(t);else i=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(t);var n={imageclass:e?"noresults_channel":"no_channels",title:Resource.getRealValue(e?"team.channel.search.empty":"team.channel.empty")};return!e&&ChannelsPermission.hasPermission(MActions.Create,Channels.OrgGroup)&&(n.buttonConfig={name:I18N("team.channel.create",""),purpose:"createTeamChannel",disabled:s&&!i.isStatusPending()?"":"disabled"}),`<div class="h100">${$Util.emptyStateHtml(n)}</div>`},k=(e,t)=>{let a="";if(e){let s=t?$("#team-preview-search-field").val().toLowerCase():"";e.forEach(e=>{($WC.Util.isEmpty(s)||O(e,s))&&(a+=j(e,s))})}return a},O=(e,t)=>{return Channels.getName(e.oc_id).toLowerCase().indexOf(t.toLowerCase())>=0},N=()=>$WC.template.replace(a.channel_list_hdr_html,{$name_txt:"channel.name",$createdby_txt:"group.created.by",$lastactivity_txt:"team.channel.lastactive"}),j=(e,t)=>{let s=e.oc_id,i=Channels.getImgUrl(s),n=e.lmtime&&e.lmtime>0?e.lmtime:e.ctime,r=i?`<img src="${i}" class="w100 h100 bdrR100"/>`:'<div class="msi-sc2 msci flexM wh100 clr-icon"></div>',l=Channels.getName(s);"*"!=t&&(l=y(l,t));let o=$WC.template.replace(a.channel_item_html,{channel_name:l,createdby:Users.getName(e.cr,e.cr_n),creator_id:e.cr,channel_id:s},"InSecureHTML");return $WC.template.replace(o,{channel_img_src:r,lastactivity:$Date.relative(n)},"InSecureHTML")},z=(e,t)=>{let a=t?$("#team-preview-search-field"):$(e.currentTarget),s=a.attr("tab_id"),i=a.attr("team_id"),n=$.trim(a.val());(e.keyCode==$zcg.ESCAPE_KEYCODE||t)&&(e.stopPropagation(),a.val("").focus(),n=""),s===LHSConstants.Teams.Members?MemberListHandler.populateDefaultResult(i,n,!0):s===LHSConstants.Teams.Channels&&(e=>{TeamMembersHandler.fetchTeamChannels({teamid:e,from_search:!0,successCallBack:function(e,t){TeamInfo.showChannelsListView(e,t,!0)}})})(i)},D=(e,t)=>{var a=`<div class="flexC justifyE mLR35">\n\t\t\t\t\t\t\t<div class=" zcf-edit2 zcl-btn-sm zcl-btn--primary " documentclick="edit_Team" team_id="${e}" {{disabled_btn}}><span class ="pL5">{{edit_settings}}</span></div>\n\t\t\t\t\t\t</div>`,s=TeamPermissions.permission_actions.UPDATE_TEAM,i=TeamPermissions.isCurrentTeamPermissionEnabled({team_id:e,permission_name:s});return $WC.template.replace(t?'<div class="flexC justifyE mLR35r">\n\t\t\t\t\t\t\t\t<div documentclick = "cancel_EditTeam" team_id="{{teamId}}" class="zcl-btn zcl-btn--secondary ">{{cancel_txt}}</div>\n\t\t\t\t\t\t\t\t<div documentclick = "saveTeamSettings" team_id="{{teamId}}" class="zcl-btn zcl-btn--primary mL15 ">{{action_txt}}</div>\n\t\t\t\t\t\t\t</div>':a,{$edit_settings:"team.editsettings",$cancel_txt:"common.cancel",$action_txt:"common.save",teamId:e,disabled_btn:i?"":"disabled"})},F=(e,t)=>{if(Teams.isExist(e))var s=Teams.getTeamsObj(e);else s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);var i={isEdit:t,team_id:e,teamObj:e?s:void 0,isFromTeamSettingView:!0},n=$WC.template.replace(a.teamsettings_header,{$header_txt:"team.info",edit_header:D(e,t)},"InSecureHTML"),r=$WC.template.replace(a.teamsettings_content,{imgset_cls:"img-set",team_name:s.getTeamName(),team_desc:s.description,$teamimg_txt:"team.profile.image",$name:"common.name",$enter_name_txt:"team.name.ph",$desc_txt:"common.description",$enter_desc_txt:"team.description.ph",edit_cls:!t&&"noEdit",readonly:t?"":"readonly"});return`${n}${r=$WC.template.replace(r,{TEAMSVISIBILITYANDGROUPHTML:OrgFeatures.isPublicTeamsEnabled()?PublicTeamsUIHandler.getTeamsVisibilitySwitcherHtml(i):"",TEAMJOINTYPEHTML:OrgFeatures.isPublicTeamsEnabled()?PublicTeamsUIHandler.getTeamJoinTypeHtml(i):"",TEAMPERMISSIONTABLE:OrgFeatures.isPublicTeamsEnabled()?PublicTeamsUIHandler.teamPermissionsTableHtml(i):"",hideForAppAccount:OrgFeatures.isPublicTeamsEnabled()?"":"hide",teamimg_url:'<img data-previousimg="true"  class = "imagecontainer" src="'+s.getTeamImgUrl(void 0,!0)+'"/>'},"InSecureHTML")}`};var V=function(e){var t=$("#teamtab_sections_"+e),a=$("#teamphoto_input");t.on("keyup focusin mouseup focus keydown",(function(e){var t=e.target;if("description"===t.dataset.name){if(t.value.length>200)return void($(t).hasClass("error")||($(t).addClass("error"),$(t).siblings("[invalidtxt]")[0].innerHTML=Resource.getRealValue("team.description.limit",[TeamLimitConstants.DESCRIPTION_LIMIT])));$(t).hasClass("error")&&($(t).removeClass("error"),$(t).siblings("[invalidtxt]")[0].innerHTML="")}else $(t).hasClass("error")&&($(t).removeClass("error"),$(t).siblings("[invalidtxt]")[0].innerHTML="");if("teamname"===t.dataset.name){if(t.value.length>30)return void($(t).hasClass("error")||($(t).addClass("error"),$(t).siblings("[invalidtxt]")[0].innerHTML=Resource.getRealValue("team.name.limit")));$(t).hasClass("error")&&($(t).removeClass("error"),$(t).siblings("[invalidtxt]")[0].innerHTML="")}else $(t).hasClass("error")&&($(t).removeClass("error"),$(t).siblings("[invalidtxt]")[0].innerHTML="")})),t.on("click ",(function(e){var a=e.target;if(void 0===a.dataset.action&&(a=e.target.closest("[data-action]")),a){var s={permisions_update:function(){var e=a.dataset.type,t=a.dataset.name,s=a.checked;TeamPermissions.updateTeamPermissions(t,e,s)},teamVisibilityUpdate:function(){var e=t.find("#teamVisibilityBtn"),a=t.find("#teamJoinType"),s=t.find("#teamvisibility-info");e[0].checked?(a.addClass("hide"),s.html(Resource.getRealValue("team.private.note"))):(a.removeClass("hide"),s.html(Resource.getRealValue("team.public.note")))}},i=a.dataset?a.dataset.action:"";"function"==typeof s[i]&&(s[i](),e.stopImmediatePropagation())}})),a.on("change",(function(e){var t=$("#team_img_preview");a.addClass("img-set");var s=this.files[0];$Util.imgPrview(t,s,'class="imagecontainer"',80)}))},W=(e,t)=>{var a=$WC.$CUtil.processXSS(t.name),s=Teams.getTeamsObj(e);$("#team"+e+" #teamName").html(a),$("#teamName_"+e).html(a);var i=$("#team_img_preview img").attr("src");if($("#teamImage_"+e+" > img").attr("src",i),OrgFeatures.isPublicTeamsEnabled()){let t=$("#team_lckIcon_"+e);s.isOpenToAll()?t.addClass("hide"):t.removeClass("hide")}};let B=e=>{var t=MemberListHandler.getTeamsMembersParams(e).getPendingUsersCount();return $WC.template.replace(a.teamsUserNavigationListHtml,{hide_pendingUserHdr:OrgFeatures.isPublicTeamsEnabled()&&t>0?"":"hide"})},q=e=>{let t=e.currentTarget.getAttribute("data-category"),a=$("#teamtab_sections");if(OrgFeatures.isPublicTeamsEnabled()&&t==TeamsUtilConstants.PENDING&&a.animate({scrollTop:0}),OrgFeatures.isPublicTeamsEnabled()||t!=TeamsUtilConstants.ADMIN){var s=a.find("[id = 'users-category-header-"+t+"']");s.length>0&&$Util.scrollToViewportTop(s,a,200,!0)}else a.animate({scrollTop:0})},Z=e=>{let t=e.currentTarget.getAttribute("data-sort");if(t==s)return;s=t;let a=MyOrgModule.lastSelectedOrgSubModule.teamId;TeamInfo.showChannelsListView(a,TeamMembersHandler.getTeamsChannelsData(a))},J=e=>{let t,a=s==TeamsUtilConstants.CHANNELS_SORT_1;return s==TeamsUtilConstants.CHANNELS_SORT_2?t="lmtime":a&&(t="cn"),$Util.sortBySpecificKey(e.allchannels,t,a)},G=e=>{var t={team_id:e,successCallBack:function(){Teams.getTeamsParams($zcg._ZUID).removeJoinedTeamFromStorage(e),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),PublicTeamsUIHandler.populatePublicTeamsRhs()},errorCallBack:function(){}},a=MemberListHandler.getTeamsMembersParams(e),s=Teams.getTeamsObj(t.team_id);if(Teams.isExist(e))s=Teams.getTeamsObj(e);else s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);t.teamObj=s,t.apiParams={},a.getIsCurentUserLastAdmin()?Q(t):TeamMembersHandler.leaveJoinedTeam(t)};var Q=function(e){var t=e.team_id,s=$WC.template.replace(a.reject_noteHtml,{$reason_reject_txt:"team.Leave.reason",$reject_reason:"user.invite.reject.request.reason.ph",reason_value:"",$note_txt:"team.leaveDlgNote"}),i=$WC.template.replace(a.assignAdminDropdownHtml,{$assignAdmin_Txt:"team.assign.asadmin"}),n={id:"leave_Team",header:Resource.getRealValue("team.leaveDlgHdr",e.teamObj.getTeamName()),info:Resource.getRealValue("team.leaveDlgDesc"),headerclass:"",bodyhtml:i+s,button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("leave_Team")}},{text:Resource.getRealValue("common.leave"),colour:$zcg._cssClasses.NEG_PRIMARY_BTN,action:function(){var t=$("#leave_Team").find('[data-name="admin_ids"]')[0].dataset.key;if(!$WC.Util.isEmpty(t)){var a=$("#reason_note").val();e.apiParams={},e.apiParams.reason=$WC.Util.isEmpty(a)?"":a,e.apiParams.admin_id=t,TeamMembersHandler.leaveJoinedTeam(e)}}}]};$WC.$Dlg.confirm({id:"leave_Team",version:3,class:"modalwindow zcl-alert-dialog-2 zcldel-dialog-box zcdgimgnone zcalgncntr zcbg_mask removedialog leave_teamPopup"+n.headerclass,headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="bdrR100 bgWhite clr-red flexM font36 mAuto zcf-leave " style = "width :60px ;height:60px;"></div>',header:n.header,subheader:n.info}),bodyhtml:n.bodyhtml,buttons:n.button,closecallback:function(){$(elem).removeClass("reqprocess_anim")}}),Y(t),ne()},Y=function(e){var t,a=$("#assign_admin");if(a.length>0){var s=[];t=a.dropdown({selected:[],drpdwnplaceholder:Resource.getRealValue("common.selectusers"),placeholder:Resource.getRealValue("common.search"),sorting:!0,data:s||{},fetchMore:{triggerRequest:K,minResultsCount:s&&Object.keys(s).length<10?1:10,previousSearches:[],loadingText:Resource.getRealValue("common.loading")},dropdownCallbacks:{hide:ee},clickcallback:function(){$('[button="2"]').attr("disabled",!1)},previousSearchData:[],searchinoptions:!0}),X("admin_ids",e,t)}$('[button="2"]').attr("disabled",!0)},K=function(e){if("admin_ids"===e.elem.dataset.name){var a={val:e._curvalue,successcallback:function(t){var a=TeamAssignAdminsHandler.getFormatedUserDrpDwnOpts(t);e.config&&(e.config.currSearch=a,e.config.maxItems=1),e.populateList("",{from_callback:!0})}};TeamAssignAdminsHandler.getTeamMembersList(t,a.successcallback,a)}else e.config.fetchMore.loadingText=e.config.noMatchesText,e.populateList("",{from_callback:!0})},X=function(e,t,a){var s=a;return TeamAssignAdminsHandler.getTeamMembersList(t,(function(e){te(e,s)}))},ee=function(e,t){t.config.previousSearchData=[]},te=function(e,t){var a,s,i=TeamAssignAdminsHandler.getFormatedUserDrpDwnOpts(e);s=t,(a=i)&&s&&s[0].setData(a)};let ae=function(e){var t=e.dataset.team_id;Clickoutside.bind({srcid:"teamactions_"+t,destid:"actiondrpdwn_"+t})},se=(e,t)=>{ie({team_id:e,successCallBack:function(){Teams.getTeamsParams($zcg._ZUID).removeJoinedTeamFromStorage(e),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),PublicTeamsUIHandler.populatePublicTeamsRhs()},errorCallBack:function(){},elem_dom:t})};var ie=function(e){var t=e.team_id,s=Teams.getTeamsObj(e.team_id);if(Teams.isExist(t))s=Teams.getTeamsObj(t);else s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(t);var i=$WC.template.replace(a.reject_noteHtml,{$reason_reject_txt:"user.invite.reject.request.reason",$reject_reason:"user.invite.reject.request.reason.ph",reason_value:"",$note_txt:"team.delete.note"}),n=$WC.template.replace(a.delete_subheaderHtml,{$delete_dlgSubdr1:"team.deleteDlgDesc1",$delete_dlgSubdr2:"team.deleteDlgDesc2"}),r={id:"delete_Team",header:Resource.getRealValue("team.deleteDlgHdr",s.getTeamName()),info:n,headerclass:"",bodyhtml:i,button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("delete_Team"),e.elem_dom.removeClass("reqprocess_anim")}},{text:Resource.getRealValue("common.delete"),colour:$zcg._cssClasses.NEG_PRIMARY_BTN,action:function(){var t=$("#reason_note").val();e.note=$WC.Util.isEmpty(t)?"":t,TeamMembersHandler.deleteJoinedTeam(e)}}]};$WC.$Dlg.confirm({id:"delete_Team",version:3,class:"modalwindow zcl-alert-dialog-2 zcldel-dialog-box zcdgimgnone zcalgncntr zcbg_mask removedialog "+r.headerclass,headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="flexM  mAuto "><img src="/officechat/images/default/cliqconsole/del_icon.svg" width="60" height="60"/></div>',header:r.header,subheader:r.info}),bodyhtml:r.bodyhtml,buttons:r.button,closecallback:function(){$(elem).removeClass("reqprocess_anim")}}),ne()},ne=function(){var e=$("#delete_Team");e.on("keyup",(function(t){var a=t.target;a.value.length>100?$(a).hasClass("error")||($(a).addClass("error"),$(a).siblings("[invalidtxt]")[0].innerHTML=Resource.getRealValue("user.invite.rejectionnote.limit"),e.find('[button="2"]').attr("disabled","")):$(a).hasClass("error")&&($(a).removeClass("error"),$(a).siblings("[invalidtxt]")[0].innerHTML="",e.find('[button="2"]').removeAttr("disabled"))}))};return{populateUI:a=>{e=(e=$WC.Util.isEmpty(e)?LHSConstants.Teams.Members:e)!==LHSConstants.Teams.Channels||SecurityManager.hasPermission(Modules.TeamChannels)?e:LHSConstants.Teams.Members,t=a,Teams.getSpeificTeamInfoFromServer(t,(function(t){if(Teams.isExist(a))var s=Teams.getTeamsObj(a);else s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(a);var i=t;s.update(i),Teams_LHS.updateTeamLhsRow(s);let r=n(a);LhsNavigation.updateRHSView(r),TeamInfo.handleTabView(a,e),U(a),$('[purpose="showTeamsView"][team_id="'+a+'"]').addClass("chatsel").siblings().removeClass("chatsel"),$('[purpose="showPeopleSubModule"]').removeClass("chatsel"),Teams_LHS.updatePermalinkUrl(a,e),ZCTrack.track("TEAM_MANAGEMENT",{ACTION:"Team view"}),MyOrgModule.lastSelectedOrgSubModule={isTeamsModuleSelected:!0,teamId:a}}))},updateMembersView:t=>{((t,a)=>{e===LHSConstants.Teams.Members&&$("#teamtab_sections_"+t).html(a)})(t,p());var a=OrgFeatures.isPublicTeamsEnabled();TeamMembersHandler.fetchTeamMembers({teamid:t,apiParam:MemberListHandler.getMembersApiParams({role:"moderator"}),successCallBack:function(e,t,s){if(TeamInfo.getTeamsActiveSubTab()==LHSConstants.Teams.Members){var n=MemberListHandler.getTeamsMembersParams(e),r=t.members,l=[];for(i in r)n.updateMembersStorage(r[i]),l.push(r[i].user_id);n.storeFetchedModerators(l),n.storeAllFetchedMembers(t.members),a?TeamMembersHandler.fetchTeamMembers({teamid:e,apiParam:MemberListHandler.getMembersApiParams({status:"pending"}),successCallBack:function(e,t,a){if(TeamInfo.getTeamsActiveSubTab()==LHSConstants.Teams.Members){var s=MemberListHandler.getTeamsMembersParams(e),n=t.members,r=[];for(i in n)n[i].status="pending",s.updateMembersStorage(n[i]),r.push(n[i].user_id);s.storeFetchedPendingUsers(r),s.storeAllFetchedMembers(t.members),MemberListHandler.populateDefaultResult(e);var l=s.getPendingUsersCount();$("#pendingUsersCnt_"+e).html(l>0?l:"")}},errorCallBack:function(){MemberListHandler.populateDefaultResult(e)}}):MemberListHandler.populateDefaultResult(e)}},errorCallBack:function(){TeamInfo.showMembersListView(t,[])}})},updateChannelsView:(e,t)=>{!t&&g({teamId:e,section_html:p(),tab_name:LHSConstants.Teams.Channels}),TeamMembersHandler.fetchTeamChannels({teamid:e,successCallBack:function(e,a){if(a){let e=A(a);Channels.updateData(e)}t?PublicTeamsUIHandler.showAllowedTeamChannels(e,a):TeamInfo.showChannelsListView(e,a)}})},updateSettingsView:e=>{g({teamId:e,section_html:p(),tab_name:LHSConstants.Teams.Settings}),TeamInfo.showTeamSettingsView(e)},handleTabView:(t,a)=>{e=a,$('[tab_id="'+a+'"]').addClass("sel").siblings().removeClass("sel"),m(t),e===LHSConstants.Teams.Members?TeamInfo.updateMembersView(t):e===LHSConstants.Teams.Channels?(Groups.loadMyOrgGroups(),TeamInfo.updateChannelsView(t)):e===LHSConstants.Teams.Settings&&TeamInfo.updateSettingsView(t)},switchTabView:(t,a)=>{e!==a&&(TeamChannelsUtility.isMoreOptionMenuVisible()&&TeamChannelsUtility.clearChannelsMoreOptionsMenu(),TeamInfo.handleTabView(t,a),Teams_LHS.updatePermalinkUrl(t,e))},changeMemberRoleInClient:(e,t,a)=>{UI.updateBanner(Resource.getRealValue("team.role.update.sucess"),3e3);let s=$("#team-preview-search-field"),i=$.trim(s.val());var n,r=MemberListHandler.getTeamsMembersParams(e);(r.getMemberObj(t).changeRole(a),a)?-1===(n=r.allfetchedmoderatorslist.indexOf(t))&&r.allfetchedmoderatorslist.push(t):-1!==(n=r.allfetchedmoderatorslist.indexOf(t))&&r.allfetchedmoderatorslist.splice(n,1);MemberListHandler.populateDefaultResult(e,i)},removeMemberinTeamList:(e,t)=>{var a=document.getElementById("teamtab_sections_"+e).querySelector('[data-name="joineduser_'+t+'"]');a&&$(a).slideUp("normal",(function(){$(this).remove();var t=$("#team-preview-search-field").val();MemberListHandler.populateDefaultResult(e,t),Teams.getTeamsObj(e).updateParticipantCnt(!0),TeamInfo.updateTeamsRhsHeader(e)}))},showMembersListView:(e,t,a)=>{a||c(e);let s=f(e,t);g({teamId:e,section_html:s,tab_name:LHSConstants.Teams.Members})},showChannelsListView:(e,t,a)=>{let s=$Util.cloneObject(t,!0);s.allchannels=J(s);let i=E(s,a);a||(i.is_empty?m(e):c(e)),g({teamId:e,section_html:i.content_html,tab_name:LHSConstants.Teams.Channels})},handleKeyUp:z,showTeamSettingsView:(e,t)=>{var a=F(e,t);if(g({teamId:e,section_html:a,tab_name:LHSConstants.Teams.Settings}),t){V(e);var s=document.getElementById("teamtab_sections_"+e).querySelector('[data-name="teamname"]');s.focus();var i=2*s.value.length;s.setSelectionRange(i,i),TeamPermissions.clearEditedTeamPermission()}},editTeamAction:(e,t)=>{var a=document.getElementById("teamtab_sections_"+e),s=a.querySelector('[data-name="teamname"]'),i=s.value,n=a.querySelector('[data-name="description"]').value,r=a.querySelector("#joinDirectly"),l=a.querySelector("#requestToJoin");if($WC.Util.isEmpty(i.trim()))return $(s).addClass("error"),void($(s).siblings("[invalidtxt]")[0].innerHTML=Resource.getRealValue("team.name.required"));if(!(n.length>200)){$Util.Button.addLoadIconForAjax($(t));var o={},c=document.getElementById("team_img_preview").querySelector("img");if(c&&(o.image_data=c.src,c.dataset.previousimg&&delete o.image_data),o.name=i,o.description=n,!OrgFeatures.isIntranetRequest()&&OrgFeatures.isPublicTeamsEnabled()){var m=a.querySelector("#teamVisibilityBtn");o.visibility=m.checked?PublicTeamsUIHandler.getTeamVisibilityTypes("INVITE_ONLY"):PublicTeamsUIHandler.getTeamVisibilityTypes("OPEN_TO_ALL"),a.querySelector("#teamJoinType")&&($(r).is(":checked")&&(o.jointype=r.dataset.value),$(l).is(":checked")&&(o.jointype=l.dataset.value));var d=TeamPermissions.getEditedTeamPermission();d&&Object.assign(o,d)}var u={teamid:e,elem:t,data:o,successCallBack:function(e,t,a,s){UI.updateBanner(Resource.getRealValue("team.settings.updateSuccess"),3e3),TeamInfo.updateEditChangesInClient(e,t,a,s)},errorCallBack:function(t){let a=t&&t.code&&t.message?t.message:Resource.getRealValue("team.edit.error");UI.updateBanner(a,3e3,!0),TeamInfo.showTeamSettingsView(e,!1)}};TeamSettingssHandler.editTeamSettings(u)}},updateEditChangesInClient:function(e,t,a,s){Teams.updateTeamClientStorage(s),W(e,s),TeamInfo.showTeamSettingsView(s.team_id,!1)},_getMemberItemHtml:P,_updateSectionHtml:g,_updateSecondaryActionBand:c,bindTeamsActionEvents:U,handleChannelEditInTeamsUi:e=>{let t=Channels.getObject(e),a=j(t,"");$("#teamtab_sections_"+MyOrgModule.lastSelectedOrgSubModule.teamId).find("[data-name=teamchannel_"+e+"]").replaceWith(a)},handleChannelDeleteInTeamsUi:e=>{$("#teamtab_sections_"+MyOrgModule.lastSelectedOrgSubModule.teamId).find("[data-name=teamchannel_"+e+"]").remove()},isCurrentViewIsTeamsChannels:()=>LhsModules.activeTabId==LHSConstants.ModuleIds.MYPEOPLE&&"undefined"!=typeof MyOrgModule&&MyOrgModule.lastSelectedOrgSubModule&&MyOrgModule.lastSelectedOrgSubModule.isTeamsModuleSelected&&e==LHSConstants.Teams.Channels,handleChannelChangesInTeamsObj:(e,t,a)=>{let s=MyOrgModule.lastSelectedOrgSubModule.teamId,i=TeamMembersHandler.getTeamsChannelsData(s).allchannels,n=i.length;for(let s=0;s<n;s++){if(i[s].oc_id==e){"delete"==t?i.splice(s,1):"edit"==t&&(i[s].cn=a.cn,i[s].lmtime=a.lmtime);break}}TeamInfo.showChannelsListView(s,TeamMembersHandler.getTeamsChannelsData(s))},copyTeamsPermaLink:()=>{let e=(e=>$Util.getPermalinkUrl(window.location.origin+$ZCAjx.getURLPrefix()+"/teams/"+e))(MyOrgModule.lastSelectedOrgSubModule.teamId);$Util.copyTextToClipboard(e,(function(){UI.updateBanner(Resource.getRealValue("teams.permalink.banner"))}))},setActiveTabFromRoutingPath:t=>{e=t},showAddUsersDropDown:e=>{Clickoutside.bind({srcid:"teamsadduserslist",event:e,destid:"teamsaddusersoptns",customShow:function(e){$("#"+e.srcid).removeClass("dN")},customHide:function(e){$("#"+e.srcid).addClass("dN")}})},showUsersHeaderMenu:()=>{Clickoutside.bind({srcid:"teamsusersnavigatorlist",event:event,destid:"teamsusersnavigator",customShow:function(e){let t=$("#"+e.srcid);t.removeClass("dN"),t.off("click"),t.on("click","[data-category]",(function(e){q(e)}))},customHide:function(e){$("#"+e.srcid).addClass("dN")}})},showChannelsSortMenu:e=>{Clickoutside.bind({srcid:"teamschannelssortlist",event:e,destid:"teamschannelssort",customShow:function(e){let t=$("#teams-channels-utility");t.append(a.channelsSortMenu),t.find("#teamschanelssort-"+s).addClass("sel_status"),t.find("#teamschannelssortlist").on("click","[data-sort]",(function(e){Z(e)}))},customHide:function(e){$("#"+e.srcid).remove()}})},getTeamsActiveSubTab:()=>e,leaveJoinedTeam:G,approveRejectPendingUserClientUpdate:function(e,t,a){var s=a.approve;let i=$("#team-preview-search-field"),n=$.trim(i.val());var r=MemberListHandler.getTeamsMembersParams(e);r.removeMemberfromPendingUserStorage(t),memberObj=r.getMemberObj(t),s?(UI.updateBanner(Resource.getRealValue("team.member.approve.success",memberObj.getName()),3e3),memberObj.updateMemberStatus("approved")):(r.removeMemberFromStorage(t),UI.updateBanner(Resource.getRealValue("team.member.reject.success",memberObj.getName()),3e3)),MemberListHandler.populateDefaultResult(e,n);var l=r.getPendingUsersCount();$("#pendingUsersCnt_"+e).html(l>0?l:"")},updateTeamsRhsHeader:function(e){var t=$("#team-tab-container_"+e).find("#team-tab-header"),a=r(e);t.html(a)},handleResize:function(){if(e===LHSConstants.Teams.Members){var t=document.getElementById("teamtab_sections"),a=$(t).find("#user_approverejectaction");if(a.length>0){var s=a[0].firstChild;$(t).toggleClass("small_reject",s.clientWidth<210),$(t).toggleClass("small_approve",s.clientWidth<142)}}}}}(),AddMemberToTeam=function(){let e,t,a,s,n,r,l="team-addparticipants";var o={};let c=i=>{t=i.find("#"+l+"-usersuggest-search-field"),a=l+"-usersuggest-select-field",s=i.find("#"+l+"-usersuggest-list"),n=i.find("#"+l+"-usersuggest-results"),r=i.find("#"+l+"-usersuggest-select-field"),SearchField.init(l+"-usersuggest"),s.html(""),s.html('<div class="zcldng"></div>'),AddMemberToTeam.allowedUsersParams(e).clearStorage(),AddMemberToTeam.populateDefaultResult(),i.on("click","[purpose]",(function(){"deleteimgnode"==event.target.getAttribute("purpose")&&($(this).parents("[nodetype]").remove(),t.select().focus(),AddMemberToTeam.populateDefaultResult(),$WC.Util.isEmpty(r.html())&&$("#"+l+"-usersuggest").addClass("zcrchmcnt").removeClass("zcadprtwin"))}))},m=t=>`<div id="${l}-usersuggest" class="mcontent zcrchmcnt" style="width: 100%;">\n\t\t\t\t\t${(t=>{let a=t?I18N("teams.addadmins"):I18N("teams.addmembers");if(Teams.isExist(e))var s=Teams.getTeamsObj(e);else s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);let i=`<div class="zcl-win-modal1-hdr fshrink">\n\t\t\t\t<div class="w100 justifySB flexC pTB10">\n\t\t\t\t\t<div class="font17 fontB ellips flexC">\n\t\t\t\t\t\t<div id="" class="zcl-breadcum-link ellips participantstab-nav">{{team_name}}</div>\n\t\t\t\t\t\t\t<span class="mLR5 font17 clr-S__dark"> > </span>\n\t\t\t\t\t\t<div>${a}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span id="winclose" class="zcl-icon zcl-icon--plain zcl-round zcf-close"></span>\n\t\t\t\t</div>\n\t\t\t</div>`;return $WC.template.replace(i,{team_name:s.getTeamName()})})(t)}\n\t\t\t\t\t<div class="zcl-win-modal1-srch fshrink flexC">\n\t\t\t\t\t\t<div class="zcl-search2">\n\t\t\t\t\t\t\t<span class="zcf-search2 zcl-seach-icon"></span>\n\t\t\t\t\t\t\t<div class="zcl-search-input">\n\t\t\t\t\t\t\t\t<input type="text" id="${l}-usersuggest-search-field" placeholder="${I18N("quickchat.node.placeholder")}">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="${l}-usersuggest-results" class="zcrchtlt">\n\t\t\t\t\t\t<div id="${l}-usersuggest-list" class="zcht100 posl"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${d(t)}\n\t\t\t\t</div>`,d=t=>{return`\n\t\t<div class="flexC p20 fshrink zcl-win-modal1-footr">\n\t\t\t<div id="participantsnodecnt" class="zcrchicnt flexG">\n\t\t\t\t<div id="${l}-usersuggest-select-field" contenteditable="false" class=""></div>\n\t\t\t</div>\n\t\t\t<div class="alignselfE fshrink flexC">\n\t\t\t\t<div class="zcl-btn zcl-btn--secondary" documentclick="cancelAddMembersInTeamView" team_id="${e}">Cancel</div>\n\t\t\t\t<div class="zcl-btn zcl-btn--primary mL20" documentclick="${t?"addAdminsInTeam":"addMembersInTeam"}" team_id="${e}">Add</div>\n\t\t\t</div>\n\t\t</div>`};var u=function(e,t,a,s){var n=[],r=MemberListHandler.getTeamsMembersParams(e),l=Teams.getTeamsObj(e);for(i in t)r.updateMembersStorage(t[i]),a&&n.push(t[i].user_id);n.length>0&&r.storeFetchedModerators(n),r.storeAllFetchedMembers(t),l.updateParticipantCnt(!1,s)},p=function(e,t){var a={highlight:!0,limit:100};return e=$.extend({},a,e),h(e.team_id,(function(a){var s=T(a,e);e.successCallback(e.val,s),ZCScroll.customScroll($("#"+e.listid)),$Scroll.handleScroll($("#"+e.listid),e,AddMemberToTeam.getAllowedTeamUsersOnScroll),t||(s.content||"function"!=typeof e.clearcallback?"function"==typeof e.successcallback&&e.successcallback():e.clearcallback())}),e),{content:"",searchedlist:[],furtherreq:!0}},h=function(e,t,a){var s=AddMemberToTeam.allowedUsersParams(a.team_id);($WC.Util.isEmpty(a.val)||"*"===a.val)&&s.userspopulated&&s.hasAllAllowedUSers()?t(s.getFetchedUser()):g(e,t,a)},g=function(e,t,a){a=a||{};var s=AddMemberToTeam.allowedUsersParams(a.team_id),n=null!=a?"scrollup"==a.type:"",r=n||s.userspopulated,l=a.val&&"*"!=a.val,o=!!l&&s.hasSearchQueryNeedsServerResponse(a.val),c=!l&&!s.userspopulated,m=0==s.userscount;if(m&&(a.forceFetchCall=!0),a.fromSearch&&!l&&s.clearSearchStorage(),!r&&(c||o)||m){var d={teamid:e,successCallBack:function(e,n){var r=n.members;for(i in r)s.updateAllowedUsersStorage(r[i]);var o=a.val&&"*"!=a.val,c=n?n.next_token:"",m={};a.forceFetchCall;s.setIsFetchingInProgress(!1),o?(s.setNextTokenForSearchVal(c),$WC.Util.isEmpty(c)&&s.setSearchPopulated(!0),m.SearchHasVal=!0,s.setSearchValue(a.val)):(s.setNextToken(c),$WC.Util.isEmpty(c)&&s.setPopulated(!0)),v(e,r,m);var d=f(e,a);if(a.fromSearch){s.storesearchedUsers(d);r=s.getSearchedUsers()}else{s.storeAllAllowedUsers(d);r=s.getFetchedUser()}!l&&(s.userscount=r.length),t(r)},criteria:a};a.role="allowed";var u=MemberListHandler.getMembersApiParams(a,s);d.apiParam=u,TeamMembersHandler.fetchTeamMembers(d)}else{if(a.fromSearch&&s.searchpopulated)var p=s.getSearchedUsers();else p=s.getFetchedUser();l||(n?s.userscount-=100:s.userscount+=100),t(p)}},v=function(e,t,a){"string"==typeof t&&(t=JSON.parse(t));var s=AddMemberToTeam.allowedUsersParams(e),i=(a=a||{}).SearchHasVal;i&&(s.lastSearchedQuery=s.getSearchValue());for(var n=(i?s.searchedUsers:s.allAllowedUserlist)||[],r=0,l=t.length;r<l;r++){var o=t[r];$WC.Util.isEmpty(o.user_id)||-1===n.indexOf(o.user_id)&&n.push(o.user_id)}n.length&&i?s.searchedUsers=s.getSearchedUsers(n):n.length&&s.storeAllAllowedUsers(n)},f=function(e){var t=AddMemberToTeam.allowedUsersParams(e),a=t.allAllowedUserlist;return t.searchValue&&"*"!=t.searchValue&&(a=t.searchedUsers),a},T=function(e,t){var a=t.team_id,s=(t.html,t.highlight,t.limit,""),i=[],n=[],r=[],l=(t.categorize,t.val.toLowerCase());t=$.extend({},{allstatus:!0,emailid:!0,highlight:!0,restricttosameorg:!0},t);var o=AddMemberToTeam.allowedUsersParams(t.team_id);l=l||o.getSearchValue().toLowerCase();for(var c=e.length,m=0;m<c;m++){var d=-1,u=-1,p=e[m];if(-1===(d=t.ignorelist.indexOf(p))){var h=o.getUserObj(p);dname=Users.getName(h.getUserId(),h.getName()),emailid=h.getEmailId(),"*"===l?r.push([dname,p]):(d=dname.toLowerCase().indexOf(l),u=emailid.toLowerCase().indexOf(l),0===d?n.push([dname,p]):-1!==d?r.push([dname,p]):-1!==u&&r.push([emailid,p]))}}var g=n.concat(r),v=$Scroll.getElementRange(g.length,t),f=$WC.Util.isArray(g[v.minlimit])?g[v.minlimit][1]:void 0,T=o.getUserObj(f);for(m=v.minlimit,c=v.maxlimit;m<c;m++){p=g[m][1];if((T=o.getUserObj(p)).zuid=p,-1===(d=t.ignorelist.indexOf(p)))T.dname=T.displayName,s+=_(T,t),i.push(g[m][1])}return{content:s,team_id:a,listid:t.listid,destid:t.destid,searchedlist:i,furtherreq:!1,appendindom:t.pageno>1}},_=function(e,t){var a=$WC.$CUtil.processXSS(t.val),s=e.zuid,i=$WC.$CUtil.processXSS(e.displayName),n=$WC.$CUtil.processXSS(e.email_id),r=i,l=n,o=Contacts.isMutual(s)?Contacts.getStatusStyle(s):"",c=!$WC.Util.isEmpty(e.department)||!$WC.Util.isEmpty(e.designation),m=$WC.Util.isEmpty(e.department)?"":e.department.name,d=$WC.Util.isEmpty(e.designation)?"":e.designation.name;if(t.highlight&&"*"!==a){var u=i.toLowerCase().indexOf(a),p=$WC.Util.isEmpty(n)?-1:n.toLowerCase().indexOf(a),h=new RegExp($WC.Matcher.replace("escaperegexp",a),"i");-1!==u?r=i.replace(h,"<b>$&</b>"):-1!==p&&(l=n.replace(h,"<b>$&</b>"))}var g={dname:r,emailid:l},v=(l=l||g.departmentinfo,$WC.Util.isEmpty(l)?Resource.getRealValue("chat.participant.nonorg"):l),f=$WC.Matcher.replace("escapeReplacementString",g.dname);return t.html.replace(/{USERID}/g,s).replace(/{IMGURL}/g,Users.getImgUrlById(s)).replace(/{USERTAG}/g,Users.getTag(s)).replace(/{DEFAULTURL}/g,Users.getDefaultImgUrl()).replace(/{STATUSCLASS}/g,o).replace(/{SCODE}/g,"").replace(/{DNAMEVAL}/g,f).replace(/{EMAILID}/g,c?Users.getDepartmentInfo(m,d):v).replace(/{DNAME}/g,$WC.Matcher.replace("escapeReplacementString",i))};return{create:(t,a)=>{e=t;var s=$WC.$Win.create({id:l,class:"zcl-win-modal1 rhsoverly",aligncenter:!1,closeoutside:!0,html:m(a)});c(s)},close:()=>{AddMemberToTeam.allowedUsersParams(e).clearStorage(),$WC.$Win.destroy(l)},search:function(i){var n=[].concat(SearchField.getSelectedList(a));SearchAgent.search({searchin:SearchAgent.ALLOWEDTEAMUSERS,limit:100,team_id:e,val:i,categorize:!1,contactshtml:QuickAction.quickchatcontacthtml,html:QuickAction.quickchatcontacthtml,orgcontactshtml:QuickAction.quickchatcontacthtml,listid:l+"-usersuggest-list",destid:l+"-usersuggest-results",ignorelist:n,successcallback:function(){$WC.Util.isEmpty(t.val())&&AddMemberToTeam.focusFirstResult()},clearcallback:function(){AddMemberToTeam.populateEmptyResult()}})?(AddMemberToTeam.focusFirstResult(),ZCScroll.scrollTop(s,0)):AddMemberToTeam.populateEmptyResult()},handleKeyUp:function(e){let a=e.which;if(e.stopPropagation(),a==$zcg.ESCAPE_KEYCODE){var s=t.val();$WC.Util.isEmpty(s)?AddMemberToTeam.close():(t.val(""),AddMemberToTeam.populateDefaultResult())}SearchField.hasNodes(l+"-usersuggest-list")||AddMemberToTeam.populateEmptyResult()},handleAction:function(e,a){var s=a.attr("uid"),i=a[0].dataset.val,n=Users.getName(s,i),o='<div uid="'+s+'" elemtype="'+a.attr("elemtype")+'" title="'+n+'" nodetype="@" class="dIB zcricnt posl"><img src="'+Users.getImgUrlById(s)+'"/><div class="zcf-close dN" purpose="deleteimgnode"></div></div>',c=$("#participantsaddcnt");a.remove(),c.is(":visible")||$("#participantsaddcnt").show(),$WC.Util.isEmpty(s)||(r.append(o),$("#"+l+"-usersuggest").removeClass("zcrchmcnt").addClass("zcadprtwin"),t.val(""),AddMemberToTeam.populateDefaultResult()),t.select().focus()},populateDefaultResult:function(){if($WC.$Win.isExist(l)){var e=t.val();$WC.Util.isEmpty(e)?AddMemberToTeam.search("*"):AddMemberToTeam.search(e)}},populateEmptyResult:function(){var e=$WC.Util.isEmpty(t.val())?"teams.addmembers.users.empty":"teams.addmembers.users.search.empty";s.html($Util.emptyStateHtml({imageclass:"no_such_user",title:I18N(e)}))},focusFirstResult:function(){var e=t.val();if($.trim(e).length){var a=n.find("[purpose='search']");a.length&&0===n.find(".sel").length&&a.first().addClass("sel")}else n.find(".sel").removeClass("sel")},getAllowedTeamUsers:function(e){return p(e)},allowedUsersParams:function(e){return o[e]?o[e]:(o[e]=new TeamsAllowedUsersListObj(e),o[e])},getAllowedTeamUsersOnScroll:function(e){return p(e,!0)},addMembers:function(t,s){$(t).addClass("reqprocess_anim").html("");let i=SearchField.getSelectedList(a);TeamMembersHandler.addUsersToTeam({teamid:e,userlist:i,addAsModerator:s,successCallBack:function(t,a){UI.updateBanner(I18N("team.addmember.success")),u(e,a,s,i.length),TeamInfo.updateTeamsRhsHeader(t),MemberListHandler.populateDefaultResult(e),AddMemberToTeam.close()},errorCallBack:function(e){let a=e&&e.code&&e.message?e.message:Resource.getRealValue("team.addmember.error");UI.updateBanner(a,3e3,!0),$(t).removeClass("reqprocess_anim").html(I18N("common.add"))}})}}}(),Teams=function(){let e={};var t={};let a={},s={};let i=function(t){return e.hasOwnProperty(t)};var n=function(e){return t[e]?t[e]:(e=e||$zcg._ZUID,t[e]=new TeamslistObj(e),t[e])},r=function(t){if(i(t.team_id)){e[t.team_id].update(t)}else{let a=new TeamsObj(t);e[t.team_id]=a}},l=function(e,t){var a=n(e),s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),i=a.teamsList,r=s.getFetchedPendingTeams(),l=a.teamspopulated;return a.searchValue&&"*"!=a.searchValue&&!l&&(i=a.searchedTeams),{teams:i,pendingTeamsList:r}},o=function(e,t,a){c(e,t,a)},c=function(e,t,a){a=a||{};var s=n(e),i=null!=a?"scrollup"==a.type:"",r=i||s.teamspopulated,o=a.val&&"*"!=a.val,c=!!o&&s.hasSearchQueryNeedsServerResponse(a.val,"teams"),m=!o&&s.needNextSetTeamsDetails(),d=s.forcefetch&&0==s.currentPopulatedTeams;if(d&&(a.forceFetchCall=!0),!r&&(m||c)||d)Teams.getTeamsJoined(e,!1,(function(a){var{teams:a,pendingTeamsList:i}=l(e);!o&&(s.currentPopulatedTeams+=100),t(a,i)}),a);else{var{teams:u,pendingTeamsList:p}=l(e);o||(i?s.currentPopulatedTeams-=100:s.currentPopulatedTeams+=100),t(u,p)}},m=function(e,t,a){var s=s||$zcg._ZUID;"string"==typeof e&&(e=JSON.parse(e));var i=n(s),l=(a=a||{}).isSearchHasVal;l&&(i.lastSearchedQuery=i.getSearchValue());for(var o=(l?i.searchedTeams:i.teamsList)||[],c=0,m=e.length;c<m;c++){var d=e[c];!$WC.Util.isEmpty(d.team_id)&&d.joined&&(-1===o.indexOf(d.team_id)&&(o.push(d.team_id),i.teamscount++),r(d))}t=t||i.teamscount;o.length&&l?i.searchedTeams=i.getSearchedTeams(o):o.length&&(i.teamsList=o),u(s,o,t,void 0)},d=function(e,t){$zcg._ZUID;if("string"==typeof e)e=JSON.parse(e);for(var a=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),s=[],i=0,n=e.length;i<n;i++){var r=e[i];$WC.Util.isEmpty(r.team_id)||(-1===s.indexOf(r.team_id)&&(s.push(r.team_id),this.pendingForApprovalCnt++),a.updatePendingTeamsStorage(r))}t=t||this.pendingForApprovalCnt;s.length&&a.storeAllFetchedPendingTeams(s)},u=function(e,t,a,s){var i=n(e);"string"==typeof t&&(t=t.split(",")),$WC.Util.isEmpty(s)||i.setPopulated(s),a&&i.setTeamscount(a),t&&t.length&&(i.teamsList=t)},p=function(e,t,i){var r=i.user_id,l=i.val,o=[],c=[],m=[],d=[],u=n(r);l=l.toLowerCase()||u.getSearchValue().toLowerCase();var p=e.length;if(t.length)for(var g=h(t,i),v=0;v<g.length;v++){var f=g[v][1];d.push(f)}s=d;for(v=0;v<p;v++){var T=-1,_=(f=e[v],Teams.getTeamsObj(f)),b=_.getTeamName().toLowerCase();!_&&-1!=i.ignorelist.indexOf(f)||!$WC.Util.isEmpty(_.status)&&"created"!=_.status&&_isAdmin()||("*"===l?m.push([b,f]):0===(T=b.indexOf(l))?c.push([b,f]):-1!==T&&m.push([b,f]))}var C=$Util.sort($Util.sort(c,0),2,!0);C=C.concat($Util.sort($Util.sort(m,0),2,!0));var $=$Scroll.getElementRange(C.length,i);for(v=$.minlimit,p=$.maxlimit;v<p;v++){f=C[v][1];o.push(C[v][1])}return a=o,{content:Teams_LHS.populate(l,i.isFromSearch),listid:i.listid,populateid:"teams",destid:i.destid,searchedlist:o,furtherreq:!1,appendindom:i.pageno>1}},h=function(e,t){for(var a=e.length,s=t.val,i=[],n=[],r=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),l=0;l<a;l++){var o=-1,c=e[l],m=r.getPendingTeamObj(c),d=m.getTeamName().toLowerCase();(m||-1==t.ignorelist.indexOf(c))&&("*"===s?n.push([d,c]):0===(o=d.indexOf(s))?i.push([d,c]):-1!==o&&n.push([d,c]))}var u=$Util.sort($Util.sort(i,0),2,!0);return u=u.concat($Util.sort($Util.sort(n,0),2,!0))};return{teamsFetchLimit:100,getTeamsObj:function(t){return e[t]},isExist:i,getTeamsJoined:function(e,t,a,s){if(!$WC.Util.isEmpty(e)){s=s||{},n(e).setIsFetchingInProgress(!0);e=e||$zcg._ZUID;var i={url:"/v2/teams",type:"GET",data:{joined:!0,limit:100},success:function(t,i,r){var l,o=n(e);if(data=t.teams,t.pending_teams){var c=t.pending_teams;d(c,c.length)}var u=s.val&&"*"!=s.val,p=t.meta&&t.meta.next_token?t.meta.next_token:"",h=s.forceFetchCall;if(o.setIsFetchingInProgress(!1),l=data,o.setTeamscount(l.length),m(l,o.getTeamscount(),{isSearchHasVal:u}),h){var g=o.getTeamscount();o.destroyObj(),o=n(e),m(l,g,{isSearchHasVal:u}),o.updateForceFetch(!1)}o.setSearchValue(s.val),u?o.setNextTokenForSearchVal(p):(o.setNextToken(p),$WC.Util.isEmpty(p)&&o.setPopulated(!0)),"function"==typeof a&&a(l)},error:function(e){"function"==typeof a&&a("error")}};return $ZCAjx.ajax(i)}},getListFromStorage:function(){return a},getAllPendingTeamsFromStorage:function(){return s},getTeamsParams:n,_isEnabled:function(){return $zcg._PLANDETAILS.isTeamChannelAllowed},searchTeams:function(e){return e=$.extend({},{html:"",ignorelist:[],highlight:!0,limit:100,forceFetchCall:""},e),o(e.user_id,(function(t,a){var s=p(t,a,e);e.successCallback(e.val,s)}),e),{content:"",searchedlist:[],furtherreq:!0}},updateTeamClientStorage:r,getIsModerator:function(t){return i(t)?e[t].isModerator:PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(t).getIsModerator()},getSpeificTeamInfoFromServer:(e,t)=>{let a=n(getZuid());$ZCAjx.ajax({url:"/v2/teams/"+e,type:"GET",success:function(e,s,i){let n=[e];a.teamscount&&a.teamscount;a.setTeamscount(a.setTeamscount),m(n,a.getTeamscount()),"function"==typeof t&&t(e)},error:function(e){let t=e&&e.code&&e.message?e.message:Resource.getRealValue("apierror.message.two");UI.updateBanner(t,2e3,!0)}})}}}(),TeamslistObj=function(e){this.user_id=e,this.teamsList=[],this.pendingForApprovalTeams=[],this.teamscount=0,this.pendingForApprovalCnt=0,this.teamspopulated=!1,this.pendingForApprovalTeamspopulated=!1,this.nextToken="",this.searchValue="",this.searchedTeams=[],this.searchTeamsNextToken="",this.currentPopulatedTeams=0,this.lastSearchedQuery=void 0};TeamslistObj.prototype={reset:function(){this.searchValue="",this.currentPopulatedTeams=0},setNextTokenForSearchVal:function(e){this.searchTeamsNextToken=e},getNextTokenForSearchVal:function(){return this.searchTeamsNextToken},setNextToken:function(e){this.nextToken=e},getNextToken:function(){return this.nextToken},isAlreadyFetching:function(){return this.IsFetchingInProgress},setIsFetchingInProgress:function(e){this.IsFetchingInProgress=e},setSearchValue:function(e){this.searchValue=e},getSearchValue:function(){return this.searchValue},setTeamscount:function(e){this.teamscount=e},getTeamscount:function(){return this.teamscount?this.teamscount:this.teamsList.length},getSearchedTeams:function(e){var t=this.searchedTeams;for(var a in e)-1==t.indexOf(e[a])&&t.push(e[a]);return t},destroyObj:function(){this.recipants=[]},updateForceFetch:function(e){this.forcefetch=!!e},setPopulated:function(e){this.teamspopulated=e},getPcount:function(){return this.pcount?this.pcount:this.teamsList.length},hasSearchQueryNeedsServerResponse:function(e,t){var a,s;return"teams"==t&&(a=this.lastSearchedQuery?this.lastSearchedQuery.toLowerCase():void 0,s=this.getNextTokenForSearchVal()),!((e=e.toLowerCase()).startsWith(a)&&!s)},needNextSetTeamsDetails:function(){return this.currentPopulatedTeams+Teams.teamsFetchLimit>this.teamsList.length},update:function(e){this.user_id=e.user_id,this.teamsList=e.teamslist,this.teamscount=e.teamscount,this.teamspopulated=e.teamspopulated},addTeamToJoinedTeamList:function(e){-1===this.teamsList.indexOf(e)&&this.teamsList.push(e)},removeJoinedTeamFromStorage:function(e){var t=this.teamsList.indexOf(e);-1!=t&&this.teamsList.splice(t,1)},removeFromPendingTeamsStorage:function(e){var t=this.pendingForApprovalTeams.indexOf(e);-1!=t&&this.pendingForApprovalTeams.splice(t,1)},clearTeamsStorage:function(){this.teamsList=[],this.pendingForApprovalTeams=[],this.teamscount=0,this.pendingForApprovalCnt=0,this.teamspopulated=!1,this.pendingForApprovalTeamspopulated=!1,this.nextToken="",this.searchValue="",this.searchedTeams=[],this.searchTeamsNextToken="",this.currentPopulatedTeams=0,this.lastSearchedQuery=void 0}};var TeamsObj=function(e){this.name=e.name,this.team_id=e.team_id,this.joined=e.joined,this.participant_count=e.participant_count,this.org_id=e.organization_id,this.isModerator=e.is_moderator,this.description=e.description,this.email_id=e.email_ids,this.photo_id=e.photo_id,this.has_channel=e.has_channel,this.status=e.status,this.visibility=e.visibility,this.creater_zuid=e.creator,this.creator_name=e.creator_name,this.creation_time=e.creation_time,this.admin_permission=e.admin_permission,this.member_permission=e.member_permission,this.jointype=e.jointype,this.joinRequested=e.joinRequested,this.requested_users_count=e.requested_users_count};TeamsObj.prototype.getTeamName=function(){return this.name},TeamsObj.prototype.getTeamId=function(){return this.team_id},TeamsObj.prototype.getTeamDescription=function(){return this.description},TeamsObj.prototype.getTeamPhotoId=function(){return this.photo_id},TeamsObj.prototype.getTeamImgUrl=function(e,t){if(e)return'<em class="fclq-teams"></em>';if(!("undefined"!=typeof OrgFeatures?OrgFeatures:Features).isIntranetRequest()){var a=this.photo_id;return $WC.Util.isEmpty(a)?"/officechat/images/teams.png":Config.isUDSPhotoDownloadEnabled()?FileDownload.getResourceDownloadUdsUrl(UDSConstants.udsResourceModuleType.PHOTOS,a,{type:UDSConstants.udsPhotoDownloadTypes.TEAM}):window.location.origin+$ZCAjx.getURLPrefix()+"/teamimg/"+a+"/photo.do"}return t?$zcg._PHOTOSERVER+"/file?ID="+this.team_id+"&t=group&fs=thumb&nocache="+(new Date).getTime():$zcg._PHOTOSERVER+"/file?ID="+this.team_id+"&exp=6000&t=group&fs=thumb"},TeamsObj.prototype.getIsModerator=function(){return this.isModerator},TeamsObj.prototype.isStatusPending=function(){return"pending"===this.status},TeamsObj.prototype.onlyOneParticipant=function(){return this.participant_count<=1},TeamsObj.prototype.updateParticipantCnt=function(e,t){return this.participant_count=e?this.participant_count-1:this.participant_count+t},TeamsObj.prototype.updateTeamStatus=function(e){this.status=e},TeamsObj.prototype.isRequestToJoin=function(){return"join_by_request"===this.jointype},TeamsObj.prototype.isJoinDirectly=function(){return"direct_join"===this.jointype},TeamsObj.prototype.getCreatorName=function(){return this.creator_name},TeamsObj.prototype.isJoined=function(){return"true"===this.joined},TeamsObj.prototype.isOpenToAll=function(){return"open_to_all"===this.visibility},TeamsObj.prototype.isJoinRequested=function(){return this.joinRequested},TeamsObj.prototype.updateJoinRequestedStatus=function(){this.joinRequested=!0},TeamsObj.prototype.updateRequestedUsersCnt=function(e){this.requested_users_count=e},TeamsObj.prototype.getRequestedUsersCnt=function(e){return this.requested_users_count},TeamsObj.prototype.setStatus=function(e){return this.status=e},TeamsObj.prototype.update=function(e){this.team_id==e.team_id&&(this.name=e.name,this.joined=e.joined,this.participant_count=e.participant_count,this.org_id=e.organization_id,this.isModerator=e.is_moderator,this.description=e.description,this.email_id=e.email_ids,this.photo_id=e.photo_id,this.status=e.status,this.visibility=e.visibility,this.creater_zuid=e.creator,this.creation_time=e.creation_time,this.admin_permission=e.admin_permission,this.member_permission=e.member_permission,this.jointype=e.jointype,this.creator_name=e.creator_name,this.requested_users_count=e.requested_users_count)};var TeamsMembersInfoObj=function(e){this.displayName=e.display_name,this.user_id=e.user_id,this.fullName=e.full_name,this.isModerator=e.is_moderator,this.email_id=e.email_id,this.status=e.status,this.designation=e.designation,this.department=e.department};TeamsMembersInfoObj.prototype.getDesignation=function(){return this.designation.name},TeamsMembersInfoObj.prototype.getDepartment=function(){return this.department.name},TeamsMembersInfoObj.prototype.getDisplayName=function(){return this.displayName},TeamsMembersInfoObj.prototype.getUserId=function(){return this.user_id},TeamsMembersInfoObj.prototype.getEmailId=function(){return this.email_id},TeamsMembersInfoObj.prototype.getFullName=function(){return this.fullName},TeamsMembersInfoObj.prototype.getName=function(){return this.displayName||this.fullName},TeamsMembersInfoObj.prototype.changeRole=function(e){this.isModerator=e},TeamsMembersInfoObj.prototype.getIsModerator=function(){return this.isModerator},TeamsMembersInfoObj.prototype.isPending=function(){return"pending"===this.status},TeamsMembersInfoObj.prototype.updateMemberStatus=function(e){this.status=e},TeamsMembersInfoObj.prototype.update=function(e){this.user_id==e.user_id&&(this.displayName=e.display_name,this.fullName=e.full_name,this.isModerator=e.is_moderator,this.email_id=e.email_id,this.status=e.status,this.designation=e.designation,this.department=e.department)};var TeamMemberInfoHandler=(()=>{let e={},t=function(t){return e.hasOwnProperty(t)},a=function(a){return!!t(a)&&e[a].getIsModerator()};return{_getAllMembers:function(){return e},_getMemberObj:function(t){return e[t]},_getName:function(t){return e[t].getName()},_getEmailId:function(t){return e[t].getEmailId()},_getIsModerator:a,_updateMembersStorage:function(a){if(t(a.user_id)){e[a.user_id].update(a)}else{let t=new TeamsMembersInfoObj(a);e[a.user_id]=t}},_getModeratorMembers:function(){var t=[];if(e)for(user_id in e)a(user_id)&&t.push(user_id);return t},_changeMemberRole:function(t,a){e[t].isModerator=a},_getMembersOnly:function(){var t=[];if(e)for(user_id in e)a(user_id)||t.push(user_id);return t},_removeMember:function(t){delete e[t]},_clearMemberStorage:function(){e={}}}})(),TeamMembersHandler=function(){var e={};return{fetchTeamMembers:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,teamid:s,apiParam:i}=e;$ZCAjx.ajax({url:"/v2/teams/"+s+"/members",type:"GET",data:i,success:function(a){t(s,a,e)},error:function(){a(s,e)}})},fetchTeamChannels:function(t){let{successCallBack:a=$.noop,errorCallBack:s=$.noop,teamid:i}=t;t.from_search&&e[i]?a(i,e[i]):$ZCAjx.ajax({url:"/v1/channels",type:"GET",data:{scope:2,team_ids:i,sortby:3,limit:100,mode:"fetchall"},success:function(t){e[i]=t.data,a(i,t.data)},error:function(){s(i,t)}})},addUsersToTeam:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,teamid:s,userlist:n,addAsModerator:r}=e;var l={user_ids:n,role:r?"moderator":"member"};$ZCAjx.ajax({url:"/v2/teams/"+s+"/members",type:"POST",data:l,contentType:"application/json",success:function(a){var l=MemberListHandler.getTeamsMembersParams(s),o=a.members,c=[];for(i in o)l.updateMembersStorage(o[i]),o[i].is_moderator||c.push(o[i].user_id);r&&(l.allfetchedmoderatorslist=l.allfetchedmoderatorslist.concat(n)),l.storeAllFetchedMembers(c),t(s,a.members,e)},error:function(t){a(t,s,e)}})},updateMemberRole:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,teamid:s,memberid:i,changeto_moderator:n}=e;var r={role:n?"moderator":"member"};$ZCAjx.ajax({url:"/v2/teams/"+s+"/members/"+i,type:"PUT",data:r,contentType:"application/json",success:function(){t(s,i,n,e)},error:function(){a(s,e)}})},removeMemberFromTeam:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,teamid:s,memberid:i}=e;$ZCAjx.ajax({url:"/v2/teams/"+s+"/members/"+i,type:"DELETE",success:function(){MemberListHandler.getTeamsMembersParams(s).removeMemberFromStorage(i),UI.updateBanner(Resource.getRealValue("team.member.remove.success",Users.getName(i)),3e3),t(s,i,e)},error:function(e){UI.updateBanner(Resource.getRealValue("team.member.remove.error"),3e3,!0)}})},getTeamsChannelsData:t=>e[t],leaveJoinedTeam:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,team_id:s,teamObj:i,note:n,apiParams:r}=e;$ZCAjx.ajax({url:"/api/v2/teams/"+s+"/leave",type:"POST",data:r,success:function(){UI.updateBanner(Resource.getRealValue("team.leave.success",i.getTeamName()),3e3),t(s,e)},error:function(e){let t=e&&e.code&&e.message?e.message:Resource.getRealValue("team.leave.error");UI.updateBanner(t,3e3,!0)}})},deleteJoinedTeam:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,team_id:s,note:i}=e;$ZCAjx.ajax({url:"/v2/teams",type:"DELETE",data:{team_ids:[s],reason:i},contentType:"application/json",success:function(){UI.updateBanner(Resource.getRealValue("team.delete.success"),3e3),t(s,e)},error:function(t){let s=t&&t.code&&t.message?t.message:Resource.getRealValue("team.delete.error");UI.updateBanner(s,3e3,!0),a(t,e)}})},approveRejectPendingUserRequest:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,team_id:s,user_id:i,approve:n}=e;var r={status:n?"approve":"reject",user_id:i};$ZCAjx.ajax({url:"/api/v2/teams/"+s+"/members",type:"PUT",data:r,contentType:"application/json",success:function(){t(s,i,e)},error:function(){var t=n?"team.member.approve.error":"team.member.reject.error";UI.updateBanner(Resource.getRealValue(t),3e3,!0),a(s,e)}})}}}(),TeamSettingssHandler={editTeamSettings:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,teamid:s,memberid:i,elem:n,data:r}=e;$ZCAjx.ajax({url:"/v2/teams/"+s,type:"PUT",data:r,contentType:"application/json",success:function(e){t(s,n,r,e)},error:function(t){a(t,e)}})}},addDeptDesig=!0,MemberListHandler=function(){var e={},t=function(e,t,s){var i={val:t,listid:"teamtab_sections",destid:"teamtab_sections_"+(e=e),team_id:e,allowScroll:!0,scrlcontainer:$("teamtab_sections"),limit:100,teammemberdata:!0,fromSearch:s};a(i)},a=function(e){var t=$("#"+e.listid);t.attr("pgno",1);var a;return e.successCallback=function(a,i){a===e.val&&((t=$("#"+e.listid)).html(""),TeamInfo._updateSecondaryActionBand(i.team_id,e.fromSearch),TeamInfo._updateSectionHtml({teamId:i.team_id,section_html:i.content,val:a,tab_name:LHSConstants.Teams.Members}),e=m(i,e),TeamInfo.bindTeamsActionEvents(),e.addscroll&&(ZCScroll.customScroll($("#"+e.listid)),$Scroll.handleScroll($("#teamtab_sections"),e,s)))},(a=s(e)).furtherreq||e.successCallback(a),!0},s=function(e){var t=MemberListHandler.getTeamsMembersParams(e.team_id);return n({val:e.val,team_id:e.team_id,pageno:e.pageno,listid:e.listid,highlight:e.highlight,limit:e.limit,successcallback:e.successCallback,type:e.type,nextToken:t.nextToken||"",fromSearch:e.fromSearch})},n=function(e){return e=$.extend({},{highlight:!0,limit:100},e),r(e.team_id,(function(t){var a=u(t,e);e.successcallback(e.val,a);var s=$("#teamtab_sections_"+e.team_id);s.length>0&&($("teamtab_sections").attr("zc_sticky_title",""),$Util.initializeStickyTitle(s))}),e),{content:"",searchedlist:[],furtherreq:!0}},r=function(e,t,a){var s=MemberListHandler.getTeamsMembersParams(e);($WC.Util.isEmpty(a.val)||"*"===a.val)&&s.memberspopulated&&s.hasAllMembers()?t(s.getFetchedMembers()):l(e,t,a)},l=function(e,t,a){a=a||{};var s=MemberListHandler.getTeamsMembersParams(e),n=null!=a?"scrollup"==a.type:"",r=n||s.memberspopulated,l=a.val&&"*"!=a.val,m=!!l&&s.hasSearchQueryNeedsServerResponse(a.val),u=!l&&!s.memberspopulated,p=0==s.memberscount;if(p&&(a.forceFetchCall=!0),a.fromSearch&&!l&&s.clearSearchStorage(),!r&&(u||m)||p){var h={teamid:e,successCallBack:function(e,n){var r=n.members;for(i in r)s.updateMembersStorage(r[i]);a.val&&a.val;var o=n?n.next_token:"",m={};a.forceFetchCall;s.setIsFetchingInProgress(!1),a.fromSearch?(s.setNextTokenForSearchVal(o),$WC.Util.isEmpty(o)&&s.setSearchPopulated(!0),m.SearchHasVal=!0,s.setSearchValue(a.val)):(s.setNextToken(o),$WC.Util.isEmpty(o)&&s.setPopulated(!0)),c(e,r,m);var u=d(e,a);if(a.fromSearch){s.storeSearchedMembers(u);r=s.getSearchedMembers()}else{s.storeAllFetchedMembers(u);r=s.getFetchedMembers()}!l&&(s.memberscount=r.length),t(r)},criteria:a};a.role="member";var g=o(a,s);h.apiParam=g,TeamMembersHandler.fetchTeamMembers(h)}else{if(a.fromSearch&&s.searchpopulated)var v=s.getSearchedMembers();else v=s.getFetchedMembers();l||(n?s.memberscount-=100:s.memberscount+=100),t(v)}},o=function(e,t){var a={pagination:!0},s=!(!$WC.Util.isEmpty(e.val)&&"*"!=e.val),i=s&&t?t.getNextToken():"scrolldown"==e.type&&t?t.getNextTokenForSearchVal():void 0;return s||(a.search=e.val),e.status&&(a.status=e.status),i?a.next_token=i:(e.limit&&(a.limit=e.limit),a.role=e.role),addDeptDesig&&(a.fields="department,designation"),a},c=function(e,t,a){"string"==typeof t&&(t=JSON.parse(t));var s=MemberListHandler.getTeamsMembersParams(e),i=(a=a||{}).SearchHasVal;i&&(s.lastSearchedQuery=s.getSearchValue());for(var n=(i?s.searchedMembers:s.allmembersfetchedlist)||[],r=0,l=t.length;r<l;r++){var o=t[r];$WC.Util.isEmpty(o.user_id)||-1===n.indexOf(o.user_id)&&n.push(o.user_id)}n.length&&i?s.searchedMembers=s.getSearchedMembers(n):n.length&&s.storeAllFetchedMembers(t)},m=function(e,t){var a=e.searchedlist.length;return t.totalsearchedlength=t.totalsearchedlength||0,t.totalsearchedlength+=a,t.furtherrequestmade=e.furtherreqmade,(a>=t.limit||t.allowScroll)&&(t.addscroll=!0),t},d=function(e){var t=MemberListHandler.getTeamsMembersParams(e),a=t.allmembersfetchedlist;return t.searchValue&&"*"!=t.searchValue&&(a=t.searchedMembers),a},u=function(e,t){var a=t.team_id,s=(t.html,t.highlight,t.limit,""),i=[],n=[],r=[],l=(t.categorize,t.val.toLowerCase()),o=MemberListHandler.getTeamsMembersParams(a);l=l||o.getSearchValue().toLowerCase(),o.getModeratorsFetchedList().forEach(t=>{-1===e.indexOf(t)&&e.push(t)});var c=o.getPendingUsersFetchedList(),m=c.length>0;c.forEach(t=>{-1===e.indexOf(t)&&e.push(t)});for(var d=e.length,u=0;u<d;u++){var f=-1,T=-1,_=e[u],b=o.getMemberObj(_);dname=Users.getName(b.getUserId(),b.getName()),emailid=Config.isEmailIdVisibilityRestricted()?"":b.getEmailId(),"*"===l?r.push([dname,_]):(f=dname.toLowerCase().indexOf(l),T=emailid.toLowerCase().indexOf(l),0===f?n.push([dname,_]):-1!==f?r.push([dname,_]):-1!==T&&r.push([emailid,_]))}var C=n.concat(r);let $=v(C,o);var S=$Scroll.getElementRange($.length,t),y=$WC.Util.isArray($[S.minlimit])?$[S.minlimit][1]:void 0,P=o.getMemberObj(y),L=$WC.Util.isEmpty(y)?-1:p(P);for(u=S.minlimit,d=S.maxlimit;u<d;u++){_=$[u][1],P=o.getMemberObj(_);var I=p(P),x=0==u||L!=I||L==I&&""===s,M=TeamInfo._getMemberItemHtml(a,P,l,m);if(x){roleName="",roleName=Resource.getRealValue(h(I));let e=g(I);s+=I!=L?'<div id="users-category-header-'+e+'" class="zcl-win-subcategory  w100 " zc_running_title>'+roleName+"</div>":'<div id="users-category-header-'+e+'" class="zcl-win-subcategory dN" zc_running_title >'+roleName+"</div>"}s+=M,L=I,i.push(C[u][1])}return{content:s,team_id:a,listid:t.listid,populateid:"teammembers",destid:t.destid,searchedlist:i,furtherreq:!1,appendindom:t.pageno>1}},p=function(e){return e.isPending()?0:e.getIsModerator()?1:2},h=function(e){switch(e){case 0:return"team.pending.users";case 1:return"channel.role.0.2";case 2:return"channel.role.4"}},g=function(e){switch(e){case 0:return TeamsUtilConstants.PENDING;case 1:return TeamsUtilConstants.ADMIN;case 2:return TeamsUtilConstants.MEMBER}},v=function(e,t){for(var a=[],s=[],i=[],n=[],r=e.length,l=0;l<r;l++){var o=e[l][1],c=t.getMemberObj(o),m=!!c.getIsModerator();c.isPending()?n.push(e[l]):!0===m?s.push(e[l]):i.push(e[l])}return a=a.concat(n).concat(s).concat(i)};return{getTeamsMembersParams:function(t){return e[t]?e[t]:(e[t]=new TeamsMembersListObj(t),e[t])},populateDefaultResult:function(e,a,s){$WC.Util.isEmpty(a)?t(e,"*",s):t(e,a,s)},getTeamMembers:s,getMembersApiParams:o}}(),TeamAssignAdminsHandler=function(){var e={},t=[],a=function(t){return e[t]};return{getTeamMembersList:function(a,s,i){currentTeamId=a;var n={};n={role:"member",limit:100},i&&i.search&&(n.search=i.val);var r={teamid:a,apiParam:n,successCallBack:function(a,i,n){var r=function(a){for(var s=a.length,i=0;i<s;i++){var n=a[i];if("member"===n.role)if(-1===t.indexOf(n.user_id)&&t.push(n.user_id),e[n.user_id]){e[n.user_id].update(n)}else{let t=new TeamsMembersInfoObj(n);e[n.user_id]=t}}return t}(i.members);s(r)},errorCallBack:function(){}};TeamMembersHandler.fetchTeamMembers(r)},getFormatedUserDrpDwnOpts:function(e){var t=function(e){for(var t={},s=0;s<e.length;s++){var i=a(e[s]);t[i.getUserId()]=i.getDisplayName()}return t}(e),s={};for(id in t){var i=a(id),n=Users.getImgUrlById(i.getUserId()),r='<img data-name="drplist_image" class = "mR10 " style = "width :30px; height:30px;border-radius :50%" src="'+n+'" loading="lazy"/>';s[id]={key:id,title:t[id],custom_html:r,desc:i.getEmailId(),addtnl_class:"members_list",title_imgsrc:n}}return s},clearTeamStorage:function(){e={},t=[]}}}(),TeamsMembersListObj=function(e){this.team_id=e,this.allMemberObj={},this.allmembersfetchedlist=[],this.allfetchedmoderatorslist=[],this.allfetchedPendingUsersList=[],this.memberscount=0,this.memberspopulated=!1,this.nextToken="",this.searchValue="",this.searchpopulated=!1,this.searchedMembers=[],this.searchMembersNextToken="",this.lastSearchedQuery=void 0};TeamsMembersListObj.prototype={getMemberObj:function(e){return this.allMemberObj[e]},getIsCurentUserLastAdmin:function(){return 1===this.allfetchedmoderatorslist.length&&-1!=this.allfetchedmoderatorslist.indexOf($zcg._ZUID)},setNextTokenForSearchVal:function(e){this.searchMembersNextToken=e},getNextTokenForSearchVal:function(){return this.searchMembersNextToken},setNextToken:function(e){this.nextToken=e},getNextToken:function(){return this.nextToken},isAlreadyFetching:function(){return this.IsFetchingInProgress},setIsFetchingInProgress:function(e){this.IsFetchingInProgress=e},setSearchValue:function(e){this.searchValue=e},getSearchValue:function(){return this.searchValue},setMemberscount:function(e){this.memberscount=e},getMemberscount:function(){return this.memberscount?this.memberscount:this.allmembersfetchedlist.length},getPendingUsersCount:function(){return this.allfetchedPendingUsersList.length},getSearchedMembers:function(e){var t=this.searchedMembers;for(var a in e)-1==t.indexOf(e[a])&&t.push(e[a]);return t},setPopulated:function(e){this.memberspopulated=e},setSearchPopulated:function(e){this.searchpopulated=e},needNextSetMembersDetails:function(){return this.currentPopulatedMembers+Teams.teamsFetchLimit>this.teamMemberList.length},hasSearchQueryNeedsServerResponse:function(e){var t,a;return t=this.lastSearchedQuery?this.lastSearchedQuery.toLowerCase():void 0,a=this.getNextTokenForSearchVal(),!((e=e.toLowerCase()).startsWith(t)&&!a)},getFetchedMembers:function(){return this.allmembersfetchedlist},getSearchedMembers:function(){return this.searchedMembers},hasAllMembers:function(){return this.memberspopulated},updateMembersStorage:function(e){if(this.allMemberObj[e.user_id]&&"pending"!=e.user_id.status){this.allMemberObj[e.user_id].update(e)}else{let t=new TeamsMembersInfoObj(e);this.allMemberObj[e.user_id]=t}},storeFetchedModerators:function(e){e.forEach(e=>{-1===this.allfetchedmoderatorslist.indexOf(e)&&this.allfetchedmoderatorslist.push(e)})},storeFetchedPendingUsers:function(e){e.forEach(e=>{-1===this.allfetchedPendingUsersList.indexOf(e)&&this.allfetchedPendingUsersList.push(e)})},getModeratorsFetchedList:function(){return this.allfetchedmoderatorslist},getPendingUsersFetchedList:function(){return this.allfetchedPendingUsersList},storeAllFetchedMembers:function(e){for(var t=0,a=e.length;t<a;t++){var s=e[t];$WC.Util.isEmpty(s.user_id)||-1===this.allmembersfetchedlist.indexOf(s.user_id)&&this.allmembersfetchedlist.push(s.user_id)}},storeSearchedMembers:function(e){e.forEach(e=>{-1===this.searchedMembers.indexOf(e)&&this.searchedMembers.push(e)})},storeSearchedMembers:function(e){e.forEach(e=>{-1===this.searchedMembers.indexOf(e)&&this.searchedMembers.push(e)})},removeMemberFromStorage:function(e){if(this.allMemberObj[e]){delete this.allMemberObj[e];var t=this.allmembersfetchedlist.indexOf(e),a=this.allfetchedmoderatorslist.indexOf(e),s=this.allfetchedPendingUsersList.indexOf(e);-1!==t&&this.allmembersfetchedlist.splice(t,1),-1!==a&&this.allfetchedmoderatorslist.splice(a,1),-1!==s&&this.allfetchedPendingUsersList.splice(s,1)}},removeMemberfromPendingUserStorage:function(e){var t=this.allfetchedPendingUsersList.indexOf(e);-1!==t&&this.allfetchedPendingUsersList.splice(t,1)},clearSearchStorage:function(){this.searchValue="",this.searchpopulated=!1,this.searchedMembers=[],this.searchMembersNextToken=""}};var TeamsAllowedUsersListObj=function(e){this.team_id=e,this.allAllowedUsersObj={},this.allAllowedUserlist=[],this.userscount=0,this.userspopulated=!1,this.nextToken="",this.searchValue="",this.searchpopulated=!1,this.searchedUsers=[],this.searchNextToken="",this.lastSearchedQuery=void 0};TeamsAllowedUsersListObj.prototype={getUserObj:function(e){return this.allAllowedUsersObj[e]},setNextTokenForSearchVal:function(e){this.searchNextToken=e},getNextTokenForSearchVal:function(){return this.searchNextToken},setNextToken:function(e){this.nextToken=e},getNextToken:function(){return this.nextToken},isAlreadyFetching:function(){return this.IsFetchingInProgress},setIsFetchingInProgress:function(e){this.IsFetchingInProgress=e},setSearchValue:function(e){this.searchValue=e},getSearchValue:function(){return this.searchValue},setUserscount:function(e){this.userscount=e},getUserscount:function(){return this.userscount?this.userscount:this.allAllowedUserlist.length},getSearchedUsers:function(e){var t=this.searchedUsers;for(var a in e)-1==t.indexOf(e[a])&&t.push(e[a]);return t},setPopulated:function(e){this.userspopulated=e},setSearchPopulated:function(e){this.searchpopulated=e},needNextSetUsersDetails:function(){return this.currentPopulatedUsers+Teams.teamsFetchLimit>this.allAllowedUserlist.length},hasSearchQueryNeedsServerResponse:function(e){var t,a;return t=this.lastSearchedQuery?this.lastSearchedQuery.toLowerCase():void 0,a=this.getNextTokenForSearchVal(),!((e=e.toLowerCase()).startsWith(t)&&!a)},getFetchedUser:function(){return this.allAllowedUserlist},getSearchedUsers:function(){return this.searchedUsers},hasAllAllowedUSers:function(){return this.userspopulated},updateAllowedUsersStorage:function(e,t){if(this.allAllowedUsersObj[e.user_id]){this.allAllowedUsersObj[e.user_id].update(e)}else{let t=new TeamsMembersInfoObj(e);this.allAllowedUsersObj[e.user_id]=t}},storesearchedUsers:function(e){e.forEach(e=>{-1===this.searchedUsers.indexOf(e)&&this.searchedUsers.push(e)})},storeAllAllowedUsers:function(e){e.forEach(e=>{-1===this.allAllowedUserlist.indexOf(e)&&this.allAllowedUserlist.push(e)})},storesearchedUsers:function(e){e.forEach(e=>{-1===this.searchedUsers.indexOf(e)&&this.searchedUsers.push(e)})},removeUserFromStorage:function(e){if(this.allAllowedUsersObj[e]){delete this.allAllowedUsersObj[e];var t=this.allAllowedUserlist.indexOf(e);-1!==t&&this.allAllowedUserlist.splice(t,1)}},clearSearchStorage:function(){this.searchValue="",this.searchpopulated=!1,this.searchedUsers=[],this.searchNextToken=""},clearStorage:function(){this.allAllowedUsersObj={},this.allAllowedUserlist=[],this.userscount=0,this.userspopulated=!1,this.nextToken="",this.searchValue="",this.searchpopulated=!1,this.searchedUsers=[],this.searchNextToken="",this.lastSearchedQuery=void 0}};let TeamChannelsUtility=function(){let e=!1,t=void 0,a=void 0,s=()=>{t.parent().removeClass("sel"),t.remove(),e=!1,$("[uid='"+a+"']").removeClass("sel"),Clickoutside.clear("teamschannelsmoreoptionsmenu_"+a)},i=(s,i)=>{let r={parentId:"teamschannelsmoreoptionsmenu_"+i,parentClass:"no-pointer font14 teams-channels-more-cont",parentCustomAttr:"style='z-index: 999';",options:l(i)},o=DROP_DOWN.getHtml(r),c=$(s.target);c.append(o);let m=$("#teamschannelsmoreoptionsmenu_"+i);t=m,e=!0,c.parent().addClass("sel"),a=i,n(m,i);"auto"!=$Util.positionTargetElemFixed(m,s).bottom&&(m[0].style.top=-(m.outerHeight()+4)+"px")},n=(e,t)=>{Clickoutside.bind({srcid:"teamchanneslsmoreoption_"+t,destid:"teamschannelsmoreoptionsmenu_"+t,customHide:function(){s()}}),e.on("click","[data-action]",(function(e){e.stopPropagation(),r(e,t)}))},r=(e,t)=>{s(),{openChannelPreview:ChannelsUI.triggerPreview,copyChannelPermalink:t=>{ChannelsUI.handleCopyPermaLink(Channels.getObject(t).chid,$(e.currentTarget),!0)},editChannelInfo:e=>{ChannelsUI.triggerPreview(e),ChannelsRHS.createEditWin(Channels.getObject(e))},leaveChannel:e=>{Channels.leave(Channels.getObject(e).chid)},archiveChannel:$Chn.$Dlg.confirmArchiveChannel,clearChannelMsg:$Chn.$Dlg.confirmClearMessages,deleteChannel:$Chn.$Dlg.confirmDeleteChannel,unarchiveChannel:$Chn.$Dlg.confirmUnarchiveChannel}[e.currentTarget.getAttribute("data-action")](t)},l=e=>{let t=[];$.isEmptyObject(Channels.getObject(e))&&o(e);let a=ChannelsPermission.getChannelPermissions(e);return t.push({content:`<span class='zcl-menu-item-icn zcf-infoC'></span><span class='ellips'>${I18N("channel.viewinfo")}</span>`,customAtt:"data-action='openChannelPreview'"},{content:`<span class='zcl-menu-item-icn zcf-link'></span><span class='ellips'>${I18N("channel.permalink")}</span>`,customAtt:"data-action='copyChannelPermalink'"}),a.includes(Channels.ACTIONS.EDIT)&&t.push({content:`<span class='zcl-menu-item-icn zcf-edit2'></span><span class='ellips'>${I18N("common.edit")}</span>`,customAtt:"data-action='editChannelInfo'"}),a.includes(Channels.ACTIONS.ARCHIVE)&&t.push({content:`<span class='zcl-menu-item-icn zcf-archive font16'></span><span class='ellips'>${I18N("common.archive")}</span>`,customAtt:"data-action='archiveChannel'"}),a.includes(Channels.ACTIONS.UNARCHIVE)&&t.push({content:`<span class='zcl-menu-item-icn zcf-archive font16'></span><span class='ellips'>${I18N("common.unarchive")}</span>`,customAtt:"data-action='unarchiveChannel'"}),a.includes(Channels.ACTIONS.CLEAR_MSG)&&t.push({content:`<span class='zcl-menu-item-icn zcf-chat-clear font16'></span><span class='ellips'>${I18N("common.clear")}</span>`,customAtt:"data-action='clearChannelMsg'"}),a.includes(Channels.ACTIONS.DELETE)&&t.push({className:"zcl-neg-menu-item",content:`<span class='zcl-menu-item-icn zcf-delete2'></span><span class='ellips'>${I18N("common.delete")}</span>`,customAtt:"data-action='deleteChannel'"}),a.includes(Channels.ACTIONS.LEAVE)&&t.push({className:"zcl-neg-menu-item",content:`<span class='zcl-menu-item-icn zcf-leave'></span><span class='ellips'>${I18N("common.leave")}</span>`,customAtt:"data-action='leaveChannel'"}),t},o=e=>{let t=TeamMembersHandler.getTeamsChannelsData(MyOrgModule.lastSelectedOrgSubModule.teamId).allchannels.filter(t=>t.oc_id==e)[0];t.joined=0,$.isEmptyObject(t)||Channels.updateData({allowed:[t]})};return{showTeamsChannelsOption:t=>{let n=t.target.parentElement.getAttribute("uid");e&&(s(),a==n)?a=void 0:i(t,n)},isMoreOptionMenuVisible:()=>e,clearChannelsMoreOptionsMenu:s}}();var PublicTeamsUIHandler=function(){let e=LHSConstants.PublicTeams.AllTeams,t=!1,a=LHSConstants.PublicTeams.AllTeams;var s={OPEN_TO_ALL:"open_to_all",INVITE_ONLY:"invite_only"};let i="explore",n={JOIN_BY_REQ:"join_by_request",DIRECT_JOIN:"direct_join"},r=()=>{ZCPermalink.updateUrl(routingPaths.teams+"/"+i)};var l={mainPreview:'<div id="public_team-tab-container" app_tab_id="{{id}}" current_tab="{{current_tab}}" class="flex fdirC h100">\n\t        \t\t<div id="team-tab-header" class="zwc-hdr-view zwc-header-div fshrink flexC justifySB posrel">{{header_html}}</div>\n\t        \t\t<div class="flexG ovrflwH flex-col ">\n\t\t\t\t\t\t<div id="public_teamtab_actions" class="w100"></div>\n\t            \t\t<div id="public_teamtab_sections" class=" flex flex-col ovrflw-auto publicTeamsSection w100 " ></div>\n\t        \t\t</div>\n\t        \t\t<div id="public_teamtab_footer" class="fshrink ">{{footer_html}}</div>\n\n\t    \t\t</div>',mainCenterLoader:'<div id="teamwin-center-loader" class="h100 w100 flexM mT0 fdirC zwc-tab-loader">\n\t    \t\t\t<div class="zcl-rloader posrel"></div>\n\t    \t\t\t<div class="mT30 clr-S">{{loading}}</div>\n\t    \t\t</div>',headerPreview:'<div  class="flex flexG fdirC ovrflwH">\n\t    \t\t\t<div class="flex zwc-app-details">\n\t    \t\t\t\t<div class="zwc-app-image posrel">\n\t\t\t\t\t\t\t<div class="bdrR4 bg-clr2 flexM h100 p5 w100 ">\n\t\t\t\t\t\t\t\t<span class="clr-icon font23 zcf-teamsicon"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t    \t\t\t\t<div class="mL10 flex fdirC ovrflwH flexG">\n\t    \t\t\t\t\t<div  class="pL20 font15 fontB clr-M">{{explore_allTeams_txt}}</div>\n\t    \t\t\t\t\t<div id = "teams_tabs" class="zcl-hor-tab mT5" style="width: initial;">{{tabs_html}}</div>\n\t    \t\t\t\t</div>\n\t    \t\t\t</div>\n\t    \t\t</div>',searchDomHtml:`<div class="mL20 zcl-search2 zcl-search2-sm">\n\t    \t\t\t\t<span class="zcf-search2 zcl-seach-icon"></span>\n\t    \t\t\t\t<div class="zcl-search-input">\n\t    \t\t\t\t\t<input type="text" tab_id={{tab_id}} id="public-team-search-field" onkeyup="PublicTeamsUIHandler.handleKeyUp(event)" placeholder="{{placeholder}}"  {{disable_Search}}>\n\t    \t\t\t\t\t<span class="zcl-search-clear" data-action="clearSearchInput">${I18N("common.clear")}</span>\n\t    \t\t\t\t</div>\n\t    \t\t\t</div>`,create_TeamsBtnHtml:`<div class="zcl-btn-sm zcl-btn--primary zcl-split-btn fshrink " data-action="createTeamsRhsPopulate"><span>+ ${I18N("team.create")}</span></div>`,teamListingCardHtml:'<div class="publicTeamsCardMainDiv m5 ">\n\t    \t\t\t\t<div id = "teamCardFlipContainer_{{team_id}}" class= "publicTeamCardMainCont h100">\n\t\t\t\t\t\t<div id="publicteam{{team_id}}" data-team_id ="{{team_id}}" class = "publicTeamsCardContainer p15  {{joinedTeamClass}} " data-action="{{joined_team_dataAction}}" >\n\t\t\t\t\t\t\t\t<div class=" h100 posrel">\n\t\t\t\t\t\t\t\t\t\t<div class=" ellips posrel flexC w100 ">\n\t\t\t\t\t\t\t\t\t\t\t<div class="pubicTeamCardImg-Cnt m2"><img class="fshrink publicTeamCardImg " src="{{default_imgurl}}" ></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="ellips posrel mL15 w100">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div id="name" class="font16 fontB clr-hdr ellips">{{team_name}}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="font14 clr8 line20 ellips mT10 {{hide_description}}">{{team_description}}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\t\t\t<div class = "bottom0 flexC posabs w100">\n\t\t\t\t\t\t\t\t\t\t\t\t<div style ="height:50px;width:50px;"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class= " flexC  bottom0 w100 justifySB mL30 pR10">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="zcl-btn-sm zcl-btn--secondary zcl-split-btn fshrink mT10   {{hide_join_btn}} {{waitingForApprovalCls}} publicTeamsJoinBtn" data-action="joinTeam"  data-team_id ="{{team_id}}"><span class="zcf-tick mR5 clr-lp1 {{hide_requested}}">  </span><span class="{{requested_clr}} fontB">{{join_teamTxt}}</span></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div team_id ="{{team_id}}" class="font13 participants_cnt hvrinfo mT12 wfit ellips {{hide_particiants_cnt}} curP" documentclick = "team_membersView">{{participants_cnt}}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class = "publicTeamsChannelCard pTB10">\n\t\t\t\t\t\t\t\t<div class= "flexC font14 pL5" >\n\t\t\t\t\t\t\t\t\t<span class ="bg-clr2 font8 mLR5 zcf-leftArrow zcl-icon-sm" data-team_id="{{team_id}}" data-action ="flipChannelCardBack"> </span>\n\t\t\t\t\t\t\t\t\t<span>{{joinTeamChannelTxt}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id = "publicTeamsCardChannelListing_{{team_id}}" class = "flex mT10 pLR10">\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div> \n\t\t    \t\t</div>',no_public_teamHtml:`<div class = "h100 w100 flexM">\n\t    \t\t\t\t\t<div class="zcl-btn-sm zcl-btn--primary zcl-split-btn fshrink " documentclick="createTeam"><span>+ ${I18N("team.create")}</span></div>\n\t    \t\t\t</div>`,createTeamsBodyHtml:'<div class="flexG ovrflwH">  \n        \t\t\t\t<div id="chnlinptcont" class="wh100 ovrflwA"> \n\t\t\t\t\t\t\t{{TEAMSIMAGEANDNAMEHTML}}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{{TEAMSVISIBILITYANDGROUPHTML}}\t\t\n\t\t\t\t\t\t\t{{TEAMJOINTYPEHTML}}\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t{{TEAMASSIGNADMINHTML}}\t\t\n\t\t\t\t\t\t\t{{TEAMASSIGNUSERHTML}}\t\n\t\t\t\t\t\t\t{{TEAMSDESCHTML}}\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bg-clr2 flexC fshrink p15">\n\t\t\t\t\t\t<div class="fshrink flexG flexC">\n\t\t\t\t\t    \t<span data-action="show_TeamPermissionsPreview" data-team_id ="{{team_id}}" class="zc-advance-btn fontB {{noEditClass}} ">{{team_permissions_Header}}<em class="zcf-slide-up slide-icon"></em></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="w100 flexC justifyE">\n\t\t\t\t\t\t\t<div class="zcl-btn zcl-btn--secondary" data-action="{{cancel_dataaction}}" data-listingPreviewOverlay = "{{data_listingPreviewOverlay}}">{{cancel_txt}}</div>\n\t\t\t\t\t\t\t<div class="zcl-btn zcl-btn--primary mL20" data-action="{{data_action}}" data-team_id ="{{team_id}}" data-listingPreviewOverlay = "{{data_listingPreviewOverlay}}">{{create_txt}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</div>',teamNameImageHtml:'<div class="zcl-row mT25 pLR36 flexC">\n\t\t\t\t\t<div class="zcl-row-label font14">{{team_name_title}}</div>\n\t\t\t\t\t<div class="flexG flexC">\n\t\t\t\t\t\t{{team_Image_Holder}}\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="posrel flexG mL25">\n\t\t\t\t\t\t\t<input type="text" listen="keyup" id="teamnameval"  autocomplete="off" class="zcl-input team-input pR30 {{noEditClass}} " value = "{{team_name}}" placeholder="{{team_name_ph}}">\n\t\t\t\t\t\t\t<span id="teamnamecount" category="charcount" limit="{{NAMELIMIT}}" class="limit-txt">{{NAMELIMIT}}</span>\n\t\t\t\t\t\t\t<div invalidtxt class="posabs error-txt dB font13 "></div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>',team_img_Html:' <div class="zcl-avatar" >\n\t\t\t\t\t<div id="teamimgdata" documentclick="viewprofileimage"></div>\n\t\t\t\t\t<div id="team_img_preview" class="zcl-avatar-default flexM">\n\t\t\t\t\t\t{{team_image}}\t\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<label for="teamphoto" class="zcl-avatar-action flexM zcf-camera z-index2  teaminput">\n\t\t\t\t\t\t<input type="file" id="teamphoto"  name="cphoto" class="dN teaminput " accept="image/*">\n\t\t\t\t\t</label>\n\t\t\t\t</div>',teamVisibilitySwitcherHtml:'<div class="zcl-row mT40 pLR36 flexC">\n\t\t\t\t<div class="{{label_css}}  zcl-row-label font14">{{visibility_title}}</div>\n\t\t\t\t\t<div class="flexG posrel flexC">\n\t\t\t\t\t\t<div class="zcl-typeswitch {{noEditClass}}">\n\t\t\t\t\t\t<input  type="checkbox" name="typeswitch" id="teamVisibilityBtn" class="typeswitch-input dN " {{visibility_checked_status}} data-action ="teamVisibilityUpdate" >\n\t\t\t\t\t\t<label class="typeswitch-main flexC posrel"  for="teamVisibilityBtn">\n\t\t\t\t\t\t<span class="typeswitch-item ellips">{{public_txt}}</span>\n\t\t\t\t\t\t<span class="typeswitch-item ellips"><em class="zcf-lock mR5 clr-lp1 typeswitch-icon"></em>{{private_Txt}}</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span id="teamvisibility-info" class="clr-lp1 font13 mL12">{{OPENTOALLINFO}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',team_description_Html:'<div class="zcl-row mT50 pLR36 flex">\n\t\t\t\t\t<div class="zcl-row-label mT8 font14">{{team_desc}}</div>\n\t\t\t\t\t<div class="flexG posrel">\n\t\t\t\t\t\t<textarea id="teamdescval"   listen="keyup" class="zcl-textarea team-input {{noEditClass}}" placeholder="{{team_description_ph}}">{{team_descriptrion}}</textarea>\n\t\t\t\t\t\t<span class="limit-txt" id="teamsdesccount" category="charcount" limit="{{desc_limit}}">{{desc_limit}}</span>\n\t\t\t\t\t\t<span class="error-txt">{{INVALIDCHAR}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',team_permissions_overlay:'<div id="team_permissions" class="chl-adpopup chlovrly">\n\t\t\t\t\t<div class="channel-advance-cont flex-col">\n\t\t\t\t\t\t<div class="channel-rulshdr fshrink">\n\t\t\t\t         \t<div class=" ">\n\t\t\t\t            \t<div class="fshrink zcl-win-subcategory">\n\t\t\t\t               \t<div id="advarrow" class="zc-advance-btn flexC" data-action="close_permissionspreview">{{permissions_txt}}<span class="zcf-slide-down slide-icon slide-icon_down"></span></div>\n\t\t\t\t            </div>\n\t\t\t\t         </div>\n\t\t\t\t         \n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="advrulescontainer" class="flexG ovrflwH flex">\n\t\t\t\t\t\t<div id="advrules" class="flexG ovrflwA "></div>\n\t\t\t\t\t\t<div id="editperms" class=" ovrflwH">\n\t\t\t\t\t\t\t<div id="permissionsui" class="wh100 flex-col ovrflwA">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="channelRHS-advance-ftr flexC hide">\n\t\t    \t\t\t<div id="saveadvrules" class="zcl-btn-sm zcl-btn--primary mLA" data-action="close_permissionspreview">{{save_txt}}</div> \n\t\t    \t\t</div>\n\t\t\t\t</div>\n\t\t\t  </div>',team_Permissions_Container:'<div class="{{hide_permissionDesc}} font14 mTB10 pLR36" >{{team_permission_desc}}</div>\n\t\t\t\t <div class="{{CLASS}} channel-permission-cont  flexG ">\n\t\t\t\t\t<div class="tbl tblHead fshrink">\n\t\t\t\t\t\t<div class="tblRow">\n\t\t\t\t\t\t\t<div class="tblCel">{{ACTIONTEXT}}</div>\n\t\t\t\t\t\t\t<div class="tblCel {{hide_adminPermission}}">{{ADMINHEADER}}</div>\n\t\t\t\t\t\t\t<div class="tblCel">{{MEMBERHEADER}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="permissioncontainer" class="flexG">\n\t\t\t\t\t\t<div class="tbl tblMain {{HOVR_ROW_CLS}}">{{PERMISSIONHTML}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',team_assignUsers_Input:'<div class="zcl-row mT50 pLR36 flex">\n\t\t\t\t <div id="channels-invite-title" class="zcl-row-label mT10 font14">{{TITLE}}</div>\n\t\t\t\t <div class="flexG posrel">\n\t\t\t\t\t<div id="{{ID}}" class="posrel">\n\t\t\t\t\t\t<div id="{{ID}}-error" purpose="showResultsDom" class="zcl-multiselect-input-container">\n\t\t\t\t\t\t\t<span id="{{ID}}-selnodes" data-selections=""></span>\n\t\t\t\t\t\t\t<input id="{{ID}}-search-field" type="text" tabindex="3" placeholder="{{PLACEHOLDER}}" prevsearchval="">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="{{ID}}-results" class="zcl-multiselect-list-container" align="down" style="display: none;">\n\t\t\t\t\t\t\t<div id="{{ID}}-list" class="zcl-multiselect-list"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span id="{{ID}}-error-txt" class="dB error-txt"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>',permissions_rowTemplate:'<div class="tblRow">\n\t\t\t\t\t<div class="tblCel">{{ACTIONNAME}}</div>\n\t\t\t\t\t{{checkboxHtmlRow}}\n\t\t\t\t</div>',pendingTeams_HdrPrimaryBreadCrump:'<span id ="pendingTeamsListing" class =" font18 fontB  " onclick="PublicTeamsUIHandler.pendingTeamsRhsCreateUi()" >{{pendingTeamsTxt}}</span>{{SECONDARYHEADER}}',pendingTeams_HdrSecondaryBreadCrump:'<span id={{id}} class="{{link_class}} fontB font18">{{sub_header}}</span>',pendingTeamsCardHtml:`<div  team_id = "{{team_id}}" \tclass="publicTeamsRhsCard checklist-team-list flexC posrel p10" style="min-height:90px;">\n\t\t\t\t\t    <div class="checklist-team-list-img p5">\n\t\t\t\t\t\t\t<img src="{{img_url}}" class="wh100"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="flex fdirC mLR15">\n\t\t\t\t\t\t      <div class="font15 fontB clr-M">{{team_name}}</div>\n\t\t\t\t\t\t \t  <div class="font14 clr-S line16 mT5 ellips-L2">{{team_desc}}</div>\n\t\t\t\t\t\t \t  <div class="font13 clr-S line16 mT10 ">{{requested_time}}</div>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t <div class = "flexG flexC justifyE">\n\t\t\t\t\t\t\t\t<div class=" zcl-btn-xxs zcl-btn-neg--secondary cancel_btn "  documentclick="reject_PublicTeam" team_id="{{team_id}}" title ="${I18N("user.invite.reject.request")}"><span class ="zcf-closeB"></span></div>\n\t\t\t\t\t\t\t\t<div class=" mL10 zcl-btn-sm zcl-btn--primary "  team_id="{{team_id}}" documentclick="approve_EditPublicTeams" ><span class ="pL5">{{accept_Txt}}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t    \n\t\t\t\t\t</div>`,reject_noteHtml:'<div style ="height: 160px">\n\t\t\t\t\t     <div class="fontB line22 mB10">{{reason_reject_txt}}</div>\n\t\t\t\t\t\t\t<div class="posrel ">\n\t\t\t\t\t\t\t\t<textarea id="reason_note" class=" delreason-textarea w100 h100 zcl-input  p15 " data-name ="reject_reason" placeholder="{{reject_reason}}">{{reason_value}}</textarea>\n\t\t\t\t\t\t\t\t<div invalidtxt class="posabs clr-err font13 mT5"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>',search_pendingTeams:`<div class="zcl-win-modal1-srch fshrink flexC">\n\t\t\t\t\t<div class="zcl-search2">\n\t\t\t\t\t\t<span class="zcf-search2 zcl-seach-icon"></span>\n\t\t\t\t\t\t<div class="zcl-search-input">\n\t\t\t\t\t\t\t<input type="text" id="pendingForApprovalRhs-search-field" placeholder="${I18N("teams.search")}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`,joinType_Html:`<div id ="teamJoinType" class="zcl-row mT50 pLR36 flexC {{hide_jointype}}">\n\t\t\t   \t\t<div class=" {{label_css}} zcl-row-label mT8 font14">{{join_type_txt}}</div>\n\t\t\t   \t\t<div  class = "flexG posrel flexC {{noEditClass}}">\n\t\t\t\t   \t\t<label for="joinDirectly" class="zcl-radio mR20 font15">\n\t    \t\t\t\t\t\t<input name="join_type" id="joinDirectly" type="radio"  {{check_joinDirect}} class="dN" data-value="${n.DIRECT_JOIN}">\n\t    \t\t\t\t\t\t<span class="radio-btn-marked mR6"></span>\n\t    \t\t\t\t\t\t<div class="ellips line18 clr-M font15">{{joinDirectly_txt}}</div>\n\t    \t\t\t\t</label>\n\t    \t\t\t\t<label for="requestToJoin" class="zcl-radio mR20 font15">\n\t    \t\t\t\t\t\t<input name="join_type" id="requestToJoin" type="radio"  {{check_joinByRequest}} class="dN" data-value="${n.JOIN_BY_REQ}">\n\t    \t\t\t\t\t\t<span class="radio-btn-marked mR6"></span>\n\t    \t\t\t\t\t\t<div class="ellips line18 clr-M font15">{{requestToJoin_txt}}</div>\n\t    \t\t\t\t</label>\n\t    \t\t\t</div>\n\t\t\t   </div>`,channel_CardItemHtml:'<div class = "channelInCard flexC flexM font13  wfit flexC curP" data-team_id="{{team_id}}" data-channel_id ="{{channel_id}}" data-action ="{{action_name}}" >\n\t\t\t\t\t<span class= "ellips mR5 ">{{channel_name}}</span>\n\t\t\t\t\t<span id = "channel_selected" class= "  font10 mLR5 sel_status hide "></span>\n\t\t\t\t\t<span id = "channel_loader" class= " flex posrel font10 mLR5 icnoptns reqprocess_anim hide  "></span>\n\t\t\t\t</div>',publicTeamsCardLoader:'<div class="flex   pT6 w100 h100 publicTeamsCardChannelListCnt">\n                \t<div class="skelton-loader " style = "height :20px ;width:40%;"></div>\n                \t<div class="skelton-loader " style = "height :20px ;width:25%;"></div>\n                \t<div class="skelton-loader " style = "height :20px ;width:20%;"></div>\n                \t<div class="skelton-loader " style = "height :20px ;width:30%;"></div>\n                \t<div class="skelton-loader " style = "height :20px ;width:25%;"></div>\n                \t<div class="skelton-loader " style = "height :20px ;width:15%;"></div>\n                \t<div class="skelton-loader " style = "height :20px ;width:15%;"></div>\n\t\t\t\t</div>',publicTeamsCardEmpty:'<div class="flex-col flexM h100 w100">\n\t\t\t\t\t<div class= "no_channels publicTeamsCardChannelEmpty" ></div>\n\t\t\t\t\t<div class="font13 mT10 clr-lp1">{{noTeamChannel}}</div>\n\t\t\t\t </div>',publicTeamsNavigationListHtml:`<div id="publicteamsnavigator" class="zcf-pointer font10 mL8 mT3 curP teams-users-header-navi clr-icon2 dN" documentclick="showPublicTeamsNavigator"></div>\n\t\t\t\t\t\t\t<div id="publicteamsnavigatorlist" class="zcl-menu-wrap posabs no-pointer font14 fontN dN teams-users-navi-list">\n\t\t\t\t\t\t\t<div class="font14 zcl-menu-item" team_id="66216029" data-category="teams_to_join">${I18N("teams.toJoin")}</div>\n\t\t\t\t\t\t\t<div class="font14 zcl-menu-item" team_id="66216029" data-category="requested_to_join">${I18N("team.requestedToJoin")}</div>\n\t\t\t\t\t\t </div>`};let o=()=>$WC.template.replace(l.mainPreview,{header_html:c(),sections_html:d(),footer_html:""},"InSecureHTML"),c=()=>{let e=$WC.template.replace(l.headerPreview,{image_url:"",$explore_allTeams_txt:"team.explore"});return $WC.template.replace(e,{tabs_html:m()},"InSecureHTML")},m=()=>{Teams.getListFromStorage().length;let t=[{id:LHSConstants.PublicTeams.AllTeams,status:!0,label:Resource.getRealValue("teams.toJoin")}],a="";return t.forEach(t=>{a+=$WC.template.replace('<div tab_id="{{id}}"  documentclick="allowedTeamTabClick"  class="zcl-hor-tab2-item {{sel}} {{hide}}"><div class="ellips">{{label}}</div></div>',{label:t.label,id:t.id,sel:t.id===e?"sel":"",hide:t.status?"":"hide"})}),a},d=()=>u(),u=()=>$WC.template.replace(l.mainCenterLoader,{$loading:$Util.getRandomQuotes()}),p=e=>{var{noPublicTeams:t,onSearch:a,noRequestedTeams:s,onCentreLoading:i}=e||{};i?$("#public_teamtab_actions").html(""):a||t?t&&s?$("#public_teamtab_actions").html(""):t&&$("#public_teamtab_actions").html(h(t)):($("#public_teamtab_actions").html(h()),$("#public-team-search-field").focus())},h=e=>{return`<div class="mLR35 pB16 flexC pT16 justifySB">${g(e)+(SecurityManager.hasPermission(Modules.Teams,MActions.Create)&!e?$WC.template.replace(l.create_TeamsBtnHtml,{}):"")}</div>`},g=t=>$WC.template.replace(l.searchDomHtml,{$placeholder:"Search Teams",tab_id:e,disable_Search:t?"disabled":""}),v=t=>{e=t,$('[tab_id="'+t+'"]').addClass("sel").siblings().removeClass("sel"),(e=>{$("#public_teamtab_actions").html("")})(),e===LHSConstants.PublicTeams.AllTeams&&PublicTeamsUIHandler.updatePublicTeamsListView()},f=(e,t)=>{let s=t?$("#public-team-search-field"):$(e.currentTarget),i=(s.attr("tab_id"),s.attr("team_id"),$.trim(s.val()));(e.keyCode==$zcg.ESCAPE_KEYCODE||t)&&(e.stopPropagation(),s.val("").focus(),i=""),a===LHSConstants.PublicTeams.AllTeams?PublicTeamsListHandler.populateDefaultTeams(i,!0):a===LHSConstants.PublicTeams.RequestedTeams&&PublicTeamsUIHandler.populateRequestedTeamsRhs(i)},T=e=>{a===LHSConstants.PublicTeams.AllTeams?$("#public_teamtab_sections").html(e):a===LHSConstants.PublicTeams.RequestedTeams&&$("#publicteamssublist").html(e)};var _=function(){var e=Teams.getListFromStorage().length>0,t={imageclass:"network_teams_empty",title:Resource.getRealValue(e?"team.allTeamsJoined":"team.public.empty"),buttonConfig:{name:"+ "+I18N("team.create"),purpose:"createTeamsRhsPopulate",disabled:!SecurityManager.hasPermission(Modules.Teams,MActions.Create)}};return`<div class="h100 w100">${$Util.emptyStateHtml(t)}</div>`};let b=()=>$WC.template.replace(l.publicTeamsNavigationListHtml,{}),C=()=>{$("#public_teamtab_sections").length&&$("#publicteamsnavigator").removeClass("dN")},S=e=>{let t=e.currentTarget.getAttribute("data-category");var s=$("#public_teamtab_sections");let i=s.find("#publicteamssublist");if(OrgFeatures.isPublicTeamsEnabled()&&"requested_to_join"==t)a=LHSConstants.PublicTeams.RequestedTeams,ae(),s[0].querySelector("[zc_sticky_title]").innerText=Resource.getRealValue("team.requestedToJoin"),i.animate({scrollTop:0}),s[0].querySelector("#teams-category-header-teams_to_join").innerText=Resource.getRealValue("team.requestedToJoin");else if(OrgFeatures.isPublicTeamsEnabled()&&"teams_to_join"==t)a=LHSConstants.PublicTeams.AllTeams,PublicTeamsListHandler.populateDefaultTeams("*",!1,!0),i.animate({scrollTop:0});else{var n=i.find("[id = 'teams-category-header-"+t+"']");n.length>0&&$Util.scrollToViewportTop(n,s,200,!0)}};var y=function(){var e="",t=PublicTeamsListHandler.getAllPublicTeams();if(t.length>0){for(var a=0;a<t.length;a++){var s=PublicTeamsListHandler.getPublicTeamsObj(t[a]);e+=P(s)}return`<div id="publicteamssublist" class=" mT10 publicTeamsSublist " >${e}</div>`}return e},P=function(e,t,a){var i=e.getTeamName(),n=e.team_id;"*"!==t&&(i=_highlightSearchText(i,t));var r=e.description;let o=$WC.template.replace(l.teamListingCardHtml,{team_id:n,team_description:$WC.Util.isEmpty(r)?"":r,default_imgurl:e.getTeamImgUrl(),participants_cnt:e.participant_count+" "+Resource.getRealValue(1===e.participant_count?"common.participant":"common.participants"),hide_particiants_cnt:e.participant_count>0?"":"hide",hide_join_btn:a?"hide":"",joined_team_dataAction:a?"showJoinedTeamView":"",$join_teamTxt:e.isJoinRequested()?"common.requested":e.isRequestToJoin()?"team.request.toJoin":"common.join",hide_requested:e.isJoinRequested()?"":"hide",waitingForApprovalCls:e.isJoinRequested()?"disabledOpacity curN requestedBtnClr":"",requested_clr:e.isJoinRequested()?"clr-lp1":"clr-theme",$team_visibility:e.visibility===s.OPEN_TO_ALL?"common.public":"common.private",lock_icon_hide:e.visibility===s.OPEN_TO_ALL?"hide":"",joinedTeamClass:a?"joinedTeamCardContainer":"",publicTeamsJoinBtn:e.isJoinRequested()?"":"publicTeamsJoinBtn",hide_description:$WC.Util.isEmpty(r)?"hide":"",$joinTeamChannelTxt:["team.join.channel",e.getTeamName()]});return o="*"!==t?$WC.template.replace(o,{team_name:i},"InSecureHTML"):$WC.template.replace(o,{team_name:i})},L=function(){var e={body:A(),classname:"createchl channelRHS createTeamRhs configurationheader",header:E(),id:"publicTeamRhs"};PublicTeamsUIHandler.createTeamRhs(e),M(),TeamPermissions.clearEditedTeamPermission(),SearchField.init("teams-usersuggest"),SearchField.init("teams-adminsuggest"),G.insertDefaultNode($zcg._ZUID)},I=function(e){var t=e.element,a=t.dataset.team_id;let s=t.hasAttribute("joinTeamFromChecklist");s?$Util.Button.addLoadIconForAjax($(t)):$(t).addClass("reqprocess_anim");var i={team_id:a,successCallBack:function(e,i){var n=PublicTeamsListHandler.getPublicTeamsObj(a);if($(t).removeClass("reqprocess_anim"),n.isRequestToJoin())n.joinRequested=!0,n.name=n.getTeamName(),PublicTeamsListHandler.removePublicTeamFromStorage(a),PublicTeamsListHandler.updateRequestedTeamsStorage(n),s?CheckListJoinTeams.checklistTeamJoinSuccessHandler($(t),a):(UI.updateBanner(Resource.getRealValue("team.join.request.success"),2e3,!1),i.elem.innerHTML='<span class=" zcf-tick  clr-lp1"> <span class= "mL5"> '+I18N("common.requested")+"</span></span>",$(i.elem).addClass("disabledopacity  requestedBtnClr curN"));else{if(UI.updateBanner(Resource.getRealValue("team.join.success"),2e3,!1),n.name=n.getTeamName(),Teams.updateTeamClientStorage(n),PublicTeamsListHandler.removePublicTeamFromStorage(a),Teams.getTeamsParams($zcg._ZUID).addTeamToJoinedTeamList(a),s)return n.joined=!0,PublicTeamsListHandler.addTeamToOrgGroups(n),void CheckListJoinTeams.checklistTeamJoinSuccessHandler($(t),a);i.elem.innerHTML='<span class=" zcf-tick  clr-lp1"> <span class= "mL5"> '+I18N("common.joined")+"</span></span>",$(i.elem).addClass("disabledopacity  requestedBtnClr curN"),n.joined=!0,Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),PublicTeamsListHandler.addTeamToOrgGroups(n),$("#teamCardFlipContainer_"+a).addClass("is-flipped"),$("#publicTeamsCardChannelListing_"+a).html(l.publicTeamsCardLoader),TeamInfo.updateChannelsView(a,!0)}},errorCallBack:function(){$(t).removeClass("reqprocess_anim"),s&&$Util.Button.showCompletionAndResetContent($(t),!0)},elem:t};PublicTeamsApiHandler.joinNetworkPublicTeams(i)},x=function(){$WC.$Win.destroy("publicTeamRhs")},M=function(){var e=document.getElementById("publicTeamRhs"),t=$("#teamphoto"),a=e.querySelector("#teamJoinType"),s=e.querySelector("#teamVisibilityBtn"),i=e.querySelector("#teamvisibility-info");e.addEventListener("click",(function(e){var t=e.target;if(void 0===t.dataset.action&&(t=e.target.closest("[data-action]")),t){var n={createTeam:function(){U({selectedElem:t})},show_TeamPermissionsPreview:function(){var e=t.dataset.team_id;z(e)},close_permissionspreview:function(){$("#team_permissions").removeClass("chlovrly").slideToggle()},permisions_update:function(){var e=t.dataset.type,a=t.dataset.name,s=t.checked;TeamPermissions.updateTeamPermissions(a,e,s)},approve_PublicTeams:function(){var e=t.dataset.team_id,a="true"===t.dataset.listingpreviewoverlay;q(e,t,a)},pendingTeamsListView:function(){PublicTeamsUIHandler.pendingTeamsRhsCreateUi()},cancel_overlay:function(){$WC.$Win.destroy("publicTeamRhs")},teamVisibilityUpdate:function(){s.checked?($(a).addClass("hide"),i.innerHTML=Resource.getRealValue("team.private.note")):($(a).removeClass("hide"),i.innerHTML=Resource.getRealValue("team.public.note"))}},r=t.dataset?t.dataset.action:"";"function"==typeof n[r]&&(n[r](),e.stopImmediatePropagation())}})),t.on("change",(function(e){var a=$("#team_img_preview");t.addClass("img-set");var s=this.files[0];$Util.imgPrview(a,s,'class="imagecontainer"',80)})),$(e).on("focusin keyup mouseup focus keydown","[listen='keyup']",(function(e){var t=$(this);"teamnameval"!==this.id&&"teamdescval"!==this.id||$Dom.limitInput(t,e),"teamnameval"===this.id&&t[0].value.length>0&&t.hasClass("error")&&(t.removeClass("error"),t.siblings("[invalidtxt]")[0].innerHTML="")}))},R=function(e,t){var a=t||$("#pendingForApprovalRhs-search-field"),s=e?e.currentTarget:a[0],i=$.trim(s.value);e&&e.keyCode==$zcg.ESCAPE_KEYCODE&&(e.stopPropagation(),i="",s.value="");var n=s.getAttribute("data-val");if(s.setAttribute("data-val",i),i!=n){var r={searchVal:i,listid:"pendingForApprovalRhsListing",destid:"pendingForApprovalRhsListing",scrlcontainer:"pendingForApprovalRhsListing",populateCallback:PublicTeamsUIHandler.updatePendingTeamsSection,bindEventsCallback:function(){var e=document.getElementById("pendingForApprovalRhs-search-field");e.addEventListener("keyup",(function(t){R(t,e)}))},fromSearch:!0};PendingForApprovalTeamsHandler.populateDefaultPendingTeams(r)}},U=function(e){var t;if((t=e.hasTeamInfoData?e.teamPayloadData:w(e.selectedElem)).isValidData){e&&e.selectedElem&&$(e.selectedElem).addClass("reqprocess_anim");var a={apiParams:t.teamData,successCallBack:function(a){var i=a,n=i.team_id;if("pending"===i.status?UI.updateBanner(Resource.getRealValue("team.create.pendingApproval"),3e3):UI.updateBanner(Resource.getRealValue("team.create.success"),3e3),i.joined){Teams.getTeamsParams($zcg._ZUID).addTeamToJoinedTeamList(n),Teams.updateTeamClientStorage(a),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),!t.isReqFromCheckList&&TeamInfo.populateUI(n);var r=Teams.getTeamsObj(n);PublicTeamsListHandler.addTeamToOrgGroups(r)}else if(i.visibility===s.OPEN_TO_ALL){PublicTeamsListHandler.getPublicTeamsListParams($zcg._zuid).addTeamToPublicTeamsList(n),PublicTeamsListHandler.updatePublicTeamClientStorage(a),!t.isReqFromCheckList&&PublicTeamsUIHandler.handleTabView(LHSConstants.PublicTeams.AllTeams)}x(),"function"==typeof e.successCallBack?e.successCallBack(a):$("#ntChecklistTeamCreationCont").length&&CheckListTeams.teamCreationSuccessCallback({serverResp:a,createdFrmTemplate:!1})},errorCallBack:function(t){let a=t&&t.code&&t.message?t.message:Resource.getRealValue("apierror.message.two");e&&e.selectedElem&&$(e.selectedElem).removeClass("reqprocess_anim"),UI.updateBanner(a,2e3,!0),"function"==typeof e.errorCallBack&&e.errorCallBack(t)}};PublicTeamsApiHandler.createNetworkTeams(a)}},w=function(e,t){var a=document.getElementById("teamdetailscont"),i=a.querySelector("#teamnameval"),n=i.value,r=a.querySelector("#teamdescval").value,l=a.querySelector("#team_img_preview"),o=a.querySelector("#joinDirectly"),c=a.querySelector("#requestToJoin"),m={};if($WC.Util.isEmpty(n.trim()))return $(i).addClass("error"),$(i).siblings("[invalidtxt]")[0].innerHTML=Resource.getRealValue("team.name.required"),{isValidData:!1};if(r.length>200)return{isValidData:!1};if(!OrgFeatures.isIntranetRequest()){var d=SearchField.getMultiTypeSelectedList("teams-adminsuggest-selnodes");if(!t&&($WC.Util.isEmpty(d.contact)||!$WC.Util.isEmpty(d.contact)&&d.contact.length<1))return $("#teams-adminsuggest-error-txt")[0].innerHTML=Resource.getRealValue("team.select.admin"),{isValidData:!1}}m.name=n,m.description=r;var u=l.querySelector("img");if(u&&(m.image_data=u.src,u.dataset.previousimg&&delete m.image_data),!OrgFeatures.isIntranetRequest()){var p=a.querySelector("#teamVisibilityBtn");m.visibility=p.checked?s.INVITE_ONLY:s.OPEN_TO_ALL,a.querySelector("#teamJoinType")&&($(o).is(":checked")&&!p.checked&&(m.jointype=o.dataset.value),$(c).is(":checked")&&(m.jointype=c.dataset.value));var h=TeamPermissions.getEditedTeamPermission();h&&Object.assign(m,h);d=SearchField.getMultiTypeSelectedList("teams-adminsuggest-selnodes");var g=SearchField.getMultiTypeSelectedList("teams-usersuggest-selnodes");g.contact&&g.contact.length&&(m.user_ids=g.contact||[]),t||(m.admin_ids=d.contact||[])}return{isValidData:!0,teamData:m}},A=function(e,t){var a=!!e,s=!e,i=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),n={isEdit:a,isCreate:s,team_id:e,teamObj:e?i.getPendingTeamObj(e):void 0};return'<div id="teamdetailscont" class= "mcontent h100">'+$WC.template.replace(l.createTeamsBodyHtml,{team_id:e||"",TEAMSIMAGEANDNAMEHTML:O(n),TEAMSVISIBILITYANDGROUPHTML:H(n),TEAMJOINTYPEHTML:k(n),TEAMSDESCHTML:j(n),TEAMASSIGNUSERHTML:a?"":W(n),TEAMASSIGNADMINHTML:a?"":B(n),$cancel_txt:"common.cancel",cancel_dataaction:t?"pendingTeamsListView":"cancel_overlay",$create_txt:a?"team.save.approve":"common.create",data_action:a?"approve_PublicTeams":"createTeam",$team_permissions_Header:"team.permissions",hide_edit:a?"":"hide",data_listingPreviewOverlay:!!t},"InSecureHTML")+"</div>"},E=function(e){var t=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);return`<div  id ="teamdetailsHdrcont" class="fontB font18 zc-profilemenushow">${e?$WC.$CUtil.processXSS(t.getTeamName()):I18N("team.create")}</div>`},H=function(e){var t=e.teamObj,a=e.isCreate?"":s.OPEN_TO_ALL===t.visibility?"":"checked";return $WC.template.replace(l.teamVisibilitySwitcherHtml,{$visibility_title:"team.visibility",$public_txt:"common.public",$private_Txt:"common.private",$OPENTOALLINFO:$WC.Util.isEmpty(a)?"team.public.note":"team.private.note",visibility_checked_status:a,noEditClass:e.isEdit||e.isCreate?"":"disabledopacity curN",label_css:e.isFromTeamSettingView?"team_settingLabel":""})},k=function(e){var t=e.isCreate?"":e.teamObj.isRequestToJoin()?"checked":"",a=e.isCreate?"checked":e.teamObj.isRequestToJoin()?"":"checked";return $WC.template.replace(l.joinType_Html,{$join_type_txt:"team.join.type",$joinDirectly_txt:"team.join.directly",$requestToJoin_txt:"team.request.toJoin",check_joinDirect:a,check_joinByRequest:t,noEditClass:e.isEdit||e.isCreate?"":"disabledopacity curN",label_css:e.isFromTeamSettingView?"team_settingLabel":"",hide_jointype:(e.isEdit||e.isFromTeamSettingView)&&s.OPEN_TO_ALL!=e.teamObj.visibility?"hide":""})},O=function(e){var t=e.teamObj;if(t)var a='<img data-previousimg="true"  class = "imagecontainer" src="'+t.getTeamImgUrl(void 0,!0)+'"/>';else a='<div class="zcf-teamsicon font50 flexM"></div>';var s=e.isEdit?e.teamObj.getTeamName():"";return $WC.template.replace(l.teamNameImageHtml,{$team_name_title:"team.name.image",team_Image_Holder:N(a,e.isEdit),$team_name_ph:"team.name.ph",team_name:s,NAMELIMIT:TeamLimitConstants.NAME_LIMIT},"InSecureHTML")},N=function(e,t){return $WC.template.replace(l.team_img_Html,{team_image:e,noEditCls:t?"noEdit":""},"InSecureHTML")},j=function(e){var t=e.isEdit?e.teamObj.getTeamDescription():"";return $WC.template.replace(l.team_description_Html,{team_descriptrion:t,$team_desc:"common.description",$team_description_ph:"team.description.ph",desc_limit:TeamLimitConstants.DESCRIPTION_LIMIT})},z=function(e){var t=$("#publicTeamRhs"),a=t.find("#team_permissions");a.length?a.slideToggle("slow",(function(){$(this).addClass("chlovrly")})):(t.append(D()),t.find("#team_permissions").hide().slideToggle("1000",(function(){$(this).addClass("chlovrly")})),V(t,e))},D=function(){return permission_container_html=$WC.template.replace(l.team_permissions_overlay,{$permissions_txt:"team.permissions",$save_txt:"common.save"})},F=function(e){var t=CHECK_BOX.getHTML({align:"HR",options:[{id:"{{permissions_categ}}_{{permissions_action}}",label_id:"{{permissions_categ}}_{{permissions_action}}",checked:"{{permissions_action_status}}",label:"",label_customattr:"{{disabled_chk}}",custom_attr:"data-name={{permission_name}} data-type={{permision_type}} data-action={{ACTION}} {{permissions_action_status}} {{data_team_id}}"}]}),a={rowHtmlTemplate:l.permissions_rowTemplate,checkboxRowItemHtml:'<div class="tblCel"><div class="flexIC ">{{checkboxHtml}}</div></div>',permission_CheckboxHtmlTemplate:t,team_id:e?e.team_id:"",teamObj:e?e.teamObj:void 0,isUpdateTeamInfo:e&&e.isEdit&&!e.isApproveRequest,enabled_bydefault:!(!e||!(e.isEdit&&e.teamObj.getIsModerator()||e.isApproveRequest||e.isCreate))};return $WC.template.replace(l.team_Permissions_Container,{$ACTIONTEXT:"common.actions",$ADMINHEADER:"common.admin",$MEMBERHEADER:"common.member",$team_permission_desc:"team.permission.desc",PERMISSIONHTML:TeamPermissions.getPermissionListHtml(a),hide_permissionDesc:e.isFromTeamSettingView?"hide":"",CLASS:e.isFromTeamSettingView?"w50":"",hide_adminPermission:"hide",HOVR_ROW_CLS:e.isFromTeamSettingView&&!e.isEdit?"curN":""},"InSecureHTML")},V=function(e,t){var a=e.find("#permissionsui"),s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),i=t?s.getPendingTeamObj(t):"",n={isEdit:!$WC.Util.isEmpty(t),isCreate:$WC.Util.isEmpty(t),team_id:t,teamObj:t?i:void 0,isApproveRequest:!$WC.Util.isEmpty(t)&&i.isStatusPending()};a.html(F(n))},W=function(){return $WC.template.replace(l.team_assignUsers_Input,{ID:"teams-usersuggest",$TITLE:"team.add.members",$PLACEHOLDER:"team.add.member.ph"})},B=function(){return $WC.template.replace(l.team_assignUsers_Input,{ID:"teams-adminsuggest",$TITLE:"team.assign.admins",$PLACEHOLDER:"team.assign.admins.ph"})},q=function(e,t,a){var s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),i=w(t,!0);s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID);if(i.isValidData){i.teamData.status="approve",$(t).addClass("reqprocess_anim");var n={team_id:e,apiParams:i.teamData,successCallBack:function(e,t){var a=e,i=a.team_id,n=s.getPendingTeamObj(i);if(n.update(a),(r=Teams.getTeamsParams($zcg._ZUID)).removeFromPendingTeamsStorage(i),s.removeFromPendingTeamsStorage(i),n.isJoined())Teams.updateTeamClientStorage(a),r.addTeamToJoinedTeamList(i);else if(n.isOpenToAll()){var r;(r=PublicTeamsListHandler.getPublicTeamsListParams($zcg._zuid)).addTeamToPublicTeamsList(i),PublicTeamsListHandler.updatePublicTeamClientStorage(a),PublicTeamsUIHandler.handleTabView(LHSConstants.PublicTeams.AllTeams)}t.isFromRhsListingOverlay?(PublicTeamsUIHandler.pendingTeamsRhsCreateUi(),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))}})):(Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),x()),$("#lhs_people_counter").html(s.getPendingTeamscount()>0?s.getPendingTeamscount():""),UI.updateBanner(Resource.getRealValue("team.approve.success"),2e3,!1)},errorCallBack:function(e){let a=e&&e.code&&e.message?e.message:Resource.getRealValue("team.approve.error");UI.updateBanner(a,2e3,!0),$(t).removeClass("reqprocess_anim")},isFromRhsListingOverlay:a};PendingForApprovalTeamsApiHandler.approveRejectNetworkPublicTeams(n)}},Z=function(e){var t=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e.team_id),a=$WC.template.replace(l.reject_noteHtml,{$reason_reject_txt:"user.invite.reject.request.reason",$reject_reason:"user.invite.reject.request.reason.ph",reason_value:""}),s={id:"reject_Team",header:Resource.getRealValue("team.rejectDlgHdr",t.getTeamName()),info:Resource.getRealValue("team.rejectDlgDesc"),headerclass:"",bodyhtml:a,button:[{text:Resource.getRealValue("common.cancel"),colour:$zcg._cssClasses.SECONDARY_BTN,action:function(){$WC.$Win.destroy("delete_Team")}},{text:Resource.getRealValue("user.invite.reject.request"),colour:$zcg._cssClasses.NEG_PRIMARY_BTN,action:function(){var t=$("#reason_note").val();!$WC.Util.isEmpty(t)&&(e.apiParams.reason=t),PendingForApprovalTeamsApiHandler.approveRejectNetworkPublicTeams(e)}}]};$WC.$Dlg.confirm({id:"reject_Team",version:3,class:"modalwindow zcl-alert-dialog-2 zcldel-dialog-box zcdgimgnone zcalgncntr zcbg_mask removedialog "+s.headerclass,headerhtml:$WC.$Dlg.frameHeaderHTML({imagehtml:'<div class="bdrR100 bgWhite clr-red flexM font36 mAuto zcf-teamsicon " style = "width :60px ;height:60px;"></div>',header:s.header,subheader:s.info}),bodyhtml:s.bodyhtml,buttons:s.button,closecallback:function(){$(elem).removeClass("reqprocess_anim")}}),J()},J=function(){var e=$("#reject_Team");e.on("keyup",(function(t){var a=t.target;a.value.length>100?$(a).hasClass("error")||($(a).addClass("error"),$(a).siblings("[invalidtxt]")[0].innerHTML=Resource.getRealValue("user.invite.rejectionnote.limit"),e.find('[button="2"]').attr("disabled","")):$(a).hasClass("error")&&($(a).removeClass("error"),$(a).siblings("[invalidtxt]")[0].innerHTML="",e.find('[button="2"]').removeAttr("disabled"))}))},G={searchname:"teams-adminsuggest",orgusers_html:'<div class="zcl-list-item" uid={USERID} dname="{DNAME}" purpose="search"><div class="posrel fshrink mR10"><img src="{IMGURL}" class="zcl-list-item-img36">{STATUS}</div><div class="flexG ellips"><div class="ellips">{DNAMEVAL}</div></div><div class="fshrink mL15 clr6 font14  w50 ellips">{EMAILID}</div></div>',search:function(e){var t=$("#"+this.searchname+"-results"),a=SearchAgent.CONTACTS+SearchAgent.ORGCONTACTS;t.html('<div id="'+this.searchname+'-list"  class="zcl-multiselect-list"></div>');var s=SearchField.getSelectedList("teams-usersuggest-selnodes"),i=SearchField.getSelectedList("teams-adminsuggest-selnodes"),n=s.concat(i),r=SearchAgent.search({searchin:a,val:e,includeLocalUser:!0,orgcontactshtml:this.orgusers_html.replace(/{STATUS}/g,""),contactshtml:this.orgusers_html.replace(/{STATUS}/g,'<span class="zcl-usr-status {STATUSCLASS}"></span>'),restricttosameorg:!1,ignorelist:n,listid:this.searchname+"-list",clearcallback:function(){SearchField.checkAndAddEmailInAutocomplete(this.searchname,e)||PublicTeamsUIHandler.assignAdminsSuggest.displayNoResultFound(e)},customobject:{}});return r&&this.displayResultDOM(t),r},handleAction:function(e,t,a){Clickoutside.handleClickOnChild(e,t);var s=t.attr("uid"),i=t.attr("dname"),n=t.attr("elemtype"),r=t.children("div").children("img").attr("src"),l={uid:s,name:$WC.Util.isEmpty(i)?s:i,img_url:$WC.Util.isEmpty(r)?Users.getDefaultImgUrl():r,nodetype:"+",elemtype:$WC.Util.isEmpty(n)?"contact":n};$("#"+this.searchname+"-selnodes span[key='"+l.uid+"']").remove();var o=Multi_Select_Input.getNodeHTML(l);$("#"+this.searchname+"-selnodes").append(o),$("#"+this.searchname+"-error-txt")[0].innerHTML=""},insertDefaultNode:function(e){var t=e,a=Users.getName(e),s=Users.getImgUrlById(e),i={uid:e,name:$WC.Util.isEmpty(a)?t:a,img_url:$WC.Util.isEmpty(s)?Users.getDefaultImgUrl():s,nodetype:"+",elemtype:"contact"},n=Multi_Select_Input.getNodeHTML(i);$("#"+this.searchname+"-selnodes").append(n)},getPlaceholderText:function(){return Resource.getRealValue("team.assign.admins.ph")},clear:function(){var e=SearchField.getSelectedList(this.searchname+"-selnodes");$("#"+this.searchname+"-search-field").attr("placeholder",0===e.length?this.getPlaceholderText:""),$("#"+this.searchname+"-results").hide().find("#"+this.searchname+"-list").empty(),$("#"+this.searchname+"-search-field").attr("prevsearchval",""),Clickoutside.clear(this.searchname+"-results")},handleKeyUp:function(e,t){var a=e.which,s=SearchField.getSelectedList(this.searchname+"-selnodes");a==$zcg.ESCAPE_KEYCODE&&!s.length&&$WC.Util.isEmpty(t)?destroyView():a!=$zcg.ESCAPE_KEYCODE||s.length||$WC.Util.isEmpty(t)||$("#"+this.searchname+"-search-field").val("")},handleEsc:function(){this.clear()},handleTabKey:function(){this.clear()},displayResultDOM:function(e){e.find("[purpose='search']").first().addClass("srchbn sel"),"block"===e.css("display")||Clickoutside.bind({srcid:this.searchname+"-search-field",destid:this.searchname+"-results"}),ZCScroll.scrollTop($("#"+this.searchname+"-results"),0),this.positionDOM(),this.bindEvents()},positionDOM:function(){var e=$("#"+this.searchname+"-results"),t=$("#"+this.searchname+"-error"),a=(t[0].getBoundingClientRect().height,t[0].getBoundingClientRect()),s=a.bottom,i=e[0].getBoundingClientRect().height,n=i<$(window).height()-s?s:a.top-i-5;e.addClass("zc-form-fixedinp").css({top:n,left:a.left,width:a.width}),e.addClass("posfix")},bindEvents:function(){$("#chnlinptcont").scroll((function(){usersuggestion.positionDOM()}))},displayNoResultFound:function(e){this.clear();var t=$("#"+this.searchname+"-results"),a=$WC.Util.isEmpty(e)||"*"===e?"quickchat.no.contact":"teams.addmembers.users.search.empty";if(SearchField.checkAndAddEmailInAutocomplete(this.searchname,e)){var s=$("#"+this.searchname+"-list");s.append('<div id="contactshtml" searchcatagory="contacts"></div>'),s.find("#contactshtml").append("<div class='zcuserstatus chatinvt flexC curN'>"+Resource.getRealValue(a)+"</div>"),this.displayResultDOM(t)}}},Q=function(){return l.search_pendingTeams},Y=function(e,t){var a=[],s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID);t&&(a=[["editpreview_"+e,s.getPendingTeamObj(e).getTeamName()]]);var i="";for(var n in a){var r=n!=a.length-1;i+=$WC.template.replace(l.pendingTeams_HdrSecondaryBreadCrump,{id:a[n][0],sub_header:Resource.getRealValue(a[n][1]),link_class:r?"zcl-breadcum-link":""})}return $WC.template.replace(l.pendingTeams_HdrPrimaryBreadCrump,{$pendingTeamsTxt:"team.approval.awaiting",SECONDARYHEADER:i},"InSecureHTML")};let K=e=>{var t={searchVal:"*",listid:"pendingForApprovalRhsListing",destid:"pendingForApprovalRhsListing",scrlcontainer:"pendingForApprovalRhsListing",populateCallback:PublicTeamsUIHandler.updatePendingTeamsSection,bindEventsCallback:function(){var e=document.getElementById("pendingForApprovalRhs-search-field");e.addEventListener("keyup",(function(t){R(t,e)}))},fromSearch:!1};PendingForApprovalTeamsHandler.populateDefaultPendingTeams(t)};var X=function(e,t){var a="",s=t.length;if(s>0){let o=s>5?5:s;for(var i=0;i<o;i++){var n=t[i].oc_id,r=Channels.getName(n);a+=$WC.template.replace(l.channel_CardItemHtml,{team_id:e,channel_name:r,channel_id:n,action_name:"joinChannel"})}return s>5&&(a+=$WC.template.replace(l.channel_CardItemHtml,{team_id:e,$channel_name:s-5+" + "+Resource.getRealValue("common.more"),action_name:"showMoreChannels"})),`<div class="flex  pT6 w100 h100 publicTeamsCardChannelListCnt">${a}</div>`}return""},ee=function(){return $WC.template.replace(l.publicTeamsCardEmpty,{$noTeamChannel:"team.channel.empty"},"InSecureHTML")},te=function(e){t=!0;var a={apiParams:{mode:"requested"},successCallBack:function(a,s){for(var i=a.teams,n=0;n<i.length;n++)PublicTeamsListHandler.updateRequestedTeamsStorage(i[n]);"function"==typeof e&&e(),t=!1},errorCallBack:function(){"function"==typeof errorCallBack&&errorCallBack(),t=!1}};PublicTeamsApiHandler.fetchAllowedOpenToAllTeams(a)},ae=function(){T(u());var e=$("#public_teamtab_sections");e.addClass("h100"),e.find("#publicteamssublist").addClass("h100").removeClass("publicTeamsSublist"),te((function(){se()}))},se=function(e){var t=a===LHSConstants.PublicTeams.RequestedTeams,s=$("#public_teamtab_sections"),i=$("#publicteamssublist"),n=ie(e),r=!$WC.Util.isEmpty(e)&&"*"!=e;t&&($WC.Util.isEmpty(n)?(n=`<div class="h100 w100 searchEmptyImgClass ">${$Util.emptyStateHtml({imageclass:"network_teams_empty",title:Resource.getRealValue(r?"common.search.empty":"team.requested.empty")})}</div>`,i.addClass("h100").removeClass("publicTeamsSublist"),s.addClass("h100")):(s.removeClass("h100"),i.removeClass("h100").addClass("publicTeamsSublist"),!r&&p()));i.html(n)},ie=function(e){var t="",a=[],s=[],i=$WC.Util.isEmpty(e)?"*":e.toLowerCase(),n=PublicTeamsListHandler.getAllRequestedTeams(),r=n.length;if(r>0){for(var l=`<div id="teams-category-header-requested_to_join" class="zcl-win-subcategory  w100 " zc_running_title="" style="display: none;">${I18N("team.requestedToJoin")};</div>`,o=0;o<r;o++){var c=-1,m=n[o],d=(p=PublicTeamsListHandler.getRequestedTeamsObj(m)).getTeamName().toLowerCase();(p||-1==criteria.ignorelist.indexOf(m))&&("*"===i?s.push([d,m]):0===(c=d.indexOf(i))?a.push([d,m]):-1!==c&&s.push([d,m]))}var u=$Util.sort($Util.sort(a,0),2,!0);u=u.concat($Util.sort($Util.sort(s,0),2,!0));for(o=0;o<u.length;o++){var p=PublicTeamsListHandler.getRequestedTeamsObj(u[o][1]);t+=P(p,e)}}return $WC.Util.isEmpty(t)?t:l+t};return{populatePublicTeamsRhs:()=>{r(),PublicTeamsListHandler.clearRequestedTeamsStorage(),PublicTeamsUIHandler.fetchAllRequestedTeams(),$('[purpose="showTeamsView"]').removeClass("chatsel"),$('[purpose="showPeopleSubModule"]').removeClass("chatsel");let t=o();LhsNavigation.updateRHSView(t),a=LHSConstants.PublicTeams.AllTeams,PublicTeamsUIHandler.handleTabView(e),MyOrgModule.lastSelectedOrgSubModule={isPublicTeamsSelected:!0}},handleTabView:v,updatePublicTeamsListView:function(e){T(u()),e||p({onSearch:e,onCentreLoading:!0}),PublicTeamsListHandler.populateTeamsList()},updateJoinedeamsListView:function(e){T(u()),e||p({onSearch:e}),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.bindLhsEvents($("lhsutilityopts"))},isFromRHS:!0}),PublicTeamsUIHandler.bindNetworkTeamsRhsEvent()},updateSectionHtml:(t,a,s)=>{let i=e===LHSConstants.PublicTeams.AllTeams;var n=$("#public_teamtab_sections"),r="",l=0===PublicTeamsListHandler.getAllRequestedTeams().length,o=Teams.getListFromStorage().length>0;if(i){var c=`<div id ="teams_sticky_title" class="flexC zcl-win-subcategory posrel dN"><div class="stickytitle curP" zc_sticky_title="" zc_stick_init="" documentclick="showPublicTeamsNavigator"><span></span></div>${b()}</div>\n\t\t\t\t<div id="publicteamssublist" zc_sticky_title_list class=" zcrchtlt flexG flexG h100 mT10   w100">{{section_html}}</div>`;if(l||(r=`<div id="teams-category-header-teams_to_join" class="zcl-win-subcategory  w100 " zc_running_title>${I18N("teams.toJoin")}</div>`),$WC.Util.isEmpty(t)){var m=!$WC.Util.isEmpty(a)&&"*"!=a,d=$Util.emptyStateHtml({imageclass:"network_teams_empty",title:Resource.getRealValue(m?"common.search.empty":o?"team.allTeamsJoined":"team.public.empty")});m?t=`<div class="h100 w100 searchEmptyImgClass ">${d}</div>`:(t=_(),p({noPublicTeams:!0,noRequestedTeams:l})),n.addClass("h100")}else t='<div class= "flexG flexG h100 publicTeamsSublist" >'+t+"</div>",n.removeClass("h100");t=r+(c=$WC.template.replace(c,{section_html:t},"InSecureHTML")),s.isFromHeaderNavigator?$("#publicteamssublist").html(t):n.html(t)}l||(C(),$("#teams_sticky_title").removeClass("dN"))},populatePublicTeamsListing:e=>{var t=y(e);return $WC.Util.isEmpty(t)?l.noTeamResultsHtml:t},handleKeyUp:f,getPublicTeamsCardHtml:P,switchTabView:t=>{e!==t&&v(t)},bindNetworkTeamsRhsEvent:function(){document.getElementById("public_team-tab-container").addEventListener("click",(function(e){var t=e.target;if(void 0===t.dataset.action&&(t=e.target.closest("[data-action]")),t){var a={clearSearchInput:function(){f(event,!0)},createTeamsRhsPopulate:function(){L()},joinTeam:function(){I({element:t})},flipChannelCardBack:function(){var e=t.dataset.team_id;$("#teamCardFlipContainer_"+e).removeClass("is-flipped")},joinChannel:function(){var e=t.dataset.channel_id,a=Channels.getObject(e).chid;$(t).addClass("curN"),$(t).find("#channel_loader").removeClass("hide"),PublicTeamsApiHandler.joinPublicTeamChannels({apiParams:{chid:a,attach:!1},successCallBack:function(){$(t).addClass("channelJoined"),$(t).find("#channel_selected").removeClass("hide"),$(t).find("#channel_loader").addClass("hide")},errorCallBack:function(e){$(t).removeClass("curN"),$(t).find("#channel_loader").addClass("hide");var s=Channels.getByChid(a);$.isEmptyObject(s)||Channels.handleErrorCode(s.oc_id,e.ERRCODE)}})},showMoreChannels:function(){var e=t.dataset.team_id;TeamInfo.setActiveTabFromRoutingPath("channels"),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.handleDefaultTeamView(),Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),TeamInfo.populateUI(e)}},s=t.dataset?t.dataset.action:"";"function"==typeof a[s]&&(a[s](),e.stopImmediatePropagation())}}))},createTeamRhs:function(e){var t=e.header,a=$WC.$Win.create({id:e.id,class:e.classname+" rhsoverly",nav:e.nav,aligncenter:!1,header:t,sigleton:e.nav,closeoutside:!0,html:e.body,closefn:function(){x()}});TeamPermissions.setEditedTeamPermission(TeamPermissions.getDefaultPermissions());var s=e.nav&&$WC.$Win.persists()?"chlnav":"";return a.addClass("zc-profilemenushow "+s),a},showCreateTeamWindowInUI:L,createNewTeam:U,assignUsersSuggest:{searchname:"teams-usersuggest",orgusers_html:'<div class="zcl-list-item" uid={USERID} dname="{DNAME}" purpose="search"><div class="posrel fshrink mR10"><img src="{IMGURL}" class="zcl-list-item-img36">{STATUS}</div><div class="flexG ellips"><div class="ellips">{DNAMEVAL}</div></div><div class="fshrink mL15 clr6 font14 w50 ellips">{EMAILID}</div></div>',search:function(e){var t=$("#"+this.searchname+"-results"),a=SearchAgent.CONTACTS+SearchAgent.ORGCONTACTS;t.html('<div id="'+this.searchname+'-list"  class="zcl-multiselect-list"></div>');var s=SearchField.getSelectedList("teams-usersuggest-selnodes"),i=SearchField.getSelectedList("teams-adminsuggest-selnodes"),n=s.concat(i),r=SearchAgent.search({searchin:a,val:e,includeLocalUser:!0,orgcontactshtml:this.orgusers_html.replace(/{STATUS}/g,""),contactshtml:this.orgusers_html.replace(/{STATUS}/g,'<span class="zcl-usr-status {STATUSCLASS}"></span>'),restricttosameorg:!1,ignorelist:n,listid:this.searchname+"-list",clearcallback:function(){SearchField.checkAndAddEmailInAutocomplete(this.searchname,e)||PublicTeamsUIHandler.assignUsersSuggest.displayNoResultFound(e)},customobject:{}});return r&&this.displayResultDOM(t),r},handleAction:function(e,t,a){Clickoutside.handleClickOnChild(e,t);var s=t.attr("uid"),i=t.attr("dname"),n=t.attr("elemtype"),r=t.children("div").children("img").attr("src"),l={uid:s,name:$WC.Util.isEmpty(i)?s:i,img_url:$WC.Util.isEmpty(r)?Users.getDefaultImgUrl():r,nodetype:"+",elemtype:$WC.Util.isEmpty(n)?"contact":n};$("#"+this.searchname+"-selnodes span[key='"+l.uid+"']").remove();var o=Multi_Select_Input.getNodeHTML(l);$("#"+this.searchname+"-selnodes").append(o)},getPlaceholderText:function(){return Resource.getRealValue("team.add.member.ph")},clear:function(){var e=SearchField.getSelectedList(this.searchname+"-selnodes");$("#"+this.searchname+"-search-field").attr("placeholder",0===e.length?this.getPlaceholderText:""),$("#"+this.searchname+"-results").hide().find("#"+this.searchname+"-list").empty(),$("#"+this.searchname+"-search-field").attr("prevsearchval",""),Clickoutside.clear(this.searchname+"-results")},handleKeyUp:function(e,t){var a=e.which,s=SearchField.getSelectedList(this.searchname+"-selnodes");a==$zcg.ESCAPE_KEYCODE&&!s.length&&$WC.Util.isEmpty(t)?destroyView():a!=$zcg.ESCAPE_KEYCODE||s.length||$WC.Util.isEmpty(t)||$("#"+this.searchname+"-search-field").val("")},handleEsc:function(){this.clear()},handleTabKey:function(){this.clear()},displayResultDOM:function(e){e.find("[purpose='search']").first().addClass("srchbn sel"),"block"===e.css("display")||Clickoutside.bind({srcid:this.searchname+"-search-field",destid:this.searchname+"-results"}),ZCScroll.scrollTop($("#"+this.searchname+"-results"),0),this.positionDOM(),this.bindEvents()},positionDOM:function(){var e=$("#"+this.searchname+"-results"),t=$("#"+this.searchname+"-error"),a=(t[0].getBoundingClientRect().height,t[0].getBoundingClientRect()),s=a.bottom,i=e[0].getBoundingClientRect().height,n=i<$(window).height()-s?s:a.top-i-5;e.addClass("zc-form-fixedinp").css({top:n,left:a.left,width:a.width}),e.addClass("posfix")},bindEvents:function(){$("#chnlinptcont").scroll((function(){usersuggestion.positionDOM()}))},displayNoResultFound:function(e){this.clear();var t=$("#"+this.searchname+"-results"),a=$WC.Util.isEmpty(e)||"*"===e?"quickchat.no.contact":"teams.addmembers.users.search.empty";if(SearchField.checkAndAddEmailInAutocomplete(this.searchname,e)){var s=$("#"+this.searchname+"-list");s.append('<div id="contactshtml" searchcatagory="contacts"></div>'),s.find("#contactshtml").append("<div class='zcuserstatus chatinvt flexC curN'>"+Resource.getRealValue(a)+"</div>"),this.displayResultDOM(t)}}},assignAdminsSuggest:G,showCreateTeamWindowInUI:L,showApproveEditPreviewInRhs:function(e,t){var a=$("#publicTeamRhs");if(t){var s=$("#pendingTeamsRhs");$("#pendingForApprovalRhsHdr").html(Y(e,!0)),s.html(A(e,!0))}else if(a.length>0){var i=a.find("#teamdetailscont"),n=a.find("#teamdetailsHdrcont");i.html(A(e)),n.html(E(e))}else{var r={body:A(e),classname:"createchl channelRHS createTeamRhs configurationheader",header:E(e),id:"publicTeamRhs"};PublicTeamsUIHandler.createTeamRhs(r)}M()},pendingTeamsRhsCreateUi:function(){if($("#publicTeamRhs").length>0){var e=$("#pendingTeamsRhs");$("#pendingForApprovalRhsHdr").html(Y()),e.html(Q()+'<div id = "pendingForApprovalRhsListing" class="flex-col h100 ovrflwA p20"></div>')}else{var t='<div id = "pendingTeamsRhs" class ="flex-col  h100 ovr_hiden  ">'+Q()+'<div id = "pendingForApprovalRhsListing" class="flex-col h100  p20"></div></div>',a='<div id="pendingForApprovalRhsHdr" class= "winheader zcl-hdrline" >'+Y()+"</div>",s=$WC.$Win.create({id:"publicTeamRhs",class:"modalwindow createchl channelRHS rhsoverly  rhsoverly",aligncenter:!1,closeoutside:!0,html:t,header:a}),i={}.nav&&$WC.$Win.persists()?"chlnav":"";s.addClass("zc-profilemenushow "+i)}$("#pendingForApprovalRhsListing").html('<div class="zcldng"></div>'),K()},rejectPendingTeam:function(e,t,a){var s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID);Z({team_id:e,apiParams:{status:"reject"},successCallBack:function(t,a){Teams.getTeamsParams($zcg._ZUID).removeFromPendingTeamsStorage(e),s.removeFromPendingTeamsStorage(e),Teams_LHS.populateLhsTeamsList({callbackfn:function(){Teams_LHS.handleDefaultTeamView(),Teams_LHS.bindLhsEvents($("lhsutilityopts"))}}),a.isFromRhsListingOverlay&&PublicTeamsUIHandler.pendingTeamsRhsCreateUi(),$("#lhs_people_counter").html(s.getPendingTeamscount()>0?s.getPendingTeamscount():""),UI.updateBanner(Resource.getRealValue("team.reject.success"),2e3,!1)},errorCallBack:function(e){let t=e&&e.code&&e.message?e.message:Resource.getRealValue("team.reject.error");UI.updateBanner(t,2e3,!0)},elem_dom:t})},updatePendingTeamsSection:function(e){$("#pendingForApprovalRhsListing").html(e)},pendingTeamsCardHtmlListing:function(e,t){for(var a=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),s="*"!==t&&!$WC.Util.isEmpty(t),i="",n=0;n<e.length;n++){var r=a.getPendingTeamObj(e[n]),o=r.getTeamName(),c="";s&&(o=_highlightSearchText(r.getTeamName(),t,!1,"fontB")),c=$WC.template.replace(l.pendingTeamsCardHtml,{img_url:r.getTeamImgUrl(),team_desc:r.description?r.description:"",team_id:r.team_id,$accept_Txt:"common.approve"}),c=s?$WC.template.replace(c,{team_name:o},"InSecureHTML"):$WC.template.replace(c,{team_name:o});var m=new Date(r.creation_time).getTime();i+=c=$WC.template.replace(c,{requested_time:$Date.relative(m)},"InSecureHTML")}$WC.Util.isEmpty(i)&&(i=`<div class="h100 searchEmptyImgClass ">${$Util.emptyStateHtml({imageclass:"network_teams_empty",title:Resource.getRealValue("common.search.empty")})}</div>`);return i},updateSecondaryActionBand:p,getTeamJoinTypeHtml:k,getTeamsVisibilitySwitcherHtml:H,teamPermissionsTableHtml:F,getTeamVisibilityTypes:function(e){return s[e]},init:function(){r(),Teams_LHS.bindLhsEvents($("lhsutilityopts")),Teams_LHS.populateLhsTeamsList({callbackfn:()=>{Teams_LHS.handleDefaultTeamView(),Teams_LHS.bindLhsEvents($("lhsutilityopts")),PublicTeamsUIHandler.populatePublicTeamsRhs()}}),Teams_LHS.retainLastRecentState()},updatePublicTeamsRhsHeaderHtml:function(){$("#teams_tabs").html(m())},teamVisibility:s,showAllowedTeamChannels:function(e,t){var a=[],s="",i=t.allchannels;i&&i.forEach(e=>{!e.joined&&a.push(e)});var n=X(e,a);$WC.Util.isEmpty(n)?(s=ee(),setTimeout((function(){$("#teamCardFlipContainer_"+e).removeClass("is-flipped")}),2e3)):s=n,$("#publicTeamsCardChannelListing_"+e).html(s)},updatePendingTeamsCntLhs:function(){_isAdmin()&&PublicTeamsApiHandler.fetchPendingTeamsCount({successCallBack:function(e){e.count>0&&$("#lhs_people_counter").html(e.count)}})},joinTypeConstants:n,joinExistingTeam:I,showPublicTeamsHeaderMenu:()=>{Clickoutside.bind({srcid:"publicteamsnavigatorlist",event:event,destid:"publicteamsnavigator",customShow:function(e){let t=$("#"+e.srcid);t.removeClass("dN"),t.off("click"),t.on("click","[data-category]",(function(e){S(e)}))},customHide:function(e){$("#"+e.srcid).addClass("dN")}})},populateRequestedTeamsRhs:se,fetchAllRequestedTeams:te,isRequestedTeamsFetchInProgress:()=>t}}(),PublicTeamsListHandler=function(){var e;let t={},a={};var s={};let i=function(e){return t.hasOwnProperty(e)},n=function(e){return a.hasOwnProperty(e)},r=function(e){return t[e]};var l=function(e){return s[e]?s[e]:(e=e||$zcg._ZUID,s[e]=new PublicTeamslistObj(e),s[e])},o=function(e){if(i(e.team_id)){t[e.team_id].update(e)}else{let a=new TeamsObj(e);t[e.team_id]=a}},c=function(e,t,a){$WC.Util.isEmpty(e)?m("*",t,a):m(e,t,a)},m=function(e,t,a){var s=$("#public_teamtab_sections"),i={val:e,listid:"public_teamtab_sections",user_id:$zcg._ZUID,scrlcontainer:s,allowScroll:!0,fromSearch:t,limit:100,fromHeaderNavigator:a},n=l($zcg._ZUID);n.reset(),n.setSearchValue(i.val),d(i)?ZCScroll.scrollTop(s,0):s.html(_templates.noTeamResultsHtml)},d=function(e){var t=$("#"+e.listid);t.attr("pgno",1);var a;return e.successCallback=function(a,s){if(a===e.val){var i="*"!=a&&!$WC.Util.isEmpty(a);u({onSearch:i,rsltobj:s,val:a,criteria:e,searchlistDOM:t})}e.addscroll&&(ZCScroll.customScroll($("#"+e.listid)),$Scroll.handleScroll($("#public_teamtab_sections"),e,h))},(a=h(e)).furtherreq||e.successCallback(a),!0},u=function(t){var{val:a,onSearch:s,rsltobj:i,criteria:n,searchlistDOM:r}=t;if(clearTimeout(e),PublicTeamsUIHandler.isRequestedTeamsFetchInProgress())e=setTimeout((function(){u(t)}),1e3);else{r.html(""),PublicTeamsUIHandler.updateSecondaryActionBand({onSearch:s}),PublicTeamsUIHandler.updateSectionHtml(i.content,a,n),n=p(r,i,n),r.length>0&&PublicTeamsUIHandler.bindNetworkTeamsRhsEvent();var l=$("#public_teamtab_sections");l.length>0&&($("publicteamssublist").attr("zc_sticky_title",""),$Util.initializeStickyTitle(l))}},p=function(e,t,a){t.content&&"function"==typeof a.populateSuccessCallback&&a.populateSuccessCallback();var s=t.searchedlist.length;return a.totalsearchedlength=s,a.furtherrequestmade=t.furtherreqmade,(s>=a.limit||a.allowScroll)&&(a.addscroll=!0),a},h=function(e){return e=$.extend({},{html:"",ignorelist:[],highlight:!0,limit:100,forceFetchCall:""},e),g(e.user_id,(function(t){var a=C(t,e);e.successCallback(e.val,a);var s=$("#public_teamtab_sections");s.length>0&&($("publicteamssublist").attr("zc_sticky_title",""),$Util.initializeStickyTitle(s))}),e),{content:"",searchedlist:[],furtherreq:!0}},g=function(e,t,a){v(e,t,a)},v=function(e,t,a){a=a||{};var s=l(e),i=null!=a?"scrollup"==a.type:"",n=i||s.teamspopulated,r=a.val&&"*"!=a.val,o=!!r&&s.hasSearchQueryNeedsServerResponse(a.val,"teams"),c=!r&&s.needNextSetTeamsDetails(),m=s.forcefetch&&0==s.currentPopulatedTeams;if(m&&(a.forceFetchCall=!0),!n&&(c||o)||m)f(e,!1,(function(i){i=T(e,a);!r&&(s.currentPopulatedTeams+=100),t(i)}),a);else{var d=T(e,a);r||(i?s.currentPopulatedTeams-=100:s.currentPopulatedTeams+=100),t(d)}},f=function(e,t,a,s){if(!$WC.Util.isEmpty(e)){s=s||{},l(e).setIsFetchingInProgress(!0);e=e||$zcg._ZUID;var i={apiParams:{mode:"allowed"},successCallBack:function(t,i){var n,r=l(e);data=t.teams;var o=s.val&&"*"!=s.val,c=t.meta&&t.meta.next_token?t.meta.next_token:"",m=s.forceFetchCall;if(r.setIsFetchingInProgress(!1),n=data,r.setTeamscount(n.length),_(n,r.getTeamscount(),{isSearchHasVal:o}),m){var d=r.getTeamscount();r.destroyObj(),r=e,_(n,d,{isSearchHasVal:o}),r.updateForceFetch(!1)}r.setSearchValue(s.val),o?r.setNextTokenForSearchVal(c):(r.setNextToken(c),$WC.Util.isEmpty(c)&&r.setPopulated(!0)),"function"==typeof a&&a(n)}};return PublicTeamsApiHandler.fetchAllowedOpenToAllTeams(i)}},T=function(e,t){var a=l(e),s=a.teamsList,i=a.teamspopulated;return a.searchValue&&"*"!=a.searchValue&&!i&&(s=a.searchedTeams),s},_=function(e,t,a){var s=s||$zcg._ZUID;"string"==typeof e&&(e=JSON.parse(e));var i=l(s),n=(a=a||{}).isSearchHasVal;n&&(i.lastSearchedQuery=i.getSearchValue());for(var r=(n?this.searchedTeams:this.teamsList)||[],c=0,m=e.length;c<m;c++){var d=e[c];$WC.Util.isEmpty(d.team_id)||(-1===r.indexOf(d.team_id)&&(r.push(d.team_id),this.teamscount++),o(d))}t=t||this.teamscount;r.length&&n?i.searchedTeams=i.getSearchedTeams(r):r.length&&(i.teamsList=r),b(s,r,t,void 0)},b=function(e,t,a,s){var i=l(e);"string"==typeof t&&(t=t.split(",")),$WC.Util.isEmpty(s)||i.setPopulated(s),a&&i.setTeamscount(a),t&&t.length&&(i.teamsList=t)},C=function(e,t){var a=t.user_id,s=t.val,i=[],n=[],o=[],c="",m=l(a);s=s.toLowerCase()||m.getSearchValue().toLowerCase();for(var d=e.length,u=0;u<d;u++){var p=-1,h=e[u],g=(_=r(h)).getTeamName().toLowerCase();(_||-1==t.ignorelist.indexOf(h))&&("*"===s?o.push([g,h]):0===(p=g.indexOf(s))?n.push([g,h]):-1!==p&&o.push([g,h]))}var v=$Util.sort($Util.sort(n,0),2,!0);v=v.concat($Util.sort($Util.sort(o,0),2,!0));for(var f=$Scroll.getElementRange(v.length,t),T=(u=f.minlimit,f.maxlimit);u<T;u++){h=v[u][1];var _=PublicTeamsListHandler.getPublicTeamsObj(h),b=PublicTeamsUIHandler.getPublicTeamsCardHtml(_,s);i.push(v[u][1]),c+=b}return _sortedTeamsList=i,{content:c,listid:t.listid,populateid:"teams",destid:t.destid,searchedlist:i,furtherreq:!1,appendindom:t.pageno>1}};return{populateTeamsList:function(){var e=$("#public-team-search-field").val();c(e)},populateDefaultTeams:c,getAllPublicTeams:function(){return Object.keys(t)},getPublicTeamsObj:r,removePublicTeamFromStorage:function(e){i(e)&&(PublicTeamsListHandler.getPublicTeamsListParams().removeFromPublicTeams(e),delete t[e])},updatePublicTeamClientStorage:o,getPublicTeamsListParams:l,addTeamToOrgGroups:function(e){var t={};t.id=e.getTeamId(),t.name=e.getTeamName(),t.desc=e.getTeamDescription(),t.ismember=e.isJoined()?"1":0,t.isadmin=e.getIsModerator()?"1":0,t.photo_id=e.photo_id,Groups.updateOrgGroups([t])},getPublicTeams:f,getAllRequestedTeams:function(){return Object.keys(a)},updateRequestedTeamsStorage:function(e){if(n(e.team_id)){a[e.team_id].update(e)}else{let t=new TeamsObj(e);t.joinRequested=!0,a[e.team_id]=t}},getRequestedTeamsObj:function(e){return a[e]},isPublicTeamExist:i,isRequestedTeamExist:n,clearRequestedTeamsStorage:function(){a={}}}}(),PublicTeamsApiHandler={fetchAllowedOpenToAllTeams:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s}=e;$ZCAjx.ajax({url:"/v2/teams",type:"GET",data:s,success:function(a){t(a,e)},error:function(e){let t=e&&e.code&&e.message?e.message:Resource.getRealValue("common.failure.message");UI.updateBanner(t,2e3,!0),a(e)}})},createNetworkTeams:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s}=e;$ZCAjx.ajax({url:"/v2/teams",type:"POST",data:s,contentType:"application/json",success:function(a){t(a,e)},error:function(e){a(e)}})},joinNetworkPublicTeams:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,team_id:s}=e;$ZCAjx.ajax({url:"/api/v2/teams/"+s+"/join",type:"POST",contentType:"application/json",success:function(a){t(a.data,e)},error:function(e){let t=e&&e.code&&e.message?e.message:Resource.getRealValue("common.failure.message");UI.updateBanner(t,2e3,!0),a(e)}})},editNetworksPublicTeam:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s,team_id:i}=e;$ZCAjx.ajax({url:"/v2/teams/"+i,type:"PUT",data:s,contentType:"application/json",success:function(a){t(a,e)},error:function(e){a(e)}})},joinPublicTeamChannels:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s}=e;$ZCAjx.ajax({url:"/joinchannel.do",type:"POST",data:s,success:function(a){t(a,e)},error:function(e){a(e)}})},fetchPendingTeamsCount:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop}=e;$ZCAjx.ajax({url:"/v2/teams/count?status=pending",type:"GET",success:function(a){t(a,e)},error:function(e){a(e)}})}},PublicTeamslistObj=function(e){this.user_id=e,this.teamsList=[],this.teamscount=0,this.teamspopulated=!1,this.nextToken="",this.searchValue="",this.searchedTeams=[],this.searchTeamsNextToken="",this.currentPopulatedTeams=0,this.lastSearchedQuery=void 0};PublicTeamslistObj.prototype={reset:function(){this.searchValue="",this.currentPopulatedTeams=0},setNextTokenForSearchVal:function(e){this.searchTeamsNextToken=e},getNextTokenForSearchVal:function(){return this.searchTeamsNextToken},setNextToken:function(e){this.nextToken=e},getNextToken:function(){return this.nextToken},isAlreadyFetching:function(){return this.IsFetchingInProgress},setIsFetchingInProgress:function(e){this.IsFetchingInProgress=e},setSearchValue:function(e){this.searchValue=e},getSearchValue:function(){return this.searchValue},setTeamscount:function(e){this.teamscount=e},getTeamscount:function(){return this.teamscount?this.teamscount:this.teamsList.length},getSearchedTeams:function(e){var t=this.searchedTeams;for(var a in e)-1==t.indexOf(e[a])&&t.push(e[a]);return t},destroyObj:function(){this.recipants=[]},updateForceFetch:function(e){this.forcefetch=!!e},setPopulated:function(e){this.teamspopulated=e},getPcount:function(){return this.pcount?this.pcount:this.teamsList.length},hasSearchQueryNeedsServerResponse:function(e,t){var a,s;return"teams"==t&&(a=this.lastSearchedQuery?this.lastSearchedQuery.toLowerCase():void 0,s=this.getNextTokenForSearchVal()),!((e=e.toLowerCase()).startsWith(a)&&!s)},needNextSetTeamsDetails:function(){return this.currentPopulatedTeams+Teams.teamsFetchLimit>this.teamsList.length},update:function(e){this.user_id=e.user_id,this.teamsList=e.teamslist,this.teamscount=e.teamscount,this.teamspopulated=e.teamspopulated},removeFromPublicTeams:function(e){var t=this.teamsList.indexOf(e);-1!==t&&this.teamsList.splice(t,1)},addTeamToPublicTeamsList:function(e){-1===this.teamsList.indexOf(e)&&this.teamsList.push(e)}};var TeamPermissions=function(){var e=["create_channel","add_users","update_team","install_apps","add_tasks","add_tabs"],t=["moderators","members"],a={moderators:1,members:2},s={1:"admin_permission",2:"member_permission"},i={},n={admin_permission:{update_team:!0,add_tabs:!0,install_apps:!0,create_channel:!0,add_users:!0,add_tasks:!0},member_permission:{update_team:!1,add_tabs:!1,install_apps:!1,create_channel:!0,add_users:!0,add_tasks:!1}},r={update_team:"team.update_team",add_tabs:"team.add_tabs",install_apps:"team.install_apps",create_channel:"team.create_channel",add_users:"team.assign.users",add_tasks:"team.add_tasks"},l=["add_tasks","add_tabs","install_apps"],o=function(e,a){for(var s="",i=0;i<t.length;i++){var n=c(t[i],e,a);(a.isFromAdminPanel||t[i]!==t[0])&&(s+=$WC.template.replace(a.checkboxRowItemHtml,{checkboxHtml:n},"InSecureHTML"))}return $WC.template.replace(a.rowHtmlTemplate,{$ACTIONNAME:r[e],checkboxHtmlRow:s},"InSecureHTML")},c=function(e,t,s){var i=m(t,e,s);return s.isFromAdminPanel?$WC.template.replace(s.permission_CheckboxHtmlTemplate,{module_name:s.modulename,team_id:s._teamId?s._teamId:"",permission_name:t,action_name:s.isfromTeamsInfo?"edit_permissions":"permisions_update",permission_type:a[e],readonly:"",checked_cls:i?"checked":""}):$WC.template.replace(s.permission_CheckboxHtmlTemplate,{team_id:s.team_id?s.team_id:"",permissions_action_status:!0===i?"checked":"",permission_name:t,permision_type:a[e],disabled_chk:d(s.enabled_bydefault,e,s.isUpdateTeamInfo)?"":"disabled",ACTION:"permisions_update",data_team_id:s.team_id?"data-team_id="+s.team_id:""})},m=function(e,a,s){var i={};if(s._isTeamEdit||s.teamObj){if(s.teamObj)var r=s.teamObj;else r=Teams.getObject(s._teamId);i.admin_permission=r.admin_permission,i.member_permission=r.member_permission}else i=n;return a===t[0]?i.admin_permission[e]:a===t[1]?i.member_permission[e]:void 0},d=function(e,a,s){return!!e&&a===t[1]};return{getPermissionListHtml:function(t){for(var a="",s=0;s<e.length;s++)-1===l.indexOf(e[s])&&(a+=o(e[s],t));return a},getDefaultPermissions:function(){return n},getpermissions_categVsType:function(e){return a[e]},getPermisssion_categ:function(e){return s[e]},updateTeamPermissions:function(e,t,a){var s=TeamPermissions.getPermisssion_categ(t),n=i[s],r=n||{};r[e]=a,i[s]=r},clearEditedTeamPermission:function(){i={}},setEditedTeamPermission:function(e){i=e},getEditedTeamPermission:function(){return i},isCurrentTeamPermissionEnabled:function({team_id:e,permission_name:t,teamObj:a}){var s=!0;if(!a)if(Teams.isExist(e))a=Teams.getTeamsObj(e);else a=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).getPendingTeamObj(e);if(OrgFeatures.isIntranetRequest())s=a.getIsModerator();else{var i=a.getIsModerator()?"moderators":"members";s=m(t,i,{teamObj:a})}return s},permission_actions:{CREATE_CHANNEL:"create_channel",ADD_USERS:"add_users",UPDATE_TEAM:"update_team",INSTALL_APPS:"install_apps",ADD_TASKS:"add_tasks",ADD_TABS:"add_tabs"}}}(),PendingForApprovalTeamsHandler=function(){var e={},t=function(e){var t=$("#"+e.listid);t.attr("pgno",1);var i;return e.successCallback=function(i,n){if(i===e.val&&((t=$("#"+e.listid)).html(""),e.populateCallback(n.content,e),(e=s(n,e)).bindEventsCallback(),e.addscroll)){var r=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID);ZCScroll.customScroll($("#"+e.scrlcontainer)),$Scroll.handleScroll($("#"+e.scrlcontainer),e,a,r)}},(i=a(e)).furtherreq||e.successCallback(i),!0},a=function(e){var t={nextToken:PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID).nextToken||"",successCallback:e.successCallback};return e=$.extend({},t,e),i(e)},s=function(e,t){var a=e.searchedlist.length;return t.totalsearchedlength=t.totalsearchedlength||0,t.totalsearchedlength+=a,t.furtherrequestmade=e.furtherreqmade,(a>=t.limit||t.allowScroll)&&(t.addscroll=!0),t},i=function(e){return e=$.extend({},{highlight:!0,limit:100},e),n(e.user_id,(function(t){var a=c(t,e);e.successCallback(e.val,a);$("#"+e.destid)}),e),{content:"",searchedlist:[],furtherreq:!0}},n=function(e,t,a){var s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID);($WC.Util.isEmpty(a.val)||"*"===a.val)&&s.pendingTeamsPopulated&&s.hasAllPendingTeams()?t(s.getFetchedPendingTeams()):r(e,t,a)},r=function(e,t,a){a=a||{};var s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),i=null!=a?"scrollup"==a.type:"",n=i||s.teamspopulated,r=a.val&&"*"!=a.val,c=!!r&&s.hasSearchQueryNeedsServerResponse(a.val),m=!r&&!s.teamspopulated,d=!0===a.forcefetchCall,u=s.isAlreadyFetching();if(!n&&(m||c)&&!u||d){var p={successCallBack:function(i){var n=i,l=n?n.teams:[];for(var c in l)s.updatePendingTeamsStorage(l[c]);a.val&&a.val;var m=n&&n.meta?n.meta.next_token:"";a.forcefetchCall;if(s.setIsFetchingInProgress(!1),a.fromSearch?(s.setNextTokenForSearchVal(m),$WC.Util.isEmpty(m)&&s.setSearchPopulated(!0),additionaloptions.SearchHasVal=!0,s.setSearchValue(a.val)):(s.setNextToken(m),$WC.Util.isEmpty(m)&&s.setPopulated(!0)),o(e,l,{}),a.fromSearch){s.storeSearchedTeams(l);var d=s.getSearchedPendingTeams()}else d=s.getFetchedPendingTeams();!r&&(s.pendingForApprovalCnt=d.length),t(d)},criteria:a},h=l(a,s);p.apiParams=h,s.setIsFetchingInProgress(!0),PendingForApprovalTeamsApiHandler.fetchPendingTeamsFromServer(p)}else{if(a.fromSearch&&s.searchpopulated)var g=s.getSearchedPendingTeams();else g=s.getFetchedPendingTeams();r||(i?s.pendingForApprovalCnt-=100:s.pendingForApprovalCnt+=100),t(g)}},l=function(e,t){var a={},s=!(!$WC.Util.isEmpty(e.val)&&"*"!=e.val),i=s?t.getNextToken():"scrolldown"==e.type?t.getNextTokenForSearchVal():void 0;return s||(a.search=e.val),i?a.next_token=i:(a.limit=e.limit,a.status="pending"),a},o=function(e,t,a){var s=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),i=(a=a||{}).SearchHasVal;i&&(s.lastSearchedQuery=s.getSearchValue());for(var n=(i?s.searchedPendingTeams:s.pendingTeamsList)||[],r=0,l=t.length;r<l;r++){var o=t[r];$WC.Util.isEmpty(o.team_id)||-1===n.indexOf(o.team_id)&&n.push(o.team_id)}n.length&&i?s.searchedPendingTeams=s.getSearchedPendingTeams(n):n.length&&s.storeAllFetchedPendingTeams(n)},c=function(e,t){var a=PendingForApprovalTeamsHandler.getPendingTeamsParam($zcg._ZUID),s=(t.html,t.highlight,t.limit,[]),i=[],n=[],r=t.val.toLowerCase();r=r||a.getSearchValue().toLowerCase();for(var l=e.length,o=0;o<l;o++){var c=-1,m=e[o],d=a.getPendingTeamObj(m),u=d.getTeamName().toLowerCase();(d||-1==t.ignorelist.indexOf(m))&&("*"===r?n.push([u,m]):0===(c=u.indexOf(r))?i.push([u,m]):-1!==c&&n.push([u,m]))}var p=$Util&&$Util.sort?$Util.sort:ConsoleUtil.sort,h=p(p(i,0),1,!0);h=h.concat(p(p(n,0),1,!0));var g={limit:t.limit,type:t.type,listid:t.isFromAdminPanel?t.scrlcontainer:t.listid},v="undefined"!=typeof $Scroll&&$Scroll.getElementRange?$Scroll.getElementRange(h.length,g):{minlimit:0,maxlimit:h.length};for(o=v.minlimit,l=v.maxlimit;o<l;o++){m=h[o][1];s.push(h[o][1])}return _sortedTeamsList=s,{content:t.isFromAdminPanel?Teams.getTeamsListViewHtml({isPendingTeam:!0,team_list:s,searchval:r}):PublicTeamsUIHandler.pendingTeamsCardHtmlListing(s,r),listid:t.listid,populateid:"teams",destid:t.destid,searchedlist:s,furtherreq:!1,appendindom:t.pageno>1}};return{populateDefaultPendingTeams:function(e){var a={val:e.searchVal,listid:e.listid,destid:e.destid,user_id:$zcg._ZUID,module_name:e.modulename,allowScroll:!0,scrlcontainer:e.scrlcontainer,limit:100,populateCallback:e.populateCallback,bindEventsCallback:e.bindEventsCallback,fromSearch:e.fromSearch?e.fromSearch:!$WC.Util.isEmpty(e.searchVal)&&"*"!=e.searchVal,isFromAdminPanel:e.isFromAdminPanel,domfinder:e.domfinder};t(a)},getPendingTeamsParam:function(t){return e[t]?e[t]:(e[t]=new PendingTeamslistObj(t),e[t])}}}(),PendingForApprovalTeamsApiHandler={fetchPendingTeamsFromServer:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s}=e;$ZCAjx.ajax({url:"/v2/teams",type:"GET",data:s,success:function(a){t(a,e)},error:function(e){a(e)}})},approveRejectNetworkPublicTeams:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s,team_id:i,isFromRhsListingOverlay:n}=e;$ZCAjx.ajax({url:"/api/v2/teams/"+i,type:"PUT",data:s,contentType:"application/json",success:function(a){t(a,e)},error:function(e){a(e)}})},approveRejectNetworkPublicMultipleTeams:function(e){let{successCallBack:t=$.noop,errorCallBack:a=$.noop,apiParams:s}=e;$ZCAjx.ajax({url:"/api/v2/teams",type:"PUT",data:s,contentType:"application/json",success:function(a){t(a,e)},error:function(e){a(e)}})}},PendingTeamslistObj=function(e){this.user_id=e,this.pendingTeamsList=[],this.pendingTeamsObjList=[],this.pendingTeamsCnt=0,this.teamspopulated=!1,this.nextToken="",this.searchValue="",this.searchedPendingTeams=[],this.searchTeamsNextToken="",this.currentPopulatedTeams=0,this.lastSearchedQuery=void 0};PendingTeamslistObj.prototype={reset:function(){this.searchValue="",this.currentPopulatedTeams=0},setNextTokenForSearchVal:function(e){this.searchTeamsNextToken=e},getNextTokenForSearchVal:function(){return this.searchTeamsNextToken},setNextToken:function(e){this.nextToken=e},getNextToken:function(){return this.nextToken},isAlreadyFetching:function(){return this.IsFetchingInProgress},setIsFetchingInProgress:function(e){this.IsFetchingInProgress=e},setSearchValue:function(e){this.searchValue=e},getSearchValue:function(){return this.searchValue},setTeamscount:function(e){this.teamscount=e},getPendingTeamscount:function(){return this.pendingTeamsList.length},getSearchedPendingTeams:function(e){var t=this.searchedPendingTeams;for(var a in e)-1==t.indexOf(e[a])&&t.push(e[a]);return t},destroyObj:function(){this.pendingTeamsList=[]},updateForceFetch:function(e){this.forcefetch=!!e},setPopulated:function(e){this.teamspopulated=e},hasSearchQueryNeedsServerResponse:function(e,t){var a,s;return"teams"==t&&(a=this.lastSearchedQuery?this.lastSearchedQuery.toLowerCase():void 0,s=this.getNextTokenForSearchVal()),!((e=e.toLowerCase()).startsWith(a)&&!s)},needNextSetTeamsDetails:function(){return this.currentPopulatedTeams+Teams.teamsFetchLimit>this.teamsList.length},update:function(e){this.user_id=e.user_id,this.pendingTeamsList=e.pendingTeamsList,this.pendingTeamsCnt=e.pendingTeamsCnt,this.teamspopulated=e.teamspopulated},removeFromPendingTeamsStorage:function(e){var t=this.pendingTeamsList.indexOf(e);-1!=t&&this.pendingTeamsList.splice(t,1)},updatePendingTeamsStorage:function(e){if(this.pendingTeamsObjList[e.team_id]){this.pendingTeamsObjList[e.team_id].update(e)}else{let t=new TeamsObj(e);this.pendingTeamsObjList[e.team_id]=t}},storeAllFetchedPendingTeams:function(e){e.forEach(e=>{-1===this.pendingTeamsList.indexOf(e)&&this.pendingTeamsList.push(e)})},getFetchedPendingTeams:function(){return this.pendingTeamsList},getPendingTeamObj:function(e){return this.pendingTeamsObjList[e]},clearPendingTeamsStorage:function(){this.pendingTeamsList=[],this.pendingTeamsObjList=[],this.pendingTeamsCnt=0,this.teamspopulated=!1,this.nextToken="",this.searchValue="",this.searchedPendingTeams=[],this.searchTeamsNextToken="",this.currentPopulatedTeams=0,this.lastSearchedQuery=void 0}};